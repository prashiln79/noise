(self.webpackChunknoise=self.webpackChunknoise||[]).push([[179],{2011:(pt,ke,j)=>{"use strict";j.d(ke,{Dh:()=>me,GT:()=>ae,cc:()=>V,hO:()=>O,on:()=>z,pX:()=>K,xv:()=>ce});var f=j(4650),de=j(9260),x=j(2122);pt=j.hmd(pt);const Y=["ngOnDestroy"],K=(W,Me,Ge,Ee={})=>new Proxy(W,{get:(Ie,Ae)=>Ge.runOutsideAngular(()=>{var ze;if(W[Ae])return!(null===(ze=Ee?.spy)||void 0===ze)&&ze.get&&Ee.spy.get(Ae,W[Ae]),W[Ae];if(Y.indexOf(Ae)>-1)return()=>{};const qe=Me.toPromise().then(Q=>{const Ce=Q&&Q[Ae];return"function"==typeof Ce?Ce.bind(Q):Ce&&Ce.then?Ce.then(We=>Ge.run(()=>We)):Ge.run(()=>Ce)});return new Proxy(()=>{},{get:(Q,Ce)=>qe[Ce],apply:(Q,Ce,We)=>qe.then(rt=>{var gt;const Xe=rt&&rt(...We);return!(null===(gt=Ee?.spy)||void 0===gt)&&gt.apply&&Ee.spy.apply(Ae,We,Xe),Xe})})})}),ae=(W,Me)=>{Me.forEach(Ge=>{Object.getOwnPropertyNames(Ge.prototype||Ge).forEach(Ee=>{Object.defineProperty(W.prototype,Ee,Object.getOwnPropertyDescriptor(Ge.prototype||Ge,Ee))})})};class re{constructor(Me){return Me}}const me=new f.OlP("angularfire2.app.options"),ce=new f.OlP("angularfire2.app.name");function z(W,Me,Ge){const Ie="object"==typeof Ge&&Ge||{};Ie.name=Ie.name||"string"==typeof Ge&&Ge||"[DEFAULT]";const ze=de.Z.apps.filter(qe=>qe&&qe.name===Ie.name)[0]||Me.runOutsideAngular(()=>de.Z.initializeApp(W,Ie));try{JSON.stringify(W)!==JSON.stringify(ze.options)&&J("error",`${ze.name} Firebase App already initialized with different options${pt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new re(ze)}const J=(W,...Me)=>{(0,f.X6Q)()&&typeof console<"u"&&console[W](...Me)},C={provide:re,useFactory:z,deps:[me,f.R0b,[new f.FiY,ce]]};let O=(()=>{class W{constructor(Ge){de.Z.registerVersion("angularfire",x.q4.full,"core"),de.Z.registerVersion("angularfire",x.q4.full,"app-compat"),de.Z.registerVersion("angular",f.q4F.full,Ge.toString())}static initializeApp(Ge,Ee){return{ngModule:W,providers:[{provide:me,useValue:Ge},{provide:ce,useValue:Ee}]}}}return W.\u0275fac=function(Ge){return new(Ge||W)(f.LFG(f.Lbi))},W.\u0275mod=f.oAB({type:W}),W.\u0275inj=f.cJS({providers:[C]}),W})();function V(W,Me,Ge,Ee,Ie){const[,Ae,ze]=globalThis.\u0275AngularfireInstanceCache.find(qe=>qe[0]===W)||[];if(Ae)return function $(W,Me){try{return W.toString()===Me.toString()}catch{return W===Me}}(Ie,ze)||(ee("error",`${Me} was already initialized on the ${Ge} Firebase App with different settings.${ue?" You may need to reload as Firebase is not HMR aware.":""}`),ee("warn",{is:Ie,was:ze})),Ae;{const qe=Ee();return globalThis.\u0275AngularfireInstanceCache.push([W,qe,Ie]),qe}}const ue=!!pt.hot,ee=(W,...Me)=>{(0,f.X6Q)()&&typeof console<"u"&&console[W](...Me)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(pt,ke,j)=>{"use strict";j.d(ke,{q4:()=>is,iC:()=>Qn,fc:()=>mo,HU:()=>cr,vb:()=>cn,JM:()=>ut});var f=j(4650),de=j(259),x=j(5861),Y=j(9681),K=j(2090),ae=j(4859),re=j(1877),me=j(8766);const ce="@firebase/installations",z="0.6.4",C=`w:${z}`,O="FIS_v2",Me=new K.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ge(S){return S instanceof K.ZR&&S.code.includes("request-failed")}function Ee({projectId:S}){return`https://firebaseinstallations.googleapis.com/v1/projects/${S}/installations`}function Ie(S){return{token:S.token,requestStatus:2,expiresIn:rt(S.expiresIn),creationTime:Date.now()}}function Ae(S,M){return ze.apply(this,arguments)}function ze(){return(ze=(0,x.Z)(function*(S,M){const G=(yield M.json()).error;return Me.create("request-failed",{requestName:S,serverCode:G.code,serverMessage:G.message,serverStatus:G.status})})).apply(this,arguments)}function qe({apiKey:S}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S})}function Q(S,{refreshToken:M}){const N=qe(S);return N.append("Authorization",function gt(S){return`${O} ${S}`}(M)),N}function Ce(S){return We.apply(this,arguments)}function We(){return(We=(0,x.Z)(function*(S){const M=yield S();return M.status>=500&&M.status<600?S():M})).apply(this,arguments)}function rt(S){return Number(S.replace("s","000"))}function Xe(S,M){return _e.apply(this,arguments)}function _e(){return(_e=(0,x.Z)(function*({appConfig:S,heartbeatServiceProvider:M},{fid:N}){const G=Ee(S),le=qe(S),pe=M.getImmediate({optional:!0});if(pe){const At=yield pe.getHeartbeatsHeader();At&&le.append("x-firebase-client",At)}const st={method:"POST",headers:le,body:JSON.stringify({fid:N,authVersion:O,appId:S.appId,sdkVersion:C})},ht=yield Ce(()=>fetch(G,st));if(ht.ok){const At=yield ht.json();return{fid:At.fid||N,registrationStatus:2,refreshToken:At.refreshToken,authToken:Ie(At.authToken)}}throw yield Ae("Create Installation",ht)})).apply(this,arguments)}function De(S){return new Promise(M=>{setTimeout(M,S)})}const Fe=/^[cdef][\w-]{21}$/;function Oe(){try{const S=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(S),S[0]=112+S[0]%16;const N=function mt(S){return function xe(S){return btoa(String.fromCharCode(...S)).replace(/\+/g,"-").replace(/\//g,"_")}(S).substr(0,22)}(S);return Fe.test(N)?N:""}catch{return""}}function zt(S){return`${S.appName}!${S.appId}`}const gn=new Map;function ot(S,M){const N=zt(S);St(N,M),function Dr(S,M){const N=function Ln(){return!Nn&&"BroadcastChannel"in self&&(Nn=new BroadcastChannel("[Firebase] FID Change"),Nn.onmessage=S=>{St(S.data.key,S.data.fid)}),Nn}();N&&N.postMessage({key:S,fid:M}),function qn(){0===gn.size&&Nn&&(Nn.close(),Nn=null)}()}(N,M)}function St(S,M){const N=gn.get(S);if(N)for(const G of N)G(M)}let Nn=null;const Ei="firebase-installations-store";let ki=null;function ha(){return ki||(ki=(0,me.X3)("firebase-installations-database",1,{upgrade:(S,M)=>{0===M&&S.createObjectStore(Ei)}})),ki}function it(S,M){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,x.Z)(function*(S,M){const N=zt(S),le=(yield ha()).transaction(Ei,"readwrite"),pe=le.objectStore(Ei),Ve=yield pe.get(N);return yield pe.put(M,N),yield le.done,(!Ve||Ve.fid!==M.fid)&&ot(S,M.fid),M})).apply(this,arguments)}function ps(S){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,x.Z)(function*(S){const M=zt(S),G=(yield ha()).transaction(Ei,"readwrite");yield G.objectStore(Ei).delete(M),yield G.done})).apply(this,arguments)}function Oi(S,M){return gs.apply(this,arguments)}function gs(){return(gs=(0,x.Z)(function*(S,M){const N=zt(S),le=(yield ha()).transaction(Ei,"readwrite"),pe=le.objectStore(Ei),Ve=yield pe.get(N),st=M(Ve);return void 0===st?yield pe.delete(N):yield pe.put(st,N),yield le.done,st&&(!Ve||Ve.fid!==st.fid)&&ot(S,st.fid),st})).apply(this,arguments)}function Kn(S){return sr.apply(this,arguments)}function sr(){return(sr=(0,x.Z)(function*(S){let M;const N=yield Oi(S.appConfig,G=>{const le=kn(G),pe=It(S,le);return M=pe.registrationPromise,pe.installationEntry});return""===N.fid?{installationEntry:yield M}:{installationEntry:N,registrationPromise:M}})).apply(this,arguments)}function kn(S){return Ht(S||{fid:Oe(),registrationStatus:0})}function It(S,M){if(0===M.registrationStatus){if(!navigator.onLine)return{installationEntry:M,registrationPromise:Promise.reject(Me.create("app-offline"))};const N={fid:M.fid,registrationStatus:1,registrationTime:Date.now()},G=function bt(S,M){return Cn.apply(this,arguments)}(S,N);return{installationEntry:N,registrationPromise:G}}return 1===M.registrationStatus?{installationEntry:M,registrationPromise:or(S)}:{installationEntry:M}}function Cn(){return(Cn=(0,x.Z)(function*(S,M){try{const N=yield Xe(S,M);return it(S.appConfig,N)}catch(N){throw Ge(N)&&409===N.customData.serverCode?yield ps(S.appConfig):yield it(S.appConfig,{fid:M.fid,registrationStatus:0}),N}})).apply(this,arguments)}function or(S){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,x.Z)(function*(S){let M=yield Ar(S.appConfig);for(;1===M.registrationStatus;)yield De(100),M=yield Ar(S.appConfig);if(0===M.registrationStatus){const{installationEntry:N,registrationPromise:G}=yield Kn(S);return G||N}return M})).apply(this,arguments)}function Ar(S){return Oi(S,M=>{if(!M)throw Me.create("installation-not-found");return Ht(M)})}function Ht(S){return function As(S){return 1===S.registrationStatus&&S.registrationTime+1e4<Date.now()}(S)?{fid:S.fid,registrationStatus:0}:S}function dn(S,M){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,x.Z)(function*({appConfig:S,heartbeatServiceProvider:M},N){const G=hn(S,N),le=Q(S,N),pe=M.getImmediate({optional:!0});if(pe){const At=yield pe.getHeartbeatsHeader();At&&le.append("x-firebase-client",At)}const st={method:"POST",headers:le,body:JSON.stringify({installation:{sdkVersion:C,appId:S.appId}})},ht=yield Ce(()=>fetch(G,st));if(ht.ok)return Ie(yield ht.json());throw yield Ae("Generate Auth Token",ht)})).apply(this,arguments)}function hn(S,{fid:M}){return`${Ee(S)}/${M}/authTokens:generate`}function Mr(S){return ci.apply(this,arguments)}function ci(){return(ci=(0,x.Z)(function*(S,M=!1){let N;const G=yield Oi(S.appConfig,pe=>{if(!Yt(pe))throw Me.create("not-registered");const Ve=pe.authToken;if(!M&&Xr(Ve))return pe;if(1===Ve.requestStatus)return N=ct(S,M),pe;{if(!navigator.onLine)throw Me.create("app-offline");const st=X(pe);return N=Vt(S,st),st}});return N?yield N:G.authToken})).apply(this,arguments)}function ct(S,M){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,x.Z)(function*(S,M){let N=yield lt(S.appConfig);for(;1===N.authToken.requestStatus;)yield De(100),N=yield lt(S.appConfig);const G=N.authToken;return 0===G.requestStatus?Mr(S,M):G})).apply(this,arguments)}function lt(S){return Oi(S,M=>{if(!Yt(M))throw Me.create("not-registered");return function oe(S){return 1===S.requestStatus&&S.requestTime+1e4<Date.now()}(M.authToken)?Object.assign(Object.assign({},M),{authToken:{requestStatus:0}}):M})}function Vt(S,M){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,x.Z)(function*(S,M){try{const N=yield dn(S,M),G=Object.assign(Object.assign({},M),{authToken:N});return yield it(S.appConfig,G),N}catch(N){if(!Ge(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const G=Object.assign(Object.assign({},M),{authToken:{requestStatus:0}});yield it(S.appConfig,G)}else yield ps(S.appConfig);throw N}})).apply(this,arguments)}function Yt(S){return void 0!==S&&2===S.registrationStatus}function Xr(S){return 2===S.requestStatus&&!function te(S){const M=Date.now();return M<S.creationTime||S.creationTime+S.expiresIn<M+36e5}(S)}function X(S){const M={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},S),{authToken:M})}function he(){return(he=(0,x.Z)(function*(S){const M=S,{installationEntry:N,registrationPromise:G}=yield Kn(M);return G?G.catch(console.error):Mr(M).catch(console.error),N.fid})).apply(this,arguments)}function Nt(){return(Nt=(0,x.Z)(function*(S,M=!1){const N=S;return yield en(N),(yield Mr(N,M)).token})).apply(this,arguments)}function en(S){return fn.apply(this,arguments)}function fn(){return(fn=(0,x.Z)(function*(S){const{registrationPromise:M}=yield Kn(S);M&&(yield M)})).apply(this,arguments)}function so(S){return Me.create("missing-app-config-values",{valueName:S})}const fa="installations",Vn=S=>{const M=S.getProvider("app").getImmediate(),N=function Fn(S){if(!S||!S.options)throw so("App Configuration");if(!S.name)throw so("App Name");const M=["projectId","apiKey","appId"];for(const N of M)if(!S.options[N])throw so(N);return{appName:S.name,projectId:S.options.projectId,apiKey:S.options.apiKey,appId:S.options.appId}}(M);return{app:M,appConfig:N,heartbeatServiceProvider:(0,Y._getProvider)(M,"heartbeat"),_delete:()=>Promise.resolve()}},Mo=S=>{const M=S.getProvider("app").getImmediate(),N=(0,Y._getProvider)(M,fa).getImmediate();return{getId:()=>function ve(S){return he.apply(this,arguments)}(N),getToken:le=>function Je(S){return Nt.apply(this,arguments)}(N,le)}};(function kl(){(0,Y._registerComponent)(new ae.wA(fa,Vn,"PUBLIC")),(0,Y._registerComponent)(new ae.wA("installations-internal",Mo,"PRIVATE"))})(),(0,Y.registerVersion)(ce,z),(0,Y.registerVersion)(ce,z,"esm2017");const ms="@firebase/remote-config",lr=new K.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Rd{constructor(M,N,G,le){this.client=M,this.storage=N,this.storageCache=G,this.logger=le}isCachedDataFresh(M,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const G=Date.now()-N,le=G<=M;return this.logger.debug(`Config fetch cache check. Cache age millis: ${G}. Cache max age millis (minimumFetchIntervalMillis setting): ${M}. Is cache hit: ${le}.`),le}fetch(M){var N=this;return(0,x.Z)(function*(){const[G,le]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(le&&N.isCachedDataFresh(M.cacheMaxAgeMillis,G))return le;M.eTag=le&&le.eTag;const pe=yield N.client.fetch(M),Ve=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===pe.status&&Ve.push(N.storage.setLastSuccessfulFetchResponse(pe)),yield Promise.all(Ve),pe})()}}function Uu(S=navigator){return S.languages&&S.languages[0]||S.language}class ju{constructor(M,N,G,le,pe,Ve){this.firebaseInstallations=M,this.sdkVersion=N,this.namespace=G,this.projectId=le,this.apiKey=pe,this.appId=Ve}fetch(M){var N=this;return(0,x.Z)(function*(){const[G,le]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),Ve=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,st={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":M.eTag||"*"},ht={sdk_version:N.sdkVersion,app_instance_id:G,app_instance_id_token:le,app_id:N.appId,language_code:Uu()},At={method:"POST",headers:st,body:JSON.stringify(ht)},$t=fetch(Ve,At),wt=new Promise((kr,Dn)=>{M.signal.addEventListener(()=>{const cl=new Error("The operation was aborted.");cl.name="AbortError",Dn(cl)})});let _r;try{yield Promise.race([$t,wt]),_r=yield $t}catch(kr){let Dn="fetch-client-network";throw"AbortError"===kr?.name&&(Dn="fetch-timeout"),lr.create(Dn,{originalErrorMessage:kr?.message})}let yr=_r.status;const ti=_r.headers.get("ETag")||void 0;let Bi,zr;if(200===_r.status){let kr;try{kr=yield _r.json()}catch(Dn){throw lr.create("fetch-client-parse",{originalErrorMessage:Dn?.message})}Bi=kr.entries,zr=kr.state}if("INSTANCE_STATE_UNSPECIFIED"===zr?yr=500:"NO_CHANGE"===zr?yr=304:("NO_TEMPLATE"===zr||"EMPTY_CONFIG"===zr)&&(Bi={}),304!==yr&&200!==yr)throw lr.create("fetch-status",{httpStatus:yr});return{status:yr,eTag:ti,config:Bi}})()}}class xm{constructor(M,N){this.client=M,this.storage=N}fetch(M){var N=this;return(0,x.Z)(function*(){const G=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(M,G)})()}attemptFetch(M,{throttleEndTimeMillis:N,backoffCount:G}){var le=this;return(0,x.Z)(function*(){yield function gr(S,M){return new Promise((N,G)=>{const le=Math.max(M-Date.now(),0),pe=setTimeout(N,le);S.addEventListener(()=>{clearTimeout(pe),G(lr.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}(M.signal,N);try{const pe=yield le.client.fetch(M);return yield le.storage.deleteThrottleMetadata(),pe}catch(pe){if(!function kd(S){if(!(S instanceof K.ZR&&S.customData))return!1;const M=Number(S.customData.httpStatus);return 429===M||500===M||503===M||504===M}(pe))throw pe;const Ve={throttleEndTimeMillis:Date.now()+(0,K.$s)(G),backoffCount:G+1};return yield le.storage.setThrottleMetadata(Ve),le.attemptFetch(M,Ve)}})()}}class Od{constructor(M,N,G,le,pe){this.app=M,this._client=N,this._storageCache=G,this._storage=le,this._logger=pe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Hu(S,M){const N=S.target.error||void 0;return lr.create(M,{originalErrorMessage:N&&N?.message})}const uo="app_namespace_store";class Pm{constructor(M,N,G,le=function Om(){return new Promise((S,M)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=G=>{M(Hu(G,"storage-open"))},N.onsuccess=G=>{S(G.target.result)},N.onupgradeneeded=G=>{0===G.oldVersion&&G.target.result.createObjectStore(uo,{keyPath:"compositeKey"})}}catch(N){M(lr.create("storage-open",{originalErrorMessage:N?.message}))}})}()){this.appId=M,this.appName=N,this.namespace=G,this.openDbPromise=le}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(M){return this.set("last_fetch_status",M)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(M){return this.set("last_successful_fetch_timestamp_millis",M)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(M){return this.set("last_successful_fetch_response",M)}getActiveConfig(){return this.get("active_config")}setActiveConfig(M){return this.set("active_config",M)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(M){return this.set("active_config_etag",M)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(M){return this.set("throttle_metadata",M)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(M){var N=this;return(0,x.Z)(function*(){const G=yield N.openDbPromise;return new Promise((le,pe)=>{const st=G.transaction([uo],"readonly").objectStore(uo),ht=N.createCompositeKey(M);try{const At=st.get(ht);At.onerror=$t=>{pe(Hu($t,"storage-get"))},At.onsuccess=$t=>{const wt=$t.target.result;le(wt?wt.value:void 0)}}catch(At){pe(lr.create("storage-get",{originalErrorMessage:At?.message}))}})})()}set(M,N){var G=this;return(0,x.Z)(function*(){const le=yield G.openDbPromise;return new Promise((pe,Ve)=>{const ht=le.transaction([uo],"readwrite").objectStore(uo),At=G.createCompositeKey(M);try{const $t=ht.put({compositeKey:At,value:N});$t.onerror=wt=>{Ve(Hu(wt,"storage-set"))},$t.onsuccess=()=>{pe()}}catch($t){Ve(lr.create("storage-set",{originalErrorMessage:$t?.message}))}})})()}delete(M){var N=this;return(0,x.Z)(function*(){const G=yield N.openDbPromise;return new Promise((le,pe)=>{const st=G.transaction([uo],"readwrite").objectStore(uo),ht=N.createCompositeKey(M);try{const At=st.delete(ht);At.onerror=$t=>{pe(Hu($t,"storage-delete"))},At.onsuccess=()=>{le()}}catch(At){pe(lr.create("storage-delete",{originalErrorMessage:At?.message}))}})})()}createCompositeKey(M){return[this.appId,this.appName,this.namespace,M].join()}}class Nd{constructor(M){this.storage=M}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var M=this;return(0,x.Z)(function*(){const N=M.storage.getLastFetchStatus(),G=M.storage.getLastSuccessfulFetchTimestampMillis(),le=M.storage.getActiveConfig(),pe=yield N;pe&&(M.lastFetchStatus=pe);const Ve=yield G;Ve&&(M.lastSuccessfulFetchTimestampMillis=Ve);const st=yield le;st&&(M.activeConfig=st)})()}setLastFetchStatus(M){return this.lastFetchStatus=M,this.storage.setLastFetchStatus(M)}setLastSuccessfulFetchTimestampMillis(M){return this.lastSuccessfulFetchTimestampMillis=M,this.storage.setLastSuccessfulFetchTimestampMillis(M)}setActiveConfig(M){return this.activeConfig=M,this.storage.setActiveConfig(M)}}function Nl(){return $f.apply(this,arguments)}function $f(){return($f=(0,x.Z)(function*(){if(!(0,K.hl)())return!1;try{return yield(0,K.eu)()}catch{return!1}})).apply(this,arguments)}!function co(){(0,Y._registerComponent)(new ae.wA("remote-config",function S(M,{instanceIdentifier:N}){const G=M.getProvider("app").getImmediate(),le=M.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw lr.create("registration-window");if(!(0,K.hl)())throw lr.create("indexed-db-unavailable");const{projectId:pe,apiKey:Ve,appId:st}=G.options;if(!pe)throw lr.create("registration-project-id");if(!Ve)throw lr.create("registration-api-key");if(!st)throw lr.create("registration-app-id");const ht=new Pm(st,G.name,N=N||"firebase"),At=new Nd(ht),$t=new re.Yd(ms);$t.logLevel=re.in.ERROR;const wt=new ju(le,Y.SDK_VERSION,N,pe,Ve,st),_r=new xm(wt,ht),yr=new Rd(_r,ht,At,$t),ti=new Od(G,yr,At,ht,$t);return function Ur(S){const M=(0,K.m9)(S);M._initializePromise||(M._initializePromise=M._storageCache.loadFromStorage().then(()=>{M._isInitializationComplete=!0}))}(ti),ti},"PUBLIC").setMultipleInstances(!0)),(0,Y.registerVersion)(ms,"0.4.4"),(0,Y.registerVersion)(ms,"0.4.4","esm2017")}();const _s="/firebase-messaging-sw.js",xs="/firebase-cloud-messaging-push-scope",Rs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Za="google.c.a.c_id",Fl="google.c.a.c_l",$u="google.c.a.ts",Gf="google.c.a.e";var ks=(()=>{return(S=ks||(ks={})).PUSH_RECEIVED="push-received",S.NOTIFICATION_CLICKED="notification-clicked",ks;var S})();function Pi(S){const M=new Uint8Array(S);return btoa(String.fromCharCode(...M)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ci(S){const N=(S+"=".repeat((4-S.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),G=atob(N),le=new Uint8Array(G.length);for(let pe=0;pe<G.length;++pe)le[pe]=G.charCodeAt(pe);return le}const ga="fcm_token_details_db",jr="fcm_token_object_Store";function zf(S){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,x.Z)(function*(S){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(pe=>pe.name).includes(ga))return null;let M=null;return(yield(0,me.X3)(ga,5,{upgrade:(G=(0,x.Z)(function*(le,pe,Ve,st){var ht;if(pe<2||!le.objectStoreNames.contains(jr))return;const At=st.objectStore(jr),$t=yield At.index("fcmSenderId").get(S);if(yield At.clear(),$t)if(2===pe){const wt=$t;if(!wt.auth||!wt.p256dh||!wt.endpoint)return;M={token:wt.fcmToken,createTime:null!==(ht=wt.createTime)&&void 0!==ht?ht:Date.now(),subscriptionOptions:{auth:wt.auth,p256dh:wt.p256dh,endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:"string"==typeof wt.vapidKey?wt.vapidKey:Pi(wt.vapidKey)}}}else if(3===pe){const wt=$t;M={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:Pi(wt.auth),p256dh:Pi(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:Pi(wt.vapidKey)}}}else if(4===pe){const wt=$t;M={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:Pi(wt.auth),p256dh:Pi(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:Pi(wt.vapidKey)}}}}),function(pe,Ve,st,ht){return G.apply(this,arguments)})})).close(),yield(0,me.Lj)(ga),yield(0,me.Lj)("fcm_vapid_details_db"),yield(0,me.Lj)("undefined"),Zn(M)?M:null;var G}),Wf.apply(this,arguments)}function Zn(S){if(!S||!S.subscriptionOptions)return!1;const{subscriptionOptions:M}=S;return"number"==typeof S.createTime&&S.createTime>0&&"string"==typeof S.token&&S.token.length>0&&"string"==typeof M.auth&&M.auth.length>0&&"string"==typeof M.p256dh&&M.p256dh.length>0&&"string"==typeof M.endpoint&&M.endpoint.length>0&&"string"==typeof M.swScope&&M.swScope.length>0&&"string"==typeof M.vapidKey&&M.vapidKey.length>0}const Ni="firebase-messaging-store";let ei=null;function Vl(){return ei||(ei=(0,me.X3)("firebase-messaging-database",1,{upgrade:(S,M)=>{0===M&&S.createObjectStore(Ni)}})),ei}function ma(S){return Os.apply(this,arguments)}function Os(){return(Os=(0,x.Z)(function*(S){const M=ts(S),G=yield(yield Vl()).transaction(Ni).objectStore(Ni).get(M);if(G)return G;{const le=yield zf(S.appConfig.senderId);if(le)return yield er(S,le),le}})).apply(this,arguments)}function er(S,M){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,x.Z)(function*(S,M){const N=ts(S),le=(yield Vl()).transaction(Ni,"readwrite");return yield le.objectStore(Ni).put(M,N),yield le.done,M})).apply(this,arguments)}function Ya(S){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,x.Z)(function*(S){const M=ts(S),G=(yield Vl()).transaction(Ni,"readwrite");yield G.objectStore(Ni).delete(M),yield G.done})).apply(this,arguments)}function ts({appConfig:S}){return S.appId}const Gn=new K.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Pt(S,M){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,x.Z)(function*(S,M){const N=yield qu(S),G=Ne(M),le={method:"POST",headers:N,body:JSON.stringify(G)};let pe;try{pe=yield(yield fetch(_a(S.appConfig),le)).json()}catch(Ve){throw Gn.create("token-subscribe-failed",{errorInfo:Ve?.toString()})}if(pe.error)throw Gn.create("token-subscribe-failed",{errorInfo:pe.error.message});if(!pe.token)throw Gn.create("token-subscribe-no-token");return pe.token})).apply(this,arguments)}function Vd(S,M){return zu.apply(this,arguments)}function zu(){return(zu=(0,x.Z)(function*(S,M){const N=yield qu(S),G=Ne(M.subscriptionOptions),le={method:"PATCH",headers:N,body:JSON.stringify(G)};let pe;try{pe=yield(yield fetch(`${_a(S.appConfig)}/${M.token}`,le)).json()}catch(Ve){throw Gn.create("token-update-failed",{errorInfo:Ve?.toString()})}if(pe.error)throw Gn.create("token-update-failed",{errorInfo:pe.error.message});if(!pe.token)throw Gn.create("token-update-no-token");return pe.token})).apply(this,arguments)}function Ul(S,M){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,x.Z)(function*(S,M){const G={method:"DELETE",headers:yield qu(S)};try{const pe=yield(yield fetch(`${_a(S.appConfig)}/${M}`,G)).json();if(pe.error)throw Gn.create("token-unsubscribe-failed",{errorInfo:pe.error.message})}catch(le){throw Gn.create("token-unsubscribe-failed",{errorInfo:le?.toString()})}})).apply(this,arguments)}function _a({projectId:S}){return`https://fcmregistrations.googleapis.com/v1/projects/${S}/registrations`}function qu(S){return jl.apply(this,arguments)}function jl(){return(jl=(0,x.Z)(function*({appConfig:S,installations:M}){const N=yield M.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function Ne({p256dh:S,auth:M,endpoint:N,vapidKey:G}){const le={web:{endpoint:N,auth:M,p256dh:S}};return G!==Rs&&(le.web.applicationPubKey=G),le}const tn=6048e5;function Hl(S){return Po.apply(this,arguments)}function Po(){return(Po=(0,x.Z)(function*(S){const M=yield Kf(S.swRegistration,S.vapidKey),N={vapidKey:S.vapidKey,swScope:S.swRegistration.scope,endpoint:M.endpoint,auth:Pi(M.getKey("auth")),p256dh:Pi(M.getKey("p256dh"))},G=yield ma(S.firebaseDependencies);if(G){if(zv(G.subscriptionOptions,N))return Date.now()>=G.createTime+tn?Ja(S,{token:G.token,createTime:Date.now(),subscriptionOptions:N}):G.token;try{yield Ul(S.firebaseDependencies,G.token)}catch(le){console.warn(le)}return $l(S.firebaseDependencies,N)}return $l(S.firebaseDependencies,N)})).apply(this,arguments)}function ur(S){return ya.apply(this,arguments)}function ya(){return(ya=(0,x.Z)(function*(S){const M=yield ma(S.firebaseDependencies);M&&(yield Ul(S.firebaseDependencies,M.token),yield Ya(S.firebaseDependencies));const N=yield S.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function Ja(S,M){return hi.apply(this,arguments)}function hi(){return(hi=(0,x.Z)(function*(S,M){try{const N=yield Vd(S.firebaseDependencies,M),G=Object.assign(Object.assign({},M),{token:N,createTime:Date.now()});return yield er(S.firebaseDependencies,G),N}catch(N){throw yield ur(S),N}})).apply(this,arguments)}function $l(S,M){return va.apply(this,arguments)}function va(){return(va=(0,x.Z)(function*(S,M){const G={token:yield Pt(S,M),createTime:Date.now(),subscriptionOptions:M};return yield er(S,G),G.token})).apply(this,arguments)}function Kf(S,M){return On.apply(this,arguments)}function On(){return(On=(0,x.Z)(function*(S,M){return(yield S.pushManager.getSubscription())||S.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ci(M)})})).apply(this,arguments)}function zv(S,M){return M.vapidKey===S.vapidKey&&M.endpoint===S.endpoint&&M.auth===S.auth&&M.p256dh===S.p256dh}function Gl(S){const M={from:S.from,collapseKey:S.collapse_key,messageId:S.fcmMessageId};return function fi(S,M){if(!M.notification)return;S.notification={};const N=M.notification.title;N&&(S.notification.title=N);const G=M.notification.body;G&&(S.notification.body=G);const le=M.notification.image;le&&(S.notification.image=le);const pe=M.notification.icon;pe&&(S.notification.icon=pe)}(M,S),function ys(S,M){!M.data||(S.data=M.data)}(M,S),function Zf(S,M){var N,G,le,pe,Ve;if(!(M.fcmOptions||null!==(N=M.notification)&&void 0!==N&&N.click_action))return;S.fcmOptions={};const st=null!==(le=null===(G=M.fcmOptions)||void 0===G?void 0:G.link)&&void 0!==le?le:null===(pe=M.notification)||void 0===pe?void 0:pe.click_action;st&&(S.fcmOptions.link=st);const ht=null===(Ve=M.fcmOptions)||void 0===Ve?void 0:Ve.analytics_label;ht&&(S.fcmOptions.analyticsLabel=ht)}(M,S),M}function el(S){return"object"==typeof S&&!!S&&Za in S}function Fi(S,M){const N=[];for(let G=0;G<S.length;G++)N.push(S.charAt(G)),G<M.length&&N.push(M.charAt(G));return N.join("")}function Ku(S){return Gn.create("missing-app-config-values",{valueName:S})}Fi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Fi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Bd{constructor(M,N,G){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const le=function Nm(S){if(!S||!S.options)throw Ku("App Configuration Object");if(!S.name)throw Ku("App Name");const M=["projectId","apiKey","appId","messagingSenderId"],{options:N}=S;for(const G of M)if(!N[G])throw Ku(G);return{appName:S.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(M);this.firebaseDependencies={app:M,appConfig:le,installations:N,analyticsProvider:G}}_delete(){return Promise.resolve()}}function Zu(S){return No.apply(this,arguments)}function No(){return(No=(0,x.Z)(function*(S){try{S.swRegistration=yield navigator.serviceWorker.register(_s,{scope:xs}),S.swRegistration.update().catch(()=>{})}catch(M){throw Gn.create("failed-service-worker-registration",{browserErrorMessage:M?.message})}})).apply(this,arguments)}function Yu(S,M){return ho.apply(this,arguments)}function ho(){return(ho=(0,x.Z)(function*(S,M){if(!M&&!S.swRegistration&&(yield Zu(S)),M||!S.swRegistration){if(!(M instanceof ServiceWorkerRegistration))throw Gn.create("invalid-sw-registration");S.swRegistration=M}})).apply(this,arguments)}function Fo(S,M){return zl.apply(this,arguments)}function zl(){return(zl=(0,x.Z)(function*(S,M){M?S.vapidKey=M:S.vapidKey||(S.vapidKey=Rs)})).apply(this,arguments)}function fo(){return(fo=(0,x.Z)(function*(S,M){if(!navigator)throw Gn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Gn.create("permission-blocked");return yield Fo(S,M?.vapidKey),yield Yu(S,M?.serviceWorkerRegistration),Hl(S)})).apply(this,arguments)}function Qu(S,M,N){return tl.apply(this,arguments)}function tl(){return(tl=(0,x.Z)(function*(S,M,N){const G=Yf(M);(yield S.firebaseDependencies.analyticsProvider.get()).logEvent(G,{message_id:N[Za],message_name:N[Fl],message_time:N[$u],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Yf(S){switch(S){case ks.NOTIFICATION_CLICKED:return"notification_open";case ks.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function wa(){return(wa=(0,x.Z)(function*(S,M){const N=M.data;if(!N.isFirebaseMessaging)return;S.onMessageHandler&&N.messageType===ks.PUSH_RECEIVED&&("function"==typeof S.onMessageHandler?S.onMessageHandler(Gl(N)):S.onMessageHandler.next(Gl(N)));const G=N.data;el(G)&&"1"===G[Gf]&&(yield Qu(S,N.messageType,G))})).apply(this,arguments)}const Qf="@firebase/messaging",Hr=S=>{const M=new Bd(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),S.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function Wl(S,M){return wa.apply(this,arguments)}(M,N)),M},Lo=S=>{const M=S.getProvider("messaging").getImmediate();return{getToken:G=>function Ud(S,M){return fo.apply(this,arguments)}(M,G)}};function Hd(){return $d.apply(this,arguments)}function $d(){return($d=(0,x.Z)(function*(){try{yield(0,K.eu)()}catch{return!1}return typeof window<"u"&&(0,K.hl)()&&(0,K.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function In(){(0,Y._registerComponent)(new ae.wA("messaging",Hr,"PUBLIC")),(0,Y._registerComponent)(new ae.wA("messaging-internal",Lo,"PRIVATE")),(0,Y.registerVersion)(Qf,"0.12.4"),(0,Y.registerVersion)(Qf,"0.12.4","esm2017")}();const Ju="analytics",Wv="firebase_id",zd="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",po="https://www.googletagmanager.com/gtag/js",Bn=new re.Yd("@firebase/analytics"),Ii=new K.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Jf(S){if(!S.startsWith(po)){const M=Ii.create("invalid-gtag-resource",{gtagURL:S});return Bn.warn(M.message),""}return S}function qd(S){return Promise.all(S.map(M=>M.catch(N=>N)))}function Kl(S,M){const N=function ql(S,M){let N;return window.trustedTypes&&(N=window.trustedTypes.createPolicy(S,M)),N}("firebase-js-sdk-policy",{createScriptURL:Jf}),G=document.createElement("script"),le=`${po}?l=${S}&id=${M}`;G.src=N?N?.createScriptURL(le):le,G.async=!0,document.head.appendChild(G)}function Zl(S,M,N,G,le,pe){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,x.Z)(function*(S,M,N,G,le,pe){const Ve=G[le];try{if(Ve)yield M[Ve];else{const ht=(yield qd(N)).find(At=>At.measurementId===le);ht&&(yield M[ht.appId])}}catch(st){Bn.error(st)}S("config",le,pe)})).apply(this,arguments)}function nl(S,M,N,G,le){return rl.apply(this,arguments)}function rl(){return(rl=(0,x.Z)(function*(S,M,N,G,le){try{let pe=[];if(le&&le.send_to){let Ve=le.send_to;Array.isArray(Ve)||(Ve=[Ve]);const st=yield qd(N);for(const ht of Ve){const At=st.find(wt=>wt.measurementId===ht),$t=At&&M[At.appId];if(!$t){pe=[];break}pe.push($t)}}0===pe.length&&(pe=Object.values(M)),yield Promise.all(pe),S("event",G,le||{})}catch(pe){Bn.error(pe)}})).apply(this,arguments)}function Ps(S){const M=window.document.getElementsByTagName("script");for(const N of Object.values(M))if(N.src&&N.src.includes(po)&&N.src.includes(S))return N;return null}const pi=new class Um{constructor(M={},N=1e3){this.throttleMetadata=M,this.intervalMillis=N}getThrottleMetadata(M){return this.throttleMetadata[M]}setThrottleMetadata(M,N){this.throttleMetadata[M]=N}deleteThrottleMetadata(M){delete this.throttleMetadata[M]}};function tc(S){return new Headers({Accept:"application/json","x-goog-api-key":S})}function nc(S){return mr.apply(this,arguments)}function mr(){return(mr=(0,x.Z)(function*(S){var M;const{appId:N,apiKey:G}=S,le={method:"GET",headers:tc(G)},pe=zd.replace("{app-id}",N),Ve=yield fetch(pe,le);if(200!==Ve.status&&304!==Ve.status){let st="";try{const ht=yield Ve.json();null!==(M=ht.error)&&void 0!==M&&M.message&&(st=ht.error.message)}catch{}throw Ii.create("config-fetch-failed",{httpStatus:Ve.status,responseMessage:st})}return Ve.json()})).apply(this,arguments)}function Kd(S){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,x.Z)(function*(S,M=pi,N){const{appId:G,apiKey:le,measurementId:pe}=S.options;if(!G)throw Ii.create("no-app-id");if(!le){if(pe)return{measurementId:pe,appId:G};throw Ii.create("no-api-key")}const Ve=M.getThrottleMetadata(G)||{backoffCount:0,throttleEndTimeMillis:Date.now()},st=new Xl;return setTimeout((0,x.Z)(function*(){st.abort()}),void 0!==N?N:6e4),Yl({appId:G,apiKey:le,measurementId:pe},Ve,st,M)})).apply(this,arguments)}function Yl(S,M,N){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,x.Z)(function*(S,{throttleEndTimeMillis:M,backoffCount:N},G,le=pi){var pe;const{appId:Ve,measurementId:st}=S;try{yield Ql(G,M)}catch(ht){if(st)return Bn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${st} provided in the "measurementId" field in the local Firebase config. [${ht?.message}]`),{appId:Ve,measurementId:st};throw ht}try{const ht=yield nc(S);return le.deleteThrottleMetadata(Ve),ht}catch(ht){const At=ht;if(!Ia(At)){if(le.deleteThrottleMetadata(Ve),st)return Bn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${st} provided in the "measurementId" field in the local Firebase config. [${At?.message}]`),{appId:Ve,measurementId:st};throw ht}const $t=503===Number(null===(pe=At?.customData)||void 0===pe?void 0:pe.httpStatus)?(0,K.$s)(N,le.intervalMillis,30):(0,K.$s)(N,le.intervalMillis),wt={throttleEndTimeMillis:Date.now()+$t,backoffCount:N+1};return le.setThrottleMetadata(Ve,wt),Bn.debug(`Calling attemptFetch again in ${$t} millis`),Yl(S,wt,G,le)}})).apply(this,arguments)}function Ql(S,M){return new Promise((N,G)=>{const le=Math.max(M-Date.now(),0),pe=setTimeout(N,le);S.addEventListener(()=>{clearTimeout(pe),G(Ii.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}function Ia(S){if(!(S instanceof K.ZR&&S.customData))return!1;const M=Number(S.customData.httpStatus);return 429===M||500===M||503===M||504===M}class Xl{constructor(){this.listeners=[]}addEventListener(M){this.listeners.push(M)}abort(){this.listeners.forEach(M=>M())}}let sl,ic;function jo(){return(jo=(0,x.Z)(function*(S,M,N,G,le){if(le&&le.global)S("event",N,G);else{const pe=yield M;S("event",N,Object.assign(Object.assign({},G),{send_to:pe}))}})).apply(this,arguments)}function ol(S){ic=S}function al(S){sl=S}function sc(){return oc.apply(this,arguments)}function oc(){return(oc=(0,x.Z)(function*(){if(!(0,K.hl)())return Bn.warn(Ii.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,K.eu)()}catch(S){return Bn.warn(Ii.create("indexeddb-unavailable",{errorInfo:S?.toString()}).message),!1}return!0})).apply(this,arguments)}function gi(){return(gi=(0,x.Z)(function*(S,M,N,G,le,pe,Ve){var st;const ht=Kd(S);ht.then(yr=>{N[yr.measurementId]=yr.appId,S.options.measurementId&&yr.measurementId!==S.options.measurementId&&Bn.warn(`The measurement ID in the local Firebase config (${S.options.measurementId}) does not match the measurement ID fetched from the server (${yr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(yr=>Bn.error(yr)),M.push(ht);const At=sc().then(yr=>{if(yr)return G.getId()}),[$t,wt]=yield Promise.all([ht,At]);Ps(pe)||Kl(pe,$t.measurementId),ic&&(le("consent","default",ic),ol(void 0)),le("js",new Date);const _r=null!==(st=Ve?.config)&&void 0!==st?st:{};return _r.origin="firebase",_r.update=!0,null!=wt&&(_r[Wv]=wt),le("config",$t.measurementId,_r),sl&&(le("set",sl),al(void 0)),$t.measurementId})).apply(this,arguments)}class ll{constructor(M){this.app=M}_delete(){return delete mi[this.app.options.appId],Promise.resolve()}}let mi={},ac=[];const eu={};let tu,Jt,Li="dataLayer",lc=!1;function Hm(S,M,N){!function Yd(){const S=[];if((0,K.ru)()&&S.push("This is a browser extension environment."),(0,K.zI)()||S.push("Cookies are not available."),S.length>0){const M=S.map((G,le)=>`(${le+1}) ${G}`).join(" "),N=Ii.create("invalid-analytics-context",{errorInfo:M});Bn.warn(N.message)}}();const G=S.options.appId;if(!G)throw Ii.create("no-app-id");if(!S.options.apiKey){if(!S.options.measurementId)throw Ii.create("no-api-key");Bn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${S.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=mi[G])throw Ii.create("already-exists",{id:G});if(!lc){!function Vo(S){let M=[];Array.isArray(window[S])?M=window[S]:window[S]=M}(Li);const{wrappedGtag:pe,gtagCore:Ve}=function ep(S,M,N,G,le){let pe=function(...Ve){window[G].push(arguments)};return window[le]&&"function"==typeof window[le]&&(pe=window[le]),window[le]=function Ca(S,M,N,G){function pe(){return(pe=(0,x.Z)(function*(Ve,st,ht){try{"event"===Ve?yield nl(S,M,N,st,ht):"config"===Ve?yield Zl(S,M,N,G,st,ht):"consent"===Ve?S("consent","update",ht):S("set",st)}catch(At){Bn.error(At)}})).apply(this,arguments)}return function le(Ve,st,ht){return pe.apply(this,arguments)}}(pe,S,M,N),{gtagCore:pe,wrappedGtag:window[le]}}(mi,ac,eu,Li,"gtag");Jt=pe,tu=Ve,lc=!0}return mi[G]=function np(S,M,N,G,le,pe,Ve){return gi.apply(this,arguments)}(S,ac,eu,M,tu,Li,N),new ll(S)}function uc(){return $o.apply(this,arguments)}function $o(){return($o=(0,x.Z)(function*(){if((0,K.ru)()||!(0,K.zI)()||!(0,K.hl)())return!1;try{return yield(0,K.eu)()}catch{return!1}})).apply(this,arguments)}const $r="@firebase/analytics";!function ip(){(0,Y._registerComponent)(new ae.wA(Ju,(M,{options:N})=>Hm(M.getProvider("app").getImmediate(),M.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,Y._registerComponent)(new ae.wA("analytics-internal",function S(M){try{const N=M.getProvider(Ju).getImmediate();return{logEvent:(G,le,pe)=>function Gm(S,M,N,G){S=(0,K.m9)(S),function Zd(S,M,N,G,le){return jo.apply(this,arguments)}(Jt,mi[S.app.options.appId],M,N,G).catch(le=>Bn.error(le))}(N,G,le,pe)}}catch(N){throw Ii.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,Y.registerVersion)($r,"0.9.5"),(0,Y.registerVersion)($r,"0.9.5","esm2017")}();var ul=j(4408),ru=j(7565);const Qd=new class Wm extends ru.v{}(class nu extends ul.o{constructor(M,N){super(M,N),this.scheduler=M,this.work=N}schedule(M,N=0){return N>0?super.schedule(M,N):(this.delay=N,this.state=M,this.scheduler.flush(this),this)}execute(M,N){return N>0||this.closed?super.execute(M,N):this._execute(M,N)}requestAsyncId(M,N,G=0){return null!=G&&G>0||null==G&&this.delay>0?super.requestAsyncId(M,N,G):(M.flush(this),0)}});var op=j(4986),ap=j(8505),Gr=j(5363),Ta=j(9468);const is=new f.GfV("7.5.0"),dc="__angularfire_symbol__analyticsIsSupportedValue",hc="__angularfire_symbol__analyticsIsSupported",Xd="__angularfire_symbol__remoteConfigIsSupportedValue",Jd="__angularfire_symbol__remoteConfigIsSupported",iu="__angularfire_symbol__messagingIsSupportedValue",fc="__angularfire_symbol__messagingIsSupported";function ut(S,M,N){if(M){if(1===M.length)return M[0];const pe=M.filter(Ve=>Ve.app===N);if(1===pe.length)return pe[0]}return N.container.getProvider(S).getImmediate({optional:!0})}globalThis[hc]||(globalThis[hc]=uc().then(S=>globalThis[dc]=S).catch(()=>globalThis[dc]=!1)),globalThis[fc]||(globalThis[fc]=Hd().then(S=>globalThis[iu]=S).catch(()=>globalThis[iu]=!1)),globalThis[Jd]||(globalThis[Jd]=Nl().then(S=>globalThis[Xd]=S).catch(()=>globalThis[Xd]=!1));const cn=(S,M)=>{const N=M?[M]:(0,de.C6)(),G=[];return N.forEach(le=>{le.container.getProvider(S).instances.forEach(Ve=>{G.includes(Ve)||G.push(Ve)})}),G};function Yn(){}class Go{constructor(M,N=Qd){this.zone=M,this.delegate=N}now(){return this.delegate.now()}schedule(M,N,G){const le=this.zone;return this.delegate.schedule(function(Ve){le.runGuarded(()=>{M.apply(this,[Ve])})},N,G)}}class su{constructor(M){this.zone=M,this.task=null}call(M,N){const G=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Yn,{},Yn,Yn)),N.pipe((0,ap.b)({next:G,complete:G,error:G})).subscribe(M).add(G)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let cr=(()=>{class S{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new Go(Zone.current)),this.insideAngular=N.run(()=>new Go(Zone.current,op.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return S.\u0275fac=function(N){return new(N||S)(f.LFG(f.R0b))},S.\u0275prov=f.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function zo(){const S=globalThis.\u0275AngularFireScheduler;if(!S)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return S}function mo(S){return S.pipe((0,Gr.Q)(zo().outsideAngular))}function Qn(S){return zo(),function Ls(S){return function(N){return(N=N.lift(new su(S.ngZone))).pipe((0,Ta.R)(S.outsideAngular),(0,Gr.Q)(S.insideAngular))}}(zo())(S)}},2090:(pt,ke,j)=>{"use strict";j.d(ke,{$s:()=>Vt,BH:()=>Ae,DV:()=>ki,Dv:()=>Sr,G6:()=>Fe,GJ:()=>Xi,L:()=>ce,LL:()=>ot,Pz:()=>Ie,Sg:()=>ze,UG:()=>Ce,UI:()=>it,US:()=>ae,Wj:()=>As,Wl:()=>Dr,Yr:()=>xe,ZB:()=>C,ZR:()=>gn,aH:()=>Ee,b$:()=>gt,cI:()=>St,dS:()=>Ji,eu:()=>Oe,g5:()=>x,gK:()=>Ar,gQ:()=>sr,h$:()=>me,hl:()=>Be,hu:()=>de,jU:()=>We,lb:()=>dn,m9:()=>Xr,ne:()=>kn,p$:()=>J,pd:()=>Kn,r3:()=>Ei,ru:()=>rt,tV:()=>z,uI:()=>Q,ug:()=>hn,vZ:()=>Qr,w1:()=>_e,w9:()=>ui,xO:()=>Oi,xb:()=>ha,z$:()=>qe,zI:()=>mt,zd:()=>gs});const de=function(te,X){if(!te)throw x(X)},x=function(te){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+te)},Y=function(te){const X=[];let oe=0;for(let ve=0;ve<te.length;ve++){let he=te.charCodeAt(ve);he<128?X[oe++]=he:he<2048?(X[oe++]=he>>6|192,X[oe++]=63&he|128):55296==(64512&he)&&ve+1<te.length&&56320==(64512&te.charCodeAt(ve+1))?(he=65536+((1023&he)<<10)+(1023&te.charCodeAt(++ve)),X[oe++]=he>>18|240,X[oe++]=he>>12&63|128,X[oe++]=he>>6&63|128,X[oe++]=63&he|128):(X[oe++]=he>>12|224,X[oe++]=he>>6&63|128,X[oe++]=63&he|128)}return X},ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(te,X){if(!Array.isArray(te))throw Error("encodeByteArray takes an array as a parameter");this.init_();const oe=X?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let he=0;he<te.length;he+=3){const Je=te[he],Nt=he+1<te.length,en=Nt?te[he+1]:0,fn=he+2<te.length,He=fn?te[he+2]:0;let $n=(15&en)<<2|He>>6,Vr=63&He;fn||(Vr=64,Nt||($n=64)),ve.push(oe[Je>>2],oe[(3&Je)<<4|en>>4],oe[$n],oe[Vr])}return ve.join("")},encodeString(te,X){return this.HAS_NATIVE_SUPPORT&&!X?btoa(te):this.encodeByteArray(Y(te),X)},decodeString(te,X){return this.HAS_NATIVE_SUPPORT&&!X?atob(te):function(te){const X=[];let oe=0,ve=0;for(;oe<te.length;){const he=te[oe++];if(he<128)X[ve++]=String.fromCharCode(he);else if(he>191&&he<224){const Je=te[oe++];X[ve++]=String.fromCharCode((31&he)<<6|63&Je)}else if(he>239&&he<365){const fn=((7&he)<<18|(63&te[oe++])<<12|(63&te[oe++])<<6|63&te[oe++])-65536;X[ve++]=String.fromCharCode(55296+(fn>>10)),X[ve++]=String.fromCharCode(56320+(1023&fn))}else{const Je=te[oe++],Nt=te[oe++];X[ve++]=String.fromCharCode((15&he)<<12|(63&Je)<<6|63&Nt)}}return X.join("")}(this.decodeStringToByteArray(te,X))},decodeStringToByteArray(te,X){this.init_();const oe=X?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let he=0;he<te.length;){const Je=oe[te.charAt(he++)],en=he<te.length?oe[te.charAt(he)]:0;++he;const He=he<te.length?oe[te.charAt(he)]:64;++he;const vt=he<te.length?oe[te.charAt(he)]:64;if(++he,null==Je||null==en||null==He||null==vt)throw new re;ve.push(Je<<2|en>>4),64!==He&&(ve.push(en<<4&240|He>>2),64!==vt&&ve.push(He<<6&192|vt))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let te=0;te<this.ENCODED_VALS.length;te++)this.byteToCharMap_[te]=this.ENCODED_VALS.charAt(te),this.charToByteMap_[this.byteToCharMap_[te]]=te,this.byteToCharMapWebSafe_[te]=this.ENCODED_VALS_WEBSAFE.charAt(te),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[te]]=te,te>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(te)]=te,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(te)]=te)}}};class re extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const me=function(te){const X=Y(te);return ae.encodeByteArray(X,!0)},ce=function(te){return me(te).replace(/\./g,"")},z=function(te){try{return ae.decodeString(te,!0)}catch(X){console.error("base64Decode failed: ",X)}return null};function J(te){return C(void 0,te)}function C(te,X){if(!(X instanceof Object))return X;switch(X.constructor){case Date:return new Date(X.getTime());case Object:void 0===te&&(te={});break;case Array:te=[];break;default:return X}for(const oe in X)!X.hasOwnProperty(oe)||!O(oe)||(te[oe]=C(te[oe],X[oe]));return te}function O(te){return"__proto__"!==te}const W=()=>{try{return function V(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const te=process.env.__FIREBASE_DEFAULTS__;return te?JSON.parse(te):void 0})()||(()=>{if(typeof document>"u")return;let te;try{te=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const X=te&&z(te[1]);return X&&JSON.parse(X)})()}catch(te){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${te}`)}},Ee=()=>{var te;return null===(te=W())||void 0===te?void 0:te.config},Ie=te=>{var X;return null===(X=W())||void 0===X?void 0:X[`_${te}`]};class Ae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((X,oe)=>{this.resolve=X,this.reject=oe})}wrapCallback(X){return(oe,ve)=>{oe?this.reject(oe):this.resolve(ve),"function"==typeof X&&(this.promise.catch(()=>{}),1===X.length?X(oe):X(oe,ve))}}}function ze(te,X){if(te.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=X||"demo-project",he=te.iat||0,Je=te.sub||te.user_id;if(!Je)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Nt=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:he,exp:he+3600,auth_time:he,sub:Je,user_id:Je,firebase:{sign_in_provider:"custom",identities:{}}},te);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(Nt)),""].join(".")}function qe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Q(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function Ce(){var te;const X=null===(te=W())||void 0===te?void 0:te.forceEnvironment;if("node"===X)return!0;if("browser"===X)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function We(){return"object"==typeof self&&self.self===self}function rt(){const te="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof te&&void 0!==te.id}function gt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _e(){const te=qe();return te.indexOf("MSIE ")>=0||te.indexOf("Trident/")>=0}function xe(){return!1}function Fe(){return!Ce()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Be(){try{return"object"==typeof indexedDB}catch{return!1}}function Oe(){return new Promise((te,X)=>{try{let oe=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",he=self.indexedDB.open(ve);he.onsuccess=()=>{he.result.close(),oe||self.indexedDB.deleteDatabase(ve),te(!0)},he.onupgradeneeded=()=>{oe=!1},he.onerror=()=>{var Je;X((null===(Je=he.error)||void 0===Je?void 0:Je.message)||"")}}catch(oe){X(oe)}})}function mt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class gn extends Error{constructor(X,oe,ve){super(oe),this.code=X,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,gn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ot.prototype.create)}}class ot{constructor(X,oe,ve){this.service=X,this.serviceName=oe,this.errors=ve}create(X,...oe){const ve=oe[0]||{},he=`${this.service}/${X}`,Je=this.errors[X],Nt=Je?function ln(te,X){return te.replace(_t,(oe,ve)=>{const he=X[ve];return null!=he?String(he):`<${ve}?>`})}(Je,ve):"Error";return new gn(he,`${this.serviceName}: ${Nt} (${he}).`,ve)}}const _t=/\{\$([^}]+)}/g;function St(te){return JSON.parse(te)}function Dr(te){return JSON.stringify(te)}const Nn=function(te){let X={},oe={},ve={},he="";try{const Je=te.split(".");X=St(z(Je[0])||""),oe=St(z(Je[1])||""),he=Je[2],ve=oe.d||{},delete oe.d}catch{}return{header:X,claims:oe,data:ve,signature:he}},ui=function(te){const oe=Nn(te).claims;return!!oe&&"object"==typeof oe&&oe.hasOwnProperty("iat")},Xi=function(te){const X=Nn(te).claims;return"object"==typeof X&&!0===X.admin};function Ei(te,X){return Object.prototype.hasOwnProperty.call(te,X)}function ki(te,X){if(Object.prototype.hasOwnProperty.call(te,X))return te[X]}function ha(te){for(const X in te)if(Object.prototype.hasOwnProperty.call(te,X))return!1;return!0}function it(te,X,oe){const ve={};for(const he in te)Object.prototype.hasOwnProperty.call(te,he)&&(ve[he]=X.call(oe,te[he],he,te));return ve}function Qr(te,X){if(te===X)return!0;const oe=Object.keys(te),ve=Object.keys(X);for(const he of oe){if(!ve.includes(he))return!1;const Je=te[he],Nt=X[he];if(ps(Je)&&ps(Nt)){if(!Qr(Je,Nt))return!1}else if(Je!==Nt)return!1}for(const he of ve)if(!oe.includes(he))return!1;return!0}function ps(te){return null!==te&&"object"==typeof te}function Oi(te){const X=[];for(const[oe,ve]of Object.entries(te))Array.isArray(ve)?ve.forEach(he=>{X.push(encodeURIComponent(oe)+"="+encodeURIComponent(he))}):X.push(encodeURIComponent(oe)+"="+encodeURIComponent(ve));return X.length?"&"+X.join("&"):""}function gs(te){const X={};return te.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[he,Je]=ve.split("=");X[decodeURIComponent(he)]=decodeURIComponent(Je)}}),X}function Kn(te){const X=te.indexOf("?");if(!X)return"";const oe=te.indexOf("#",X);return te.substring(X,oe>0?oe:void 0)}class sr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let X=1;X<this.blockSize;++X)this.pad_[X]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(X,oe){oe||(oe=0);const ve=this.W_;if("string"==typeof X)for(let vt=0;vt<16;vt++)ve[vt]=X.charCodeAt(oe)<<24|X.charCodeAt(oe+1)<<16|X.charCodeAt(oe+2)<<8|X.charCodeAt(oe+3),oe+=4;else for(let vt=0;vt<16;vt++)ve[vt]=X[oe]<<24|X[oe+1]<<16|X[oe+2]<<8|X[oe+3],oe+=4;for(let vt=16;vt<80;vt++){const $n=ve[vt-3]^ve[vt-8]^ve[vt-14]^ve[vt-16];ve[vt]=4294967295&($n<<1|$n>>>31)}let He,yt,he=this.chain_[0],Je=this.chain_[1],Nt=this.chain_[2],en=this.chain_[3],fn=this.chain_[4];for(let vt=0;vt<80;vt++){vt<40?vt<20?(He=en^Je&(Nt^en),yt=1518500249):(He=Je^Nt^en,yt=1859775393):vt<60?(He=Je&Nt|en&(Je|Nt),yt=2400959708):(He=Je^Nt^en,yt=3395469782);const $n=(he<<5|he>>>27)+He+fn+yt+ve[vt]&4294967295;fn=en,en=Nt,Nt=4294967295&(Je<<30|Je>>>2),Je=he,he=$n}this.chain_[0]=this.chain_[0]+he&4294967295,this.chain_[1]=this.chain_[1]+Je&4294967295,this.chain_[2]=this.chain_[2]+Nt&4294967295,this.chain_[3]=this.chain_[3]+en&4294967295,this.chain_[4]=this.chain_[4]+fn&4294967295}update(X,oe){if(null==X)return;void 0===oe&&(oe=X.length);const ve=oe-this.blockSize;let he=0;const Je=this.buf_;let Nt=this.inbuf_;for(;he<oe;){if(0===Nt)for(;he<=ve;)this.compress_(X,he),he+=this.blockSize;if("string"==typeof X){for(;he<oe;)if(Je[Nt]=X.charCodeAt(he),++Nt,++he,Nt===this.blockSize){this.compress_(Je),Nt=0;break}}else for(;he<oe;)if(Je[Nt]=X[he],++Nt,++he,Nt===this.blockSize){this.compress_(Je),Nt=0;break}}this.inbuf_=Nt,this.total_+=oe}digest(){const X=[];let oe=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let he=this.blockSize-1;he>=56;he--)this.buf_[he]=255&oe,oe/=256;this.compress_(this.buf_);let ve=0;for(let he=0;he<5;he++)for(let Je=24;Je>=0;Je-=8)X[ve]=this.chain_[he]>>Je&255,++ve;return X}}function kn(te,X){const oe=new It(te,X);return oe.subscribe.bind(oe)}class It{constructor(X,oe){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=oe,this.task.then(()=>{X(this)}).catch(ve=>{this.error(ve)})}next(X){this.forEachObserver(oe=>{oe.next(X)})}error(X){this.forEachObserver(oe=>{oe.error(X)}),this.close(X)}complete(){this.forEachObserver(X=>{X.complete()}),this.close()}subscribe(X,oe,ve){let he;if(void 0===X&&void 0===oe&&void 0===ve)throw new Error("Missing Observer.");he=function Cn(te,X){if("object"!=typeof te||null===te)return!1;for(const oe of X)if(oe in te&&"function"==typeof te[oe])return!0;return!1}(X,["next","error","complete"])?X:{next:X,error:oe,complete:ve},void 0===he.next&&(he.next=or),void 0===he.error&&(he.error=or),void 0===he.complete&&(he.complete=or);const Je=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?he.error(this.finalError):he.complete()}catch{}}),this.observers.push(he),Je}unsubscribeOne(X){void 0===this.observers||void 0===this.observers[X]||(delete this.observers[X],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(X){if(!this.finalized)for(let oe=0;oe<this.observers.length;oe++)this.sendOne(oe,X)}sendOne(X,oe){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[X])try{oe(this.observers[X])}catch(ve){typeof console<"u"&&console.error&&console.error(ve)}})}close(X){this.finalized||(this.finalized=!0,void 0!==X&&(this.finalError=X),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function or(){}const Sr=function(te,X,oe,ve){let he;if(ve<X?he="at least "+X:ve>oe&&(he=0===oe?"none":"no more than "+oe),he)throw new Error(te+" failed: Was called with "+ve+(1===ve?" argument.":" arguments.")+" Expects "+he+".")};function Ar(te,X){return`${te} failed: ${X} argument `}function As(te,X,oe,ve){if((!ve||oe)&&"function"!=typeof oe)throw new Error(Ar(te,X)+"must be a valid function.")}function dn(te,X,oe,ve){if((!ve||oe)&&("object"!=typeof oe||null===oe))throw new Error(Ar(te,X)+"must be a valid context object.")}const Ji=function(te){const X=[];let oe=0;for(let ve=0;ve<te.length;ve++){let he=te.charCodeAt(ve);if(he>=55296&&he<=56319){const Je=he-55296;ve++,de(ve<te.length,"Surrogate pair missing trail surrogate."),he=65536+(Je<<10)+(te.charCodeAt(ve)-56320)}he<128?X[oe++]=he:he<2048?(X[oe++]=he>>6|192,X[oe++]=63&he|128):he<65536?(X[oe++]=he>>12|224,X[oe++]=he>>6&63|128,X[oe++]=63&he|128):(X[oe++]=he>>18|240,X[oe++]=he>>12&63|128,X[oe++]=he>>6&63|128,X[oe++]=63&he|128)}return X},hn=function(te){let X=0;for(let oe=0;oe<te.length;oe++){const ve=te.charCodeAt(oe);ve<128?X++:ve<2048?X+=2:ve>=55296&&ve<=56319?(X+=4,oe++):X+=3}return X};function Vt(te,X=1e3,oe=2){const ve=X*Math.pow(oe,te),he=Math.round(.5*ve*(Math.random()-.5)*2);return Math.min(144e5,ve+he)}function Xr(te){return te&&te._delegate?te._delegate:te}},2095:(pt,ke,j)=>{"use strict";var f=j(4650);let de=null;function x(){return de}const re=new f.OlP("DocumentToken");let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ce(){return(0,f.LFG)(J)}()},providedIn:"platform"}),n})();const z=new f.OlP("Location Initialized");let J=(()=>{class n extends me{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return x().getBaseHref(this._doc)}onPopState(t){const r=x().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=x().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){C()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){C()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function O(){return new J((0,f.LFG)(re))}()},providedIn:"platform"}),n})();function C(){return!!window.history.pushState}function V(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function $(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ue(n){return n&&"?"!==n[0]?"?"+n:n}let ee=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Me)},providedIn:"root"}),n})();const W=new f.OlP("appBaseHref");let Me=(()=>{class n extends ee{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(re).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return V(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ue(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const u=this.prepareExternalUrl(i+ue(s));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,s){const u=this.prepareExternalUrl(i+ue(s));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(me),f.LFG(W,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ge=(()=>{class n extends ee{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=V(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let u=this.prepareExternalUrl(i+ue(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,s){let u=this.prepareExternalUrl(i+ue(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(me),f.LFG(W,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ee=(()=>{class n{constructor(t){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=$(ze(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ue(r))}normalize(t){return n.stripTrailingSlash(function Ae(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ze(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ue(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ue(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=ue,n.joinWithSlash=V,n.stripTrailingSlash=$,n.\u0275fac=function(t){return new(t||n)(f.LFG(ee))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Ie(){return new Ee((0,f.LFG)(ee))}()},providedIn:"root"}),n})();function ze(n){return n.replace(/\/index.html$/,"")}let wn=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,f.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,f.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.ZZ4),f.Y36(f.aQg),f.Y36(f.SBq),f.Y36(f.Qsj))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class qa{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ro=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new qa(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===s?void 0:s);else if(null!==s){const d=r.get(s);r.move(d,u),lo(d,i)}});for(let i=0,s=r.length;i<s;i++){const d=r.get(i).context;d.index=i,d.count=s,d.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{lo(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function lo(n,e){n.context.$implicit=e.item}let Rd=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split("."),u=-1===i.indexOf("-")?void 0:f.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,u):this._renderer.removeStyle(this._ngEl.nativeElement,i,u)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(f.aQg),f.Y36(f.Qsj))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),pa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const ks="browser";function jr(n){return"server"===n}let Ll=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new qf((0,f.LFG)(re),window)}),n})();class qf{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ei(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const u=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ni(this.window.history)||Ni(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ni(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class qd extends class Jf extends class ae{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function K(n){de||(de=n)}(new qd)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Kl(){return ql=ql||document.querySelector("base"),ql?ql.getAttribute("href"):null}();return null==t?null:function Zl(n){Vo=Vo||document.createElement("a"),Vo.setAttribute("href",n);const e=Vo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ql=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ol(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Vo,ql=null;const Bo=new f.OlP("TRANSITION_ID"),rl=[{provide:f.ip1,useFactory:function nl(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=x(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[Bo,re,f.zs3],multi:!0}];let ep=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Ps=new f.OlP("EventManagerPlugins");let il=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const u=i[s];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ps),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class go{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=x().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Um=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),pi=(()=>{class n extends Um{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const u=this._doc.createElement("style");u.textContent=s,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(tc),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(tc))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function tc(n){x().remove(n)}const nc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},mr=/%COMP%/g;function Xl(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Xl(n,i,t):(i=i.replace(mr,n),t.push(i))}return t}function sl(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let jo=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Ho(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new tp(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case f.ifc.ShadowDom:return new Da(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Xl(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(il),f.LFG(pi),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Ho{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(nc[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(ns(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ns(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=nc[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=nc[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,i&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,sl(r)):this.eventManager.addEventListener(e,t,sl(r))}}function ns(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class tp extends Ho{constructor(e,t,r,i){super(e),this.component=r;const s=Xl(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function Ql(n){return"_ngcontent-%COMP%".replace(mr,n)}(i+"-"+r.id),this.hostAttr=function Ia(n){return"_nghost-%COMP%".replace(mr,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Da extends Ho{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Xl(i.id,i.styles,[]);for(let u=0;u<s.length;u++){const d=document.createElement("style");d.textContent=s[u],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let rc=(()=>{class n extends go{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const rs=["alt","control","meta","shift"],ic={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ol={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let al=(()=>{class n extends go{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),u=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>x().onAndCancel(t,s.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let u="",d=r.indexOf("code");if(d>-1&&(r.splice(d,1),u="code."),rs.forEach(y=>{const E=r.indexOf(y);E>-1&&(r.splice(E,1),u+=y+".")}),u+=s,0!=r.length||0===s.length)return null;const g={};return g.domEventName=i,g.fullKey=u,g}static matchEventFullKeyCode(t,r){let i=ic[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),rs.forEach(u=>{u!==i&&(0,ol[u])(t)&&(s+=u+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const rp=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:ks},{provide:f.g9A,useValue:function mi(){qd.makeCurrent()},multi:!0},{provide:re,useFactory:function eu(){return(0,f.RDi)(document),document},deps:[]}]),tu=new f.OlP(""),Jt=[{provide:f.rWj,useClass:class Ca{addToWindow(e){f.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const i=f.dqk.getAllAngularTestabilities();let s=i.length,u=!1;const d=function(g){u=u||g,s--,0==s&&r(u)};i.forEach(function(g){g.whenStable(d)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?x().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],lc=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function ac(){return new f.qLn},deps:[]},{provide:Ps,useClass:rc,multi:!0,deps:[re,f.R0b,f.Lbi]},{provide:Ps,useClass:al,multi:!0,deps:[re]},{provide:jo,useClass:jo,deps:[il,pi,f.AFp]},{provide:f.FYo,useExisting:jo},{provide:Um,useExisting:pi},{provide:pi,useClass:pi,deps:[re]},{provide:il,useClass:il,deps:[Ps,f.R0b]},{provide:class ma{},useClass:ep,deps:[]},[]];let jm=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:Bo,useExisting:f.AFp},rl]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(tu,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[...lc,...Jt],imports:[pa,f.hGG]}),n})(),uc=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function $m(){return new uc((0,f.LFG)(re))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var un=j(8996),Fs=j(3269);function ut(...n){const e=(0,Fs.yG)(n);return(0,un.D)(n,e)}var cn=j(7579);class Yn extends cn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const su=(0,j(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var cr=j(9751);const{isArray:zo}=Array,{getPrototypeOf:eh,prototype:Ti,keys:mo}=Object;var Ls=j(4671),Et=j(4004);const{isArray:mc}=Array;function M(n){return(0,Et.U)(e=>function S(n,e){return mc(e)?n(...e):n(e)}(n,e))}var G=j(5403),le=j(9672);function pe(...n){const e=(0,Fs.yG)(n),t=(0,Fs.jO)(n),{args:r,keys:i}=function gc(n){if(1===n.length){const e=n[0];if(zo(e))return{args:e,keys:null};if(function Qn(n){return n&&"object"==typeof n&&eh(n)===Ti}(e)){const t=mo(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,un.D)([],e);const s=new cr.y(function Ve(n,e,t=Ls.y){return r=>{st(e,()=>{const{length:i}=n,s=new Array(i);let u=i,d=i;for(let g=0;g<i;g++)st(e,()=>{const y=(0,un.D)(n[g],e);let E=!1;y.subscribe((0,G.x)(r,T=>{s[g]=T,E||(E=!0,d--),d||r.next(t(s.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>function N(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,u):Ls.y));return t?s.pipe(M(t)):s}function st(n,e,t){n?(0,le.f)(t,n,e):e()}var ht=j(8189);function $t(...n){return function At(){return(0,ht.J)(1)}()((0,un.D)(n,(0,Fs.yG)(n)))}var wt=j(8421);function _r(n){return new cr.y(e=>{(0,wt.Xf)(n()).subscribe(e)})}var yr=j(9635),ti=j(576);function Bi(n,e){const t=(0,ti.m)(n)?n:()=>n,r=i=>i.error(t());return new cr.y(e?i=>e.schedule(r,0,i):r)}var zr=j(515),kr=j(727),Dn=j(4482);function cl(){return(0,Dn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,G.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class lp extends cr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Dn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new kr.w0;const t=this.getSubject();e.add(this.source.subscribe((0,G.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=kr.w0.EMPTY)}return e}refCount(){return cl()(this)}}function tr(n,e){return(0,Dn.e)((t,r)=>{let i=null,s=0,u=!1;const d=()=>u&&!i&&r.complete();t.subscribe((0,G.x)(r,g=>{i?.unsubscribe();let y=0;const E=s++;(0,wt.Xf)(n(g,E)).subscribe(i=(0,G.x)(r,T=>r.next(e?e(g,T,E,y++):T),()=>{i=null,d()}))},()=>{u=!0,d()}))})}function Vs(n){return n<=0?()=>zr.E:(0,Dn.e)((e,t)=>{let r=0;e.subscribe((0,G.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function dl(...n){const e=(0,Fs.yG)(n);return(0,Dn.e)((t,r)=>{(e?$t(n,t,e):$t(n,t)).subscribe(r)})}function ni(n,e){return(0,Dn.e)((t,r)=>{let i=0;t.subscribe((0,G.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}var dr=j(5577);function _c(n){return(0,Dn.e)((e,t)=>{let r=!1;e.subscribe((0,G.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function qm(n=up){return(0,Dn.e)((e,t)=>{let r=!1;e.subscribe((0,G.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function up(){return new su}function Sa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ni((i,s)=>n(i,s,r)):Ls.y,Vs(1),t?_c(e):qm(()=>new su))}function Bs(n,e){return(0,ti.m)(e)?(0,dr.z)(n,e,1):(0,dr.z)(n,1)}var Si=j(8505);function Aa(n){return(0,Dn.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,G.x)(t,void 0,void 0,u=>{s=(0,wt.Xf)(n(u,Aa(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Zv(n,e,t,r,i){return(s,u)=>{let d=t,g=e,y=0;s.subscribe((0,G.x)(u,E=>{const T=y++;g=d?n(g,E,T):(d=!0,E),r&&u.next(g)},i&&(()=>{d&&u.next(g),u.complete()})))}}function Wo(n,e){return(0,Dn.e)(Zv(n,e,arguments.length>=2,!0))}function Km(n){return n<=0?()=>zr.E:(0,Dn.e)((e,t)=>{let r=[];e.subscribe((0,G.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Yv(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ni((i,s)=>n(i,s,r)):Ls.y,Km(1),t?_c(e):qm(()=>new su))}function th(n){return(0,Dn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const nn="primary",nh=Symbol("RouteTitle");class QE{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ou(n){return new QE(n)}function Zm(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const u=r[s],d=n[s];if(u.startsWith(":"))i[u.substring(1)]=d;else if(u!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Us(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!dp(n[i],e[i]))return!1;return!0}function dp(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function hp(n){return Array.prototype.concat.apply([],n)}function js(n){return n.length>0?n[n.length-1]:null}function ri(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function _o(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,un.D)(Promise.resolve(n)):ut(n)}const Qv={exact:function ah(n,e,t){if(!hl(n.segments,e.segments)||!au(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ah(n.children[r],e.children[r],t))return!1;return!0},subset:Or},oh={exact:function Xv(n,e){return Us(n,e)},subset:function Xm(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>dp(n[t],e[t]))},ignored:()=>!0};function Qm(n,e,t){return Qv[t.paths](n.root,e.root,t.matrixParams)&&oh[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Or(n,e,t){return yc(n,e,e.segments,t)}function yc(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!hl(i,t)||e.hasChildren()||!au(i,t,r))}if(n.segments.length===t.length){if(!hl(n.segments,t)||!au(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Or(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(hl(n.segments,i)&&au(n.segments,i,r)&&n.children[nn])&&yc(n.children[nn],e,s,r)}}function au(n,e,t){return e.every((r,i)=>oh[t](n[i].parameters,r.parameters))}class qo{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ou(this.queryParams)),this._queryParamMap}toString(){return Ma.serialize(this)}}class Rt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ri(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return lh(this)}}class Ko{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ou(this.parameters)),this._parameterMap}toString(){return n_(this)}}function hl(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let fp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new t_},providedIn:"root"}),n})();class t_{parse(e){const t=new Cc(e);return new qo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${lu(e.root,!0)}`,r=function pp(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ch(t)}=${ch(i)}`).join("&"):`${ch(t)}=${ch(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function vc(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Ma=new t_;function lh(n){return n.segments.map(e=>n_(e)).join("/")}function lu(n,e){if(!n.hasChildren())return lh(n);if(e){const t=n.children[nn]?lu(n.children[nn],!1):"",r=[];return ri(n.children,(i,s)=>{s!==nn&&r.push(`${s}:${lu(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function e_(n,e){let t=[];return ri(n.children,(r,i)=>{i===nn&&(t=t.concat(e(r,i)))}),ri(n.children,(r,i)=>{i!==nn&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===nn?[lu(n.children[nn],!1)]:[`${i}:${lu(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[nn]?`${lh(n)}/${t[0]}`:`${lh(n)}/(${t.join("//")})`}}function uh(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ch(n){return uh(n).replace(/%3B/gi,";")}function wc(n){return uh(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dh(n){return decodeURIComponent(n)}function bc(n){return dh(n.replace(/\+/g,"%20"))}function n_(n){return`${wc(n.path)}${function Ec(n){return Object.keys(n).map(e=>`;${wc(e)}=${wc(n[e])}`).join("")}(n.parameters)}`}const Jv=/^[^\/()?;=#]+/;function uu(n){const e=n.match(Jv);return e?e[0]:""}const gp=/^[^=?&#]+/,XE=/^[^&#]+/;class Cc{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Rt([],{}):new Rt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[nn]=new Rt(e,t)),r}parseSegment(){const e=uu(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new f.vHH(4009,!1);return this.capture(e),new Ko(dh(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=uu(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=uu(this.remaining);i&&(r=i,this.capture(r))}e[dh(t)]=dh(r)}parseQueryParam(e){const t=function r_(n){const e=n.match(gp);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function fl(n){const e=n.match(XE);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=bc(t),s=bc(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=uu(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new f.vHH(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=nn);const u=this.parseChildren();t[s]=1===Object.keys(u).length?u[nn]:new Rt([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new f.vHH(4011,!1)}}function hh(n){return n.segments.length>0?new Rt([],{[nn]:n}):n}function fh(n){const e={};for(const r of Object.keys(n.children)){const s=fh(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function Ic(n){if(1===n.numberOfChildren&&n.children[nn]){const e=n.children[nn];return new Rt(n.segments.concat(e.segments),e.children)}return n}(new Rt(n.segments,e))}function Zo(n){return n instanceof qo}function tw(n,e,t,r,i){if(0===t.length)return pl(e.root,e.root,e.root,r,i);const s=function s_(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new i_(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,u)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return ri(s.outlets,(g,y)=>{d[y]="string"==typeof g?g.split("/"):g}),[...i,{outlets:d}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===u?(s.split("/").forEach((d,g)=>{0==g&&"."===d||(0==g&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,s]},[]);return new i_(t,e,r)}(t);return s.toRoot()?pl(e.root,e.root,new Rt([],{}),r,i):function u(g){const y=function Ra(n,e,t,r){if(n.isAbsolute)return new Hs(e.root,!0,0);if(-1===r)return new Hs(t,t===e.root,0);return function _p(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new f.vHH(4005,!1);i=r.segments.length}return new Hs(r,!1,i-s)}(t,r+(cu(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,g),E=y.processChildren?mh(y.segmentGroup,y.index,s.commands):yp(y.segmentGroup,y.index,s.commands);return pl(e.root,y.segmentGroup,E,r,i)}(n.snapshot?._lastPathIndex)}function cu(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function xa(n){return"object"==typeof n&&null!=n&&n.outlets}function pl(n,e,t,r,i){let u,s={};r&&ri(r,(g,y)=>{s[y]=Array.isArray(g)?g.map(E=>`${E}`):`${g}`}),u=n===e?t:gh(n,e,t);const d=hh(fh(u));return new qo(d,s,i)}function gh(n,e,t){const r={};return ri(n.children,(i,s)=>{r[s]=i===e?t:gh(i,e,t)}),new Rt(n.segments,r)}class i_{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&cu(r[0]))throw new f.vHH(4003,!1);const i=r.find(xa);if(i&&i!==js(r))throw new f.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Hs{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function yp(n,e,t){if(n||(n=new Rt([],{})),0===n.segments.length&&n.hasChildren())return mh(n,e,t);const r=function Dc(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const u=n.segments[i],d=t[r];if(xa(d))break;const g=`${d}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&y&&"object"==typeof y&&void 0===y.outlets){if(!vp(g,y,u))return s;r+=2}else{if(!vp(g,{},u))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Rt(n.segments.slice(0,r.pathIndex),{});return s.children[nn]=new Rt(n.segments.slice(r.pathIndex),n.children),mh(s,0,i)}return r.match&&0===i.length?new Rt(n.segments,{}):r.match&&!n.hasChildren()?Tc(n,e,t):r.match?mh(n,0,i):Tc(n,e,t)}function mh(n,e,t){if(0===t.length)return new Rt(n.segments,{});{const r=function a_(n){return xa(n[0])?n[0].outlets:{[nn]:n}}(t),i={};return ri(r,(s,u)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[u]=yp(n.children[u],e,s))}),ri(n.children,(s,u)=>{void 0===r[u]&&(i[u]=s)}),new Rt(n.segments,i)}}function Tc(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(xa(s)){const g=_h(s.outlets);return new Rt(r,g)}if(0===i&&cu(t[0])){r.push(new Ko(n.segments[e].path,yh(t[0]))),i++;continue}const u=xa(s)?s.outlets[nn]:`${s}`,d=i<t.length-1?t[i+1]:null;u&&d&&cu(d)?(r.push(new Ko(u,yh(d))),i+=2):(r.push(new Ko(u,{})),i++)}return new Rt(r,{})}function _h(n){const e={};return ri(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Tc(new Rt([],{}),0,t))}),e}function yh(n){const e={};return ri(n,(t,r)=>e[r]=`${t}`),e}function vp(n,e,t){return n==t.path&&Us(e,t.parameters)}class ss{constructor(e,t){this.id=e,this.url=t}}class vh extends ss{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class nr extends ss{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class $s extends ss{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class wh extends ss{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class wp extends ss{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sc extends ss{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ac extends ss{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Mc extends ss{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class l_ extends ss{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class u_{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ka{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class c_{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class d_{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bp{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bh{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xc{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Eh{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Rc(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Rc(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=h_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return h_(e,this._root).map(t=>t.value)}}function Rc(n,e){if(n===e.value)return e;for(const t of e.children){const r=Rc(n,t);if(r)return r}return null}function h_(n,e){if(n===e.value)return[e];for(const t of e.children){const r=h_(n,t);if(r.length)return r.unshift(e),r}return[]}class ii{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function vs(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Ep extends Eh{constructor(e,t){super(e),this.snapshot=t,v(this,e)}toString(){return this.snapshot.toString()}}function Ch(n,e){const t=function Ih(n,e){const u=new kc([],{},{},"",{},nn,e,null,n.root,-1,{});return new Ip("",new ii(u,[]))}(n,e),r=new Yn([new Ko("",{})]),i=new Yn({}),s=new Yn({}),u=new Yn({}),d=new Yn(""),g=new Gs(r,i,u,d,s,nn,e,t.root);return g.snapshot=t.root,new Ep(new ii(g,[]),t)}class Gs{constructor(e,t,r,i,s,u,d,g){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=u,this.component=d,this.title=this.data?.pipe((0,Et.U)(y=>y[nh]))??ut(void 0),this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Et.U)(e=>ou(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Et.U)(e=>ou(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Cp(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function f_(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class kc{constructor(e,t,r,i,s,u,d,g,y,E,T,P){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=u,this.component=d,this.title=this.data?.[nh],this.routeConfig=g,this._urlSegment=y,this._lastPathIndex=E,this._correctedLastPathIndex=P??E,this._resolve=T}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ou(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ou(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ip extends Eh{constructor(e,t){super(t),this.url=e,v(this,t)}toString(){return p(this._root)}}function v(n,e){e.value._routerState=n,e.children.forEach(t=>v(n,t))}function p(n){const e=n.children.length>0?` { ${n.children.map(p).join(", ")} } `:"";return`${n.value}${e}`}function m(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Us(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Us(e.params,t.params)||n.params.next(t.params),function rh(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Us(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Us(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function b(n,e){const t=Us(n.params,e.params)&&function Jm(n,e){return hl(n,e)&&n.every((t,r)=>Us(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||b(n.parent,e.parent))}function L(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function se(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return L(n,r,i);return L(n,r)})}(n,e,t);return new ii(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const u=s.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(d=>L(n,d)),u}}const r=function be(n){return new Gs(new Yn(n.url),new Yn(n.params),new Yn(n.queryParams),new Yn(n.fragment),new Yn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>L(n,s));return new ii(r,i)}}const Ke="ngNavigationCancelingError";function at(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Zo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Ft(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Ft(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Ke]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Mt(n){return Pr(n)&&Zo(n.url)}function Pr(n){return n&&n[Ke]}class ws{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Oa,this.attachRef=null}}let Oa=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new ws,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Oc=!1;let Dh=(()=>{class n{constructor(t,r,i,s,u){this.parentContexts=t,this.location=r,this.changeDetector=s,this.environmentInjector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=i||nn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,Oc);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,Oc);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,Oc);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new f.vHH(4013,Oc);this._activatedRoute=t;const i=this.location,u=t._futureSnapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,g=new p_(t,d,i.injector);if(r&&function Th(n){return!!n.resolveComponentFactory}(r)){const y=r.resolveComponentFactory(u);this.activated=i.createComponent(y,i.length,g)}else this.activated=i.createComponent(u,{index:i.length,injector:g,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Oa),f.Y36(f.s_b),f.$8M("name"),f.Y36(f.sBO),f.Y36(f.lqb))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class p_{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Gs?this.route:e===Oa?this.childContexts:this.parent.get(e,t)}}let os=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[Dh],encapsulation:2}),n})();function gl(n,e){return n.providers&&!n._injector&&(n._injector=(0,f.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function tC(n){const e=n.children&&n.children.map(tC),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==nn&&(t.component=os),t}function Yo(n){return n.outlet||nn}function iw(n,e){const t=n.filter(r=>Yo(r)===e);return t.push(...n.filter(r=>Yo(r)!==e)),t}function Tp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class UA{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),m(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=vs(t);e.children.forEach(s=>{const u=s.value.outlet;this.deactivateRoutes(s,i[u],r),delete i[u]}),ri(i,(s,u)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=vs(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);if(r&&r.outlet){const u=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=vs(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=vs(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new bh(s.value.snapshot))}),e.children.length&&this.forwardEvent(new d_(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(m(i),i===s)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(d.contexts),u.attachRef=d.componentRef,u.route=d.route.value,u.outlet&&u.outlet.attach(d.componentRef,d.route.value),m(d.route.value),this.activateChildRoutes(e,null,u.children)}else{const d=Tp(i.snapshot),g=d?.get(f._Vd)??null;u.attachRef=null,u.route=i,u.resolver=g,u.injector=d,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class nC{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Sp{constructor(e,t){this.component=e,this.route=t}}function __(n,e,t){const r=n._root;return Ap(r,e?e._root:null,t,[r.value])}function du(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,f.Z0I)(n)?e.get(n):n:r}function Ap(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=vs(e);return n.children.forEach(u=>{(function Wr(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,u=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(u&&s.routeConfig===u.routeConfig){const g=function HA(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!hl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!hl(n.url,e.url)||!Us(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!b(n,e)||!Us(n.queryParams,e.queryParams);default:return!b(n,e)}}(u,s,s.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new nC(r)):(s.data=u.data,s._resolvedData=u._resolvedData),Ap(n,e,s.component?d?d.children:null:t,r,i),g&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new Sp(d.outlet.component,u))}else u&&Mp(e,d,i),i.canActivateChecks.push(new nC(r)),Ap(n,null,s.component?d?d.children:null:t,r,i)})(u,s[u.value.outlet],t,r.concat([u.value]),i),delete s[u.value.outlet]}),ri(s,(u,d)=>Mp(u,t.getContext(d),i)),i}function Mp(n,e,t){const r=vs(n),i=n.value;ri(r,(s,u)=>{Mp(s,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new Sp(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Pc(n){return"function"==typeof n}function Nc(n){return n instanceof su||"EmptyError"===n?.name}const Ah=Symbol("INITIAL_VALUE");function Fc(){return tr(n=>pe(n.map(e=>e.pipe(Vs(1),dl(Ah)))).pipe((0,Et.U)(e=>{for(const t of e)if(!0!==t){if(t===Ah)return Ah;if(!1===t||t instanceof qo)return t}return!0}),ni(e=>e!==Ah),Vs(1)))}function aw(n){return(0,yr.z)((0,Si.b)(e=>{if(Zo(e))throw at(0,e)}),(0,Et.U)(e=>!0===e))}const ml={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function uC(n,e,t,r,i){const s=xp(n,e,t);return s.matched?function lC(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?ut(i.map(u=>{const d=du(u,n);return _o(function qA(n){return n&&Pc(n.canMatch)}(d)?d.canMatch(e,t):n.runInContext(()=>d(e,t)))})).pipe(Fc(),aw()):ut(!0)}(r=gl(e,r),e,t).pipe((0,Et.U)(u=>!0===u?s:{...ml})):ut(s)}function xp(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...ml}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Zm)(t,n,e);if(!i)return{...ml};const s={};ri(i.posParams,(d,g)=>{s[g]=d.path});const u=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function Lc(n,e,t,r,i="corrected"){if(t.length>0&&function y_(n,e,t){return t.some(r=>Rp(n,e,r)&&Yo(r)!==nn)}(n,t,r)){const u=new Rt(e,function lw(n,e,t,r){const i={};i[nn]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Yo(s)!==nn){const u=new Rt([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[Yo(s)]=u}return i}(n,e,r,new Rt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function Vc(n,e,t){return t.some(r=>Rp(n,e,r))}(n,t,r)){const u=new Rt(n.segments,function YA(n,e,t,r,i,s){const u={};for(const d of r)if(Rp(n,t,d)&&!i[Yo(d)]){const g=new Rt([],{});g._sourceSegment=n,g._segmentIndexShift="legacy"===s?n.segments.length:e.length,u[Yo(d)]=g}return{...i,...u}}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const s=new Rt(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function Rp(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function v_(n,e,t,r){return!!(Yo(n)===r||r!==nn&&Rp(e,t,n))&&("**"===n.path||xp(e,n,t).matched)}function cC(n,e,t){return 0===e.length&&!n.children[t]}const w_=!1;class kp{constructor(e){this.segmentGroup=e||null}}class Bc{constructor(e){this.urlTree=e}}function Op(n){return Bi(new kp(n))}function dC(n){return Bi(new Bc(n))}class JA{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=Lc(this.urlTree.root,[],[],this.config).segmentGroup,t=new Rt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,nn).pipe((0,Et.U)(s=>this.createUrlTree(fh(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Aa(s=>{if(s instanceof Bc)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof kp?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,nn).pipe((0,Et.U)(i=>this.createUrlTree(fh(i),e.queryParams,e.fragment))).pipe(Aa(i=>{throw i instanceof kp?this.noMatchError(i):i}))}noMatchError(e){return new f.vHH(4002,w_)}createUrlTree(e,t,r){const i=hh(e);return new qo(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Et.U)(s=>new Rt([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,un.D)(i).pipe(Bs(s=>{const u=r.children[s],d=iw(t,s);return this.expandSegmentGroup(e,d,u,s).pipe((0,Et.U)(g=>({segment:g,outlet:s})))}),Wo((s,u)=>(s[u.outlet]=u.segment,s),{}),Yv())}expandSegment(e,t,r,i,s,u){return(0,un.D)(r).pipe(Bs(d=>this.expandSegmentAgainstRoute(e,t,r,d,i,s,u).pipe(Aa(y=>{if(y instanceof kp)return ut(null);throw y}))),Sa(d=>!!d),Aa((d,g)=>{if(Nc(d))return cC(t,i,s)?ut(new Rt([],{})):Op(t);throw d}))}expandSegmentAgainstRoute(e,t,r,i,s,u,d){return v_(i,t,s,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,u):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u):Op(t):Op(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?dC(s):this.lineralizeSegments(r,s).pipe((0,dr.z)(u=>{const d=new Rt(u,{});return this.expandSegment(e,d,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){const{matched:d,consumedSegments:g,remainingSegments:y,positionalParamSegments:E}=xp(t,i,s);if(!d)return Op(t);const T=this.applyRedirectCommands(g,i.redirectTo,E);return i.redirectTo.startsWith("/")?dC(T):this.lineralizeSegments(i,T).pipe((0,dr.z)(P=>this.expandSegment(e,t,r,P.concat(y),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=gl(r,e),r.loadChildren?(r._loadedRoutes?ut({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,Et.U)(d=>(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,new Rt(i,{})))):ut(new Rt(i,{}))):uC(t,r,i,e).pipe(tr(({matched:u,consumedSegments:d,remainingSegments:g})=>u?this.getChildConfig(e=r._injector??e,r,i).pipe((0,dr.z)(E=>{const T=E.injector??e,P=E.routes,{segmentGroup:B,slicedSegments:q}=Lc(t,d,g,P),ie=new Rt(B.segments,B.children);if(0===q.length&&ie.hasChildren())return this.expandChildren(T,P,ie).pipe((0,Et.U)(Ze=>new Rt(d,Ze)));if(0===P.length&&0===q.length)return ut(new Rt(d,{}));const ge=Yo(r)===s;return this.expandSegment(T,ie,P,q,ge?nn:s,!0).pipe((0,Et.U)(Ye=>new Rt(d.concat(Ye.segments),Ye.children)))})):Op(t)))}getChildConfig(e,t,r){return t.children?ut({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ut({routes:t._loadedRoutes,injector:t._loadedInjector}):function ow(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?ut(!0):ut(i.map(u=>{const d=du(u,n);return _o(function $A(n){return n&&Pc(n.canLoad)}(d)?d.canLoad(e,t):n.runInContext(()=>d(e,t)))})).pipe(Fc(),aw())}(e,t,r).pipe((0,dr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Si.b)(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function XA(n){return Bi(Ft(w_,3))}())):ut({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ut(r);if(i.numberOfChildren>1||!i.children[nn])return Bi(new f.vHH(4e3,w_));i=i.children[nn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new qo(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return ri(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[s]=t[d]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let u={};return ri(t.children,(d,g)=>{u[g]=this.createSegmentGroup(e,d,r,i)}),new Rt(s,u)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new f.vHH(4001,w_);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class fC{}class Pp{constructor(e,t,r,i,s,u,d,g){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d,this.urlSerializer=g}recognize(){const e=Lc(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,nn).pipe((0,Et.U)(t=>{if(null===t)return null;const r=new kc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},nn,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ii(r,t),s=new Ip(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=Cp(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,un.D)(Object.keys(r.children)).pipe(Bs(i=>{const s=r.children[i],u=iw(t,i);return this.processSegmentGroup(e,u,s,i)}),Wo((i,s)=>i&&s?(i.push(...s),i):null),function cp(n,e=!1){return(0,Dn.e)((t,r)=>{let i=0;t.subscribe((0,G.x)(r,s=>{const u=n(s,i++);(u||e)&&r.next(s),!u&&r.complete()}))})}(i=>null!==i),_c(null),Yv(),(0,Et.U)(i=>{if(null===i)return null;const s=pC(i);return function tM(n){n.sort((e,t)=>e.value.outlet===nn?-1:t.value.outlet===nn?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return(0,un.D)(t).pipe(Bs(u=>this.processSegmentAgainstRoute(u._injector??e,u,r,i,s)),Sa(u=>!!u),Aa(u=>{if(Nc(u))return cC(r,i,s)?ut([]):ut(null);throw u}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!v_(t,r,i,s))return ut(null);let u;if("**"===t.path){const d=i.length>0?js(i).parameters:{},g=gC(r)+i.length;u=ut({snapshot:new kc(i,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_C(t),Yo(t),t.component??t._loadedComponent??null,t,cw(r),g,dw(t),g),consumedSegments:[],remainingSegments:[]})}else u=uC(r,t,i,e).pipe((0,Et.U)(({matched:d,consumedSegments:g,remainingSegments:y,parameters:E})=>{if(!d)return null;const T=gC(r)+g.length;return{snapshot:new kc(g,E,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_C(t),Yo(t),t.component??t._loadedComponent??null,t,cw(r),T,dw(t),T),consumedSegments:g,remainingSegments:y}}));return u.pipe(tr(d=>{if(null===d)return ut(null);const{snapshot:g,consumedSegments:y,remainingSegments:E}=d;e=t._injector??e;const T=t._loadedInjector??e,P=function Mh(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:B,slicedSegments:q}=Lc(r,y,E,P.filter(ge=>void 0===ge.redirectTo),this.relativeLinkResolution);if(0===q.length&&B.hasChildren())return this.processChildren(T,P,B).pipe((0,Et.U)(ge=>null===ge?null:[new ii(g,ge)]));if(0===P.length&&0===q.length)return ut([new ii(g,[])]);const ie=Yo(t)===s;return this.processSegment(T,P,B,q,ie?nn:s).pipe((0,Et.U)(ge=>null===ge?null:[new ii(g,ge)]))}))}}function Np(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function pC(n){const e=[],t=new Set;for(const r of n){if(!Np(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=pC(r.children);e.push(new ii(r.value,i))}return e.filter(r=>!t.has(r))}function cw(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function gC(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function _C(n){return n.data||{}}function dw(n){return n.resolve||{}}function vC(n){return"string"==typeof n.title||null===n.title}function gw(n){return tr(e=>{const t=n(e);return t?(0,un.D)(t).pipe((0,Et.U)(()=>e)):ut(e)})}let wC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===nn);return r}getResolvedTitleForRoute(t){return t.data[nh]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(bC)},providedIn:"root"}),n})(),bC=(()=>{class n extends wC{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(uc))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class rM{}class xh extends class iM{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const E_=new f.OlP("",{providedIn:"root",factory:()=>({})}),CC=new f.OlP("ROUTES");let IC=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ut(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=_o(t.loadComponent()).pipe((0,Si.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),th(()=>{this.componentLoaders.delete(t)})),i=new lp(r,()=>new cn.x).pipe(cl());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ut({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Et.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(r);let g,y,E=!1;Array.isArray(d)?y=d:(g=d.create(t).injector,y=hp(g.get(CC,[],f.XFs.Self|f.XFs.Optional)));return{routes:y.map(tC),injector:g}}),th(()=>{this.childrenLoaders.delete(r)})),u=new lp(s,()=>new cn.x).pipe(cl());return this.childrenLoaders.set(r,u),u}loadModuleFactoryOrRoutes(t){return _o(t()).pipe((0,dr.z)(r=>r instanceof f.YKP||Array.isArray(r)?ut(r):(0,un.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3),f.LFG(f.Sil))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class DC{}class wF{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function bF(n){throw n}function TC(n,e,t){return e.parse("/")}const sM={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},SC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function AC(){const n=(0,f.f3M)(fp),e=(0,f.f3M)(Oa),t=(0,f.f3M)(Ee),r=(0,f.f3M)(f.zs3),i=(0,f.f3M)(f.Sil),s=(0,f.f3M)(CC,{optional:!0})??[],u=(0,f.f3M)(E_,{optional:!0})??{},d=(0,f.f3M)(bC),g=(0,f.f3M)(wC,{optional:!0}),y=(0,f.f3M)(DC,{optional:!0}),E=(0,f.f3M)(rM,{optional:!0}),T=new Un(null,n,e,t,r,i,hp(s));return y&&(T.urlHandlingStrategy=y),E&&(T.routeReuseStrategy=E),T.titleStrategy=g??d,function oM(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,T),T}let Un=(()=>{class n{constructor(t,r,i,s,u,d,g){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new cn.x,this.errorHandler=bF,this.malformedUriErrorHandler=TC,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ut(void 0),this.urlHandlingStrategy=new wF,this.routeReuseStrategy=new xh,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=u.get(IC),this.configLoader.onLoadEndListener=P=>this.triggerEvent(new ka(P)),this.configLoader.onLoadStartListener=P=>this.triggerEvent(new u_(P)),this.ngModule=u.get(f.h0i),this.console=u.get(f.c2e);const T=u.get(f.R0b);this.isNgZoneEnabled=T instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=function sh(){return new qo(new Rt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ch(this.currentUrlTree,this.rootComponentType),this.transitions=new Yn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ni(i=>0!==i.id),(0,Et.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),tr(i=>{let s=!1,u=!1;return ut(i).pipe((0,Si.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),tr(d=>{const g=this.browserUrlTree.toString(),y=!this.navigated||d.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return mw(d.source)&&(this.browserUrlTree=d.extractedUrl),ut(d).pipe(tr(T=>{const P=this.transitions.getValue();return r.next(new vh(T.id,this.serializeUrl(T.extractedUrl),T.source,T.restoredState)),P!==this.transitions.getValue()?zr.E:Promise.resolve(T)}),function hC(n,e,t,r){return tr(i=>function uw(n,e,t,r,i){return new JA(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Et.U)(s=>({...i,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Si.b)(T=>{this.currentNavigation={...this.currentNavigation,finalUrl:T.urlAfterRedirects},i.urlAfterRedirects=T.urlAfterRedirects}),function yC(n,e,t,r,i,s){return(0,dr.z)(u=>function eM(n,e,t,r,i,s,u="emptyOnly",d="legacy"){return new Pp(n,e,t,r,i,u,d,s).recognize().pipe(tr(g=>null===g?function _F(n){return new cr.y(e=>e.error(n))}(new fC):ut(g)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,i,s).pipe((0,Et.U)(d=>({...u,targetSnapshot:d}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Si.b)(T=>{if(i.targetSnapshot=T.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!T.extras.skipLocationChange){const B=this.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);this.setBrowserUrl(B,T)}this.browserUrlTree=T.urlAfterRedirects}const P=new wp(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(T.urlAfterRedirects),T.targetSnapshot);r.next(P)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:P,extractedUrl:B,source:q,restoredState:ie,extras:ge}=d,Ue=new vh(P,this.serializeUrl(B),q,ie);r.next(Ue);const Ye=Ch(B,this.rootComponentType).snapshot;return ut(i={...d,targetSnapshot:Ye,urlAfterRedirects:B,extras:{...ge,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=d.rawUrl,d.resolve(null),zr.E}),(0,Si.b)(d=>{const g=new Sc(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(g)}),(0,Et.U)(d=>i={...d,guards:__(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function iC(n,e){return(0,dr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:u}}=t;return 0===u.length&&0===s.length?ut({...t,guardsResult:!0}):function sC(n,e,t,r){return(0,un.D)(n).pipe((0,dr.z)(i=>function ZA(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?ut(s.map(d=>{const g=Tp(e)??i,y=du(d,g);return _o(function WA(n){return n&&Pc(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,r):g.runInContext(()=>y(n,e,t,r))).pipe(Sa())})).pipe(Fc()):ut(!0)}(i.component,i.route,t,e,r)),Sa(i=>!0!==i,!0))}(u,r,i,n).pipe((0,dr.z)(d=>d&&function rC(n){return"boolean"==typeof n}(d)?function KA(n,e,t,r){return(0,un.D)(e).pipe(Bs(i=>$t(function aC(n,e){return null!==n&&e&&e(new c_(n)),ut(!0)}(i.route.parent,r),function oC(n,e){return null!==n&&e&&e(new bp(n)),ut(!0)}(i.route,r),function mF(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(u=>function jA(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>_r(()=>ut(u.guards.map(g=>{const y=Tp(u.node)??t,E=du(g,y);return _o(function zA(n){return n&&Pc(n.canActivateChild)}(E)?E.canActivateChild(r,n):y.runInContext(()=>E(r,n))).pipe(Sa())})).pipe(Fc())));return ut(s).pipe(Fc())}(n,i.path,t),function sw(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ut(!0);const i=r.map(s=>_r(()=>{const u=Tp(e)??t,d=du(s,u);return _o(function GA(n){return n&&Pc(n.canActivate)}(d)?d.canActivate(e,n):u.runInContext(()=>d(e,n))).pipe(Sa())}));return ut(i).pipe(Fc())}(n,i.route,t))),Sa(i=>!0!==i,!0))}(r,s,n,e):ut(d)),(0,Et.U)(d=>({...t,guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,Si.b)(d=>{if(i.guardsResult=d.guardsResult,Zo(d.guardsResult))throw at(0,d.guardsResult);const g=new Ac(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(g)}),ni(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),gw(d=>{if(d.guards.canActivateChecks.length)return ut(d).pipe((0,Si.b)(g=>{const y=new Mc(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(y)}),tr(g=>{let y=!1;return ut(g).pipe(function hw(n,e){return(0,dr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ut(t);let s=0;return(0,un.D)(i).pipe(Bs(u=>function fw(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!vC(i)&&(s[nh]=i.title),function nM(n,e,t,r){const i=function pw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return ut({});const s={};return(0,un.D)(i).pipe((0,dr.z)(u=>function Fp(n,e,t,r){const i=Tp(e)??r,s=du(n,i);return _o(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[u],e,t,r).pipe(Sa(),(0,Si.b)(d=>{s[u]=d}))),Km(1),function YE(n){return(0,Et.U)(()=>n)}(s),Aa(u=>Nc(u)?zr.E:Bi(u)))}(s,n,e,r).pipe((0,Et.U)(u=>(n._resolvedData=u,n.data=Cp(n,t).resolve,i&&vC(i)&&(n.data[nh]=i.title),null)))}(u.route,r,n,e)),(0,Si.b)(()=>s++),Km(1),(0,dr.z)(u=>s===i.length?ut(t):zr.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Si.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(g),this.cancelNavigationTransition(g,"",2))}}))}),(0,Si.b)(g=>{const y=new l_(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(y)}))}),gw(d=>{const g=y=>{const E=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&E.push(this.configLoader.loadComponent(y.routeConfig).pipe((0,Si.b)(T=>{y.component=T}),(0,Et.U)(()=>{})));for(const T of y.children)E.push(...g(T));return E};return pe(g(d.targetSnapshot.root)).pipe(_c(),Vs(1))}),gw(()=>this.afterPreactivation()),(0,Et.U)(d=>{const g=function k(n,e,t){const r=L(n,e._root,t?t._root:void 0);return new Ep(r,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return i={...d,targetRouterState:g}}),(0,Si.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,Et.U)(r=>(new UA(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,Si.b)({next(){s=!0},complete(){s=!0}}),th(()=>{s||u||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Aa(d=>{if(u=!0,Pr(d)){Mt(d)||(this.navigated=!0,this.restoreHistory(i,!0));const g=new $s(i.id,this.serializeUrl(i.extractedUrl),d.message,d.cancellationCode);if(r.next(g),Mt(d)){const y=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),E={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||mw(i.source)};this.scheduleNavigation(y,"imperative",null,E,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const g=new wh(i.id,this.serializeUrl(i.extractedUrl),d,i.targetSnapshot??void 0);r.next(g);try{i.resolve(this.errorHandler(d))}catch(y){i.reject(y)}}return zr.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const d={...s};delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(i.state=d)}const u=this.parseUrl(t.url);this.scheduleNavigation(u,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(tC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:u,queryParamsHandling:d,preserveFragment:g}=r,y=i||this.routerState.root,E=g?this.currentUrlTree.fragment:u;let T=null;switch(d){case"merge":T={...this.currentUrlTree.queryParams,...s};break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=s||null}return null!==T&&(T=this.removeEmptyProps(T)),tw(y,this.currentUrlTree,t,T,E??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Zo(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function aM(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new f.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...sM}:!1===r?{...SC}:r,Zo(t))return Qm(this.currentUrlTree,t,i);const s=this.parseUrl(t);return Qm(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new nr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,u){if(this.disposed)return Promise.resolve(!1);let d,g,y;u?(d=u.resolve,g=u.reject,y=u.promise):y=new Promise((P,B)=>{d=P,g=B});const E=++this.navigationId;let T;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),T=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):T=0,this.setTransition({id:E,targetPageId:T,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:d,reject:g,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(P=>Promise.reject(P))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const s=new $s(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:function(){return AC()},providedIn:"root"}),n})();function mw(n){return"imperative"!==n}class vw{}let cM=(()=>{class n{constructor(t,r,i,s,u){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(ni(t=>t instanceof nr),Bs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=(0,f.MMx)(s.providers,t,`Route: ${s.path}`));const u=s._injector??t,d=s._loadedInjector??u;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(u,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(d,s.children??s._loadedRoutes))}return(0,un.D)(i).pipe((0,ht.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ut(null);const s=i.pipe((0,dr.z)(u=>null===u?ut(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));if(r.loadComponent&&!r._loadedComponent){const u=this.loader.loadComponent(r);return(0,un.D)([s,u]).pipe((0,ht.J)())}return s})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Un),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(vw),f.LFG(IC))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qt=new f.OlP("");let ww=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof vh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof nr&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof xc&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new xc(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Rh(n,e){return{\u0275kind:n,\u0275providers:e}}function C_(n){return[{provide:CC,multi:!0,useValue:n}]}function bw(){const n=(0,f.f3M)(f.zs3);return e=>{const t=n.get(f.z2F);if(e!==t.components[0])return;const r=n.get(Un),i=n.get(xC);1===n.get(Ew)&&r.initialNavigation(),n.get(hu,null,f.XFs.Optional)?.setUpPreloading(),n.get(qt,null,f.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const xC=new f.OlP("",{factory:()=>new cn.x}),Ew=new f.OlP("",{providedIn:"root",factory:()=>1});const hu=new f.OlP("");function hM(n){return Rh(0,[{provide:hu,useExisting:cM},{provide:vw,useExisting:n}])}const fM=new f.OlP("ROUTER_FORROOT_GUARD"),SF=[Ee,{provide:fp,useClass:t_},{provide:Un,useFactory:AC},Oa,{provide:Gs,useFactory:function MC(n){return n.routerState.root},deps:[Un]},IC];function AF(){return new f.PXZ("Router",Un)}let PC=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[SF,[],C_(t),{provide:fM,useFactory:Oh,deps:[[Un,new f.FiY,new f.tp0]]},{provide:E_,useValue:r||{}},r?.useHash?{provide:ee,useClass:Ge}:{provide:ee,useClass:Me},{provide:qt,useFactory:()=>{const n=(0,f.f3M)(Un),e=(0,f.f3M)(Ll),t=(0,f.f3M)(E_);return t.scrollOffset&&e.setOffset(t.scrollOffset),new ww(n,e,t)}},r?.preloadingStrategy?hM(r.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:AF},r?.initialNavigation?gM(r):[],[{provide:Cw,useFactory:bw},{provide:f.tb,multi:!0,useExisting:Cw}]]}}static forChild(t){return{ngModule:n,providers:[C_(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fM,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[os]}),n})();function Oh(n){return"guarded"}function gM(n){return["disabled"===n.initialNavigation?Rh(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const e=(0,f.f3M)(Un);return()=>{e.setUpLocationChangeListener()}}},{provide:Ew,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Rh(2,[{provide:Ew,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:e=>{const t=e.get(z,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(s=>{const u=e.get(Un),d=e.get(xC);(function i(s){e.get(Un).events.pipe(ni(d=>d instanceof nr||d instanceof $s||d instanceof wh),(0,Et.U)(d=>d instanceof nr||d instanceof $s&&(0===d.code||1===d.code)&&null),ni(d=>null!==d),Vs(1)).subscribe(()=>{s()})})(()=>{s(!0),r=!0}),u.afterPreactivation=()=>(s(!0),r||d.closed?ut(void 0):d),u.initialNavigation()}))}}]).\u0275providers:[]]}const Cw=new f.OlP(""),FC=[];let mM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[PC.forRoot(FC),PC]}),n})();var LC=j(6461),Bp=j(4986),Up=j(6451),VC=j(3099);function D_(n,e=Ls.y){return n=n??_M,(0,Dn.e)((t,r)=>{let i,s=!0;t.subscribe((0,G.x)(r,u=>{const d=e(u);(s||!n(i,d))&&(s=!1,i=d,r.next(u))}))})}function _M(n,e){return n===e}var Iw=j(5032),Tn=j(2122),Nr=j(2011),UC=(j(9800),j(3942)),Ui=j(4859),Te=j(5861),ji=j(9681),U=j(2090),Fr=j(1877);const Tw="@firebase/database";let jp="";function Pa(n){jp=n}class Sw{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,U.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,U.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class HC{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,U.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const T_=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Sw(e)}}catch{}return new HC},Ph=T_("localStorage"),S_=T_("sessionStorage"),Hp=new Fr.Yd("@firebase/database"),$p=function(){let n=1;return function(){return n++}}(),Gp=function(n){const e=(0,U.dS)(n),t=new U.gQ;t.update(e);const r=t.digest();return U.US.encodeByteArray(r)},Uc=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Uc.apply(null,r):e+="object"==typeof r?(0,U.Wl)(r):r,e+=" "}return e};let yl=null,A_=!0;const yM=function(n,e){(0,U.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Hp.logLevel=Fr.in.VERBOSE,yl=Hp.log.bind(Hp),e&&S_.set("logging_enabled",!0)):"function"==typeof n?yl=n:(yl=null,S_.remove("logging_enabled"))},_i=function(...n){if(!0===A_&&(A_=!1,null===yl&&!0===S_.get("logging_enabled")&&yM(!0)),yl){const e=Uc.apply(null,n);yl(e)}},zp=function(n){return function(...e){_i(n,...e)}},Aw=function(...n){const e="FIREBASE INTERNAL ERROR: "+Uc(...n);Hp.error(e)},Na=function(...n){const e=`FIREBASE FATAL ERROR: ${Uc(...n)}`;throw Hp.error(e),new Error(e)},Ai=function(...n){const e="FIREBASE WARNING: "+Uc(...n);Hp.warn(e)},M_=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},vl="[MIN_NAME]",Fa="[MAX_NAME]",jc=function(n,e){if(n===e)return 0;if(n===vl||e===Fa)return-1;if(e===vl||n===Fa)return 1;{const t=R_(n),r=R_(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Mw=function(n,e){return n===e?0:n<e?-1:1},x_=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,U.Wl)(e))},$C=function(n){if("object"!=typeof n||null===n)return(0,U.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,U.Wl)(e[r]),t+=":",t+=$C(n[e[r]]);return t+="}",t},vM=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Mi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const wM=function(n){(0,U.hu)(!M_(n),"Invalid JSON number");const r=1023;let i,s,u,d,g;0===n?(s=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=d+r,u=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,u=Math.round(n/Math.pow(2,-1074))));const y=[];for(g=52;g;g-=1)y.push(u%2?1:0),u=Math.floor(u/2);for(g=11;g;g-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(i?1:0),y.reverse();const E=y.join("");let T="";for(g=0;g<64;g+=8){let P=parseInt(E.substr(g,8),2).toString(16);1===P.length&&(P="0"+P),T+=P}return T.toLowerCase()},LF=new RegExp("^-?(0*)\\d{1,10}$"),R_=function(n){if(LF.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Nh=function(n){try{n()}catch(e){setTimeout(()=>{throw Ai("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Hc=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class zC{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ai(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class xw{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(_i("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ai(e)}}let Wp=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const KC=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,k_="websocket",$c="long_polling";class Kp{constructor(e,t,r,i,s=!1,u="",d=!1,g=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=u,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ph.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ph.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Ow(n,e,t){let r;if((0,U.hu)("string"==typeof e,"typeof type must == string"),(0,U.hu)("object"==typeof t,"typeof params must == object"),e===k_)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==$c)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function O_(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Mi(t,(s,u)=>{i.push(s+"="+u)}),r+i.join("&")}class YC{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,U.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,U.p$)(this.counters_)}}const Zp={},Yp={};function P_(n){const e=n.toString();return Zp[e]||(Zp[e]=new YC),Zp[e]}class bM{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Nh(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class wl{constructor(e,t,r,i,s,u,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=u,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zp(e),this.stats_=P_(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),Ow(t,$c,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new bM(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,U.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Vw((...s)=>{const[u,d,g,y,E]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=d,this.password=g;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[u,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(u,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&KC.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){wl.forceAllow_=!0}static forceDisallow(){wl.forceDisallow_=!0}static isAvailable(){return!((0,U.Yr)()||!wl.forceAllow_&&(wl.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,U.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,U.h$)(t),i=vM(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,U.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,U.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Vw{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,U.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=$p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Vw.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(d){_i("frame writing exception"),d.stack&&_i(d.stack),_i(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||_i("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,U.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{_i("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let F_=null;typeof MozWebSocket<"u"?F_=MozWebSocket:typeof WebSocket<"u"&&(F_=WebSocket);let Gc=(()=>{class n{constructor(t,r,i,s,u,d,g){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zp(this.connId),this.stats_=P_(r),this.connURL=n.connectionURL_(r,d,g,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,u){const d={v:"5"};return!(0,U.Yr)()&&typeof location<"u"&&location.hostname&&KC.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),s&&(d.ac=s),u&&(d.p=u),Ow(t,k_,d)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ph.set("previous_websocket_failure",!0);try{let i;if((0,U.Yr)()){i={headers:{"User-Agent":`Firebase/5/${jp}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,d=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;d&&(i.proxy={origin:d})}this.mySock=new F_(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==F_&&!n.forceDisallow_}static previouslyFailed(){return Ph.isInMemoryStorage||!0===Ph.get("previous_websocket_failure")}markConnectionHealthy(){Ph.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,U.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,U.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,U.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=vM(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Bw=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[wl,Gc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Gc&&Gc.isAvailable();let i=r&&!Gc.previouslyFailed();if(t.webSocketOnly&&(r||Ai("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Gc];else{const s=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&s.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class B_{constructor(e,t,r,i,s,u,d,g,y,E){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=u,this.onReady_=d,this.onDisconnect_=g,this.onKill_=y,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zp("c:"+this.id+":"),this.transportManager_=new Bw(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Hc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=x_("t",e),r=x_("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=x_("t",e),r=x_("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=x_("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Aw("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Aw("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Ai("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Hc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Hc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ph.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Qp{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class NM{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,U.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,U.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Fh extends NM{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,U.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Fh}getInitialEvent(e){return(0,U.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Sn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function yn(){return new Sn("")}function rn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Va(n){return n.pieces_.length-n.pieceNum_}function pn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Sn(n.pieces_,e)}function Lh(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function bl(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function oI(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Sn(e,0)}function zn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Sn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Sn(t,0)}function sn(n){return n.pieceNum_>=n.pieces_.length}function as(n,e){const t=rn(n),r=rn(e);if(null===t)return e;if(t===r)return as(pn(n),pn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function LM(n,e){const t=bl(n,0),r=bl(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=jc(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function zc(n,e){if(Va(n)!==Va(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function yo(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Va(n)>Va(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class UF{constructor(e,t){this.errorPrefix_=t,this.parts_=bl(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,U.ug)(this.parts_[r]);aI(this)}}function aI(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Wc(n))}function Wc(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class $w extends NM{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new $w}getInitialEvent(e){return(0,U.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Vh=1e3;let Kc,qc=(()=>{class n extends Qp{constructor(t,r,i,s,u,d,g,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=u,this.authTokenProvider_=d,this.appCheckTokenProvider_=g,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=zp("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Vh,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,U.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");$w.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Fh.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,u={r:s,a:t,b:r};this.log_((0,U.Wl)(u)),(0,U.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new U.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:d=>{const g=d.d;"ok"===d.s?r.resolve(g):r.reject(g)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const u=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+u),this.listens.has(d)||this.listens.set(d,new Map),(0,U.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,U.hu)(!this.listens.get(d).has(u),"listen() called twice for same path/queryId.");const g={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(d).set(u,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,g=>{const y=g.d,E=g.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",g),"ok"!==E&&this.removeListen_(i,s),t.onComplete&&t.onComplete(E,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,U.r3)(t,"w")){const i=(0,U.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();Ai(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,U.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,U.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const u=s.s,d=s.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,U.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const u={p:t};s&&(u.q=i,u.t=s),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,u){this.initConnection_();const d={p:r,d:i};void 0!==u&&(d.h=u),this.outstandingPuts_.push({action:t,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,U.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Aw("Unrecognized action received from server: "+(0,U.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,U.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Vh,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Vh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Vh),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Te.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let g=!1,y=null;const E=function(){y?y.close():(g=!0,s())};t.realtime_={close:E,sendRequest:function(B){(0,U.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(B)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[B,q]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);g?_i("getToken() completed but was canceled"):(_i("getToken() completed. Creating connection."),t.authToken_=B&&B.accessToken,t.appCheckToken_=q&&q.token,y=new B_(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,ie=>{Ai(ie+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(B){t.log_("Failed to get token: "+B),g||(t.repoInfo_.nodeAdmin&&Ai(B),E())}}})()}interrupt(t){_i("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){_i("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,U.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Vh,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>$C(u)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Sn(t).toString();let s;if(this.listens.has(i)){const u=this.listens.get(i);s=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){_i("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){_i("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,U.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+jp.replace(/\./g,"-")]=1,(0,U.uI)()?t["framework.cordova"]=1:(0,U.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Fh.getInstance().currentlyOnline();return(0,U.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class an{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new an(e,t)}}class j_{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new an(vl,e),i=new an(vl,t);return 0!==this.compare(r,i)}minPost(){return an.MIN}}class gu extends j_{static get __EMPTY_NODE(){return Kc}static set __EMPTY_NODE(e){Kc=e}compare(e,t){return jc(e.name,t.name)}isDefinedOn(e){throw(0,U.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return an.MIN}maxPost(){return new an(Fa,Kc)}makePost(e,t){return(0,U.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new an(e,Kc)}toString(){return".key"}}const El=new gu;class mu{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Zc,Xo=(()=>{class n{constructor(t,r,i,s,u){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??Hi.EMPTY_NODE,this.right=u??Hi.EMPTY_NODE}copy(t,r,i,s,u){return new n(t??this.key,r??this.value,i??this.color,s??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const u=i(t,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===u?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Hi.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Hi.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Hi{constructor(e,t=Hi.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Hi(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Xo.BLACK,null,null))}remove(e){return new Hi(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Xo.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new mu(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new mu(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new mu(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new mu(this.root_,null,this.comparator_,!0,e)}}function HM(n,e){return jc(n.name,e.name)}function vo(n,e){return jc(n,e)}Hi.EMPTY_NODE=new class jM{copy(e,t,r,i,s){return this}insert(e,t,r){return new Xo(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const _u=function(n){return"number"==typeof n?"number:"+wM(n):"string:"+n},Xp=function(n){if(n.isLeafNode()){const e=n.val();(0,U.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,U.r3)(e,".sv"),"Priority must be a string or number.")}else(0,U.hu)(n===Zc||n.isEmpty(),"priority of unexpected type.");(0,U.hu)(n===Zc||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Ws,Yc,Qc,yu=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,U.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Xp(this.priorityNode_)}static set __childrenNodeConstructor(t){Ws=t}static get __childrenNodeConstructor(){return Ws}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return sn(t)?this:".priority"===rn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=rn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,U.hu)(".priority"!==i||1===Va(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(pn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+_u(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?wM(this.value_):this.value_,this.lazyHash_=Gp(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,U.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,U.hu)(s>=0,"Unknown leaf type: "+r),(0,U.hu)(u>=0,"Unknown leaf type: "+i),s===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const An=new class jh extends j_{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?jc(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return an.MIN}maxPost(){return new an(Fa,new yu("[PRIORITY-POST]",Qc))}makePost(e,t){const r=Yc(e);return new an(t,new yu("[PRIORITY-POST]",r))}toString(){return".priority"}},Hh=Math.log(2);class $h{constructor(e){this.count=parseInt(Math.log(e+1)/Hh,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Cl=function(n,e,t,r){n.sort(e);const i=function(g,y){const E=y-g;let T,P;if(0===E)return null;if(1===E)return T=n[g],P=t?t(T):T,new Xo(P,T.node,Xo.BLACK,null,null);{const B=parseInt(E/2,10)+g,q=i(g,B),ie=i(B+1,y);return T=n[B],P=t?t(T):T,new Xo(P,T.node,Xo.BLACK,q,ie)}},d=function(g){let y=null,E=null,T=n.length;const P=function(q,ie){const ge=T-q,Ue=T;T-=q;const Ye=i(ge+1,Ue),Ze=n[ge],tt=t?t(Ze):Ze;B(new Xo(tt,Ze.node,ie,null,Ye))},B=function(q){y?(y.left=q,y=q):(E=q,y=q)};for(let q=0;q<g.count;++q){const ie=g.nextBitIsOne(),ge=Math.pow(2,g.count-(q+1));ie?P(ge,Xo.BLACK):(P(ge,Xo.BLACK),P(ge,Xo.RED))}return E}(new $h(n.length));return new Hi(r||e,d)};let H_;const Xc={};class Ba{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,U.hu)(Xc&&An,"ChildrenNode.ts has not been loaded"),H_=H_||new Ba({".priority":Xc},{".priority":An}),H_}get(e){const t=(0,U.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Hi?t:null}hasIndex(e){return(0,U.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,U.hu)(e!==El,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(an.Wrap);let d,u=s.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=s.getNext();d=i?Cl(r,e.getCompare()):Xc;const g=e.toString(),y=Object.assign({},this.indexSet_);y[g]=e;const E=Object.assign({},this.indexes_);return E[g]=d,new Ba(E,y)}addToIndexes(e,t){const r=(0,U.UI)(this.indexes_,(i,s)=>{const u=(0,U.DV)(this.indexSet_,s);if((0,U.hu)(u,"Missing index implementation for "+s),i===Xc){if(u.isDefinedOn(e.node)){const d=[],g=t.getIterator(an.Wrap);let y=g.getNext();for(;y;)y.name!==e.name&&d.push(y),y=g.getNext();return d.push(e),Cl(d,u.getCompare())}return Xc}{const d=t.get(e.name);let g=i;return d&&(g=g.remove(new an(e.name,d))),g.insert(e,e.node)}});return new Ba(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,U.UI)(this.indexes_,i=>{if(i===Xc)return i;{const s=t.get(e.name);return s?i.remove(new an(e.name,s)):i}});return new Ba(r,this.indexSet_)}}let Gh,Zt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Xp(this.priorityNode_),this.children_.isEmpty()&&(0,U.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Gh||(Gh=new n(new Hi(vo),null,Ba.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Gh}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Gh:r}}getChild(t){const r=rn(t);return null===r?this:this.getImmediateChild(r).getChild(pn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,U.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new an(t,r);let s,u;r.isEmpty()?(s=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const d=s.isEmpty()?Gh:this.priorityNode_;return new n(s,d,u)}}updateChild(t,r){const i=rn(t);if(null===i)return r;{(0,U.hu)(".priority"!==rn(t)||1===Va(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(pn(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,u=!0;if(this.forEachChild(An,(d,g)=>{r[d]=g.val(t),i++,u&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):u=!1}),!t&&u&&s<2*i){const d=[];for(const g in r)d[g]=r[g];return d}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+_u(this.getPriority().val())+":"),this.forEachChild(An,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":Gp(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const u=s.getPredecessorKey(new an(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new an(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new an(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,an.Wrap);let u=s.peek();for(;null!=u&&r.compare(u,t)<0;)s.getNext(),u=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,an.Wrap);let u=s.peek();for(;null!=u&&r.compare(u,t)>0;)s.getNext(),u=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===zh?-1:0}withIndex(t){if(t===El||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===El||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(An),s=r.getIterator(An);let u=i.getNext(),d=s.getNext();for(;u&&d;){if(u.name!==d.name||!u.node.equals(d.node))return!1;u=i.getNext(),d=s.getNext()}return null===u&&null===d}return!1}return!1}}resolveIndex_(t){return t===El?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const zh=new class cI extends Zt{constructor(){super(new Hi(vo),Zt.EMPTY_NODE,Ba.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Zt.EMPTY_NODE}isEmpty(){return!1}};function rr(n,e=null){if(null===n)return Zt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,U.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new yu(n,rr(e));if(n instanceof Array){let t=Zt.EMPTY_NODE;return Mi(n,(r,i)=>{if((0,U.r3)(n,r)&&"."!==r.substring(0,1)){const s=rr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(rr(e))}{const t=[];let r=!1;if(Mi(n,(u,d)=>{if("."!==u.substring(0,1)){const g=rr(d);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new an(u,g)))}}),0===t.length)return Zt.EMPTY_NODE;const s=Cl(t,HM,u=>u.name,vo);if(r){const u=Cl(t,An.getCompare());return new Zt(s,rr(e),new Ba({".priority":u},{".priority":An}))}return new Zt(s,rr(e),Ba.Default)}}Object.defineProperties(an,{MIN:{value:new an(vl,Zt.EMPTY_NODE)},MAX:{value:new an(Fa,zh)}}),gu.__EMPTY_NODE=Zt.EMPTY_NODE,yu.__childrenNodeConstructor=Zt,function $i(n){Zc=n}(zh),function Uh(n){Qc=n}(zh),function Bh(n){Yc=n}(rr);class Ww extends j_{constructor(e){super(),this.indexPath_=e,(0,U.hu)(!sn(e)&&".priority"!==rn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?jc(e.name,t.name):s}makePost(e,t){const r=rr(e),i=Zt.EMPTY_NODE.updateChild(this.indexPath_,r);return new an(t,i)}maxPost(){const e=Zt.EMPTY_NODE.updateChild(this.indexPath_,zh);return new an(Fa,e)}toString(){return bl(this.indexPath_,0).join("/")}}const $_=new class $M extends j_{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?jc(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return an.MIN}maxPost(){return an.MAX}makePost(e,t){const r=rr(e);return new an(t,r)}toString(){return".value"}};function hI(n){return{type:"value",snapshotNode:n}}function Wh(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Jc(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function ed(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class qh{constructor(e){this.index_=e}updateChild(e,t,r,i,s,u){(0,U.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(i).equals(r.getChild(i))&&d.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(Jc(t,d)):(0,U.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?u.trackChildChange(Wh(t,r)):u.trackChildChange(ed(t,r,d))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(An,(i,s)=>{t.hasChild(i)||r.trackChildChange(Jc(i,s))}),t.isLeafNode()||t.forEachChild(An,(i,s)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(s)||r.trackChildChange(ed(i,s,u))}else r.trackChildChange(Wh(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Zt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class vu{constructor(e){this.indexedFilter_=new qh(e.getIndex()),this.index_=e.getIndex(),this.startPost_=vu.getStartPost_(e),this.endPost_=vu.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,u){return this.matches(new an(t,r))||(r=Zt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Zt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Zt.EMPTY_NODE);const s=this;return t.forEachChild(An,(u,d)=>{s.matches(new an(u,d))||(i=i.updateImmediateChild(u,Zt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class qw{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new vu(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,u){return this.rangedFilter_.matches(new an(t,r))||(r=Zt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,u):this.fullLimitUpdateChild_(e,t,r,s,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Zt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=Zt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;s.hasNext()&&u<this.limit_;){const d=s.getNext();if(this.withinDirectionalStart(d)){if(!this.withinDirectionalEnd(d))break;i=i.updateImmediateChild(d.name,d.node),u++}}}else{let s;i=t.withIndex(this.index_),i=i.updatePriority(Zt.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let u=0;for(;s.hasNext();){const d=s.getNext();u<this.limit_&&this.withinDirectionalStart(d)&&this.withinDirectionalEnd(d)?u++:i=i.updateImmediateChild(d.name,Zt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let u;if(this.reverse_){const T=this.index_.getCompare();u=(P,B)=>T(B,P)}else u=this.index_.getCompare();const d=e;(0,U.hu)(d.numChildren()===this.limit_,"");const g=new an(t,r),y=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),E=this.rangedFilter_.matches(g);if(d.hasChild(t)){const T=d.getImmediateChild(t);let P=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=P&&(P.name===t||d.hasChild(P.name));)P=i.getChildAfterChild(this.index_,P,this.reverse_);const B=null==P?1:u(P,g);if(E&&!r.isEmpty()&&B>=0)return s?.trackChildChange(ed(t,r,T)),d.updateImmediateChild(t,r);{s?.trackChildChange(Jc(t,T));const ie=d.updateImmediateChild(t,Zt.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(s?.trackChildChange(Wh(P.name,P.node)),ie.updateImmediateChild(P.name,P.node)):ie}}return r.isEmpty()?e:E&&u(y,g)>=0?(null!=s&&(s.trackChildChange(Jc(y.name,y.node)),s.trackChildChange(Wh(t,r))),d.updateImmediateChild(t,r).updateImmediateChild(y.name,Zt.EMPTY_NODE)):e}}class G_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=An}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,U.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,U.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:vl}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,U.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,U.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Fa}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,U.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===An}copy(){const e=new G_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function q_(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function K_(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function Kh(n,e){const t=n.copy();return t.index_=e,t}function Z_(n){const e={};if(n.isDefault())return e;let t;if(n.index_===An?t="$priority":n.index_===$_?t="$value":n.index_===El?t="$key":((0,U.hu)(n.index_ instanceof Ww,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,U.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,U.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,U.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,U.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,U.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function gI(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==An&&(e.i=n.index_.toString()),e}class Jp extends Qp{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=zp("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,U.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const u=Jp.getListenId_(e,r),d={};this.listens_[u]=d;const g=Z_(e._queryParams);this.restRequest_(s+".json",g,(y,E)=>{let T=E;if(404===y&&(T=null,y=null),null===y&&this.onDataUpdate_(s,T,!1,r),(0,U.DV)(this.listens_,u)===d){let P;P=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(P,null)}})}unlisten(e,t){const r=Jp.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Z_(e._queryParams),r=e._path.toString(),i=new U.BH;return this.restRequest_(r+".json",t,(s,u)=>{let d=u;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,U.xO)(t);this.log_("Sending REST request for "+u);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+u+" received. status:",d.status,"response:",d.responseText);let g=null;if(d.status>=200&&d.status<300){try{g=(0,U.cI)(d.responseText)}catch{Ai("Failed to parse JSON response for "+u+": "+d.responseText)}r(null,g)}else 401!==d.status&&404!==d.status&&Ai("Got unsuccessful REST response for "+u+" Status: "+d.status),r(d.status);r=null}},d.open("GET",u,!0),d.send()})}}class mI{constructor(){this.rootNode_=Zt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function eg(){return{value:null,children:new Map}}function td(n,e,t){if(sn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=rn(e);n.children.has(r)||n.children.set(r,eg()),td(n.children.get(r),e=pn(e),t)}}function Zw(n,e){if(sn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(An,(r,i)=>{td(n,new Sn(r),i)}),Zw(n,e)}}if(n.children.size>0){const t=rn(e);return e=pn(e),n.children.has(t)&&Zw(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Yw(n,e,t){null!==n.value?t(e,n.value):function zM(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Yw(i,new Sn(e.toString()+"/"+r),t)})}class _I{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Mi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class wI{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new _I(e);const r=1e4+2e4*Math.random();Hc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Mi(e,(i,s)=>{s>0&&(0,U.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Hc(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var qs=(()=>{return(n=qs||(qs={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",qs;var n})();function J_(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class tg{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=qs.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(sn(this.path)){if(null!=this.affectedTree.value)return(0,U.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Sn(e));return new tg(yn(),t,this.revert)}}return(0,U.hu)(rn(this.path)===e,"operationForChild called for unrelated child."),new tg(pn(this.path),this.affectedTree,this.revert)}}class ey{constructor(e,t){this.source=e,this.path=t,this.type=qs.LISTEN_COMPLETE}operationForChild(e){return sn(this.path)?new ey(this.source,yn()):new ey(this.source,pn(this.path))}}class nd{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=qs.OVERWRITE}operationForChild(e){return sn(this.path)?new nd(this.source,yn(),this.snap.getImmediateChild(e)):new nd(this.source,pn(this.path),this.snap)}}class Zh{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=qs.MERGE}operationForChild(e){if(sn(this.path)){const t=this.children.subtree(new Sn(e));return t.isEmpty()?null:t.value?new nd(this.source,yn(),t.value):new Zh(this.source,yn(),t)}return(0,U.hu)(rn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Zh(this.source,pn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Il{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(sn(e))return this.isFullyInitialized()&&!this.filtered_;const t=rn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class WM{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Yh(n,e,t,r,i,s){const u=r.filter(d=>d.type===t);u.sort((d,g)=>function KM(n,e,t){if(null==e.childName||null==t.childName)throw(0,U.g5)("Should only compare child_ events.");const r=new an(e.childName,e.snapshotNode),i=new an(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,d,g)),u.forEach(d=>{const g=function qM(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,s);i.forEach(y=>{y.respondsTo(d.type)&&e.push(y.createEvent(g,n.query_))})})}function ng(n,e){return{eventCache:n,serverCache:e}}function rg(n,e,t,r){return ng(new Il(e,t,r),n.serverCache)}function Qw(n,e,t,r){return ng(n.eventCache,new Il(e,t,r))}function ig(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function wo(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Xw;class jn{constructor(e,t=(()=>(Xw||(Xw=new Hi(Mw)),Xw))()){this.value=e,this.children=t}static fromObject(e){let t=new jn(null);return Mi(e,(r,i)=>{t=t.set(new Sn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:yn(),value:this.value};if(sn(e))return null;{const r=rn(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(pn(e),t);return null!=s?{path:zn(new Sn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(sn(e))return this;{const t=rn(e),r=this.children.get(t);return null!==r?r.subtree(pn(e)):new jn(null)}}set(e,t){if(sn(e))return new jn(t,this.children);{const r=rn(e),s=(this.children.get(r)||new jn(null)).set(pn(e),t),u=this.children.insert(r,s);return new jn(this.value,u)}}remove(e){if(sn(e))return this.children.isEmpty()?new jn(null):new jn(null,this.children);{const t=rn(e),r=this.children.get(t);if(r){const i=r.remove(pn(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new jn(null):new jn(this.value,s)}return this}}get(e){if(sn(e))return this.value;{const t=rn(e),r=this.children.get(t);return r?r.get(pn(e)):null}}setTree(e,t){if(sn(e))return t;{const r=rn(e),s=(this.children.get(r)||new jn(null)).setTree(pn(e),t);let u;return u=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new jn(this.value,u)}}fold(e){return this.fold_(yn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(zn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,yn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(sn(e))return null;{const s=rn(e),u=this.children.get(s);return u?u.findOnPath_(pn(e),zn(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,yn(),t)}foreachOnPath_(e,t,r){if(sn(e))return this;{this.value&&r(t,this.value);const i=rn(e),s=this.children.get(i);return s?s.foreachOnPath_(pn(e),zn(t,i),r):new jn(null)}}foreach(e){this.foreach_(yn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(zn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Jo{constructor(e){this.writeTree_=e}static empty(){return new Jo(new jn(null))}}function Qh(n,e,t){if(sn(e))return new Jo(new jn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const u=as(i,e);return s=s.updateChild(u,t),new Jo(n.writeTree_.set(i,s))}{const i=new jn(t),s=n.writeTree_.setTree(e,i);return new Jo(s)}}}function bI(n,e,t){let r=n;return Mi(t,(i,s)=>{r=Qh(r,zn(e,i),s)}),r}function ty(n,e){if(sn(e))return Jo.empty();{const t=n.writeTree_.setTree(e,new jn(null));return new Jo(t)}}function sg(n,e){return null!=Gi(n,e)}function Gi(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(as(t.path,e)):null}function EI(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(An,(r,i)=>{e.push(new an(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new an(r,i.value))}),e}function Dl(n,e){if(sn(e))return n;{const t=Gi(n,e);return new Jo(null!=t?new jn(t):n.writeTree_.subtree(e))}}function bo(n){return n.writeTree_.isEmpty()}function zi(n,e){return Eo(yn(),n.writeTree_,e)}function Eo(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,U.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=Eo(zn(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(zn(n,".priority"),r)),t}}function og(n,e){return nb(e,n)}function JM(n,e){if(n.snap)return yo(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&yo(zn(n.path,t),e))return!0;return!1}function ag(n){return n.visible}function II(n,e,t){let r=Jo.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const u=s.path;let d;if(s.snap)yo(t,u)?(d=as(t,u),r=Qh(r,d,s.snap)):yo(u,t)&&(d=as(u,t),r=Qh(r,yn(),s.snap.getChild(d)));else{if(!s.children)throw(0,U.g5)("WriteRecord should have .snap or .children");if(yo(t,u))d=as(t,u),r=bI(r,d,s.children);else if(yo(u,t))if(d=as(u,t),sn(d))r=bI(r,yn(),s.children);else{const g=(0,U.DV)(s.children,rn(d));if(g){const y=g.getChild(pn(d));r=Qh(r,yn(),y)}}}}}return r}function eb(n,e,t,r,i){if(r||i){const s=Dl(n.visibleWrites,e);return!i&&bo(s)?t:i||null!=t||sg(s,yn())?zi(II(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(yo(y.path,e)||yo(e,y.path))},e),t||Zt.EMPTY_NODE):null}{const s=Gi(n.visibleWrites,e);if(null!=s)return s;{const u=Dl(n.visibleWrites,e);return bo(u)?t:null!=t||sg(u,yn())?zi(u,t||Zt.EMPTY_NODE):null}}}function lg(n,e,t,r){return eb(n.writeTree,n.treePath,e,t,r)}function ug(n,e){return function ex(n,e,t){let r=Zt.EMPTY_NODE;const i=Gi(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(An,(s,u)=>{r=r.updateImmediateChild(s,u)}),r;if(t){const s=Dl(n.visibleWrites,e);return t.forEachChild(An,(u,d)=>{const g=zi(Dl(s,new Sn(u)),d);r=r.updateImmediateChild(u,g)}),EI(s).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return EI(Dl(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function ry(n,e,t,r){return function DI(n,e,t,r,i){(0,U.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=zn(e,t);if(sg(n.visibleWrites,s))return null;{const u=Dl(n.visibleWrites,s);return bo(u)?i.getChild(t):zi(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function cg(n,e){return function ny(n,e){return Gi(n.visibleWrites,e)}(n.writeTree,zn(n.treePath,e))}function iy(n,e,t){return function TI(n,e,t,r){const i=zn(e,t),s=Gi(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?zi(Dl(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function tb(n,e){return nb(zn(n.treePath,e),n.writeTree)}function nb(n,e){return{treePath:n,writeTree:e}}class MI{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,U.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,U.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,ed(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,Jc(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,Wh(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,U.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,ed(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const rb=new class xI{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class ib{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Il(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return iy(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:wo(this.viewCache_),s=function AI(n,e,t,r,i,s){return function tx(n,e,t,r,i,s,u){let d;const g=Dl(n.visibleWrites,e),y=Gi(g,yn());if(null!=y)d=y;else{if(null==t)return[];d=zi(g,t)}if(d=d.withIndex(u),d.isEmpty()||d.isLeafNode())return[];{const E=[],T=u.getCompare(),P=s?d.getReverseIteratorFrom(r,u):d.getIteratorFrom(r,u);let B=P.getNext();for(;B&&E.length<i;)0!==T(B,r)&&E.push(B),B=P.getNext();return E}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function RI(n,e,t,r,i,s){const u=e.eventCache;if(null!=cg(r,t))return e;{let d,g;if(sn(t))if((0,U.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=wo(e),T=ug(r,y instanceof Zt?y:Zt.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),T,s)}else{const y=lg(r,wo(e));d=n.filter.updateFullNode(e.eventCache.getNode(),y,s)}else{const y=rn(t);if(".priority"===y){(0,U.hu)(1===Va(t),"Can't have a priority with additional path components");const E=u.getNode();g=e.serverCache.getNode();const T=ry(r,t,E,g);d=null!=T?n.filter.updatePriority(E,T):u.getNode()}else{const E=pn(t);let T;if(u.isCompleteForChild(y)){g=e.serverCache.getNode();const P=ry(r,t,u.getNode(),g);T=null!=P?u.getNode().getImmediateChild(y).updateChild(E,P):u.getNode().getImmediateChild(y)}else T=iy(r,y,e.serverCache);d=null!=T?n.filter.updateChild(u.getNode(),y,T,E,i,s):u.getNode()}}return rg(e,d,u.isFullyInitialized()||sn(t),n.filter.filtersNodes())}}function sy(n,e,t,r,i,s,u,d){const g=e.serverCache;let y;const E=u?n.filter:n.filter.getIndexedFilter();if(sn(t))y=E.updateFullNode(g.getNode(),r,null);else if(E.filtersNodes()&&!g.isFiltered()){const B=g.getNode().updateChild(t,r);y=E.updateFullNode(g.getNode(),B,null)}else{const B=rn(t);if(!g.isCompleteForPath(t)&&Va(t)>1)return e;const q=pn(t),ge=g.getNode().getImmediateChild(B).updateChild(q,r);y=".priority"===B?E.updatePriority(g.getNode(),ge):E.updateChild(g.getNode(),B,ge,q,rb,null)}const T=Qw(e,y,g.isFullyInitialized()||sn(t),E.filtersNodes());return RI(n,T,t,i,new ib(i,T,s),d)}function sb(n,e,t,r,i,s,u){const d=e.eventCache;let g,y;const E=new ib(i,e,s);if(sn(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,u),g=rg(e,y,!0,n.filter.filtersNodes());else{const T=rn(t);if(".priority"===T)y=n.filter.updatePriority(e.eventCache.getNode(),r),g=rg(e,y,d.isFullyInitialized(),d.isFiltered());else{const P=pn(t),B=d.getNode().getImmediateChild(T);let q;if(sn(P))q=r;else{const ie=E.getCompleteChild(T);q=null!=ie?".priority"===Lh(P)&&ie.getChild(oI(P)).isEmpty()?ie:ie.updateChild(P,r):Zt.EMPTY_NODE}g=B.equals(q)?e:rg(e,n.filter.updateChild(d.getNode(),T,q,P,E,u),d.isFullyInitialized(),n.filter.filtersNodes())}}return g}function kI(n,e){return n.eventCache.isCompleteForChild(e)}function OI(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function ob(n,e,t,r,i,s,u,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,g=e;y=sn(t)?r:new jn(null).setTree(t,r);const E=e.serverCache.getNode();return y.children.inorderTraversal((T,P)=>{if(E.hasChild(T)){const q=OI(0,e.serverCache.getNode().getImmediateChild(T),P);g=sy(n,g,new Sn(T),q,i,s,u,d)}}),y.children.inorderTraversal((T,P)=>{const B=!e.serverCache.isCompleteForChild(T)&&null===P.value;if(!E.hasChild(T)&&!B){const ie=OI(0,e.serverCache.getNode().getImmediateChild(T),P);g=sy(n,g,new Sn(T),ie,i,s,u,d)}}),g}class cx{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new qh(r.getIndex()),s=function z_(n){return n.loadsAllData()?new qh(n.getIndex()):n.hasLimit()?new qw(n):new vu(n)}(r);this.processor_=function nx(n){return{filter:n}}(s);const u=t.serverCache,d=t.eventCache,g=i.updateFullNode(Zt.EMPTY_NODE,u.getNode(),null),y=s.updateFullNode(Zt.EMPTY_NODE,d.getNode(),null),E=new Il(g,u.isFullyInitialized(),i.filtersNodes()),T=new Il(y,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=ng(T,E),this.eventGenerator_=new WM(this.query_)}get query(){return this.query_}}function PI(n,e){const t=wo(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!sn(e)&&!t.getImmediateChild(rn(e)).isEmpty())?t.getChild(e):null}function ab(n){return 0===n.eventRegistrations_.length}function lb(n,e,t){const r=[];if(t){(0,U.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const u=s.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const u=n.eventRegistrations_[s];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function ub(n,e,t,r){e.type===qs.MERGE&&null!==e.source.queryId&&((0,U.hu)(wo(n.viewCache_),"We should always have a full cache before handling merges"),(0,U.hu)(ig(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function ix(n,e,t,r,i){const s=new MI;let u,d;if(t.type===qs.OVERWRITE){const y=t;y.source.fromUser?u=sb(n,e,y.path,y.snap,r,i,s):((0,U.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered()&&!sn(y.path),u=sy(n,e,y.path,y.snap,r,i,d,s))}else if(t.type===qs.MERGE){const y=t;y.source.fromUser?u=function ox(n,e,t,r,i,s,u){let d=e;return r.foreach((g,y)=>{const E=zn(t,g);kI(e,rn(E))&&(d=sb(n,d,E,y,i,s,u))}),r.foreach((g,y)=>{const E=zn(t,g);kI(e,rn(E))||(d=sb(n,d,E,y,i,s,u))}),d}(n,e,y.path,y.children,r,i,s):((0,U.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered(),u=ob(n,e,y.path,y.children,r,i,d,s))}else if(t.type===qs.ACK_USER_WRITE){const y=t;u=y.revert?function ux(n,e,t,r,i,s){let u;if(null!=cg(r,t))return e;{const d=new ib(r,e,i),g=e.eventCache.getNode();let y;if(sn(t)||".priority"===rn(t)){let E;if(e.serverCache.isFullyInitialized())E=lg(r,wo(e));else{const T=e.serverCache.getNode();(0,U.hu)(T instanceof Zt,"serverChildren would be complete if leaf node"),E=ug(r,T)}y=n.filter.updateFullNode(g,E,s)}else{const E=rn(t);let T=iy(r,E,e.serverCache);null==T&&e.serverCache.isCompleteForChild(E)&&(T=g.getImmediateChild(E)),y=null!=T?n.filter.updateChild(g,E,T,pn(t),d,s):e.eventCache.getNode().hasChild(E)?n.filter.updateChild(g,E,Zt.EMPTY_NODE,pn(t),d,s):g,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=lg(r,wo(e)),u.isLeafNode()&&(y=n.filter.updateFullNode(y,u,s)))}return u=e.serverCache.isFullyInitialized()||null!=cg(r,yn()),rg(e,y,u,n.filter.filtersNodes())}}(n,e,y.path,r,i,s):function ax(n,e,t,r,i,s,u){if(null!=cg(i,t))return e;const d=e.serverCache.isFiltered(),g=e.serverCache;if(null!=r.value){if(sn(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return sy(n,e,t,g.getNode().getChild(t),i,s,d,u);if(sn(t)){let y=new jn(null);return g.getNode().forEachChild(El,(E,T)=>{y=y.set(new Sn(E),T)}),ob(n,e,t,y,i,s,d,u)}return e}{let y=new jn(null);return r.foreach((E,T)=>{const P=zn(t,E);g.isCompleteForPath(P)&&(y=y.set(E,g.getNode().getChild(P)))}),ob(n,e,t,y,i,s,d,u)}}(n,e,y.path,y.affectedTree,r,i,s)}else{if(t.type!==qs.LISTEN_COMPLETE)throw(0,U.g5)("Unknown operation type: "+t.type);u=function lx(n,e,t,r,i){const s=e.serverCache;return RI(n,Qw(e,s.getNode(),s.isFullyInitialized()||sn(t),s.isFiltered()),t,r,rb,i)}(n,e,t.path,r,s)}const g=s.getChanges();return function sx(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=ig(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(hI(ig(e)))}}(e,u,g),{viewCache:u,changes:g}}(n.processor_,i,e,t,r);return function rx(n,e){(0,U.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,U.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,U.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,cb(n,s.changes,s.viewCache.eventCache.getNode(),null)}function cb(n,e,t,r){return function si(n,e,t,r){const i=[],s=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&s.push(function GM(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),Yh(n,i,"child_removed",e,r,t),Yh(n,i,"child_added",e,r,t),Yh(n,i,"child_moved",s,r,t),Yh(n,i,"child_changed",e,r,t),Yh(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let dg,ay;class db{constructor(){this.views=new Map}}function pb(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,U.hu)(null!=s,"SyncTree gave us an op for an invalid query."),ub(s,e,t,r)}{let s=[];for(const u of n.views.values())s=s.concat(ub(u,e,t,r));return s}}function LI(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let d=lg(t,i?r:null),g=!1;d?g=!0:r instanceof Zt?(d=ug(t,r),g=!1):(d=Zt.EMPTY_NODE,g=!1);const y=ng(new Il(d,g,!1),new Il(r,i,!1));return new cx(e,y)}return u}function oy(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function id(n,e){let t=null;for(const r of n.views.values())t=t||PI(r,e);return t}function gb(n,e){return e._queryParams.loadsAllData()?kt(n):n.views.get(e._queryIdentifier)}function mb(n,e){return null!=gb(n,e)}function sd(n){return null!=kt(n)}function kt(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Jh=1;class VI{constructor(e){this.listenProvider_=e,this.syncPointTree_=new jn(null),this.pendingWriteTree_=function SI(){return{visibleWrites:Jo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ef(n,e,t,r,i){return function CI(n,e,t,r,i){(0,U.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Qh(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?tf(n,new nd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Pn(n,e,t=!1){const r=function QM(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function XM(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,U.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const d=n.allWrites[u];d.visible&&(u>=t&&JM(d,r.path)?i=!1:yo(r.path,d.path)&&(s=!0)),u--}return!!i&&(s?(function Jw(n){n.visibleWrites=II(n.allWrites,ag,yn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=ty(n.visibleWrites,r.path):Mi(r.children,g=>{n.visibleWrites=ty(n.visibleWrites,zn(r.path,g))}),!0))}(n.pendingWriteTree_,e)){let s=new jn(null);return null!=r.snap?s=s.set(yn(),!0):Mi(r.children,u=>{s=s.set(new Sn(u),!0)}),tf(n,new tg(r.path,s,t))}return[]}function uy(n,e,t){return tf(n,new nd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function hg(n,e,t,r,i=!1){const s=e._path,u=n.syncPointTree_.get(s);let d=[];if(u&&("default"===e._queryIdentifier||mb(u,e))){const g=function HF(n,e,t,r){const i=e._queryIdentifier,s=[];let u=[];const d=sd(n);if("default"===i)for(const[g,y]of n.views.entries())u=u.concat(lb(y,t,r)),ab(y)&&(n.views.delete(g),y.query._queryParams.loadsAllData()||s.push(y.query));else{const g=n.views.get(i);g&&(u=u.concat(lb(g,t,r)),ab(g)&&(n.views.delete(i),g.query._queryParams.loadsAllData()||s.push(g.query)))}return d&&!sd(n)&&s.push(new(function fb(){return(0,U.hu)(dg,"Reference.ts has not been loaded"),dg}())(e._repo,e._path)),{removed:s,events:u}}(u,e,t,r);(function rd(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const y=g.removed;if(d=g.events,!i){const E=-1!==y.findIndex(P=>P._queryParams.loadsAllData()),T=n.syncPointTree_.findOnPath(s,(P,B)=>sd(B));if(E&&!T){const P=n.syncPointTree_.subtree(s);if(!P.isEmpty()){const B=function _x(n){return n.fold((e,t,r)=>{if(t&&sd(t))return[kt(t)];{let i=[];return t&&(i=oy(t)),Mi(r,(s,u)=>{i=i.concat(u)}),i}})}(P);for(let q=0;q<B.length;++q){const ie=B[q],ge=ie.query,Ue=$I(n,ie);n.listenProvider_.startListening(Tl(ge),fg(n,ge),Ue.hashFn,Ue.onComplete)}}}!T&&y.length>0&&!r&&(E?n.listenProvider_.stopListening(Tl(e),null):y.forEach(P=>{const B=n.queryToTagMap.get(od(P));n.listenProvider_.stopListening(Tl(P),B)}))}!function pg(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=od(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,y)}return d}function _b(n,e,t,r){const i=hy(n,r);if(null!=i){const s=fy(i),u=s.path,d=s.queryId,g=as(u,e);return py(n,u,new nd(J_(d),g,t))}return[]}function cy(n,e,t,r=!1){const i=e._path;let s=null,u=!1;n.syncPointTree_.foreachOnPath(i,(P,B)=>{const q=as(P,i);s=s||id(B,q),u=u||sd(B)});let g,d=n.syncPointTree_.get(i);d?(u=u||sd(d),s=s||id(d,yn())):(d=new db,n.syncPointTree_=n.syncPointTree_.set(i,d)),null!=s?g=!0:(g=!1,s=Zt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((B,q)=>{const ie=id(q,yn());ie&&(s=s.updateImmediateChild(B,ie))}));const y=mb(d,e);if(!y&&!e._queryParams.loadsAllData()){const P=od(e);(0,U.hu)(!n.queryToTagMap.has(P),"View does not exist, but we have a tag");const B=function yx(){return Jh++}();n.queryToTagMap.set(P,B),n.tagToQueryMap.set(B,P)}let T=function Xh(n,e,t,r,i,s){const u=LI(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function NI(n,e){n.eventRegistrations_.push(e)}(u,t),function FI(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(An,(s,u)=>{r.push(Wh(s,u))}),t.isFullyInitialized()&&r.push(hI(t.getNode())),cb(n,r,t.getNode(),e)}(u,t)}(d,e,t,og(n.pendingWriteTree_,i),s,g);if(!y&&!u&&!r){const P=gb(d,e);T=T.concat(function vx(n,e,t){const r=e._path,i=fg(n,e),s=$I(n,t),u=n.listenProvider_.startListening(Tl(e),i,s.hashFn,s.onComplete),d=n.syncPointTree_.subtree(r);if(i)(0,U.hu)(!sd(d.value),"If we're adding a query, it shouldn't be shadowed");else{const g=d.fold((y,E,T)=>{if(!sn(y)&&E&&sd(E))return[kt(E).query];{let P=[];return E&&(P=P.concat(oy(E).map(B=>B.query))),Mi(T,(B,q)=>{P=P.concat(q)}),P}});for(let y=0;y<g.length;++y){const E=g[y];n.listenProvider_.stopListening(Tl(E),fg(n,E))}}return u}(n,e,P))}return T}function dy(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(u,d)=>{const y=id(d,as(u,e));if(y)return y});return eb(i,e,s,t,!0)}function tf(n,e){return nf(e,n.syncPointTree_,null,og(n.pendingWriteTree_,yn()))}function nf(n,e,t,r){if(sn(n.path))return HI(n,e,t,r);{const i=e.get(yn());null==t&&null!=i&&(t=id(i,yn()));let s=[];const u=rn(n.path),d=n.operationForChild(u),g=e.children.get(u);if(g&&d){const y=t?t.getImmediateChild(u):null,E=tb(r,u);s=s.concat(nf(d,g,y,E))}return i&&(s=s.concat(pb(i,n,r,t))),s}}function HI(n,e,t,r){const i=e.get(yn());null==t&&null!=i&&(t=id(i,yn()));let s=[];return e.children.inorderTraversal((u,d)=>{const g=t?t.getImmediateChild(u):null,y=tb(r,u),E=n.operationForChild(u);E&&(s=s.concat(HI(E,d,g,y)))}),i&&(s=s.concat(pb(i,n,r,t))),s}function $I(n,e){const t=e.query,r=fg(n,t);return{hashFn:()=>(function dx(n){return n.viewCache_.serverCache.getNode()}(e)||Zt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function gx(n,e,t){const r=hy(n,t);if(r){const i=fy(r),s=i.path,u=i.queryId,d=as(s,e);return py(n,s,new ey(J_(u),d))}return[]}(n,t._path,r):function UI(n,e){return tf(n,new ey({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function FF(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return hg(n,t,null,s)}}}}function fg(n,e){const t=od(e);return n.queryToTagMap.get(t)}function od(n){return n._path.toString()+"$"+n._queryIdentifier}function hy(n,e){return n.tagToQueryMap.get(e)}function fy(n){const e=n.indexOf("$");return(0,U.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Sn(n.substr(0,e))}}function py(n,e,t){const r=n.syncPointTree_.get(e);return(0,U.hu)(r,"Missing sync point for query tag that we're tracking"),pb(r,t,og(n.pendingWriteTree_,e),null)}function Tl(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function px(){return(0,U.hu)(ay,"Reference.ts has not been loaded"),ay}())(n._repo,n._path):n}class yb{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new yb(t)}node(){return this.node_}}class gy{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=zn(this.path_,e);return new gy(this.syncTree_,t)}node(){return dy(this.syncTree_,this.path_)}}const vb=function(n,e,t){return n&&"object"==typeof n?((0,U.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?wx(n[".sv"],e,t):"object"==typeof n[".sv"]?zI(n[".sv"],e):void(0,U.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},wx=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,U.hu)(!1,"Unexpected server value: "+n)},zI=function(n,e,t){n.hasOwnProperty("increment")||(0,U.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,U.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,U.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},WI=function(n,e,t,r){return qI(e,new gy(t,n),r)},wb=function(n,e,t){return qI(n,new yb(e),t)};function qI(n,e,t){const r=n.getPriority().val(),i=vb(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const u=n,d=vb(u.getValue(),e,t);return d!==u.getValue()||i!==u.getPriority().val()?new yu(d,rr(i)):n}{const u=n;return s=u,i!==u.getPriority().val()&&(s=s.updatePriority(new yu(i))),u.forEachChild(An,(d,g)=>{const y=qI(g,e.getImmediateChild(d),t);y!==g&&(s=s.updateImmediateChild(d,y))}),s}}class KI{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function bb(n,e){let t=e instanceof Sn?e:new Sn(e),r=n,i=rn(t);for(;null!==i;){const s=(0,U.DV)(r.node.children,i)||{children:{},childCount:0};r=new KI(i,r,s),t=pn(t),i=rn(t)}return r}function rf(n){return n.node.value}function my(n,e){n.node.value=e,Cb(n)}function gg(n){return n.node.childCount>0}function _y(n,e){Mi(n.node.children,(t,r)=>{e(new KI(t,n,r))})}function Eb(n,e,t,r){t&&!r&&e(n),_y(n,i=>{Eb(i,e,!0,r)}),t&&r&&e(n)}function _g(n){return new Sn(null===n.parent?n.name:_g(n.parent)+"/"+n.name)}function Cb(n){null!==n.parent&&function Ex(n,e,t){const r=function bx(n){return void 0===rf(n)&&!gg(n)}(t),i=(0,U.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Cb(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Cb(n))}(n.parent,n.name,n)}const Cx=/[\[\].#$\/\u0000-\u001F\u007F]/,Ix=/[\[\].#$\u0000-\u001F\u007F]/,yy=10485760,vy=function(n){return"string"==typeof n&&0!==n.length&&!Cx.test(n)},ZI=function(n){return"string"==typeof n&&0!==n.length&&!Ix.test(n)},vg=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!M_(n)||n&&"object"==typeof n&&(0,U.r3)(n,".sv")},ea=function(n,e,t,r){r&&void 0===e||wg((0,U.gK)(n,"value"),e,t)},wg=function(n,e,t){const r=t instanceof Sn?new UF(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Wc(r));if("function"==typeof e)throw new Error(n+"contains a function "+Wc(r)+" with contents = "+e.toString());if(M_(e))throw new Error(n+"contains "+e.toString()+" "+Wc(r));if("string"==typeof e&&e.length>yy/3&&(0,U.ug)(e)>yy)throw new Error(n+"contains a string greater than "+yy+" utf8 bytes "+Wc(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(Mi(e,(u,d)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(s=!0,!vy(u)))throw new Error(n+" contains an invalid key ("+u+") "+Wc(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function VM(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,U.ug)(e),aI(n)})(r,u),wg(n,d,r),function jF(n){const e=n.parts_.pop();n.byteLength_-=(0,U.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+Wc(r)+" in addition to actual children.")}},QI=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,U.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];Mi(e,(u,d)=>{const g=new Sn(u);if(wg(i,d,zn(t,g)),".priority"===Lh(g)&&!vg(d))throw new Error(i+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(g)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=bl(r);for(let u=0;u<s.length;u++)if((".priority"!==s[u]||u!==s.length-1)&&!vy(s[u]))throw new Error(n+"contains an invalid key ("+s[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(LM);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&yo(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},wy=function(n,e,t){if(!t||void 0!==e){if(M_(e))throw new Error((0,U.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!vg(e))throw new Error((0,U.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},bg=function(n,e,t,r){if(!(r&&void 0===t||vy(t)))throw new Error((0,U.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ad=function(n,e,t,r){if(!(r&&void 0===t||ZI(t)))throw new Error((0,U.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ks=function(n,e){if(".info"===rn(e))throw new Error(n+" failed = Can't modify data under /.info/")},Ib=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!vy(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ZI(n)}(t))throw new Error((0,U.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Tx{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function by(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!zc(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function XI(n,e,t){by(n,t),JI(n,r=>zc(r,e))}function ls(n,e,t){by(n,t),JI(n,r=>yo(r,e)||yo(e,r))}function JI(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(eD(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function eD(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();yl&&_i("event: "+t.toString()),Nh(r)}}}const tD="repo_interrupt";class Ax{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Tx,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=eg(),this.transactionQueueTree_=new KI,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function nD(n){const t=n.infoData_.getNode(new Sn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Eg(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:nD(n)})}function rD(n,e,t,r,i){n.dataUpdateCount++;const s=new Sn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const g=(0,U.UI)(t,y=>rr(y));u=function jI(n,e,t,r){const i=hy(n,r);if(i){const s=fy(i),u=s.path,d=s.queryId,g=as(u,e),y=jn.fromObject(t);return py(n,u,new Zh(J_(d),g,y))}return[]}(n.serverSyncTree_,s,g,i)}else{const g=rr(t);u=_b(n.serverSyncTree_,s,g,i)}else if(r){const g=(0,U.UI)(t,y=>rr(y));u=function BI(n,e,t){const r=jn.fromObject(t);return tf(n,new Zh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,g)}else{const g=rr(t);u=uy(n.serverSyncTree_,s,g)}let d=s;u.length>0&&(d=ld(n,s)),ls(n.eventQueue_,d,u)}function iD(n,e){Ey(n,"connected",e),!1===e&&function kx(n){sf(n,"onDisconnectEvents");const e=Eg(n),t=eg();Yw(n.onDisconnect_,yn(),(i,s)=>{const u=WI(i,s,n.serverSyncTree_,e);td(t,i,u)});let r=[];Yw(t,yn(),(i,s)=>{r=r.concat(uy(n.serverSyncTree_,i,s));const u=Ig(n,i);ld(n,u)}),n.onDisconnect_=eg(),ls(n.eventQueue_,yn(),r)}(n)}function Ey(n,e,t){const r=new Sn("/.info/"+e),i=rr(t);n.infoData_.updateSnapshot(r,i);const s=uy(n.infoSyncTree_,r,i);ls(n.eventQueue_,r,s)}function Cy(n){return n.nextWriteId_++}function Iy(n,e,t,r,i){sf(n,"set",{path:e.toString(),value:t,priority:r});const s=Eg(n),u=rr(t,r),d=dy(n.serverSyncTree_,e),g=wb(u,d,s),y=Cy(n),E=ef(n.serverSyncTree_,e,g,y,!0);by(n.eventQueue_,E),n.server_.put(e.toString(),u.val(!0),(P,B)=>{const q="ok"===P;q||Ai("set at "+e+" failed: "+P);const ie=Pn(n.serverSyncTree_,y,!q);ls(n.eventQueue_,e,ie),Sl(0,i,P,B)});const T=Ig(n,e);ld(n,T),ls(n.eventQueue_,T,[])}function Ox(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Zw(n.onDisconnect_,e),Sl(0,t,r,i)})}function Dy(n,e,t,r){const i=rr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,u)=>{"ok"===s&&td(n.onDisconnect_,e,i),Sl(0,r,s,u)})}function Sb(n,e,t){let r;r=".info"===rn(e._path)?hg(n.infoSyncTree_,e,t):hg(n.serverSyncTree_,e,t),XI(n.eventQueue_,e._path,r)}function aD(n){n.persistentConnection_&&n.persistentConnection_.interrupt(tD)}function sf(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),_i(t,...e)}function Sl(n,e,t,r){e&&Nh(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const u=new Error(s);u.code=i,e(u)}})}function Ty(n,e,t){return dy(n.serverSyncTree_,e,t)||Zt.EMPTY_NODE}function Sy(n,e=n.transactionQueueTree_){if(e||Cg(n,e),rf(e)){const t=Ay(n,e);(0,U.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function $F(n,e,t){const r=t.map(y=>y.currentWriteId),i=Ty(n,e,r);let s=i;const u=i.hash();for(let y=0;y<t.length;y++){const E=t[y];(0,U.hu)(0===E.status,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const T=as(e,E.path);s=s.updateChild(T,E.currentOutputSnapshotRaw)}const d=s.val(!0),g=e;n.server_.put(g.toString(),d,y=>{sf(n,"transaction put response",{path:g.toString(),status:y});let E=[];if("ok"===y){const T=[];for(let P=0;P<t.length;P++)t[P].status=2,E=E.concat(Pn(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&T.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();Cg(n,bb(n.transactionQueueTree_,e)),Sy(n,n.transactionQueueTree_),ls(n.eventQueue_,e,E);for(let P=0;P<T.length;P++)Nh(T[P])}else{if("datastale"===y)for(let T=0;T<t.length;T++)t[T].status=3===t[T].status?4:0;else{Ai("transaction at "+g.toString()+" failed: "+y);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=y}ld(n,e)}},u)}(n,_g(e),t)}else gg(e)&&_y(e,t=>{Sy(n,t)})}function ld(n,e){const t=lD(n,e),r=_g(t);return function Mb(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const g=e[d],y=as(t,g.path);let T,E=!1;if((0,U.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)E=!0,T=g.abortReason,i=i.concat(Pn(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=25)E=!0,T="maxretry",i=i.concat(Pn(n.serverSyncTree_,g.currentWriteId,!0));else{const P=Ty(n,g.path,u);g.currentInputSnapshot=P;const B=e[d].update(P.val());if(void 0!==B){wg("transaction failed: Data returned ",B,g.path);let q=rr(B);"object"==typeof B&&null!=B&&(0,U.r3)(B,".priority")||(q=q.updatePriority(P.getPriority()));const ge=g.currentWriteId,Ue=Eg(n),Ye=wb(q,P,Ue);g.currentOutputSnapshotRaw=q,g.currentOutputSnapshotResolved=Ye,g.currentWriteId=Cy(n),u.splice(u.indexOf(ge),1),i=i.concat(ef(n.serverSyncTree_,g.path,Ye,g.currentWriteId,g.applyLocally)),i=i.concat(Pn(n.serverSyncTree_,ge,!0))}else E=!0,T="nodata",i=i.concat(Pn(n.serverSyncTree_,g.currentWriteId,!0))}ls(n.eventQueue_,t,i),i=[],E&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&r.push("nodata"===T?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(T),!1,null)))}Cg(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)Nh(r[d]);Sy(n,n.transactionQueueTree_)}(n,Ay(n,t),r),r}function lD(n,e){let t,r=n.transactionQueueTree_;for(t=rn(e);null!==t&&void 0===rf(r);)r=bb(r,t),t=rn(e=pn(e));return r}function Ay(n,e){const t=[];return uD(n,e,t),t.sort((r,i)=>r.order-i.order),t}function uD(n,e,t){const r=rf(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);_y(e,i=>{uD(n,i,t)})}function Cg(n,e){const t=rf(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,my(e,t.length>0?t:void 0)}_y(e,r=>{Cg(n,r)})}function Ig(n,e){const t=_g(lD(n,e)),r=bb(n.transactionQueueTree_,e);return function mg(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{My(n,i)}),My(n,r),Eb(r,i=>{My(n,i)}),t}function My(n,e){const t=rf(e);if(t){const r=[];let i=[],s=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,U.hu)(s===u-1,"All SENT items should be at beginning of queue."),s=u,t[u].status=3,t[u].abortReason="set"):((0,U.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(Pn(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===s?my(e,void 0):t.length=s+1,ls(n.eventQueue_,_g(e),i);for(let u=0;u<r.length;u++)Nh(r[u])}}const xy=function(n,e){const t=Px(n),r=t.namespace;return"firebase.com"===t.domain&&Na(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Na("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ai("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Kp(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Sn(t.pathString)}},Px=function(n){let e="",t="",r="",i="",s="",u=!0,d="https",g=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(d=n.substring(0,y-1),n=n.substring(y+2));let E=n.indexOf("/");-1===E&&(E=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),e=n.substring(0,Math.min(E,T)),E<T&&(i=function cD(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(E,T)));const P=function dD(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ai(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,T)));y=e.indexOf(":"),y>=0?(u="https"===d||"wss"===d,g=parseInt(e.substring(y+1),10)):y=e.length;const B=e.slice(0,y);if("localhost"===B.toLowerCase())t="localhost";else if(B.split(".").length<=2)t=B;else{const q=e.indexOf(".");r=e.substring(0,q).toLowerCase(),t=e.substring(q+1),s=r}"ns"in P&&(s=P.ns)}return{host:e,port:g,domain:t,subdomain:r,secure:u,scheme:d,pathString:i,namespace:s}},hD="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Nx=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=hD.charAt(t%64),t=Math.floor(t/64);(0,U.hu)(0===t,"Cannot push at time == 0");let u=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=hD.charAt(e[i]);return(0,U.hu)(20===u.length,"nextPushId: Length should be 20."),u}}();class fD{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,U.Wl)(this.snapshot.exportVal())}}class xb{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class pD{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,U.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Rb{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new U.BH;return Ox(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ks("OnDisconnect.remove",this._path);const e=new U.BH;return Dy(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ks("OnDisconnect.set",this._path),ea("OnDisconnect.set",e,this._path,!1);const t=new U.BH;return Dy(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ks("OnDisconnect.setWithPriority",this._path),ea("OnDisconnect.setWithPriority",e,this._path,!1),wy("OnDisconnect.setWithPriority",t,!1);const r=new U.BH;return function Db(n,e,t,r,i){const s=rr(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(u,d)=>{"ok"===u&&td(n.onDisconnect_,e,s),Sl(0,i,u,d)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Ks("OnDisconnect.update",this._path),QI("OnDisconnect.update",e,this._path,!1);const t=new U.BH;return function oD(n,e,t,r){if((0,U.xb)(t))return _i("onDisconnect().update() called with empty data.  Don't do anything."),void Sl(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&Mi(t,(u,d)=>{const g=rr(d);td(n.onDisconnect_,zn(e,u),g)}),Sl(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class bs{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return sn(this._path)?null:Lh(this._path)}get ref(){return new Co(this._repo,this._path)}get _queryIdentifier(){const e=gI(this._queryParams),t=$C(e);return"{}"===t?"default":t}get _queryObject(){return gI(this._queryParams)}isEqual(e){if(!((e=(0,U.m9)(e))instanceof bs))return!1;const t=this._repo===e._repo,r=zc(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function U_(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Ry(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function ud(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===El){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==vl)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Fa)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===An){if(null!=e&&!vg(e)||null!=t&&!vg(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,U.hu)(n.getIndex()instanceof Ww||n.getIndex()===$_,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function kb(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Co extends bs{constructor(e,t){super(e,t,new G_,!1)}get parent(){const e=oI(this._path);return null===e?null:new Co(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class cd{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Sn(e),r=dd(this.ref,e);return new cd(this._node.getChild(t),r,An)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new cd(i,dd(this.ref,r),An)))}hasChild(e){const t=new Sn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function gD(n,e){return(n=(0,U.m9)(n))._checkNotDeleted("ref"),void 0!==e?dd(n._root,e):n._root}function Ob(n,e){(n=(0,U.m9)(n))._checkNotDeleted("refFromURL");const t=xy(e,n._repo.repoInfo_.nodeAdmin);Ib("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Na("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),gD(n,t.path.toString())}function dd(n,e){return null===rn((n=(0,U.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ad("child","path",t,!1)):ad("child","path",e,!1),new Co(n._repo,zn(n._path,e));var t}function Pb(n,e){n=(0,U.m9)(n),Ks("set",n._path),ea("set",e,n._path,!1);const t=new U.BH;return Iy(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function Ux(n,e){QI("update",e,n._path,!1);const t=new U.BH;return function Rx(n,e,t,r){sf(n,"update",{path:e.toString(),value:t});let i=!0;const s=Eg(n),u={};if(Mi(t,(d,g)=>{i=!1,u[d]=WI(zn(e,d),rr(g),n.serverSyncTree_,s)}),i)_i("update() called with empty data.  Don't do anything."),Sl(0,r,"ok",void 0);else{const d=Cy(n),g=function ly(n,e,t,r){!function YM(n,e,t,r){(0,U.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=bI(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=jn.fromObject(t);return tf(n,new Zh({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,d);by(n.eventQueue_,g),n.server_.merge(e.toString(),t,(y,E)=>{const T="ok"===y;T||Ai("update at "+e+" failed: "+y);const P=Pn(n.serverSyncTree_,d,!T),B=P.length>0?ld(n,e):e;ls(n.eventQueue_,B,P),Sl(0,r,y,E)}),Mi(t,y=>{const E=Ig(n,zn(e,y));ld(n,E)}),ls(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function Dg(n){n=(0,U.m9)(n);const e=new pD(()=>{}),t=new lf(e);return function xx(n,e,t){const r=function mx(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,E)=>{const T=as(y,t);r=r||id(E,T)});let i=n.syncPointTree_.get(t);i?r=r||id(i,yn()):(i=new db,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,u=s?new Il(r,!0,!1):null;return function hx(n){return ig(n.viewCache_)}(LI(i,e,og(n.pendingWriteTree_,e._path),s?u.getNode():Zt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=rr(i).withIndex(e._queryParams.getIndex());let u;if(cy(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())u=uy(n.serverSyncTree_,e._path,s);else{const d=fg(n.serverSyncTree_,e);u=_b(n.serverSyncTree_,e._path,s,d)}return ls(n.eventQueue_,e._path,u),hg(n.serverSyncTree_,e,t,null,!0),s},i=>(sf(n,"get for query "+(0,U.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new cd(r,new Co(n._repo,n._path),n._queryParams.getIndex()))}class lf{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new fD("value",this,new cd(e.snapshotNode,new Co(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new xb(this,e,t):null}matches(e){return e instanceof lf&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Tg{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new xb(this,e,t):null}createEvent(e,t){(0,U.hu)(null!=e.childName,"Child events should have a childName.");const r=dd(new Co(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new fD(e.type,this,new cd(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Tg&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function uf(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const g=t,y=(E,T)=>{Sb(n._repo,n,d),g(E,T)};y.userCallback=t.userCallback,y.context=t.context,t=y}const u=new pD(t,s||void 0),d="value"===e?new lf(u):new Tg(e,u);return function Tb(n,e,t){let r;r=".info"===rn(e._path)?cy(n.infoSyncTree_,e,t):cy(n.serverSyncTree_,e,t),XI(n.eventQueue_,e._path,r)}(n._repo,n,d),()=>Sb(n._repo,n,d)}function ky(n,e,t,r){return uf(n,"value",e,t,r)}function Nb(n,e,t,r){return uf(n,"child_added",e,t,r)}function mD(n,e,t,r){return uf(n,"child_changed",e,t,r)}function _D(n,e,t,r){return uf(n,"child_moved",e,t,r)}function jx(n,e,t,r){return uf(n,"child_removed",e,t,r)}function yD(n,e,t){let r=null;const i=t?new pD(t):null;"value"===e?r=new lf(i):e&&(r=new Tg(e,i)),Sb(n._repo,n,r)}class ta{}class vD extends ta{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ea("endAt",this._value,e._path,!0);const t=K_(e._queryParams,this._value,this._key);if(kb(t),ud(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new bs(e._repo,e._path,t,e._orderByCalled)}}class $x extends ta{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ea("endBefore",this._value,e._path,!1);const t=function pI(n,e,t){let r;return r=K_(n,e,n.index_===El||t?t:vl),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(kb(t),ud(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new bs(e._repo,e._path,t,e._orderByCalled)}}class wD extends ta{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ea("startAt",this._value,e._path,!0);const t=q_(e._queryParams,this._value,this._key);if(kb(t),ud(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new bs(e._repo,e._path,t,e._orderByCalled)}}class Ua extends ta{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ea("startAfter",this._value,e._path,!1);const t=function Kw(n,e,t){let r;return r=q_(n,e,n.index_===El||t?t:Fa),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(kb(t),ud(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new bs(e._repo,e._path,t,e._orderByCalled)}}class Lb extends ta{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new bs(e._repo,e._path,function W_(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class zx extends ta{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new bs(e._repo,e._path,function fI(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class qx extends ta{constructor(e){super(),this._path=e}_apply(e){Ry(e,"orderByChild");const t=new Sn(this._path);if(sn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Ww(t),i=Kh(e._queryParams,r);return ud(i),new bs(e._repo,e._path,i,!0)}}class Py extends ta{_apply(e){Ry(e,"orderByKey");const t=Kh(e._queryParams,El);return ud(t),new bs(e._repo,e._path,t,!0)}}class Zx extends ta{_apply(e){Ry(e,"orderByPriority");const t=Kh(e._queryParams,An);return ud(t),new bs(e._repo,e._path,t,!0)}}class ED extends ta{_apply(e){Ry(e,"orderByValue");const t=Kh(e._queryParams,$_);return ud(t),new bs(e._repo,e._path,t,!0)}}class CD extends ta{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(ea("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new vD(this._value,this._key)._apply(new wD(this._value,this._key)._apply(e))}}function na(n,...e){let t=(0,U.m9)(n);for(const r of e)t=r._apply(t);return t}(function hb(n){(0,U.hu)(!dg,"__referenceConstructor has already been defined"),dg=n})(Co),function fx(n){(0,U.hu)(!ay,"__referenceConstructor has already been defined"),ay=n}(Co);const Mg={};function Fy(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||Na("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_i("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,y,u=xy(s,i),d=u.repoInfo;typeof process<"u"&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(g=!0,s=`http://${y}?ns=${d.namespace}`,u=xy(s,i),d=u.repoInfo):g=!u.repoInfo.secure;const E=i&&g?new Wp(Wp.OWNER):new xw(n.name,n.options,e);Ib("Invalid Firebase Database URL",u),sn(u.path)||Na("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function Qx(n,e,t,r){let i=Mg[e.name];i||(i={},Mg[e.name]=i);let s=i[n.toURLString()];return s&&Na("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Ax(n,false,t,r),i[n.toURLString()]=s,s}(d,n,E,new zC(n.name,t));return new Jx(T,n)}class Jx{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Mx(n,e,t){if(n.stats_=P_(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Jp(n.repoInfo_,(r,i,s,u)=>{rD(n,r,i,s,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>iD(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,U.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new qc(n.repoInfo_,e,(r,i,s,u)=>{rD(n,r,i,s,u)},r=>{iD(n,r)},r=>{!function sD(n,e){Mi(e,(t,r)=>{Ey(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Pw(n,e){const t=n.toString();return Yp[t]||(Yp[t]=e()),Yp[t]}(n.repoInfo_,()=>new wI(n.stats_,n.server_)),n.infoData_=new mI,n.infoSyncTree_=new VI({startListening:(r,i,s,u)=>{let d=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(d=uy(n.infoSyncTree_,r._path,g),setTimeout(()=>{u("ok")},0)),d},stopListening:()=>{}}),Ey(n,"connected",!1),n.serverSyncTree_=new VI({startListening:(r,i,s,u)=>(n.server_.listen(r,s,i,(d,g)=>{const y=u(d,g);ls(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Co(this._repo,yn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Bb(n,e){const t=Mg[e];(!t||t[n.key]!==n)&&Na(`Database ${e}(${n.repoInfo_}) has already been deleted.`),aD(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Na("Cannot call "+e+" on a deleted database.")}}function DD(){Bw.IS_TRANSPORT_INITIALIZED&&Ai("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function TD(){DD(),wl.forceDisallow()}function Ub(){DD(),Gc.forceDisallow(),wl.forceAllow()}function tR(n,e){yM(n,e)}const xD={".sv":"timestamp"};class rR{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}qc.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},qc.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function MD(n){Pa(ji.SDK_VERSION),(0,ji._registerComponent)(new Ui.wA("database",(e,{instanceIdentifier:t})=>Fy(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,ji.registerVersion)(Tw,"0.14.4",n),(0,ji.registerVersion)(Tw,"0.14.4","esm2017")}();const KF=new Fr.Yd("@firebase/database-compat"),Hb=function(n){KF.warn("FIREBASE WARNING: "+n)};class sR{constructor(e){this._delegate=e}cancel(e){(0,U.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,U.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,U.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,U.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,U.Dv)("OnDisconnect.set",1,2,arguments.length),(0,U.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,U.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,U.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,U.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,Hb("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,U.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class $b{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,U.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class wu{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,U.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,U.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,U.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,U.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,U.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),ad("DataSnapshot.child","path",e,!1),new wu(this._database,this._delegate.child(e))}hasChild(e){return(0,U.Dv)("DataSnapshot.hasChild",1,1,arguments.length),ad("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,U.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,U.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,U.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new wu(this._database,t)))}hasChildren(){return(0,U.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,U.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,U.Dv)("DataSnapshot.ref",0,0,arguments.length),new Zs(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class yi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,U.Dv)("Query.on",2,4,arguments.length),(0,U.Wj)("Query.on","callback",t,!1);const u=yi.getCancelAndContextArgs_("Query.on",r,i),d=(y,E)=>{t.call(u.context,new wu(this.database,y),E)};d.userCallback=t,d.context=u.context;const g=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return ky(this._delegate,d,g),t;case"child_added":return Nb(this._delegate,d,g),t;case"child_removed":return jx(this._delegate,d,g),t;case"child_changed":return mD(this._delegate,d,g),t;case"child_moved":return _D(this._delegate,d,g),t;default:throw new Error((0,U.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,U.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,U.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,U.Wj)("Query.off","callback",t,!0),(0,U.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,yD(this._delegate,e,i)}else yD(this._delegate,e)}get(){return Dg(this._delegate).then(e=>new wu(this.database,e))}once(e,t,r,i){(0,U.Dv)("Query.once",1,4,arguments.length),(0,U.Wj)("Query.once","callback",t,!0);const s=yi.getCancelAndContextArgs_("Query.once",r,i),u=new U.BH,d=(y,E)=>{const T=new wu(this.database,y);t&&t.call(s.context,T,E),u.resolve(T)};d.userCallback=t,d.context=s.context;const g=y=>{s.cancel&&s.cancel.call(s.context,y),u.reject(y)};switch(e){case"value":ky(this._delegate,d,g,{onlyOnce:!0});break;case"child_added":Nb(this._delegate,d,g,{onlyOnce:!0});break;case"child_removed":jx(this._delegate,d,g,{onlyOnce:!0});break;case"child_changed":mD(this._delegate,d,g,{onlyOnce:!0});break;case"child_moved":_D(this._delegate,d,g,{onlyOnce:!0});break;default:throw new Error((0,U.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,U.Dv)("Query.limitToFirst",1,1,arguments.length),new yi(this.database,na(this._delegate,function Ag(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Lb(n)}(e)))}limitToLast(e){return(0,U.Dv)("Query.limitToLast",1,1,arguments.length),new yi(this.database,na(this._delegate,function Wx(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new zx(n)}(e)))}orderByChild(e){return(0,U.Dv)("Query.orderByChild",1,1,arguments.length),new yi(this.database,na(this._delegate,function Oy(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ad("orderByChild","path",n,!1),new qx(n)}(e)))}orderByKey(){return(0,U.Dv)("Query.orderByKey",0,0,arguments.length),new yi(this.database,na(this._delegate,function Kx(){return new Py}()))}orderByPriority(){return(0,U.Dv)("Query.orderByPriority",0,0,arguments.length),new yi(this.database,na(this._delegate,function bD(){return new Zx}()))}orderByValue(){return(0,U.Dv)("Query.orderByValue",0,0,arguments.length),new yi(this.database,na(this._delegate,function Vb(){return new ED}()))}startAt(e=null,t){return(0,U.Dv)("Query.startAt",0,2,arguments.length),new yi(this.database,na(this._delegate,function Fb(n=null,e){return bg("startAt","key",e,!0),new wD(n,e)}(e,t)))}startAfter(e=null,t){return(0,U.Dv)("Query.startAfter",0,2,arguments.length),new yi(this.database,na(this._delegate,function Gx(n,e){return bg("startAfter","key",e,!0),new Ua(n,e)}(e,t)))}endAt(e=null,t){return(0,U.Dv)("Query.endAt",0,2,arguments.length),new yi(this.database,na(this._delegate,function Hx(n,e){return bg("endAt","key",e,!0),new vD(n,e)}(e,t)))}endBefore(e=null,t){return(0,U.Dv)("Query.endBefore",0,2,arguments.length),new yi(this.database,na(this._delegate,function Sg(n,e){return bg("endBefore","key",e,!0),new $x(n,e)}(e,t)))}equalTo(e,t){return(0,U.Dv)("Query.equalTo",1,2,arguments.length),new yi(this.database,na(this._delegate,function Yx(n,e){return bg("equalTo","key",e,!0),new CD(n,e)}(e,t)))}toString(){return(0,U.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,U.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,U.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof yi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,U.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,U.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,U.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Zs(this.database,new Co(this._delegate._repo,this._delegate._path))}}class Zs extends yi{constructor(e,t){super(e,new bs(t._repo,t._path,new G_,!1)),this.database=e,this._delegate=t}getKey(){return(0,U.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,U.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Zs(this.database,dd(this._delegate,e))}getParent(){(0,U.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Zs(this.database,e):null}getRoot(){return(0,U.Dv)("Reference.root",0,0,arguments.length),new Zs(this.database,this._delegate.root)}set(e,t){(0,U.Dv)("Reference.set",1,2,arguments.length),(0,U.Wj)("Reference.set","onComplete",t,!0);const r=Pb(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,U.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,Hb("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ks("Reference.update",this._delegate._path),(0,U.Wj)("Reference.update","onComplete",t,!0);const r=Ux(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,U.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,U.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function Bx(n,e,t){if(Ks("setWithPriority",n._path),ea("setWithPriority",e,n._path,!1),wy("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new U.BH;return Iy(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,U.Dv)("Reference.remove",0,1,arguments.length),(0,U.Wj)("Reference.remove","onComplete",e,!0);const t=function Lx(n){return Ks("remove",n._path),Pb(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,U.Dv)("Reference.transaction",1,3,arguments.length),(0,U.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,U.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,U.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function us(n,e,t){var r;if(n=(0,U.m9)(n),Ks("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,s=new U.BH,d=ky(n,()=>{});return function af(n,e,t,r,i,s){sf(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:$p(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=Ty(n,e,void 0);u.currentInputSnapshot=d;const g=u.update(d.val());if(void 0===g)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{wg("transaction failed: Data returned ",g,u.path),u.status=0;const y=bb(n.transactionQueueTree_,e),E=rf(y)||[];let T;E.push(u),my(y,E),"object"==typeof g&&null!==g&&(0,U.r3)(g,".priority")?(T=(0,U.DV)(g,".priority"),(0,U.hu)(vg(T),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):T=(dy(n.serverSyncTree_,e)||Zt.EMPTY_NODE).getPriority().val();const P=Eg(n),B=rr(g,T),q=wb(B,d,P);u.currentOutputSnapshotRaw=B,u.currentOutputSnapshotResolved=q,u.currentWriteId=Cy(n);const ie=ef(n.serverSyncTree_,e,q,u.currentWriteId,u.applyLocally);ls(n.eventQueue_,e,ie),Sy(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(g,y,E)=>{let T=null;g?s.reject(g):(T=new cd(E,new Co(n._repo,n._path),An),s.resolve(new rR(y,T)))},d,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new $b(s.committed,new wu(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,U.Dv)("Reference.setPriority",1,2,arguments.length),(0,U.Wj)("Reference.setPriority","onComplete",t,!0);const r=function Vx(n,e){n=(0,U.m9)(n),Ks("setPriority",n._path),wy("setPriority",e,!1);const t=new U.BH;return Iy(n._repo,zn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,U.Dv)("Reference.push",0,2,arguments.length),(0,U.Wj)("Reference.push","onComplete",t,!0);const r=function Fx(n,e){n=(0,U.m9)(n),Ks("push",n._path),ea("push",e,n._path,!0);const t=nD(n._repo),r=Nx(t),i=dd(n,r),s=dd(n,r);let u;return u=null!=e?Pb(s,e).then(()=>s):Promise.resolve(s),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new Zs(this.database,u));t&&i.then(()=>t(null),u=>t(u));const s=new Zs(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return Ks("Reference.onDisconnect",this._delegate._path),new sR(new Rb(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class kg{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:TD,forceLongPolling:Ub}}useEmulator(e,t,r={}){!function jb(n,e,t,r={}){(n=(0,U.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Na("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Na('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Wp(Wp.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,U.Sg)(r.mockUserToken,n.app.options.projectId);s=new Wp(u)}!function ID(n,e,t,r){n.repoInfo_=new Kp(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,U.Dv)("database.ref",0,1,arguments.length),e instanceof Zs){const t=Ob(this._delegate,e.toString());return new Zs(this,t)}{const t=gD(this._delegate,e);return new Zs(this,t)}}refFromURL(e){(0,U.Dv)("database.refFromURL",1,1,arguments.length);const r=Ob(this._delegate,e);return new Zs(this,r)}goOffline(){return(0,U.Dv)("database.goOffline",0,0,arguments.length),function SD(n){(n=(0,U.m9)(n))._checkNotDeleted("goOffline"),aD(n._repo)}(this._delegate)}goOnline(){return(0,U.Dv)("database.goOnline",0,0,arguments.length),function AD(n){(n=(0,U.m9)(n))._checkNotDeleted("goOnline"),function Ab(n){n.persistentConnection_&&n.persistentConnection_.resume(tD)}(n._repo)}(this._delegate)}}kg.ServerValue={TIMESTAMP:function nR(){return xD}(),increment:n=>function RD(n){return{".sv":{increment:n}}}(n)};var Gb=Object.freeze({__proto__:null,initStandalone:function oR({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){Pa(t);const u=new Ui.zt("auth-internal",new Ui.H0("database-standalone"));return u.setComponent(new Ui.wA("auth-internal",()=>r,"PRIVATE")),{instance:new kg(Fy(n,u,void 0,e,s),n),namespace:i}}});const OD=kg.ServerValue;!function PD(n){n.INTERNAL.registerComponent(new Ui.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new kg(i,r)},"PUBLIC").setServiceProps({Reference:Zs,Query:yi,Database:kg,DataSnapshot:wu,enableLogging:tR,INTERNAL:Gb,ServerValue:OD}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(UC.Z);var hd=j(5363),zb=j(6063);class ZF extends cn.x{constructor(e=1/0,t=1/0,r=zb.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:u}=this;t||(r.push(e),!i&&r.push(s.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let u=0;u<s.length&&!e.closed;u+=r?1:2)e.next(s[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const u=t.now();let d=0;for(let g=1;g<r.length&&r[g]<=u;g+=2)d=g;d&&r.splice(0,d+1)}}}function Wb(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,VC.B)({connector:()=>new ZF(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function ND(n,e){return(0,ti.m)(e)?tr(()=>n,e):tr(()=>n)}var Ly=j(9468);j(259);const Kb=new Map,Zb={activated:!1,tokenObservers:[]},VD={initialized:!1,enabled:!1};function vi(n){return Kb.get(n)||Object.assign({},Zb)}function By(){return VD}class s1{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Te.Z)(function*(){t.stop();try{t.pending=new U.BH,yield function o1(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new U.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Es=new U.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Og(n){if(!vi(n).activated)throw Es.create("use-before-activation",{appName:n.name})}function cf(n,e){return Uy.apply(this,arguments)}function Uy(){return(Uy=(0,Te.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const T=yield i.getHeartbeatsHeader();T&&(r["X-Firebase-Client"]=T)}const s={method:"POST",body:JSON.stringify(e),headers:r};let u,d;try{u=yield fetch(n,s)}catch(T){throw Es.create("fetch-network-error",{originalErrorMessage:T?.message})}if(200!==u.status)throw Es.create("fetch-status-error",{httpStatus:u.status});try{d=yield u.json()}catch(T){throw Es.create("fetch-parse-error",{originalErrorMessage:T?.message})}const g=d.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw Es.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const y=1e3*Number(g[1]),E=Date.now();return{token:d.token,expireTimeMillis:E+y,issuedAtTimeMillis:E}})).apply(this,arguments)}function Xb(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const df="firebase-app-check-store";let jy=null;function GD(){return jy||(jy=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Es.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(df,{keyPath:"compositeKey"})}}catch(t){e(Es.create("storage-open",{originalErrorMessage:t?.message}))}}),jy)}function zD(){return(zD=(0,Te.Z)(function*(n,e){const r=(yield GD()).transaction(df,"readwrite"),s=r.objectStore(df).put({compositeKey:n,value:e});return new Promise((u,d)=>{s.onsuccess=g=>{u()},r.onerror=g=>{var y;d(Es.create("storage-set",{originalErrorMessage:null===(y=g.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const $y=new Fr.Yd("@firebase/app-check");function zy(n,e){return(0,U.hl)()?function Hy(n,e){return function vR(n,e){return zD.apply(this,arguments)}(function qD(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{$y.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function KD(){return By().enabled}function Wy(){return e0.apply(this,arguments)}function e0(){return(e0=(0,Te.Z)(function*(){const n=By();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const bR={error:"UNKNOWN_ERROR"};function t0(n){return U.US.encodeString(JSON.stringify(n),!1)}function qy(n){return n0.apply(this,arguments)}function n0(){return(n0=(0,Te.Z)(function*(n,e=!1){const t=n.app;Og(t);const r=vi(t);let s,i=r.token;if(i&&!pd(i)&&(r.token=void 0,i=void 0),!i){const g=yield r.cachedTokenPromise;g&&(pd(g)?i=g:yield zy(t,void 0))}if(!e&&i&&pd(i))return{token:i.token};let d,u=!1;if(KD()){r.exchangeTokenPromise||(r.exchangeTokenPromise=cf(Xb(t,yield Wy()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),u=!0);const g=yield r.exchangeTokenPromise;return yield zy(t,g),r.token=g,{token:g.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),u=!0),i=yield vi(t).exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?$y.warn(g.message):$y.error(g),s=g}return i?s?d=pd(i)?{token:i.token,internalError:s}:ZD(s):(d={token:i.token},r.token=i,yield zy(t,i)):d=ZD(s),u&&s0(t,d),d})).apply(this,arguments)}function Ky(n,e){const t=vi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function r0(n){const{app:e}=n,t=vi(e);let r=t.tokenRefresher;r||(r=function ER(n){const{app:e}=n;return new s1((0,Te.Z)(function*(){let r;if(r=vi(e).token?yield qy(n,!0):yield qy(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=vi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function s0(n,e){const t=vi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function pd(n){return n.expireTimeMillis-Date.now()>0}function ZD(n){return{token:t0(bR),error:n}}class YD{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=vi(this.app);for(const t of e)Ky(this.app,t.next);return Promise.resolve()}}const sT="app-check-internal";!function oT(){(0,ji._registerComponent)(new Ui.wA("app-check",n=>function CR(n,e){return new YD(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(sT).initialize()})),(0,ji._registerComponent)(new Ui.wA(sT,n=>function o0(n){return{getToken:e=>qy(n,e),addTokenListener:e=>function Ng(n,e,t,r){const{app:i}=n,s=vi(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&pd(s.token)){const d=s.token;Promise.resolve().then(()=>{t({token:d.token}),r0(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>r0(n))}(n,"INTERNAL",e),removeTokenListener:e=>Ky(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ji.registerVersion)("@firebase/app-check","0.6.4")}();class Fg{constructor(){return(0,Tn.vb)("app-check")}}typeof window<"u"&&window;var Lg=j(9260);const Qy=new f.OlP("angularfire2.auth.use-emulator"),Vg=new f.OlP("angularfire2.auth.settings"),Bg=new f.OlP("angularfire2.auth.tenant-id"),g0=new f.OlP("angularfire2.auth.langugage-code"),Ug=new f.OlP("angularfire2.auth.use-device-language"),jg=new f.OlP("angularfire.auth.persistence"),ff=(n,e,t,r,i,s,u,d)=>(0,Nr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),r&&(g.tenantId=r),g.languageCode=i,s&&g.useDeviceLanguage(),u)for(const[y,E]of Object.entries(u))g.settings[y]=E;return d&&g.setPersistence(d),g},[t,r,i,s,u,d]);let m0=(()=>{class n{constructor(t,r,i,s,u,d,g,y,E,T,P,B){const q=new cn.x,ie=ut(void 0).pipe((0,hd.Q)(u.outsideAngular),tr(()=>s.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,9800)))),(0,Et.U)(()=>(0,Nr.on)(t,s,r)),(0,Et.U)(ge=>ff(ge,s,d,y,E,T,g,P)),Wb({bufferSize:1,refCount:!1}));if(jr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ut(null);else{ie.pipe(Sa()).subscribe();const Ue=ie.pipe(tr(tt=>tt.getRedirectResult().then(Lt=>Lt,()=>null)),Tn.iC,Wb({bufferSize:1,refCount:!1})),Ye=ie.pipe(tr(tt=>new cr.y(Lt=>({unsubscribe:s.runOutsideAngular(()=>tt.onAuthStateChanged(jt=>Lt.next(jt),jt=>Lt.error(jt),()=>Lt.complete()))})))),Ze=ie.pipe(tr(tt=>new cr.y(Lt=>({unsubscribe:s.runOutsideAngular(()=>tt.onIdTokenChanged(jt=>Lt.next(jt),jt=>Lt.error(jt),()=>Lt.complete()))}))));this.authState=Ue.pipe(ND(Ye),(0,Ly.R)(u.outsideAngular),(0,hd.Q)(u.insideAngular)),this.user=Ue.pipe(ND(Ze),(0,Ly.R)(u.outsideAngular),(0,hd.Q)(u.insideAngular)),this.idToken=this.user.pipe(tr(tt=>tt?(0,un.D)(tt.getIdToken()):ut(null))),this.idTokenResult=this.user.pipe(tr(tt=>tt?(0,un.D)(tt.getIdTokenResult()):ut(null))),this.credential=(0,Up.T)(Ue,q,this.authState.pipe(ni(tt=>!tt))).pipe((0,Et.U)(tt=>tt?.user?tt:null),(0,Ly.R)(u.outsideAngular),(0,hd.Q)(u.insideAngular))}return(0,Nr.pX)(this,ie,s,{spy:{apply:(ge,Ue,Ye)=>{(ge.startsWith("signIn")||ge.startsWith("createUser"))&&Ye.then(Ze=>q.next(Ze))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Nr.Dh),f.LFG(Nr.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Tn.HU),f.LFG(Qy,8),f.LFG(Vg,8),f.LFG(Bg,8),f.LFG(g0,8),f.LFG(Ug,8),f.LFG(jg,8),f.LFG(Fg,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),v1=(()=>{class n{constructor(){Lg.Z.registerVersion("angularfire",Tn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[m0]}),n})();function _0(n){return null==n}function lT(n){return"function"==typeof n.set}function uT(n,e){return lT(e)?e:n.ref(e)}function cT(n,e){if(function w1(n){return"string"==typeof n}(n))return e.stringCase();if(lT(n))return e.firebaseCase();if(function b1(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Hg(n,e,t="on",r=Bp.z){return new cr.y(i=>{let s=null;return s=n[t](e,(u,d)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:d})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,Et.U)(i=>{const{snapshot:s,prevKey:u}=i;let d=null;return s.exists()&&(d=s.key),{type:e,payload:s,prevKey:u,key:d}}),(0,VC.B)())}function y0(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function kR(n,e){const{payload:t,prevKey:r,key:i}=e,s=y0(n,i),u=function hT(n,e){if(_0(e))return 0;{const t=y0(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(g=>{const y={payload:g,type:"value",prevKey:d,key:g.key};return d=g.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const d=n[s-1];(d&&d.key||null)!==r&&(n=n.filter(g=>g.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===i?e:d);case"child_moved":if(s>-1){const d=n.splice(s,1)[0];return(n=n.slice()).splice(u,0,d),n}return n;default:return n}}function fT(n){return(_0(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function v0(n,e,t){return function dT(n,e,t){return Hg(n,"value","once",t).pipe(tr(r=>{const i=[ut(r)];return e.forEach(s=>i.push(Hg(n,s,"on",t))),(0,Up.T)(...i).pipe(Wo(kR,[]))}),D_())}(n,e=fT(e),t)}function Xy(n,e,t){const r=(e=fT(e)).map(i=>Hg(n,i,"on",t));return(0,Up.T)(...r)}function gT(n,e){return function(r,i){return cT(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function OR(n){return function(t){return t?cT(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function PR(n,e){return function(){return Hg(n,"value","on",e)}}const FR=new f.OlP("angularfire2.realtimeDatabaseURL"),LR=new f.OlP("angularfire2.database.use-emulator");let VR=(()=>{class n{constructor(t,r,i,s,u,d,g,y,E,T,P,B,q,ie,ge){this.schedulers=d;const Ue=g,Ye=(0,Nr.on)(t,u,r);y&&ff(Ye,u,E,P,B,q,T,ie),this.database=(0,Nr.cc)(`${Ye.name}.database.${i}`,"AngularFireDatabase",Ye.name,()=>{const Ze=u.runOutsideAngular(()=>Ye.database(i||void 0));return Ue&&Ze.useEmulator(...Ue),Ze},[Ue])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>uT(this.database,t));let s=i;return r&&(s=r(i)),function C1(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:gT(r,"update"),set:gT(r,"set"),push:i=>r.push(i),remove:OR(r),snapshotChanges:i=>v0(n,i,t).pipe(Tn.iC),stateChanges:i=>Xy(n,i,t).pipe(Tn.iC),auditTrail:i=>function E1(n,e,t){return function w0(n,e,t){return function pT(n,e){return Hg(n,"value","on",e).pipe((0,Et.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function BC(...n){const e=(0,Fs.jO)(n);return(0,Dn.e)((t,r)=>{const i=n.length,s=new Array(i);let u=n.map(()=>!1),d=!1;for(let g=0;g<i;g++)(0,wt.Xf)(n[g]).subscribe((0,G.x)(r,y=>{s[g]=y,!d&&!u[g]&&(u[g]=!0,(d=u.every(Ls.y))&&(u=null))},Iw.Z));t.subscribe((0,G.x)(r,g=>{if(d){const y=[g,...s];r.next(e?e(...y):y)}}))})}(e),(0,Et.U)(([i,s])=>{const u=i.lastKeyToLoad,d=s.map(g=>g.key);return{actions:s,lastKeyToLoad:u,loadedKeys:d}}),function Dw(n){return(0,Dn.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,G.x)(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,Et.U)(i=>i.actions))}(n,Xy(n,e).pipe(Wo((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(Tn.iC),valueChanges:(i,s)=>v0(n,i,t).pipe((0,Et.U)(d=>d.map(g=>s&&s.idField?Object.assign(Object.assign({},g.payload.val()),{[s.idField]:g.key}):g.payload.val())),Tn.iC)}}(s,this)}object(t){return function NR(n,e){return{query:n,snapshotChanges:()=>PR(n,e.schedulers.outsideAngular)().pipe(Tn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>PR(n,e.schedulers.outsideAngular)().pipe(Tn.iC,(0,Et.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>uT(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Nr.Dh),f.LFG(Nr.xv,8),f.LFG(FR,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Tn.HU),f.LFG(LR,8),f.LFG(m0,8),f.LFG(Qy,8),f.LFG(Vg,8),f.LFG(Bg,8),f.LFG(g0,8),f.LFG(Ug,8),f.LFG(jg,8),f.LFG(Fg,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),I1=(()=>{class n{constructor(){Lg.Z.registerVersion("angularfire",Tn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[VR]}),n})();function BR(n,e=Bp.z){return(0,Dn.e)((t,r)=>{let i=null,s=null,u=null;const d=()=>{if(i){i.unsubscribe(),i=null;const y=s;s=null,r.next(y)}};function g(){const y=u+n,E=e.now();if(E<y)return i=this.schedule(void 0,y-E),void r.add(i);d()}t.subscribe((0,G.x)(r,y=>{s=y,u=e.now(),i||(i=e.schedule(g,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{s=i=null}))})}const UR="firebasestorage.googleapis.com",jR="storageBucket";class wr extends U.ZR{constructor(e,t,r=0){super(mT(e),`Firebase Storage: ${t} (${mT(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,wr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return mT(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Xn=(()=>{return(n=Xn||(Xn={})).UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Xn;var n})();function mT(n){return"storage/"+n}function _T(){return new wr(Xn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function _(){return new wr(Xn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function w(){return new wr(Xn.CANCELED,"User canceled the upload/download.")}function F(){return new wr(Xn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Se(n){return new wr(Xn.INVALID_ARGUMENT,n)}function $e(){return new wr(Xn.APP_DELETED,"The Firebase app was deleted.")}function Qe(n){return new wr(Xn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function dt(n,e){return new wr(Xn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Dt(n){throw new wr(Xn.INTERNAL_ERROR,"Internal error: "+n)}class Re{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Re.makeFromUrl(e,t)}catch{return new Re(e,"")}if(""===r.path)return r;throw function D(n){return new wr(Xn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(tt){tt.path_=decodeURIComponent(tt.path)}const T=t.replace(/[.]/g,"\\."),Ze=[{regex:d,indices:{bucket:1,path:3},postModify:function s(tt){"/"===tt.path.charAt(tt.path.length-1)&&(tt.path_=tt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${T}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===UR?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let tt=0;tt<Ze.length;tt++){const Lt=Ze[tt],jt=Lt.regex.exec(e);if(jt){let Ir=jt[Lt.indices.path];Ir||(Ir=""),r=new Re(jt[Lt.indices.bucket],Ir),Lt.postModify(r);break}}if(null==r)throw function I(n){return new wr(Xn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class Ut{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function pf(n){return"string"==typeof n||n instanceof String}function Jy(n){return $g()&&n instanceof Blob}function $g(){return typeof Blob<"u"&&!(0,U.UG)()}function Gg(n,e,t,r){if(r<e)throw Se(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Se(`Invalid value for '${n}'. Expected ${t} or less.`)}function ra(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function ev(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var ja=(()=>{return(n=ja||(ja={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",ja;var n})();function S1(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class Q${constructor(e,t,r,i,s,u,d,g,y,E,T,P=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=E,this.connectionFactory_=T,this.retry=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((B,q)=>{this.resolve_=B,this.reject_=q,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,u=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const g=this.callback_(d,d.getResponse());!function md(n){return void 0!==n}(g)?s():s(g)}catch(g){u(g)}else if(null!==d){const g=_T();g.serverResponse=d.getErrorText(),u(this.errorCallback_?this.errorCallback_(d,g):g)}else u(i.canceled?this.appDelete_?$e():w():_())};this.canceled_?t(0,new yT(!1,null,!0)):this.backoffId_=function Mn(n,e,t){let r=1,i=null,s=null,u=!1,d=0;function g(){return 2===d}let y=!1;function E(...ge){y||(y=!0,e.apply(null,ge))}function T(ge){i=setTimeout(()=>{i=null,n(B,g())},ge)}function P(){s&&clearTimeout(s)}function B(ge,...Ue){if(y)return void P();if(ge)return P(),void E.call(null,ge,...Ue);if(g()||u)return P(),void E.call(null,ge,...Ue);let Ze;r<64&&(r*=2),1===d?(d=2,Ze=0):Ze=1e3*(r+Math.random()),T(Ze)}let q=!1;function ie(ge){q||(q=!0,P(),!y&&(null!==i?(ge||(d=2),clearTimeout(i),T(0)):ge||(d=1)))}return T(0),s=setTimeout(()=>{u=!0,ie(!0)},t),ie}((r,i)=>{if(i)return void r(!1,new yT(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const u=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(u),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(u),this.pendingConnection_=null;const d=s.getErrorCode()===ja.NO_ERROR,g=s.getStatus();if(!d||S1(g,this.additionalRetryCodes_)&&this.retry){const E=s.getErrorCode()===ja.ABORT;return void r(!1,new yT(!1,null,E))}const y=-1!==this.successCodes_.indexOf(g);r(!0,new yT(y,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function ir(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class yT{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function iG(...n){const e=function rG(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if($g())return new Blob(n);throw new wr(Xn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const ia={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class $R{constructor(e,t){this.data=e,this.contentType=t||null}}function GR(n,e){switch(n){case ia.RAW:return new $R(A1(e));case ia.BASE64:case ia.BASE64URL:return new $R(M1(n,e));case ia.DATA_URL:return new $R(function lG(n){const e=new x1(n);return e.base64?M1(ia.BASE64,e.rest):function aG(n){let e;try{e=decodeURIComponent(n)}catch{throw dt(ia.DATA_URL,"Malformed data URL.")}return A1(e)}(e.rest)}(e),function uG(n){return new x1(n).contentType}(e))}throw _T()}function A1(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function M1(n,e){switch(n){case ia.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw dt(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ia.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw dt(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function oG(n){if(typeof atob>"u")throw function fe(n){return new wr(Xn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:dt(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class x1{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw dt(ia.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function cG(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Eu{constructor(e,t){let r=0,i="";Jy(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Jy(this.data_)){const i=function sG(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Eu(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Eu(r,!0)}}static getBlob(...e){if($g()){const t=e.map(r=>r instanceof Eu?r.data_:r);return new Eu(iG.apply(null,t))}{const t=e.map(u=>pf(u)?GR(ia.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(u=>{for(let d=0;d<u.length;d++)i[s++]=u[d]}),new Eu(i,!0)}}uploadData(){return this.data_}}function zR(n){let e;try{e=JSON.parse(n)}catch{return null}return function E0(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function R1(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function fG(n,e){return e}class Qs{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||fG}}let vT=null;function C0(){if(vT)return vT;const n=[];n.push(new Qs("bucket")),n.push(new Qs("generation")),n.push(new Qs("metageneration")),n.push(new Qs("name","fullPath",!0));const t=new Qs("name");t.xform=function e(s,u){return function pG(n){return!pf(n)||n.length<2?n:R1(n)}(u)},n.push(t);const i=new Qs("size");return i.xform=function r(s,u){return void 0!==u?Number(u):u},n.push(i),n.push(new Qs("timeCreated")),n.push(new Qs("updated")),n.push(new Qs("md5Hash",null,!0)),n.push(new Qs("cacheControl",null,!0)),n.push(new Qs("contentDisposition",null,!0)),n.push(new Qs("contentEncoding",null,!0)),n.push(new Qs("contentLanguage",null,!0)),n.push(new Qs("contentType",null,!0)),n.push(new Qs("metadata","customMetadata",!0)),vT=n,vT}function k1(n,e,t){const r=zR(e);return null===r?null:function mG(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const u=t[s];r[u.local]=u.xform(r,e[u.server])}return function gG(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new Re(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function WR(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const O1="prefixes";class Cu{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Iu(n){if(!n)throw _T()}function wT(n,e){return function t(r,i){const s=k1(n,i,e);return Iu(null!==s),s}}function tv(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function c(){return new wr(Xn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function l(){return new wr(Xn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function a(n){return new wr(Xn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function h(n){return new wr(Xn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function I0(n){const e=tv(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function o(n){return new wr(Xn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function N1(n,e,t){const i=ra(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,d=new Cu(i,"GET",wT(n,t),u);return d.errorHandler=I0(e),d}function EG(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const d=ra(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,E=new Cu(d,"GET",function wG(n,e){return function t(r,i){const s=function vG(n,e,t){const r=zR(t);return null===r?null:function yG(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[O1])for(const i of t[O1]){const s=i.replace(/\/$/,""),u=n._makeStorageReference(new Re(e,s));r.prefixes.push(u)}if(t.items)for(const i of t.items){const s=n._makeStorageReference(new Re(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return Iu(null!==s),s}}(n,e.bucket),y);return E.urlParams=s,E.errorHandler=tv(e),E}function L1(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function TG(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class bT{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function qR(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Iu(!1)}return Iu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const xG={STATE_CHANGED:"state_changed"},Xs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function KR(n){switch(n){case"running":case"pausing":case"canceling":return Xs.RUNNING;case"paused":return Xs.PAUSED;case"success":return Xs.SUCCESS;case"canceled":return Xs.CANCELED;default:return Xs.ERROR}}class RG{constructor(e,t,r){if(function b0(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function nv(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class OG extends class kG{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ja.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ja.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ja.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Dt("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Dt("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Dt("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Dt("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Dt("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Ml(){return new OG}class j1{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=C0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Xn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(S1(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=_()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Xn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function SG(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),u=L1(e,r,i),d={name:u.fullPath},g=ra(s,n.host,n._protocol),E={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},T=WR(u,t),q=new Cu(g,"POST",function B(ie){let ge;qR(ie);try{ge=ie.getResponseHeader("X-Goog-Upload-URL")}catch{Iu(!1)}return Iu(pf(ge)),ge},n.maxUploadRetryTime);return q.urlParams=d,q.headers=E,q.body=T,q.errorHandler=tv(e),q}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ml,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function AG(n,e,t,r){const g=new Cu(t,"POST",function s(y){const E=qR(y,["active","final"]);let T=null;try{T=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Iu(!1)}T||Iu(!1);const P=Number(T);return Iu(!isNaN(P)),new bT(P,r.size(),"final"===E)},n.maxUploadRetryTime);return g.headers={"X-Goog-Upload-Command":"query"},g.errorHandler=tv(e),g}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Ml,t,r);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new bT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let u;try{u=function MG(n,e,t,r,i,s,u,d){const g=new bT(0,0);if(u?(g.current=u.current,g.total=u.total):(g.current=0,g.total=r.size()),r.size()!==g.total)throw function H(){return new wr(Xn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const y=g.total-g.current;let E=y;i>0&&(E=Math.min(E,i));const T=g.current;let B="";B=0===E?"finalize":y===E?"upload, finalize":"upload";const q={"X-Goog-Upload-Command":B,"X-Goog-Upload-Offset":`${g.current}`},ie=r.slice(T,T+E);if(null===ie)throw F();const Ze=new Cu(t,"POST",function ge(tt,Lt){const jt=qR(tt,["active","final"]),vn=g.current+E,Ir=r.size();let ca;return ca="final"===jt?wT(e,s)(tt,Lt):null,new bT(vn,Ir,"final"===jt,ca)},e.maxUploadRetryTime);return Ze.headers=q,Ze.body=ie.uploadData(),Ze.progressCallback=d||null,Ze.errorHandler=tv(n),Ze}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(g){return this._error=g,void this._transition("error")}const d=this._ref.storage._makeRequest(u,Ml,i,s,!1);this._request=d,d.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=N1(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Ml,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function V1(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},g=function d(){let Ze="";for(let tt=0;tt<2;tt++)Ze+=Math.random().toString().slice(2);return Ze}();u["Content-Type"]="multipart/related; boundary="+g;const y=L1(e,r,i),E=WR(y,t),B=Eu.getBlob("--"+g+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+E+"\r\n--"+g+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",r,"\r\n--"+g+"--");if(null===B)throw F();const q={name:y.fullPath},ie=ra(s,n.host,n._protocol),Ue=n.maxUploadRetryTime,Ye=new Cu(ie,"POST",wT(n,t),Ue);return Ye.urlParams=q,Ye.headers=u,Ye.body=B.uploadData(),Ye.errorHandler=tv(e),Ye}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ml,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=w(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=KR(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new RG(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(KR(this._state)){case Xs.SUCCESS:nv(this._resolve.bind(null,this.snapshot))();break;case Xs.CANCELED:case Xs.ERROR:nv(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(KR(this._state)){case Xs.RUNNING:case Xs.PAUSED:e.next&&nv(e.next.bind(e,this.snapshot))();break;case Xs.SUCCESS:e.complete&&nv(e.complete.bind(e))();break;default:e.error&&nv(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class zg{constructor(e,t){this._service=e,this._location=t instanceof Re?t:Re.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new zg(e,t)}get root(){const e=new Re(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return R1(this._location.path)}get storage(){return this._service}get parent(){const e=function dG(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Re(this._location.bucket,e);return new zg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Qe(e)}}function $1(n,e,t){return ZR.apply(this,arguments)}function ZR(){return(ZR=(0,Te.Z)(function*(n,e,t){const i=yield G1(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield $1(n,e,i.nextPageToken))})).apply(this,arguments)}function G1(n,e){null!=e&&"number"==typeof e.maxResults&&Gg("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=EG(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Ml)}function zG(n){n._throwIfRoot("getDownloadURL");const e=function CG(n,e,t){const i=ra(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,d=new Cu(i,"GET",function bG(n,e){return function t(r,i){const s=k1(n,i,e);return Iu(null!==s),function _G(n,e,t,r){const i=zR(e);if(null===i||!pf(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const u=encodeURIComponent;return s.split(",").map(y=>{const T=n.fullPath;return ra("/b/"+u(n.bucket)+"/o/"+u(T),t,r)+ev({alt:"media",token:y})})[0]}(s,i,n.host,n._protocol)}}(n,t),u);return d.errorHandler=I0(e),d}(n.storage,n._location,C0());return n.storage.makeRequestWithTokens(e,Ml).then(t=>{if(null===t)throw function ne(){return new wr(Xn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function z1(n,e){const t=function hG(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Re(n._location.bucket,t);return new zg(n.storage,r)}function W1(n,e){if(n instanceof YR){const t=n;if(null==t._bucket)throw function R(){return new wr(Xn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+jR+"' property when initializing the app?")}();const r=new zg(t,t._bucket);return null!=e?W1(r,e):r}return void 0!==e?z1(n,e):n}function ZG(n,e){if(e&&function qG(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof YR)return function KG(n,e){return new zg(n,e)}(n,e);throw Se("To use ref(service, url), the first argument must be a Storage instance.")}return W1(n,e)}function q1(n,e){const t=e?.[jR];return null==t?null:Re.makeFromBucketSpec(t,n)}class YR{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=UR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Re.makeFromBucketSpec(i,this._host):q1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Re.makeFromBucketSpec(this._url,e):q1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Gg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Gg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Te.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Te.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new zg(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new Ut($e());{const u=function nG(n,e,t,r,i,s,u=!0){const d=ev(n.urlParams),g=n.url+d,y=Object.assign({},n.headers);return function eG(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function X$(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function J$(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(y,s),function tG(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new Q$(g,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,u)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,Te.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const K1="@firebase/storage";function Q1(n,e){return ZG(n=(0,U.m9)(n),e)}function sz(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new YR(t,r,i,e,ji.SDK_VERSION)}!function oz(){(0,ji._registerComponent)(new Ui.wA("storage",sz,"PUBLIC").setMultipleInstances(!0)),(0,ji.registerVersion)(K1,"0.11.2",""),(0,ji.registerVersion)(K1,"0.11.2","esm2017")}();class ET{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class J1{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new ET(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new ET(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?u=>t(new ET(u,this,this._ref)):{next:t.next?u=>t.next(new ET(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class eL{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new _d(e,this._service))}get items(){return this._delegate.items.map(e=>new _d(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class _d{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function iz(n,e){return z1(n,e)}(this._delegate,e);return new _d(t,this.storage)}get root(){return new _d(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new _d(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new J1(function QG(n,e,t){return function UG(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new j1(n,new Eu(e),t)}(n=(0,U.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ia.RAW,r){this._throwIfRoot("putString");const i=GR(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new J1(new j1(this._delegate,new Eu(i.data,!0),s),this)}listAll(){return function tz(n){return function HG(n){const e={prefixes:[],items:[]};return $1(n,e).then(()=>e)}(n=(0,U.m9)(n))}(this._delegate).then(e=>new eL(e,this.storage))}list(e){return function ez(n,e){return G1(n=(0,U.m9)(n),e)}(this._delegate,e||void 0).then(t=>new eL(t,this.storage))}getMetadata(){return function XG(n){return function $G(n){n._throwIfRoot("getMetadata");const e=N1(n.storage,n._location,C0());return n.storage.makeRequestWithTokens(e,Ml)}(n=(0,U.m9)(n))}(this._delegate)}updateMetadata(e){return function JG(n,e){return function GG(n,e){n._throwIfRoot("updateMetadata");const t=function IG(n,e,t,r){const s=ra(e.fullServerUrl(),n.host,n._protocol),d=WR(t,r),y=n.maxOperationRetryTime,E=new Cu(s,"PATCH",wT(n,r),y);return E.headers={"Content-Type":"application/json; charset=utf-8"},E.body=d,E.errorHandler=I0(e),E}(n.storage,n._location,e,C0());return n.storage.makeRequestWithTokens(t,Ml)}(n=(0,U.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function nz(n){return zG(n=(0,U.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function rz(n){return function WG(n){n._throwIfRoot("deleteObject");const e=function DG(n,e){const r=ra(e.fullServerUrl(),n.host,n._protocol),d=new Cu(r,"DELETE",function u(g,y){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=I0(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ml)}(n=(0,U.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Qe(e)}}class tL{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(nL(e))throw Se("ref() expected a child path but got a URL, use refFromURL instead.");return new _d(Q1(this._delegate,e),this)}refFromURL(e){if(!nL(e))throw Se("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Re.makeFromUrl(e,this._delegate.host)}catch{throw Se("refFromUrl() expected a valid full URL but got an invalid one.")}return new _d(Q1(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function X1(n,e,t,r={}){!function YG(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,U.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function nL(n){return/^[A-Za-z]+:\/\//.test(n)}function cz(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new tL(t,r)}function rL(n){const e=function hz(n){return new cr.y(e=>{const t=u=>e.next(u);t(n.snapshot);const s=n.on("state_changed",t);return n.then(u=>{t(u),e.complete()},u=>{t(n.snapshot),(u=>{e.error(u)})(u)}),function(){s()}}).pipe(BR(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Et.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function CT(n){return{getDownloadURL:()=>ut(void 0).pipe(Tn.fc,tr(()=>n.getDownloadURL()),Tn.iC),getMetadata:()=>ut(void 0).pipe(Tn.fc,tr(()=>n.getMetadata()),Tn.iC),delete:()=>(0,un.D)(n.delete()),child:e=>CT(n.child(e)),updateMetadata:e=>(0,un.D)(n.updateMetadata(e)),put:(e,t)=>rL(n.put(e,t)),putString:(e,t,r)=>rL(n.putString(e,t,r)),list:e=>(0,un.D)(n.list(e)),listAll:()=>(0,un.D)(n.listAll())}}!function dz(n){const e={TaskState:Xs,TaskEvent:xG,StringFormat:ia,Storage:tL,Reference:_d};n.INTERNAL.registerComponent(new Ui.wA("storage-compat",cz,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(UC.Z);const fz=new f.OlP("angularfire2.storageBucket"),pz=new f.OlP("angularfire2.storage.maxUploadRetryTime"),gz=new f.OlP("angularfire2.storage.maxOperationRetryTime"),mz=new f.OlP("angularfire2.storage.use-emulator");let QR,iL=(()=>{class n{constructor(t,r,i,s,u,d,g,y,E,T){const P=(0,Nr.on)(t,u,r);this.storage=(0,Nr.cc)(`${P.name}.storage.${i}`,"AngularFireStorage",P.name,()=>{const B=u.runOutsideAngular(()=>P.storage(i||void 0)),q=E;return q&&B.useEmulator(...q),g&&B.setMaxUploadRetryTime(g),y&&B.setMaxOperationRetryTime(y),B},[g,y])}ref(t){return CT(this.storage.ref(t))}refFromURL(t){return CT(this.storage.refFromURL(t))}upload(t,r,i){return CT(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Nr.Dh),f.LFG(Nr.xv,8),f.LFG(fz,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Tn.HU),f.LFG(pz,8),f.LFG(gz,8),f.LFG(mz,8),f.LFG(Fg,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),_z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),yz=(()=>{class n{constructor(){Lg.Z.registerVersion("angularfire",Tn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[iL],imports:[_z]}),n})(),vz=(()=>{class n{constructor(t){this.storage=t}upload(t,r){return(new FormData).append("photo",t),this.storage.upload(r,t).snapshotChanges()}getUploadFileById(t){if(t)return this.storage.ref(t).getDownloadURL();{let r=new cn.x;return r.next(""),r}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(iL))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();try{QR=typeof Intl<"u"&&Intl.v8BreakIterator}catch{QR=!1}let D0,Wg,XR,Du=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Gu(n){return n===ks}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!QR)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.Lbi))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function IT(n){return function wz(){if(null==D0&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>D0=!0}))}finally{D0=D0||!1}return D0}()?n:!!n.capture}function bz(){if(null==Wg){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Wg=!1,Wg;if("scrollBehavior"in document.documentElement.style)Wg=!0;else{const n=Element.prototype.scrollTo;Wg=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Wg}function JR(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function qg(n){return n.composedPath?n.composedPath()[0]:n.target}function ek(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function tk(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function aL(n){return ni((e,t)=>n<=t)}function nk(n){return(0,Dn.e)((e,t)=>{(0,wt.Xf)(n).subscribe((0,G.x)(t,()=>t.complete(),Iw.Z)),!t.closed&&e.subscribe(t)})}function TT(n){return null!=n&&"false"!=`${n}`}function iv(n,e=0){return function Lz(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function ST(n){return Array.isArray(n)?n:[n]}function wi(n){return null==n?"":"string"==typeof n?n:`${n}px`}function AT(n){return n instanceof f.SBq?n.nativeElement:n}let Vz=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Bz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[Vz]}),n})();const lL=new Set;let sv,Uz=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Hz}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function jz(n){if(!lL.has(n))try{sv||(sv=document.createElement("style"),sv.setAttribute("type","text/css"),document.head.appendChild(sv)),sv.sheet&&(sv.sheet.insertRule(`@media ${n} {body{ }}`,0),lL.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Du))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Hz(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let $z=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new cn.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return uL(ST(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=pe(uL(ST(t)).map(u=>this._registerQuery(u).observable));return s=$t(s.pipe(Vs(1)),s.pipe(aL(1),BR(0))),s.pipe((0,Et.U)(u=>{const d={matches:!1,breakpoints:{}};return u.forEach(({matches:g,query:y})=>{d.matches=d.matches||g,d.breakpoints[y]=g}),d}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new cr.y(u=>{const d=g=>this._zone.run(()=>u.next(g));return r.addListener(d),()=>{r.removeListener(d)}}).pipe(dl(r),(0,Et.U)(({matches:u})=>({query:t,matches:u})),nk(this._destroySubject)),mql:r};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Uz),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function uL(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}let MT=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function qz(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function Wz(n){try{return n.frameElement}catch{return null}}(function tW(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===fL(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),s=fL(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function Jz(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==s:"video"===i?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function eW(n){return!function Zz(n){return function Qz(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function Kz(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function Yz(n){return function Xz(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||hL(n))}(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Du))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function hL(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function fL(n){if(!hL(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class nW{constructor(e,t,r,i,s=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return r?.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Vs(1)).subscribe(e)}}let rk=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new nW(t,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(MT),f.LFG(f.R0b),f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const sW=new f.OlP("cdk-input-modality-detector-options"),oW={ignoreKeys:[18,17,224,91,16]},ov=IT({passive:!0,capture:!0});let aW=(()=>{class n{constructor(t,r,i,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Yn(null),this._lastTouchMs=0,this._onKeydown=u=>{this._options?.ignoreKeys?.some(d=>d===u.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=qg(u))},this._onMousedown=u=>{Date.now()-this._lastTouchMs<650||(this._modality.next(function rW(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}(u)?"keyboard":"mouse"),this._mostRecentTarget=qg(u))},this._onTouchstart=u=>{!function iW(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(u)?(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=qg(u)):this._modality.next("keyboard")},this._options={...oW,...s},this.modalityDetected=this._modality.pipe(aL(1)),this.modalityChanged=this.modalityDetected.pipe(D_()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,ov),i.addEventListener("mousedown",this._onMousedown,ov),i.addEventListener("touchstart",this._onTouchstart,ov)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,ov),document.removeEventListener("mousedown",this._onMousedown,ov),document.removeEventListener("touchstart",this._onTouchstart,ov))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Du),f.LFG(f.R0b),f.LFG(re),f.LFG(sW,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const uW=new f.OlP("cdk-focus-monitor-default-options"),xT=IT({passive:!0,capture:!0});let RT=(()=>{class n{constructor(t,r,i,s,u){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new cn.x,this._rootNodeFocusAndBlurListener=d=>{for(let y=qg(d);y;y=y.parentElement)"focus"===d.type?this._onFocus(d,y):this._onBlur(d,y)},this._document=s,this._detectionMode=u?.detectionMode||0}monitor(t,r=!1){const i=AT(t);if(!this._platform.isBrowser||1!==i.nodeType)return ut(null);const s=function Cz(n){if(function Ez(){if(null==XR){const n=typeof document<"u"?document.head:null;XR=!(!n||!n.createShadowRoot&&!n.attachShadow)}return XR}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),u=this._elementInfo.get(i);if(u)return r&&(u.checkChildren=!0),u.subject;const d={checkChildren:r,subject:new cn.x,rootNode:s};return this._elementInfo.set(i,d),this._registerGlobalListeners(d),d.subject}stopMonitoring(t){const r=AT(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=AT(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([d,g])=>this._originChanged(d,r,g)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=qg(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,xT),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,xT)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(nk(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,xT),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,xT),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let u=0;u<s.length;u++)if(s[u].contains(r))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.R0b),f.LFG(Du),f.LFG(aW),f.LFG(re,8),f.LFG(uW,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const gL="cdk-high-contrast-black-on-white",mL="cdk-high-contrast-white-on-black",ik="cdk-high-contrast-active";let _L=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=(0,f.f3M)($z).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(ik,gL,mL),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(ik,gL):2===r&&t.add(ik,mL)}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Du),f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),cW=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(_L))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Bz]}),n})();const dW=new f.OlP("cdk-dir-doc",{providedIn:"root",factory:function hW(){return(0,f.f3M)(re)}}),fW=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let kT=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new f.vpe,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function pW(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?fW.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(dW,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),T0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const mW=new f.OlP("mat-sanity-checks",{providedIn:"root",factory:function gW(){return!0}});let OT=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!ek()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(_L),f.LFG(mW,8),f.LFG(re))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[T0,T0]}),n})();function _W(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=TT(e)}}}function yW(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function vW(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?iv(t):this.defaultTabIndex}}}const xl=new f.OlP("NgValueAccessor");let hV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),I3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[hV]}),n})(),D3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[I3]}),n})();const S3=["sliderWrapper"],Ha=IT({passive:!1}),k3={provide:xl,useExisting:(0,f.Gpc)(()=>xV),multi:!0};class O3{}const P3=vW(yW(_W(class{constructor(n){this._elementRef=n}}),"accent"));let xV=(()=>{class n extends P3{constructor(t,r,i,s,u,d,g,y){super(t),this._focusMonitor=r,this._changeDetectorRef=i,this._dir=s,this._ngZone=d,this._animationMode=y,this._invert=!1,this._max=100,this._min=0,this._step=1,this._thumbLabel=!1,this._tickInterval=0,this._value=null,this._vertical=!1,this.change=new f.vpe,this.input=new f.vpe,this.valueChange=new f.vpe,this.onTouched=()=>{},this._percent=0,this._isSliding=null,this._isActive=!1,this._tickIntervalPercent=0,this._sliderDimensions=null,this._controlValueAccessorChangeFn=()=>{},this._dirChangeSubscription=kr.w0.EMPTY,this._pointerDown=E=>{this.disabled||this._isSliding||!k0(E)&&0!==E.button||this._ngZone.run(()=>{this._touchId=k0(E)?function N3(n,e){for(let t=0;t<n.touches.length;t++){const r=n.touches[t].target;if(e===r||e.contains(r))return n.touches[t].identifier}}(E,this._elementRef.nativeElement):void 0;const T=kV(E,this._touchId);if(T){const P=this.value;this._isSliding="pointer",this._lastPointerEvent=E,this._focusHostElement(),this._onMouseenter(),this._bindGlobalEvents(E),this._focusHostElement(),this._updateValueFromPosition(T),this._valueOnSlideStart=P,E.cancelable&&E.preventDefault(),P!=this.value&&this._emitInputEvent()}})},this._pointerMove=E=>{if("pointer"===this._isSliding){const T=kV(E,this._touchId);if(T){E.cancelable&&E.preventDefault();const P=this.value;this._lastPointerEvent=E,this._updateValueFromPosition(T),P!=this.value&&this._emitInputEvent()}}},this._pointerUp=E=>{"pointer"===this._isSliding&&(!k0(E)||"number"!=typeof this._touchId||Tk(E.changedTouches,this._touchId))&&(E.cancelable&&E.preventDefault(),this._removeGlobalEvents(),this._isSliding=null,this._touchId=void 0,this._valueOnSlideStart!=this.value&&!this.disabled&&this._emitChangeEvent(),this._valueOnSlideStart=this._lastPointerEvent=null)},this._windowBlur=()=>{this._lastPointerEvent&&this._pointerUp(this._lastPointerEvent)},this._document=g,this.tabIndex=parseInt(u)||0,d.runOutsideAngular(()=>{const E=t.nativeElement;E.addEventListener("mousedown",this._pointerDown,Ha),E.addEventListener("touchstart",this._pointerDown,Ha)})}get invert(){return this._invert}set invert(t){this._invert=TT(t)}get max(){return this._max}set max(t){this._max=iv(t,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get min(){return this._min}set min(t){this._min=iv(t,this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get step(){return this._step}set step(t){this._step=iv(t,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()}get thumbLabel(){return this._thumbLabel}set thumbLabel(t){this._thumbLabel=TT(t)}get tickInterval(){return this._tickInterval}set tickInterval(t){this._tickInterval="auto"===t?"auto":"number"==typeof t||"string"==typeof t?iv(t,this._tickInterval):0}get value(){return null===this._value&&(this.value=this._min),this._value}set value(t){if(t!==this._value){let r=iv(t,0);this._roundToDecimal&&r!==this.min&&r!==this.max&&(r=parseFloat(r.toFixed(this._roundToDecimal))),this._value=r,this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}}get vertical(){return this._vertical}set vertical(t){this._vertical=TT(t)}get displayValue(){return this.displayWith?this.displayWith(this.value):this._roundToDecimal&&this.value&&this.value%1!=0?this.value.toFixed(this._roundToDecimal):this.value||0}focus(t){this._focusHostElement(t)}blur(){this._blurHostElement()}get percent(){return this._clamp(this._percent)}_shouldInvertAxis(){return this.vertical?!this.invert:this.invert}_isMinValue(){return 0===this.percent}_getThumbGap(){return this.disabled?7:this._isMinValue()&&!this.thumbLabel?this._isActive?10:7:0}_getTrackBackgroundStyles(){const r=this.vertical?`1, ${1-this.percent}, 1`:1-this.percent+", 1, 1";return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"-":""}${this._getThumbGap()}px) scale3d(${r})`}}_getTrackFillStyles(){const t=this.percent,i=this.vertical?`1, ${t}, 1`:`${t}, 1, 1`;return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"":"-"}${this._getThumbGap()}px) scale3d(${i})`,display:0===t?"none":""}}_getTicksContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"-":""}${this._tickIntervalPercent/2*100}%)`}}_getTicksStyles(){let t=100*this._tickIntervalPercent,d={backgroundSize:this.vertical?`2px ${t}%`:`${t}% 2px`,transform:`translateZ(0) translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"":"-"}${t/2}%)${this.vertical||"rtl"!=this._getDirection()?"":" rotate(180deg)"}`};if(this._isMinValue()&&this._getThumbGap()){const g=this._shouldInvertAxis();let y;y=this.vertical?g?"Bottom":"Top":g?"Right":"Left",d[`padding${y}`]=`${this._getThumbGap()}px`}return d}_getThumbContainerStyles(){const t=this._shouldInvertAxis();return{transform:`translate${this.vertical?"Y":"X"}(-${100*(("rtl"!=this._getDirection()||this.vertical?t:!t)?this.percent:1-this.percent)}%)`}}_shouldInvertMouseCoords(){const t=this._shouldInvertAxis();return"rtl"!=this._getDirection()||this.vertical?t:!t}_getDirection(){return this._dir&&"rtl"==this._dir.value?"rtl":"ltr"}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{this._isActive=!!t&&"keyboard"!==t,this._changeDetectorRef.detectChanges()}),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>{this._changeDetectorRef.markForCheck()}))}ngOnDestroy(){const t=this._elementRef.nativeElement;t.removeEventListener("mousedown",this._pointerDown,Ha),t.removeEventListener("touchstart",this._pointerDown,Ha),this._lastPointerEvent=null,this._removeGlobalEvents(),this._focusMonitor.stopMonitoring(this._elementRef),this._dirChangeSubscription.unsubscribe()}_onMouseenter(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())}_onFocus(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()}_onBlur(){this.onTouched()}_onKeydown(t){if(this.disabled||tk(t)||this._isSliding&&"keyboard"!==this._isSliding)return;const r=this.value;switch(t.keyCode){case 33:this._increment(10);break;case 34:this._increment(-10);break;case 35:this.value=this.max;break;case 36:this.value=this.min;break;case 37:this._increment("rtl"==this._getDirection()?1:-1);break;case 38:this._increment(1);break;case 39:this._increment("rtl"==this._getDirection()?-1:1);break;case 40:this._increment(-1);break;default:return}r!=this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding="keyboard",t.preventDefault()}_onKeyup(){"keyboard"===this._isSliding&&(this._isSliding=null)}_getWindow(){return this._document.defaultView||window}_bindGlobalEvents(t){const r=this._document,i=k0(t),u=i?"touchend":"mouseup";r.addEventListener(i?"touchmove":"mousemove",this._pointerMove,Ha),r.addEventListener(u,this._pointerUp,Ha),i&&r.addEventListener("touchcancel",this._pointerUp,Ha);const d=this._getWindow();typeof d<"u"&&d&&d.addEventListener("blur",this._windowBlur)}_removeGlobalEvents(){const t=this._document;t.removeEventListener("mousemove",this._pointerMove,Ha),t.removeEventListener("mouseup",this._pointerUp,Ha),t.removeEventListener("touchmove",this._pointerMove,Ha),t.removeEventListener("touchend",this._pointerUp,Ha),t.removeEventListener("touchcancel",this._pointerUp,Ha);const r=this._getWindow();typeof r<"u"&&r&&r.removeEventListener("blur",this._windowBlur)}_increment(t){const r=this._clamp(this.value||0,this.min,this.max);this.value=this._clamp(r+this.step*t,this.min,this.max)}_updateValueFromPosition(t){if(!this._sliderDimensions)return;let u=this._clamp(((this.vertical?t.y:t.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));if(this._shouldInvertMouseCoords()&&(u=1-u),0===u)this.value=this.min;else if(1===u)this.value=this.max;else{const d=this._calculateValue(u),g=Math.round((d-this.min)/this.step)*this.step+this.min;this.value=this._clamp(g,this.min,this.max)}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.value),this.valueChange.emit(this.value),this.change.emit(this._createChangeEvent())}_emitInputEvent(){this.input.emit(this._createChangeEvent())}_updateTickIntervalPercent(){if(!this.tickInterval||!this._sliderDimensions)return;let t;if("auto"==this.tickInterval){let r=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width;t=Math.ceil(30/(r*this.step/(this.max-this.min)))*this.step/r}else t=this.tickInterval*this.step/(this.max-this.min);this._tickIntervalPercent=RV(t)?t:0}_createChangeEvent(t=this.value){let r=new O3;return r.source=this,r.value=t,r}_calculatePercentage(t){const r=((t||0)-this.min)/(this.max-this.min);return RV(r)?r:0}_calculateValue(t){return this.min+t*(this.max-this.min)}_clamp(t,r=0,i=1){return Math.max(r,Math.min(t,i))}_getSliderDimensions(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null}_focusHostElement(t){this._elementRef.nativeElement.focus(t)}_blurHostElement(){this._elementRef.nativeElement.blur()}writeValue(t){this.value=t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(RT),f.Y36(f.sBO),f.Y36(kT,8),f.$8M("tabindex"),f.Y36(f.R0b),f.Y36(re),f.Y36(f.QbO,8))},n.\u0275cmp=f.Xpm({type:n,selectors:[["mat-slider"]],viewQuery:function(t,r){if(1&t&&f.Gf(S3,5),2&t){let i;f.iGM(i=f.CRH())&&(r._sliderWrapper=i.first)}},hostAttrs:["role","slider",1,"mat-slider","mat-focus-indicator"],hostVars:29,hostBindings:function(t,r){1&t&&f.NdJ("focus",function(){return r._onFocus()})("blur",function(){return r._onBlur()})("keydown",function(s){return r._onKeydown(s)})("keyup",function(){return r._onKeyup()})("mouseenter",function(){return r._onMouseenter()})("selectstart",function(s){return s.preventDefault()}),2&t&&(f.Ikx("tabIndex",r.tabIndex),f.uIk("aria-disabled",r.disabled)("aria-valuemax",r.max)("aria-valuemin",r.min)("aria-valuenow",r.value)("aria-valuetext",r.valueText??r.displayValue)("aria-orientation",r.vertical?"vertical":"horizontal"),f.ekj("mat-slider-disabled",r.disabled)("mat-slider-has-ticks",r.tickInterval)("mat-slider-horizontal",!r.vertical)("mat-slider-axis-inverted",r._shouldInvertAxis())("mat-slider-invert-mouse-coords",r._shouldInvertMouseCoords())("mat-slider-sliding",r._isSliding)("mat-slider-thumb-label-showing",r.thumbLabel)("mat-slider-vertical",r.vertical)("mat-slider-min-value",r._isMinValue())("mat-slider-hide-last-tick",r.disabled||r._isMinValue()&&r._getThumbGap()&&r._shouldInvertAxis())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{disabled:"disabled",color:"color",tabIndex:"tabIndex",invert:"invert",max:"max",min:"min",step:"step",thumbLabel:"thumbLabel",tickInterval:"tickInterval",value:"value",displayWith:"displayWith",valueText:"valueText",vertical:"vertical"},outputs:{change:"change",input:"input",valueChange:"valueChange"},exportAs:["matSlider"],features:[f._Bn([k3]),f.qOj],decls:13,vars:6,consts:[[1,"mat-slider-wrapper"],["sliderWrapper",""],[1,"mat-slider-track-wrapper"],[1,"mat-slider-track-background",3,"ngStyle"],[1,"mat-slider-track-fill",3,"ngStyle"],[1,"mat-slider-ticks-container",3,"ngStyle"],[1,"mat-slider-ticks",3,"ngStyle"],[1,"mat-slider-thumb-container",3,"ngStyle"],[1,"mat-slider-focus-ring"],[1,"mat-slider-thumb"],[1,"mat-slider-thumb-label"],[1,"mat-slider-thumb-label-text"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0,1)(2,"div",2),f._UZ(3,"div",3)(4,"div",4),f.qZA(),f.TgZ(5,"div",5),f._UZ(6,"div",6),f.qZA(),f.TgZ(7,"div",7),f._UZ(8,"div",8)(9,"div",9),f.TgZ(10,"div",10)(11,"span",11),f._uU(12),f.qZA()()()()),2&t&&(f.xp6(3),f.Q6J("ngStyle",r._getTrackBackgroundStyles()),f.xp6(1),f.Q6J("ngStyle",r._getTrackFillStyles()),f.xp6(1),f.Q6J("ngStyle",r._getTicksContainerStyles()),f.xp6(1),f.Q6J("ngStyle",r._getTicksStyles()),f.xp6(1),f.Q6J("ngStyle",r._getThumbContainerStyles()),f.xp6(5),f.Oqu(r.displayValue))},dependencies:[Rd],styles:['.mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:none;vertical-align:middle}.mat-slider:not(.mat-slider-disabled):active,.mat-slider.mat-slider-sliding:not(.mat-slider-disabled){cursor:grabbing}.mat-slider-wrapper{-webkit-print-color-adjust:exact;color-adjust:exact;position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{-webkit-background-clip:content-box;background-clip:content-box;background-repeat:repeat;box-sizing:border-box;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider.cdk-keyboard-focused .mat-slider-focus-ring,.mat-slider.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb{cursor:grab}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid rgba(0,0,0,0);border-radius:50%;transform:scale(0.7);transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-radius 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.cdk-high-contrast-active .mat-slider-thumb-label{outline:solid 1px}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-sliding .mat-slider-track-fill,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-thumb-container{transition-duration:0ms}.mat-slider-has-ticks .mat-slider-wrapper::after{content:"";position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{display:none}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(0.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}.cdk-high-contrast-active .mat-slider-horizontal .mat-slider-ticks-container{height:0;outline:solid 2px;top:1px}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(0.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label,.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label-text{transform:none}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}.cdk-high-contrast-active .mat-slider-vertical .mat-slider-ticks-container{width:0;outline:solid 2px;left:1px}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(0.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}.mat-slider._mat-animation-noopable .mat-slider-track-fill,.mat-slider._mat-animation-noopable .mat-slider-track-background,.mat-slider._mat-animation-noopable .mat-slider-ticks,.mat-slider._mat-animation-noopable .mat-slider-thumb-container,.mat-slider._mat-animation-noopable .mat-slider-focus-ring,.mat-slider._mat-animation-noopable .mat-slider-thumb,.mat-slider._mat-animation-noopable .mat-slider-thumb-label,.mat-slider._mat-animation-noopable .mat-slider-thumb-label-text,.mat-slider._mat-animation-noopable .mat-slider-has-ticks .mat-slider-wrapper::after{transition:none}'],encapsulation:2,changeDetection:0}),n})();function RV(n){return!isNaN(n)&&isFinite(n)}function k0(n){return"t"===n.type[0]}function kV(n,e){let t;return t=k0(n)?"number"==typeof e?Tk(n.touches,e)||Tk(n.changedTouches,e):n.touches[0]||n.changedTouches[0]:n,t?{x:t.clientX,y:t.clientY}:void 0}function Tk(n,e){for(let t=0;t<n.length;t++)if(n[t].identifier===e)return n[t]}let F3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[pa,OT,OT]}),n})(),L3=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-header"]],decls:5,vars:0,consts:[[1,"logo"],["aria-hidden","true",1,"fa","fa-volume-off"]],template:function(t,r){1&t&&(f.TgZ(0,"header")(1,"h1",0),f._uU(2,"noise"),f.qZA(),f.TgZ(3,"div"),f._UZ(4,"i",1),f.qZA()())},styles:["header[_ngcontent-%COMP%]{position:fixed;width:100%;background-color:#00000040;height:2.5rem;padding:.8rem;display:flex;justify-content:space-between}header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-family:monospace}header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin-left:12px;color:#faebd7;font-size:2.5rem}header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;margin-right:2rem}header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;color:#b0bec5}"]}),n})(),V3=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-footer"]],decls:4,vars:0,consts:[["href","http://prashilwadkar.github.io"]],template:function(t,r){1&t&&(f.TgZ(0,"footer")(1,"a",0)(2,"p"),f._uU(3,"\xa9 2023 | Contact Me"),f.qZA()()())},styles:["footer[_ngcontent-%COMP%]{display:flex;padding-top:2rem;justify-content:end}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;margin-right:1rem;color:#ffffff8a}"]}),n})();const B3=function(n){return{playing:n}};function U3(n,e){if(1&n){const t=f.EpF();f.ynx(0),f.TgZ(1,"div",10)(2,"div",11)(3,"div",12),f.NdJ("click",function(){const s=f.CHM(t).index,u=f.oxw();return f.KtG(u.play(s))}),f._UZ(4,"i",13),f.TgZ(5,"label"),f._uU(6),f.qZA()(),f.TgZ(7,"div",14),f._UZ(8,"i",15),f.TgZ(9,"mat-slider",16),f.NdJ("input",function(i){const u=f.CHM(t).index,d=f.oxw();return f.KtG(d.ctrlVolume(u,i))}),f._UZ(10,"input",17),f.qZA(),f._UZ(11,"i",18),f.qZA()()(),f.BQk()}if(2&n){const t=e.$implicit,r=f.oxw();f.xp6(2),f.Q6J("ngClass",f.VKq(9,B3,t.playing)),f.xp6(2),f.Tol(t.icon),f.Udp("color",r.nightON?"white":"inherit"),f.xp6(1),f.Udp("color",r.nightON?"white":"inherit"),f.xp6(1),f.Oqu(t.name)}}const j3=function(n){return{"dashboard-night":n}};let H3=(()=>{class n{constructor(t,r){this.db=t,this.fileUploadService=r,this.title="noise",this.soundList=[],this.setOfSoundList=[],this.pageNumber=0,this.pageSize=8,this.nightON=!1,this.getAllMusicList()}getMusicObject(t){return new LC.Howl({src:t,loop:!0,html5:!0,format:["mp3","aac","wav"],volume:.6})}getMusic(t){this.fileUploadService.getUploadFileById("music/"+t[0]).subscribe(r=>{this.soundList[t[1]].sound=this.getMusicObject(r),this.soundList[t[1]].sound.play()})}play(t){this.soundList[t].playing?this.soundList[t].sound.stop():this.soundList[t].sound&&2==this.soundList[t].sound.length?this.getMusic(this.soundList[t].sound):this.soundList[t].sound.play(),this.soundList[t].playing=!this.soundList[t].playing}ctrlVolume(t,r){this.soundList[t].sound.volume(r.value)}getAllMusicList(){this.db.list("music").valueChanges().subscribe(t=>{let r=t.map((i,s)=>({name:i.name,sound:[i.fileId,s],icon:i.icon,playing:!1}));this.setOfSoundList=this.chunks(r,this.pageSize),this.soundList=this.setOfSoundList[this.pageNumber],this.pageNumber=0})}changeMusicList(t){let r=t?this.pageNumber+1:this.pageNumber-1;r<this.setOfSoundList.length&&r>=0&&(this.pageNumber=r,this.soundList=this.setOfSoundList[this.pageNumber])}mute(t){LC.Howler.mute(t)}chunks(t,r){let i=[];for(let s=0;s<t.length;s+=r)i.push(t.slice(s,s+r));return i}turnOnNight(){this.nightON=!this.nightON}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(VR),f.Y36(vz))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:13,vars:6,consts:[[1,"dashboard",3,"ngClass"],[1,"main","row"],[1,"col-xs-12","row"],[4,"ngFor","ngForOf"],[1,"row","controls"],["aria-hidden","true",1,"fa","fa-chevron-left",3,"click"],["aria-hidden","true",1,"fa","fa-play-circle",3,"click"],["aria-hidden","true",1,"fa","fa-moon-o",3,"click"],["aria-hidden","true",1,"fa","fa-stop-circle",3,"click"],["aria-hidden","true",1,"fa","fa-chevron-right",3,"click"],[1,"col-xs"],[1,"sound",3,"ngClass"],[1,"sound-icon",3,"click"],["aria-hidden","true"],[1,"slider"],["aria-hidden","true",1,"fa","fa-volume-down"],["min","-0.10","max","1.0","step","0.01","value","0.6",3,"input"],["matSliderThumb",""],["aria-hidden","true",1,"fa","fa-volume-up"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f._UZ(1,"app-header"),f.TgZ(2,"section",1)(3,"div",2)(4,"div",2),f.YNc(5,U3,12,11,"ng-container",3),f.qZA(),f.TgZ(6,"div",4)(7,"i",5),f.NdJ("click",function(){return r.changeMusicList(!1)}),f.qZA(),f.TgZ(8,"i",6),f.NdJ("click",function(){return r.mute(!1)}),f.qZA(),f.TgZ(9,"i",7),f.NdJ("click",function(){return r.turnOnNight()}),f.qZA(),f.TgZ(10,"i",8),f.NdJ("click",function(){return r.mute(!0)}),f.qZA(),f.TgZ(11,"i",9),f.NdJ("click",function(){return r.changeMusicList(!0)}),f.qZA()()()(),f._UZ(12,"app-footer"),f.qZA()),2&t&&(f.Q6J("ngClass",f.VKq(4,j3,r.nightON)),f.xp6(5),f.Q6J("ngForOf",r.soundList),f.xp6(4),f.Udp("color",r.nightON?"darkcyan":"rgba(255, 255, 255, 0.631372549)"))},dependencies:[wn,Ro,xV,L3,V3],styles:[".dashboard[_ngcontent-%COMP%]{width:100%;height:100%;animation-duration:14s;animation-name:color-change;animation-iteration-count:infinite;animation-direction:normal;animation-timing-function:ease-in;display:flex;flex-direction:column}.dashboard-night[_ngcontent-%COMP%]{animation-name:none;background-color:#000}@keyframes color-change{0%{background-color:#6a737b}16%{background-color:#fbb034}33%{background-color:#dfc624}50%{background-color:#c1d82f}66%{background-color:#00a4e4}83%{background-color:#8a7967}to{background-color:#6a737b}}.playing[_ngcontent-%COMP%]{background-color:#34171761!important}.playing[_ngcontent-%COMP%]   .sound-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .playing[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#faebd7!important}.main[_ngcontent-%COMP%]{margin:0 1rem;height:100%;justify-content:center}.main[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:center;align-content:center}.main[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-top:.6rem;justify-content:center}.main[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{margin-top:2rem;background-color:#4a45452e;padding:4px;border-radius:8px}.main[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;margin:0 .9rem;color:#ffffffa1;cursor:pointer}.mat-slider-horizontal[_ngcontent-%COMP%]{height:30px!important;min-width:120px!important}"]}),n})();class OV{}const yd="*";function G3(n,e){return{type:7,name:n,definitions:e,options:{}}}function PV(n,e=null){return{type:4,styles:e,timings:n}}function NV(n,e=null){return{type:3,steps:n,options:e}}function FV(n,e=null){return{type:2,steps:n,options:e}}function lv(n){return{type:6,styles:n,offset:null}}function LV(n,e,t){return{type:0,name:n,styles:e,options:t}}function VV(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function BV(n=null){return{type:9,options:n}}function UV(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function jV(n){Promise.resolve().then(n)}class O0{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){jV(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class HV{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?jV(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==s&&this._onFinish()}),u.onDestroy(()=>{++r==s&&this._onDestroy()}),u.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((u,d)=>Math.max(u,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function $V(n){return new f.vHH(3e3,!1)}function Dq(){return typeof window<"u"&&typeof window.document<"u"}function Ak(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function yf(n){switch(n.length){case 0:return new O0;case 1:return n[0];default:return new HV(n)}}function GV(n,e,t,r,i=new Map,s=new Map){const u=[],d=[];let g=-1,y=null;if(r.forEach(E=>{const T=E.get("offset"),P=T==g,B=P&&y||new Map;E.forEach((q,ie)=>{let ge=ie,Ue=q;if("offset"!==ie)switch(ge=e.normalizePropertyName(ge,u),Ue){case"!":Ue=i.get(ie);break;case yd:Ue=s.get(ie);break;default:Ue=e.normalizeStyleValue(ie,ge,Ue,u)}B.set(ge,Ue)}),P||d.push(B),y=B,g=T}),u.length)throw function fq(n){return new f.vHH(3502,!1)}();return d}function Mk(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&xk(t,"start",n)));break;case"done":n.onDone(()=>r(t&&xk(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&xk(t,"destroy",n)))}}function xk(n,e,t){const s=Rk(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),u=n._data;return null!=u&&(s._data=u),s}function Rk(n,e,t,r,i="",s=0,u){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!u}}function sa(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function zV(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let kk=(n,e)=>!1,WV=(n,e,t)=>[],qV=null;function Ok(n){const e=n.parentNode||n.host;return e===qV?null:e}(Ak()||typeof Element<"u")&&(Dq()?(qV=(()=>document.documentElement)(),kk=(n,e)=>{for(;e;){if(e===n)return!0;e=Ok(e)}return!1}):kk=(n,e)=>n.contains(e),WV=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Yg=null,KV=!1;const ZV=kk,YV=WV;let QV=(()=>{class n{validateStyleProperty(t){return function Sq(n){Yg||(Yg=function Aq(){return typeof document<"u"?document.body:null}()||{},KV=!!Yg.style&&"WebkitAppearance"in Yg.style);let e=!0;return Yg.style&&!function Tq(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Yg.style,!e&&KV&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Yg.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return ZV(t,r)}getParentElement(t){return Ok(t)}query(t,r,i){return YV(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,u,d=[],g){return new O0(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Pk=(()=>{class n{}return n.NOOP=new QV,n})();const Nk="ng-enter",$T="ng-leave",GT="ng-trigger",zT=".ng-trigger",JV="ng-animating",Fk=".ng-animating";function vd(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Lk(parseFloat(e[1]),e[2])}function Lk(n,e){return"s"===e?1e3*n:n}function WT(n,e,t){return n.hasOwnProperty("duration")?n:function Rq(n,e,t){let i,s=0,u="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push($V()),{duration:0,delay:0,easing:""};i=Lk(parseFloat(d[1]),d[2]);const g=d[3];null!=g&&(s=Lk(parseFloat(g),d[4]));const y=d[5];y&&(u=y)}else i=n;if(!t){let d=!1,g=e.length;i<0&&(e.push(function z3(){return new f.vHH(3100,!1)}()),d=!0),s<0&&(e.push(function W3(){return new f.vHH(3101,!1)}()),d=!0),d&&e.splice(g,0,$V())}return{duration:i,delay:s,easing:u}}(n,e,t)}function P0(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function eB(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function vf(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function nB(n,e,t){return t?e+":"+t+";":""}function rB(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=nB(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=nB(0,Nq(t),n.style[t]));n.setAttribute("style",e)}function Tu(n,e,t){n.style&&(e.forEach((r,i)=>{const s=Bk(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r}),Ak()&&rB(n))}function Qg(n,e){n.style&&(e.forEach((t,r)=>{const i=Bk(r);n.style[i]=""}),Ak()&&rB(n))}function N0(n){return Array.isArray(n)?1==n.length?n[0]:FV(n):n}const Vk=new RegExp("{{\\s*(.+?)\\s*}}","g");function iB(n){let e=[];if("string"==typeof n){let t;for(;t=Vk.exec(n);)e.push(t[1]);Vk.lastIndex=0}return e}function F0(n,e,t){const r=n.toString(),i=r.replace(Vk,(s,u)=>{let d=e[u];return null==d&&(t.push(function K3(n){return new f.vHH(3003,!1)}()),d=""),d.toString()});return i==r?n:i}function qT(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Pq=/-+([a-z0-9])/g;function Bk(n){return n.replace(Pq,(...e)=>e[1].toUpperCase())}function Nq(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function oa(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Z3(n){return new f.vHH(3004,!1)}()}}function sB(n,e){return window.getComputedStyle(n)[e]}function jq(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Hq(n,e,t){if(":"==n[0]){const g=function $q(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function uq(n){return new f.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof g)return void e.push(g);n=g}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function lq(n){return new f.vHH(3015,!1)}()),e;const i=r[1],s=r[2],u=r[3];e.push(oB(i,u));"<"==s[0]&&!("*"==i&&"*"==u)&&e.push(oB(u,i))}(r,t,e)):t.push(n),t}const QT=new Set(["true","1"]),XT=new Set(["false","0"]);function oB(n,e){const t=QT.has(n)||XT.has(n),r=QT.has(e)||XT.has(e);return(i,s)=>{let u="*"==n||n==i,d="*"==e||e==s;return!u&&t&&"boolean"==typeof i&&(u=i?QT.has(n):XT.has(n)),!d&&r&&"boolean"==typeof s&&(d=s?QT.has(e):XT.has(e)),u&&d}}const Gq=new RegExp("s*:selfs*,?","g");function Uk(n,e,t,r){return new zq(n).build(e,t,r)}class zq{constructor(e){this._driver=e}build(e,t,r){const i=new Kq(t);return this._resetContextStyleTimingState(i),oa(this,N0(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push(function Q3(){return new f.vHH(3006,!1)}()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const g=d,y=g.name;y.toString().split(/\s*,\s*/).forEach(E=>{g.name=E,s.push(this.visitState(g,t))}),g.name=y}else if(1==d.type){const g=this.visitTransition(d,t);r+=g.queryCount,i+=g.depCount,u.push(g)}else t.errors.push(function X3(){return new f.vHH(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:u,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,u=i||{};r.styles.forEach(d=>{d instanceof Map&&d.forEach(g=>{iB(g).forEach(y=>{u.hasOwnProperty(y)||s.add(y)})})}),s.size&&(qT(s.values()),t.errors.push(function J3(n,e){return new f.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=oa(this,N0(e.animation),t);return{type:1,matchers:jq(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Xg(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>oa(this,r,t)),options:Xg(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(u=>{t.currentTime=r;const d=oa(this,u,t);return i=Math.max(i,t.currentTime),d});return t.currentTime=i,{type:3,steps:s,options:Xg(e.options)}}visitAnimate(e,t){const r=function Yq(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return jk(WT(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=jk(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=WT(t,e);return jk(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:lv({});if(5==s.type)i=this.visitKeyframes(s,t);else{let u=e.styles,d=!1;if(!u){d=!0;const y={};r.easing&&(y.easing=r.easing),u=lv(y)}t.currentTime+=r.duration+r.delay;const g=this.visitStyle(u,t);g.isEmptyStep=d,i=g}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let d of i)"string"==typeof d?d===yd?r.push(d):t.errors.push(new f.vHH(3002,!1)):r.push(eB(d));let s=!1,u=null;return r.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(u=d.get("easing"),d.delete("easing")),!s))for(let g of d.values())if(g.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(u=>{"string"!=typeof u&&u.forEach((d,g)=>{const y=t.collectedStyles.get(t.currentQuerySelector),E=y.get(g);let T=!0;E&&(s!=i&&s>=E.startTime&&i<=E.endTime&&(t.errors.push(function tq(n,e,t,r,i){return new f.vHH(3010,!1)}()),T=!1),s=E.startTime),T&&y.set(g,{startTime:s,endTime:i}),t.options&&function Oq(n,e,t){const r=e.params||{},i=iB(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function q3(n){return new f.vHH(3001,!1)}())})}(d,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function nq(){return new f.vHH(3011,!1)}()),r;let s=0;const u=[];let d=!1,g=!1,y=0;const E=e.steps.map(Ue=>{const Ye=this._makeStyleAst(Ue,t);let Ze=null!=Ye.offset?Ye.offset:function Zq(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Ye.styles),tt=0;return null!=Ze&&(s++,tt=Ye.offset=Ze),g=g||tt<0||tt>1,d=d||tt<y,y=tt,u.push(tt),Ye});g&&t.errors.push(function rq(){return new f.vHH(3012,!1)}()),d&&t.errors.push(function iq(){return new f.vHH(3200,!1)}());const T=e.steps.length;let P=0;s>0&&s<T?t.errors.push(function sq(){return new f.vHH(3202,!1)}()):0==s&&(P=1/(T-1));const B=T-1,q=t.currentTime,ie=t.currentAnimateTimings,ge=ie.duration;return E.forEach((Ue,Ye)=>{const Ze=P>0?Ye==B?1:P*Ye:u[Ye],tt=Ze*ge;t.currentTime=q+ie.delay+tt,ie.duration=tt,this._validateStyleAst(Ue,t),Ue.offset=Ze,r.styles.push(Ue)}),r}visitReference(e,t){return{type:8,animation:oa(this,N0(e.animation),t),options:Xg(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Xg(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Xg(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,u]=function Wq(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Gq,"")),n=n.replace(/@\*/g,zT).replace(/@\w+/g,t=>zT+"-"+t.slice(1)).replace(/:animating/g,Fk),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,sa(t.collectedStyles,t.currentQuerySelector,new Map);const d=oa(this,N0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:u,animation:d,originalSelector:e.selector,options:Xg(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function oq(){return new f.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:WT(e.timings,t.errors,!0);return{type:12,animation:oa(this,N0(e.animation),t),timings:r,options:null}}}class Kq{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Xg(n){return n?(n=P0(n)).params&&(n.params=function qq(n){return n?P0(n):null}(n.params)):n={},n}function jk(n,e,t){return{duration:n,delay:e,easing:t}}function Hk(n,e,t,r,i,s,u=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:u,subTimeline:d}}class JT{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Jq=new RegExp(":enter","g"),t6=new RegExp(":leave","g");function $k(n,e,t,r,i,s=new Map,u=new Map,d,g,y=[]){return(new n6).buildKeyframes(n,e,t,r,i,s,u,d,g,y)}class n6{buildKeyframes(e,t,r,i,s,u,d,g,y,E=[]){y=y||new JT;const T=new Gk(e,t,y,i,s,E,[]);T.options=g;const P=g.delay?vd(g.delay):0;T.currentTimeline.delayNextStep(P),T.currentTimeline.setStyles([u],null,T.errors,g),oa(this,r,T);const B=T.timelines.filter(q=>q.containsAnimation());if(B.length&&d.size){let q;for(let ie=B.length-1;ie>=0;ie--){const ge=B[ie];if(ge.element===t){q=ge;break}}q&&!q.allowOnlyTimelineStyles()&&q.setStyles([d],null,T.errors,g)}return B.length?B.map(q=>q.buildKeyframes()):[Hk(t,[],[],[],0,P,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,u=this._visitSubInstructions(r,i,i.options);s!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const u="number"==typeof s?s:vd(F0(s,i?.params??{},t.errors));r.delayNextStep(u)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const u=null!=r.duration?vd(r.duration):null,d=null!=r.delay?vd(r.delay):null;return 0!==u&&e.forEach(g=>{const y=t.appendInstructionToTimeline(g,u,d);s=Math.max(s,y.duration+y.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),oa(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=eS);const u=vd(s.delay);i.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>oa(this,u,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?vd(e.options.delay):0;e.steps.forEach(u=>{const d=t.createSubContext(e.options);s&&d.delayNextStep(s),oa(this,u,d),i=Math.max(i,d.currentTimeline.currentTime),r.push(d.currentTimeline)}),r.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return WT(t.params?F0(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,d=t.createSubContext().currentTimeline;d.easing=r.easing,e.styles.forEach(g=>{d.forwardTime((g.offset||0)*s),d.setStyles(g.styles,g.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?vd(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=eS);let u=r;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=d.length;let g=null;d.forEach((y,E)=>{t.currentQueryIndex=E;const T=t.createSubContext(e.options,y);s&&T.delayNextStep(s),y===t.element&&(g=T.currentTimeline),oa(this,e.animation,T),T.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,T.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),g&&(t.currentTimeline.mergeTimelineCollectedStyles(g),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,u=Math.abs(s.duration),d=u*(t.currentQueryTotal-1);let g=u*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":g=d-g;break;case"full":g=r.currentStaggerTime}const E=t.currentTimeline;g&&E.delayNextStep(g);const T=E.currentTime;oa(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-T+(i.startTime-r.currentTimeline.startTime)}}const eS={};class Gk{constructor(e,t,r,i,s,u,d,g){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=u,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=eS,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=g||new tS(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=vd(r.duration)),null!=r.delay&&(i.delay=vd(r.delay));const s=r.params;if(s){let u=i.params;u||(u=this.options.params={}),Object.keys(s).forEach(d=>{(!t||!u.hasOwnProperty(d))&&(u[d]=F0(s[d],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new Gk(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=eS,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new r6(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,u){let d=[];if(i&&d.push(this.element),e.length>0){e=(e=e.replace(Jq,"."+this._enterClassName)).replace(t6,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),d.push(...y)}return!s&&0==d.length&&u.push(function aq(n){return new f.vHH(3014,!1)}()),d}}class tS{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new tS(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||yd),this._currentKeyframe.set(t,yd);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},u=function i6(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,yd)}else vf(i,t)}),t}(e,this._globalTimelineStyles);for(let[d,g]of u){const y=F0(g,s,r);this._pendingStyles.set(d,y),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??yd),this._updateStyle(d,y)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((d,g)=>{const y=vf(d,new Map,this._backFill);y.forEach((E,T)=>{"!"===E?e.add(T):E===yd&&t.add(T)}),r||y.set("offset",g/this.duration),i.push(y)});const s=e.size?qT(e.values()):[],u=t.size?qT(t.values()):[];if(r){const d=i[0],g=new Map(d);d.set("offset",0),g.set("offset",1),i=[d,g]}return Hk(this.element,i,s,u,this.duration,this.startTime,this.easing,!1)}}class r6 extends tS{constructor(e,t,r,i,s,u,d=!1){super(e,t,u.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],u=r+t,d=t/u,g=vf(e[0]);g.set("offset",0),s.push(g);const y=vf(e[0]);y.set("offset",uB(d)),s.push(y);const E=e.length-1;for(let T=1;T<=E;T++){let P=vf(e[T]);const B=P.get("offset");P.set("offset",uB((t+B*r)/u)),s.push(P)}r=u,t=0,i="",e=s}return Hk(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function uB(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class zk{}const s6=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class o6 extends zk{normalizePropertyName(e,t){return Bk(e)}normalizeStyleValue(e,t,r,i){let s="";const u=r.toString().trim();if(s6.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const d=r.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&i.push(function Y3(n,e){return new f.vHH(3005,!1)}())}return u+s}}function cB(n,e,t,r,i,s,u,d,g,y,E,T,P){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:u,timelines:d,queriedElements:g,preStyleProps:y,postStyleProps:E,totalTime:T,errors:P}}const Wk={};class dB{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function a6(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,u,d,g,y,E){const T=[],P=this.ast.options&&this.ast.options.params||Wk,q=this.buildStyles(r,d&&d.params||Wk,T),ie=g&&g.params||Wk,ge=this.buildStyles(i,ie,T),Ue=new Set,Ye=new Map,Ze=new Map,tt="void"===i,Lt={params:l6(ie,P),delay:this.ast.options?.delay},jt=E?[]:$k(e,t,this.ast.animation,s,u,q,ge,Lt,y,T);let vn=0;if(jt.forEach(ca=>{vn=Math.max(ca.duration+ca.delay,vn)}),T.length)return cB(t,this._triggerName,r,i,tt,q,ge,[],[],Ye,Ze,vn,T);jt.forEach(ca=>{const Md=ca.element,j$=sa(Ye,Md,new Set);ca.preStyleProps.forEach(Am=>j$.add(Am));const qE=sa(Ze,Md,new Set);ca.postStyleProps.forEach(Am=>qE.add(Am)),Md!==t&&Ue.add(Md)});const Ir=qT(Ue.values());return cB(t,this._triggerName,r,i,tt,q,ge,jt,Ir,Ye,Ze,vn)}}function l6(n,e){const t=P0(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class u6{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=P0(this.defaultParams);return Object.keys(e).forEach(s=>{const u=e[s];null!==u&&(i[s]=u)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((u,d)=>{u&&(u=F0(u,i,t));const g=this.normalizer.normalizePropertyName(d,t);u=this.normalizer.normalizeStyleValue(d,g,u,t),r.set(g,u)})}),r}}class d6{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new u6(i.style,i.options&&i.options.params||{},r))}),hB(this.states,"true","1"),hB(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new dB(e,i,this.states))}),this.fallbackTransition=function h6(n,e,t){return new dB(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(u=>u.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function hB(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const f6=new JT;class p6{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=Uk(this._driver,t,r,[]);if(r.length)throw function pq(n){return new f.vHH(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=GV(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let u;const d=new Map;if(s?(u=$k(this._driver,t,s,Nk,$T,new Map,new Map,r,f6,i),u.forEach(E=>{const T=sa(d,E.element,new Map);E.postStyleProps.forEach(P=>T.set(P,null))})):(i.push(function gq(){return new f.vHH(3300,!1)}()),u=[]),i.length)throw function mq(n){return new f.vHH(3504,!1)}();d.forEach((E,T)=>{E.forEach((P,B)=>{E.set(B,this._driver.computeStyle(T,B,yd))})});const y=yf(u.map(E=>{const T=d.get(E.element);return this._buildPlayer(E,new Map,T)}));return this._playersById.set(e,y),y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function _q(n){return new f.vHH(3301,!1)}();return t}listen(e,t,r,i){const s=Rk(t,"","","");return Mk(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const fB="ng-animate-queued",qk="ng-animate-disabled",v6=[],pB={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},w6={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},$a="__ng_removed";class Kk{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function I6(n){return n??null}(r?e.value:e),r){const s=P0(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const L0="void",Zk=new Kk(L0);class b6{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ga(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function yq(n,e){return new f.vHH(3302,!1)}();if(null==r||0==r.length)throw function vq(n){return new f.vHH(3303,!1)}();if(!function D6(n){return"start"==n||"done"==n}(r))throw function wq(n,e){return new f.vHH(3400,!1)}();const s=sa(this._elementListeners,e,[]),u={name:t,phase:r,callback:i};s.push(u);const d=sa(this._engine.statesByElement,e,new Map);return d.has(t)||(Ga(e,GT),Ga(e,GT+"-"+t),d.set(t,Zk)),()=>{this._engine.afterFlush(()=>{const g=s.indexOf(u);g>=0&&s.splice(g,1),this._triggers.has(t)||d.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function bq(n){return new f.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),u=new Yk(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(Ga(e,GT),Ga(e,GT+"-"+t),this._engine.statesByElement.set(e,d=new Map));let g=d.get(t);const y=new Kk(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&g&&y.absorbOptions(g.options),d.set(t,y),g||(g=Zk),y.value!==L0&&g.value===y.value){if(!function A6(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(g.params,y.params)){const ie=[],ge=s.matchStyles(g.value,g.params,ie),Ue=s.matchStyles(y.value,y.params,ie);ie.length?this._engine.reportError(ie):this._engine.afterFlush(()=>{Qg(e,ge),Tu(e,Ue)})}return}const P=sa(this._engine.playersByElement,e,[]);P.forEach(ie=>{ie.namespaceId==this.id&&ie.triggerName==t&&ie.queued&&ie.destroy()});let B=s.matchTransition(g.value,y.value,e,y.params),q=!1;if(!B){if(!i)return;B=s.fallbackTransition,q=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:B,fromState:g,toState:y,player:u,isFallbackTransition:q}),q||(Ga(e,fB),u.onStart(()=>{uv(e,fB)})),u.onDone(()=>{let ie=this.players.indexOf(u);ie>=0&&this.players.splice(ie,1);const ge=this._engine.playersByElement.get(e);if(ge){let Ue=ge.indexOf(u);Ue>=0&&ge.splice(Ue,1)}}),this.players.push(u),P.push(u),u}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,zT,!0);r.forEach(i=>{if(i[$a])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(u=>u.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),u=new Map;if(s){const d=[];if(s.forEach((g,y)=>{if(u.set(y,g.value),this._triggers.has(y)){const E=this.trigger(e,y,L0,i);E&&d.push(E)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,u),r&&yf(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const u=s.name;if(i.has(u))return;i.add(u);const g=this._triggers.get(u).fallbackTransition,y=r.get(u)||Zk,E=new Kk(L0),T=new Yk(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:g,fromState:y,toState:E,player:T,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let u=e;for(;u=u.parentNode;)if(r.statesByElement.get(u)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[$a];(!s||s===pB)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ga(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,u=this._elementListeners.get(s);u&&u.forEach(d=>{if(d.name==r.triggerName){const g=Rk(s,r.triggerName,r.fromState.value,r.toState.value);g._data=e,Mk(r.player,d.phase,g,d.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,u=i.transition.ast.depCount;return 0==s||0==u?s-u:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class E6{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new b6(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let u=!1,d=this.driver.getParentElement(t);for(;d;){const g=i.get(d);if(g){const y=r.indexOf(g);r.splice(y+1,0,e),u=!0;break}d=this.driver.getParentElement(d)}u||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(nS(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!nS(t))return;const s=t[$a];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ga(e,qk)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),uv(e,qk))}removeNode(e,t,r,i){if(nS(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[$a]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return nS(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,zT,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Fk,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return yf(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[$a];if(t&&t.setForRemoval){if(e[$a]=pB,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(qk)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ga(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?yf(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function Eq(n){return new f.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new JT,i=[],s=new Map,u=[],d=new Map,g=new Map,y=new Map,E=new Set;this.disabledNodes.forEach(Ct=>{E.add(Ct);const Bt=this.driver.query(Ct,".ng-animate-queued",!0);for(let Wt=0;Wt<Bt.length;Wt++)E.add(Bt[Wt])});const T=this.bodyNode,P=Array.from(this.statesByElement.keys()),B=_B(P,this.collectedEnterElements),q=new Map;let ie=0;B.forEach((Ct,Bt)=>{const Wt=Nk+ie++;q.set(Bt,Wt),Ct.forEach(xn=>Ga(xn,Wt))});const ge=[],Ue=new Set,Ye=new Set;for(let Ct=0;Ct<this.collectedLeaveElements.length;Ct++){const Bt=this.collectedLeaveElements[Ct],Wt=Bt[$a];Wt&&Wt.setForRemoval&&(ge.push(Bt),Ue.add(Bt),Wt.hasAnimation?this.driver.query(Bt,".ng-star-inserted",!0).forEach(xn=>Ue.add(xn)):Ye.add(Bt))}const Ze=new Map,tt=_B(P,Array.from(Ue));tt.forEach((Ct,Bt)=>{const Wt=$T+ie++;Ze.set(Bt,Wt),Ct.forEach(xn=>Ga(xn,Wt))}),e.push(()=>{B.forEach((Ct,Bt)=>{const Wt=q.get(Bt);Ct.forEach(xn=>uv(xn,Wt))}),tt.forEach((Ct,Bt)=>{const Wt=Ze.get(Bt);Ct.forEach(xn=>uv(xn,Wt))}),ge.forEach(Ct=>{this.processLeaveNode(Ct)})});const Lt=[],jt=[];for(let Ct=this._namespaceList.length-1;Ct>=0;Ct--)this._namespaceList[Ct].drainQueuedTransitions(t).forEach(Wt=>{const xn=Wt.player,Qi=Wt.element;if(Lt.push(xn),this.collectedEnterElements.length){const Ss=Qi[$a];if(Ss&&Ss.setForMove){if(Ss.previousTriggersValues&&Ss.previousTriggersValues.has(Wt.triggerName)){const Mm=Ss.previousTriggersValues.get(Wt.triggerName),Wa=this.statesByElement.get(Wt.element);if(Wa&&Wa.has(Wt.triggerName)){const LA=Wa.get(Wt.triggerName);LA.value=Mm,Wa.set(Wt.triggerName,LA)}}return void xn.destroy()}}const Nu=!T||!this.driver.containsElement(T,Qi),da=Ze.get(Qi),jf=q.get(Qi),Lr=this._buildInstruction(Wt,r,jf,da,Nu);if(Lr.errors&&Lr.errors.length)return void jt.push(Lr);if(Nu)return xn.onStart(()=>Qg(Qi,Lr.fromStyles)),xn.onDestroy(()=>Tu(Qi,Lr.toStyles)),void i.push(xn);if(Wt.isFallbackTransition)return xn.onStart(()=>Qg(Qi,Lr.fromStyles)),xn.onDestroy(()=>Tu(Qi,Lr.toStyles)),void i.push(xn);const G$=[];Lr.timelines.forEach(Ss=>{Ss.stretchStartingKeyframe=!0,this.disabledNodes.has(Ss.element)||G$.push(Ss)}),Lr.timelines=G$,r.append(Qi,Lr.timelines),u.push({instruction:Lr,player:xn,element:Qi}),Lr.queriedElements.forEach(Ss=>sa(d,Ss,[]).push(xn)),Lr.preStyleProps.forEach((Ss,Mm)=>{if(Ss.size){let Wa=g.get(Mm);Wa||g.set(Mm,Wa=new Set),Ss.forEach((LA,pF)=>Wa.add(pF))}}),Lr.postStyleProps.forEach((Ss,Mm)=>{let Wa=y.get(Mm);Wa||y.set(Mm,Wa=new Set),Ss.forEach((LA,pF)=>Wa.add(pF))})});if(jt.length){const Ct=[];jt.forEach(Bt=>{Ct.push(function Cq(n,e){return new f.vHH(3505,!1)}())}),Lt.forEach(Bt=>Bt.destroy()),this.reportError(Ct)}const vn=new Map,Ir=new Map;u.forEach(Ct=>{const Bt=Ct.element;r.has(Bt)&&(Ir.set(Bt,Bt),this._beforeAnimationBuild(Ct.player.namespaceId,Ct.instruction,vn))}),i.forEach(Ct=>{const Bt=Ct.element;this._getPreviousPlayers(Bt,!1,Ct.namespaceId,Ct.triggerName,null).forEach(xn=>{sa(vn,Bt,[]).push(xn),xn.destroy()})});const ca=ge.filter(Ct=>vB(Ct,g,y)),Md=new Map;mB(Md,this.driver,Ye,y,yd).forEach(Ct=>{vB(Ct,g,y)&&ca.push(Ct)});const qE=new Map;B.forEach((Ct,Bt)=>{mB(qE,this.driver,new Set(Ct),g,"!")}),ca.forEach(Ct=>{const Bt=Md.get(Ct),Wt=qE.get(Ct);Md.set(Ct,new Map([...Array.from(Bt?.entries()??[]),...Array.from(Wt?.entries()??[])]))});const Am=[],H$=[],$$={};u.forEach(Ct=>{const{element:Bt,player:Wt,instruction:xn}=Ct;if(r.has(Bt)){if(E.has(Bt))return Wt.onDestroy(()=>Tu(Bt,xn.toStyles)),Wt.disabled=!0,Wt.overrideTotalTime(xn.totalTime),void i.push(Wt);let Qi=$$;if(Ir.size>1){let da=Bt;const jf=[];for(;da=da.parentNode;){const Lr=Ir.get(da);if(Lr){Qi=Lr;break}jf.push(da)}jf.forEach(Lr=>Ir.set(Lr,Qi))}const Nu=this._buildAnimation(Wt.namespaceId,xn,vn,s,qE,Md);if(Wt.setRealPlayer(Nu),Qi===$$)Am.push(Wt);else{const da=this.playersByElement.get(Qi);da&&da.length&&(Wt.parentPlayer=yf(da)),i.push(Wt)}}else Qg(Bt,xn.fromStyles),Wt.onDestroy(()=>Tu(Bt,xn.toStyles)),H$.push(Wt),E.has(Bt)&&i.push(Wt)}),H$.forEach(Ct=>{const Bt=s.get(Ct.element);if(Bt&&Bt.length){const Wt=yf(Bt);Ct.setRealPlayer(Wt)}}),i.forEach(Ct=>{Ct.parentPlayer?Ct.syncPlayerEvents(Ct.parentPlayer):Ct.destroy()});for(let Ct=0;Ct<ge.length;Ct++){const Bt=ge[Ct],Wt=Bt[$a];if(uv(Bt,$T),Wt&&Wt.hasAnimation)continue;let xn=[];if(d.size){let Nu=d.get(Bt);Nu&&Nu.length&&xn.push(...Nu);let da=this.driver.query(Bt,Fk,!0);for(let jf=0;jf<da.length;jf++){let Lr=d.get(da[jf]);Lr&&Lr.length&&xn.push(...Lr)}}const Qi=xn.filter(Nu=>!Nu.destroyed);Qi.length?T6(this,Bt,Qi):this.processLeaveNode(Bt)}return ge.length=0,Am.forEach(Ct=>{this.players.push(Ct),Ct.onDone(()=>{Ct.destroy();const Bt=this.players.indexOf(Ct);this.players.splice(Bt,1)}),Ct.play()}),Am}elementContainsData(e,t){let r=!1;const i=t[$a];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let u=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(u=d)}else{const d=this.playersByElement.get(e);if(d){const g=!s||s==L0;d.forEach(y=>{y.queued||!g&&y.triggerName!=i||u.push(y)})}}return(r||i)&&(u=u.filter(d=>!(r&&r!=d.namespaceId||i&&i!=d.triggerName))),u}_beforeAnimationBuild(e,t,r){const s=t.element,u=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const g of t.timelines){const y=g.element,E=y!==s,T=sa(r,y,[]);this._getPreviousPlayers(y,E,u,d,t.toState).forEach(B=>{const q=B.getRealPlayer();q.beforeDestroy&&q.beforeDestroy(),B.destroy(),T.push(B)})}Qg(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,u){const d=t.triggerName,g=t.element,y=[],E=new Set,T=new Set,P=t.timelines.map(q=>{const ie=q.element;E.add(ie);const ge=ie[$a];if(ge&&ge.removedBeforeQueried)return new O0(q.duration,q.delay);const Ue=ie!==g,Ye=function S6(n){const e=[];return yB(n,e),e}((r.get(ie)||v6).map(vn=>vn.getRealPlayer())).filter(vn=>!!vn.element&&vn.element===ie),Ze=s.get(ie),tt=u.get(ie),Lt=GV(0,this._normalizer,0,q.keyframes,Ze,tt),jt=this._buildPlayer(q,Lt,Ye);if(q.subTimeline&&i&&T.add(ie),Ue){const vn=new Yk(e,d,ie);vn.setRealPlayer(jt),y.push(vn)}return jt});y.forEach(q=>{sa(this.playersByQueriedElement,q.element,[]).push(q),q.onDone(()=>function C6(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,q.element,q))}),E.forEach(q=>Ga(q,JV));const B=yf(P);return B.onDestroy(()=>{E.forEach(q=>uv(q,JV)),Tu(g,t.toStyles)}),T.forEach(q=>{sa(i,q,[]).push(B)}),B}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new O0(e.duration,e.delay)}}class Yk{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new O0,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Mk(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){sa(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function nS(n){return n&&1===n.nodeType}function gB(n,e){const t=n.style.display;return n.style.display=e??"none",t}function mB(n,e,t,r,i){const s=[];t.forEach(g=>s.push(gB(g)));const u=[];r.forEach((g,y)=>{const E=new Map;g.forEach(T=>{const P=e.computeStyle(y,T,i);E.set(T,P),(!P||0==P.length)&&(y[$a]=w6,u.push(y))}),n.set(y,E)});let d=0;return t.forEach(g=>gB(g,s[d++])),u}function _B(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const i=new Set(e),s=new Map;function u(d){if(!d)return 1;let g=s.get(d);if(g)return g;const y=d.parentNode;return g=t.has(y)?y:i.has(y)?1:u(y),s.set(d,g),g}return e.forEach(d=>{const g=u(d);1!==g&&t.get(g).push(d)}),t}function Ga(n,e){n.classList?.add(e)}function uv(n,e){n.classList?.remove(e)}function T6(n,e,t){yf(t).onDone(()=>n.processLeaveNode(e))}function yB(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof HV?yB(r.players,e):e.push(r)}}function vB(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class rS{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new E6(e,t,r),this._timelineEngine=new p6(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const u=e+"-"+i;let d=this._triggerCache[u];if(!d){const g=[],E=Uk(this._driver,s,g,[]);if(g.length)throw function hq(n,e){return new f.vHH(3404,!1)}();d=function c6(n,e,t){return new d6(n,e,t)}(i,E,this._normalizer),this._triggerCache[u]=d}this._transitionEngine.registerTrigger(t,i,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,u]=zV(r);this._timelineEngine.command(s,t,u,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[u,d]=zV(r);return this._timelineEngine.listen(u,t,d,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let x6=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Tu(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Tu(this._element,this._initialStyles),this._endStyles&&(Tu(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Qg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Qg(this._element,this._endStyles),this._endStyles=null),Tu(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function Qk(n){let e=null;return n.forEach((t,r)=>{(function R6(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class wB{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:sB(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class k6{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return ZV(e,t)}getParentElement(e){return Ok(e)}query(e,t,r){return YV(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,u=[]){const g={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(g.easing=s);const y=new Map,E=u.filter(B=>B instanceof wB);(function Fq(n,e){return 0===n||0===e})(r,i)&&E.forEach(B=>{B.currentSnapshot.forEach((q,ie)=>y.set(ie,q))});let T=function kq(n){return n.length?n[0]instanceof Map?n:n.map(e=>eB(e)):[]}(t).map(B=>vf(B));T=function Lq(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,u)=>{r.has(u)||i.push(u),r.set(u,s)}),i.length)for(let s=1;s<e.length;s++){let u=e[s];i.forEach(d=>u.set(d,sB(n,d)))}}return e}(e,T,y);const P=function M6(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=Qk(e[0]),e.length>1&&(r=Qk(e[e.length-1]))):e instanceof Map&&(t=Qk(e)),t||r?new x6(n,t,r):null}(e,T);return new wB(e,T,g,P)}}let O6=(()=>{class n extends OV{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:f.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?FV(t):t;return bB(this._renderer,null,r,"register",[i]),new P6(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class P6 extends class $3{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new N6(this._id,e,t||{},this._renderer)}}class N6{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return bB(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function bB(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const EB="@.disabled";let F6=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,u)=>{const d=u?.parentNode(s);d&&u.removeChild(d,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let E=this._rendererCache.get(s);return E||(E=new CB("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,E)),E}const u=r.id,d=r.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const g=E=>{Array.isArray(E)?E.forEach(g):this.engine.registerTrigger(u,d,t,E.name,E)};return r.data.animation.forEach(g),new L6(this,d,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[u,d]=s;u(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(rS),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class CB{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==EB?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class L6 extends CB{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==EB?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function V6(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),u="";return"@"!=s.charAt(0)&&([s,u]=function B6(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,u,d=>{this.factory.scheduleListenerCallback(d._data||-1,r,d)})}return this.delegate.listen(e,t,r)}}let U6=(()=>{class n extends rS{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re),f.LFG(Pk),f.LFG(zk),f.LFG(f.z2F))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const IB=[{provide:OV,useClass:O6},{provide:zk,useFactory:function j6(){return new o6}},{provide:rS,useClass:U6},{provide:f.FYo,useFactory:function H6(n,e,t){return new F6(n,e,t)},deps:[jo,rS,f.R0b]}],Xk=[{provide:Pk,useFactory:()=>new k6},{provide:f.QbO,useValue:"BrowserAnimations"},...IB],DB=[{provide:Pk,useClass:QV},{provide:f.QbO,useValue:"NoopAnimations"},...IB];let $6=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?DB:Xk}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:Xk,imports:[jm]}),n})();const TB_firebase={apiKey:"AIzaSyCTJJ4_XJ9IgWDAa0KalKUGlYFVam0fQC8",authDomain:"noise-48aa2.firebaseapp.com",databaseURL:"https://noise-48aa2-default-rtdb.firebaseio.com/",projectId:"noise-48aa2",storageBucket:"noise-48aa2.appspot.com",messagingSenderId:"776621040347",appId:"1:776621040347:web:5197024b1bc9e2da8d62fe",measurementId:"G-0SC8H9XQCC"};function Jk(){return(0,Dn.e)((n,e)=>{let t,r=!1;n.subscribe((0,G.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var Tt,G6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},wd={},eO=eO||{},Qt=G6||self;function sS(){}function oS(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function V0(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var tO="closure_uid_"+(1e9*Math.random()>>>0),W6=0;function q6(n,e,t){return n.call.apply(n.bind,arguments)}function K6(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Is(n,e,t){return(Is=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?q6:K6).apply(null,arguments)}function aS(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function cs(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,s){for(var u=Array(arguments.length-2),d=2;d<arguments.length;d++)u[d-2]=arguments[d];return e.prototype[i].apply(r,u)}}function wf(){this.s=this.s,this.o=this.o}wf.prototype.s=!1,wf.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function z6(n){Object.prototype.hasOwnProperty.call(n,tO)&&n[tO]||(n[tO]=++W6)}(this)},wf.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const SB=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function nO(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function AB(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(oS(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let u=0;u<s;u++)n[i+u]=r[u]}else n.push(r)}}function Ds(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ds.prototype.h=function(){this.defaultPrevented=!0};var Y6=function(){if(!Qt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Qt.addEventListener("test",sS,e),Qt.removeEventListener("test",sS,e)}catch{}return n}();function lS(n){return/^[\s\xa0]*$/.test(n)}var MB=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function rO(n,e){return n<e?-1:n>e?1:0}function uS(){var n=Qt.navigator;return n&&(n=n.userAgent)?n:""}function Su(n){return-1!=uS().indexOf(n)}function iO(n){return iO[" "](n),n}iO[" "]=sS;var cS,n,X6=Su("Opera"),cv=Su("Trident")||Su("MSIE"),xB=Su("Edge"),sO=xB||cv,RB=Su("Gecko")&&!(-1!=uS().toLowerCase().indexOf("webkit")&&!Su("Edge"))&&!(Su("Trident")||Su("MSIE"))&&!Su("Edge"),J6=-1!=uS().toLowerCase().indexOf("webkit")&&!Su("Edge");function kB(){var n=Qt.document;return n?n.documentMode:void 0}e:{var oO="",aO=(n=uS(),RB?/rv:([^\);]+)(\)|;)/.exec(n):xB?/Edge\/([\d\.]+)/.exec(n):cv?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):J6?/WebKit\/(\S+)/.exec(n):X6?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(aO&&(oO=aO?aO[1]:""),cv){var lO=kB();if(null!=lO&&lO>parseFloat(oO)){cS=String(lO);break e}}cS=oO}var eK={};var nK=Qt.document&&cv&&(kB()||parseInt(cS,10))||void 0;function B0(n,e){if(Ds.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(RB){e:{try{iO(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:rK[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&B0.X.h.call(this)}}cs(B0,Ds);var rK={2:"touch",3:"pen",4:"mouse"};B0.prototype.h=function(){B0.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var U0="closure_listenable_"+(1e6*Math.random()|0),iK=0;function sK(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++iK,this.ba=this.ea=!1}function dS(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function cO(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function PB(n){const e={};for(const t in n)e[t]=n[t];return e}const NB="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function FB(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<NB.length;s++)t=NB[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function hS(n){this.src=n,this.g={},this.h=0}function dO(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=SB(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(dS(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function hO(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ba&&s.listener==e&&s.capture==!!t&&s.ha==r)return i}return-1}hS.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var u=hO(n,e,r,i);return-1<u?(e=n[u],t||(e.ea=!1)):((e=new sK(e,this.src,s,!!r,i)).ea=t,n.push(e)),e};var fO="closure_lm_"+(1e6*Math.random()|0),pO={};function LB(n,e,t,r,i){if(r&&r.once)return BB(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)LB(n,e[s],t,r,i);return null}return t=yO(t),n&&n[U0]?n.N(e,t,V0(r)?!!r.capture:!!r,i):VB(n,e,t,!1,r,i)}function VB(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var u=V0(i)?!!i.capture:!!i,d=mO(n);if(d||(n[fO]=d=new hS(n)),(t=d.add(e,t,r,u,s)).proxy)return t;if(r=function oK(){const e=aK;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Y6||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(jB(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function BB(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)BB(n,e[s],t,r,i);return null}return t=yO(t),n&&n[U0]?n.O(e,t,V0(r)?!!r.capture:!!r,i):VB(n,e,t,!0,r,i)}function UB(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)UB(n,e[s],t,r,i);else r=V0(r)?!!r.capture:!!r,t=yO(t),n&&n[U0]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=hO(s=n.g[e],t,r,i))&&(dS(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=mO(n))&&(e=n.g[e.toString()],n=-1,e&&(n=hO(e,t,r,i)),(t=-1<n?e[n]:null)&&gO(t))}function gO(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[U0])dO(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(jB(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=mO(e))?(dO(t,n),0==t.h&&(t.src=null,e[fO]=null)):dS(n)}}}function jB(n){return n in pO?pO[n]:pO[n]="on"+n}function aK(n,e){if(n.ba)n=!0;else{e=new B0(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&gO(n),n=t.call(r,e)}return n}function mO(n){return(n=n[fO])instanceof hS?n:null}var _O="__closure_events_fn_"+(1e9*Math.random()>>>0);function yO(n){return"function"==typeof n?n:(n[_O]||(n[_O]=function(e){return n.handleEvent(e)}),n[_O])}function Wi(){wf.call(this),this.i=new hS(this),this.P=this,this.I=null}function ds(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ds(e,n);else if(e instanceof Ds)e.target=e.target||n;else{var i=e;FB(e=new Ds(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var u=e.g=t[s];i=fS(u,r,!0,e)&&i}if(i=fS(u=e.g=n,r,!0,e)&&i,i=fS(u,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=fS(u=e.g=t[s],r,!1,e)&&i}function fS(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var u=e[s];if(u&&!u.ba&&u.capture==t){var d=u.listener,g=u.ha||u.src;u.ea&&dO(n.i,u),i=!1!==d.call(g,r)&&i}}return i&&!r.defaultPrevented}cs(Wi,wf),Wi.prototype[U0]=!0,Wi.prototype.removeEventListener=function(n,e,t,r){UB(this,n,e,t,r)},Wi.prototype.M=function(){if(Wi.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)dS(t[r]);delete n.g[e],n.h--}}this.I=null},Wi.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Wi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var vO=Qt.JSON.stringify;function lK(){var n=GB;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var wO,HB=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new cK,n=>n.reset());class cK{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function dK(n){Qt.setTimeout(()=>{throw n},0)}function $B(n,e){wO||function hK(){var n=Qt.Promise.resolve(void 0);wO=function(){n.then(fK)}}(),bO||(wO(),bO=!0),GB.add(n,e)}var bO=!1,GB=new class uK{constructor(){this.h=this.g=null}add(e,t){const r=HB.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function fK(){for(var n;n=lK();){try{n.h.call(n.g)}catch(t){dK(t)}var e=HB;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}bO=!1}function pS(n,e){Wi.call(this),this.h=n||1,this.g=e||Qt,this.j=Is(this.lb,this),this.l=Date.now()}function EO(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function CO(n,e,t){if("function"==typeof n)t&&(n=Is(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Is(n.handleEvent,n)}return 2147483647<Number(e)?-1:Qt.setTimeout(n,e||0)}function zB(n){n.g=CO(()=>{n.g=null,n.i&&(n.i=!1,zB(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}cs(pS,Wi),(Tt=pS.prototype).ca=!1,Tt.R=null,Tt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ds(this,"tick"),this.ca&&(EO(this),this.start()))}},Tt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Tt.M=function(){pS.X.M.call(this),EO(this),delete this.g};class pK extends wf{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:zB(this)}M(){super.M(),this.g&&(Qt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function j0(n){wf.call(this),this.h=n,this.g={}}cs(j0,wf);var WB=[];function qB(n,e,t,r){Array.isArray(t)||(t&&(WB[0]=t.toString()),t=WB);for(var i=0;i<t.length;i++){var s=LB(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function KB(n){cO(n.g,function(e,t){this.g.hasOwnProperty(t)&&gO(e)},n),n.g={}}function gS(){this.g=!0}function dv(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function yK(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var u=1;u<i.length;u++)i[u]=""}}}return vO(t)}catch{return e}}(n,t)+(r?" "+r:"")})}j0.prototype.M=function(){j0.X.M.call(this),KB(this)},j0.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},gS.prototype.Aa=function(){this.g=!1},gS.prototype.info=function(){};var Jg={},ZB=null;function mS(){return ZB=ZB||new Wi}function YB(n){Ds.call(this,Jg.Pa,n)}function H0(n){const e=mS();ds(e,new YB(e))}function QB(n,e){Ds.call(this,Jg.STAT_EVENT,n),this.stat=e}function eo(n){const e=mS();ds(e,new QB(e,n))}function XB(n,e){Ds.call(this,Jg.Qa,n),this.size=e}function $0(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Qt.setTimeout(function(){n()},e)}Jg.Pa="serverreachability",cs(YB,Ds),Jg.STAT_EVENT="statevent",cs(QB,Ds),Jg.Qa="timingevent",cs(XB,Ds);var _S={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},JB={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function IO(){}function tU(){}IO.prototype.h=null;var SO,G0={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function DO(){Ds.call(this,"d")}function TO(){Ds.call(this,"c")}function yS(){}function z0(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new j0(this),this.O=vK,this.T=new pS(n=sO?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new nU}function nU(){this.i=null,this.g="",this.h=!1}cs(DO,Ds),cs(TO,Ds),cs(yS,IO),yS.prototype.g=function(){return new XMLHttpRequest},yS.prototype.i=function(){return{}},SO=new yS;var vK=45e3,AO={},vS={};function MO(n,e,t){n.K=1,n.v=CS(bd(e)),n.s=t,n.P=!0,rU(n,null)}function rU(n,e){n.F=Date.now(),W0(n),n.A=bd(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),fU(t.i,"t",r),n.C=0,t=n.l.H,n.h=new nU,n.g=LU(n.l,t?e:null,!n.s),0<n.N&&(n.L=new pK(Is(n.La,n,n.g),n.N)),qB(n.S,n.g,"readystatechange",n.ib),e=n.H?PB(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),H0(),function gK(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var u="",d=s.split("&"),g=0;g<d.length;g++){var y=d[g].split("=");if(1<y.length){var E=y[0];y=y[1];var T=E.split("_");u=2<=T.length&&"type"==T[1]?u+(E+"=")+y+"&":u+(E+"=redacted&")}}else u=null;else u=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.U,n.s)}function iU(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function sU(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=wK(n,t),i==vS){4==e&&(n.o=4,eo(14),r=!1),dv(n.j,n.m,null,"[Incomplete Response]");break}if(i==AO){n.o=4,eo(15),dv(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}dv(n.j,n.m,i,null),xO(n,i)}iU(n)&&i!=vS&&i!=AO&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,eo(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),VO(e),e.K=!0,eo(11))):(dv(n.j,n.m,t,"[Invalid Chunked Response]"),em(n),q0(n))}function wK(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?vS:(t=Number(e.substring(t,r)),isNaN(t)?AO:(r+=1)+t>e.length?vS:(e=e.substr(r,t),n.C=r+t,e))}function W0(n){n.V=Date.now()+n.O,oU(n,n.O)}function oU(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=$0(Is(n.gb,n),e)}function wS(n){n.B&&(Qt.clearTimeout(n.B),n.B=null)}function q0(n){0==n.l.G||n.I||OU(n.l,n)}function em(n){wS(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,EO(n.T),KB(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function xO(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||RO(t.h,n)))if(!n.J&&RO(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;MS(t),SS(t)}LO(t),eo(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=$0(Is(t.cb,t),6e3));if(1>=mU(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else nm(t,11)}else if((n.J||t.g==n)&&MS(t),!lS(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.T=y[0],y=y[1],2==t.G)if("c"==y[0]){t.I=y[1],t.ka=y[2];const E=y[3];null!=E&&(t.ma=E,t.j.info("VER="+t.ma));const T=y[4];null!=T&&(t.Ca=T,t.j.info("SVER="+t.Ca));const P=y[5];null!=P&&"number"==typeof P&&0<P&&(t.J=r=1.5*P,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const B=n.g;if(B){const q=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(q){var s=r.h;s.g||-1==q.indexOf("spdy")&&-1==q.indexOf("quic")&&-1==q.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(kO(s,s.h),s.h=null))}if(r.D){const ie=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;ie&&(r.za=ie,br(r.F,r.D,ie))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var u=n;if((r=t).sa=FU(r,r.H?r.ka:null,r.V),u.J){_U(r.h,u);var d=u,g=r.J;g&&d.setTimeout(g),d.B&&(wS(d),W0(d)),r.g=u}else RU(r);0<t.i.length&&AS(t)}else"stop"!=y[0]&&"close"!=y[0]||nm(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?nm(t,7):FO(t):"noop"!=y[0]&&t.l&&t.l.wa(y),t.A=0)}H0()}catch{}}function aU(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(oS(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function EK(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(oS(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function bK(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(oS(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(Tt=z0.prototype).setTimeout=function(n){this.O=n},Tt.ib=function(n){n=n.target;const e=this.L;e&&3==Ed(n)?e.l():this.La(n)},Tt.La=function(n){try{if(n==this.g)e:{const E=Ed(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>E)&&(3!=E||sO||this.g&&(this.h.h||this.g.fa()||DU(this.g)))){this.I||4!=E||7==e||H0(),wS(this);var t=this.g.aa();this.Y=t;t:if(iU(this)){var r=DU(this.g);n="";var i=r.length,s=4==Ed(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){em(this),q0(this);var u="";break t}this.h.i=new Qt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==t,function mK(n,e,t,r,i,s,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+u})}(this.j,this.u,this.A,this.m,this.U,E,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var d,g=this.g;if((d=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!lS(d)){var y=d;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,eo(12),em(this),q0(this);break e}dv(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,xO(this,t)}this.P?(sU(this,E,u),sO&&this.i&&3==E&&(qB(this.S,this.T,"tick",this.hb),this.T.start())):(dv(this.j,this.m,u,null),xO(this,u)),4==E&&em(this),this.i&&!this.I&&(4==E?OU(this.l,this):(this.i=!1,W0(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,eo(12)):(this.o=0,eo(13)),em(this),q0(this)}}}catch{}},Tt.hb=function(){if(this.g){var n=Ed(this.g),e=this.g.fa();this.C<e.length&&(wS(this),sU(this,n,e),this.i&&4!=n&&W0(this))}},Tt.cancel=function(){this.I=!0,em(this)},Tt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function _K(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(H0(),eo(17)),em(this),this.o=2,q0(this)):oU(this,this.V-n)};var lU=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tm(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof tm){this.h=void 0!==e?e:n.h,bS(this,n.j),this.s=n.s,this.g=n.g,ES(this,n.m),this.l=n.l,e=n.i;var t=new Y0;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),uU(this,t),this.o=n.o}else n&&(t=String(n).match(lU))?(this.h=!!e,bS(this,t[1]||"",!0),this.s=K0(t[2]||""),this.g=K0(t[3]||"",!0),ES(this,t[4]),this.l=K0(t[5]||"",!0),uU(this,t[6]||"",!0),this.o=K0(t[7]||"")):(this.h=!!e,this.i=new Y0(null,this.h))}function bd(n){return new tm(n)}function bS(n,e,t){n.j=t?K0(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function ES(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function uU(n,e,t){e instanceof Y0?(n.i=e,function MK(n,e){e&&!n.j&&(bf(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(dU(this,r),fU(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Z0(e,SK)),n.i=new Y0(e,n.h))}function br(n,e,t){n.i.set(e,t)}function CS(n){return br(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function K0(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Z0(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,IK),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function IK(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}tm.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Z0(e,cU,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Z0(e,cU,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Z0(t,"/"==t.charAt(0)?TK:DK,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Z0(t,AK)),n.join("")};var cU=/[#\/\?@]/g,DK=/[#\?:]/g,TK=/[#\?]/g,SK=/[#\?@]/g,AK=/#/g;function Y0(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function bf(n){n.g||(n.g=new Map,n.h=0,n.i&&function CK(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function dU(n,e){bf(n),e=hv(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function hU(n,e){return bf(n),e=hv(n,e),n.g.has(e)}function fU(n,e,t){dU(n,e),0<t.length&&(n.i=null,n.g.set(hv(n,e),nO(t)),n.h+=t.length)}function hv(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function pU(n){this.l=n||RK,n=Qt.PerformanceNavigationTiming?0<(n=Qt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Qt.g&&Qt.g.Ga&&Qt.g.Ga()&&Qt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Tt=Y0.prototype).add=function(n,e){bf(this),this.i=null,n=hv(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Tt.forEach=function(n,e){bf(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Tt.oa=function(){bf(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},Tt.W=function(n){bf(this);let e=[];if("string"==typeof n)hU(this,n)&&(e=e.concat(this.g.get(hv(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Tt.set=function(n,e){return bf(this),this.i=null,hU(this,n=hv(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Tt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),u=this.W(r);for(r=0;r<u.length;r++){var i=s;""!==u[r]&&(i+="="+encodeURIComponent(String(u[r]))),n.push(i)}}return this.i=n.join("&")};var RK=10;function gU(n){return!!n.h||!!n.g&&n.g.size>=n.j}function mU(n){return n.h?1:n.g?n.g.size:0}function RO(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function kO(n,e){n.g?n.g.add(e):n.h=e}function _U(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function yU(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return nO(n.i)}function OO(){}function kK(){this.g=new OO}function OK(n,e,t){const r=t||"";try{aU(n,function(i,s){let u=i;V0(i)&&(u=vO(i)),e.push(r+s+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function IS(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Q0(n){this.l=n.ac||null,this.j=n.jb||!1}function DS(n,e){Wi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=PO,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}pU.prototype.cancel=function(){if(this.i=yU(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},OO.prototype.stringify=function(n){return Qt.JSON.stringify(n,void 0)},OO.prototype.parse=function(n){return Qt.JSON.parse(n,void 0)},cs(Q0,IO),Q0.prototype.g=function(){return new DS(this.l,this.j)},Q0.prototype.i=function(n){return function(){return n}}({}),cs(DS,Wi);var PO=0;function vU(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function X0(n){n.readyState=4,n.l=null,n.j=null,n.A=null,J0(n)}function J0(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Tt=DS.prototype).open=function(n,e){if(this.readyState!=PO)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,J0(this)},Tt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Qt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,X0(this)),this.readyState=PO},Tt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,J0(this)),this.g&&(this.readyState=3,J0(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Qt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;vU(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},Tt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?X0(this):J0(this),3==this.readyState&&vU(this)}},Tt.Va=function(n){this.g&&(this.response=this.responseText=n,X0(this))},Tt.Ua=function(n){this.g&&(this.response=n,X0(this))},Tt.ga=function(){this.g&&X0(this)},Tt.setRequestHeader=function(n,e){this.v.append(n,e)},Tt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Tt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(DS.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var NK=Qt.JSON.parse;function qr(n){Wi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=wU,this.K=this.L=!1}cs(qr,Wi);var wU="",FK=/^https?$/i,LK=["POST","PUT"];function bU(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,EU(n),TS(n)}function EU(n){n.D||(n.D=!0,ds(n,"complete"),ds(n,"error"))}function CU(n){if(n.h&&typeof eO<"u"&&(!n.C[1]||4!=Ed(n)||2!=n.aa()))if(n.v&&4==Ed(n))CO(n.Ha,0,n);else if(ds(n,"readystatechange"),4==Ed(n)){n.h=!1;try{const d=n.aa();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===d){var i=String(n.H).match(lU)[1]||null;if(!i&&Qt.self&&Qt.self.location){var s=Qt.self.location.protocol;i=s.substr(0,s.length-1)}r=!FK.test(i?i.toLowerCase():"")}t=r}if(t)ds(n,"complete"),ds(n,"success");else{n.m=6;try{var u=2<Ed(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.aa()+"]",EU(n)}}finally{TS(n)}}}function TS(n,e){if(n.g){IU(n);const t=n.g,r=n.C[0]?sS:null;n.g=null,n.C=null,e||ds(n,"ready");try{t.onreadystatechange=r}catch{}}}function IU(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Qt.clearTimeout(n.A),n.A=null)}function Ed(n){return n.g?n.g.readyState:0}function DU(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case wU:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function TU(n){let e="";return cO(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function NO(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=TU(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):br(n,e,t))}function eE(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function SU(n){this.Ca=0,this.i=[],this.j=new gS,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=eE("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=eE("baseRetryDelayMs",5e3,n),this.bb=eE("retryDelaySeedMs",1e4,n),this.$a=eE("forwardChannelMaxRetries",2,n),this.ta=eE("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new pU(n&&n.concurrentRequestLimit),this.Fa=new kK,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function FO(n){if(AU(n),3==n.G){var e=n.U++,t=bd(n.F);br(t,"SID",n.I),br(t,"RID",e),br(t,"TYPE","terminate"),tE(n,t),(e=new z0(n,n.j,e,void 0)).K=2,e.v=CS(bd(t)),t=!1,Qt.navigator&&Qt.navigator.sendBeacon&&(t=Qt.navigator.sendBeacon(e.v.toString(),"")),!t&&Qt.Image&&((new Image).src=e.v,t=!0),t||(e.g=LU(e.l,null),e.g.da(e.v)),e.F=Date.now(),W0(e)}NU(n)}function SS(n){n.g&&(VO(n),n.g.cancel(),n.g=null)}function AU(n){SS(n),n.u&&(Qt.clearTimeout(n.u),n.u=null),MS(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Qt.clearTimeout(n.m),n.m=null)}function AS(n){gU(n.h)||n.m||(n.m=!0,$B(n.Ja,n),n.C=0)}function MU(n,e){var t;t=e?e.m:n.U++;const r=bd(n.F);br(r,"SID",n.I),br(r,"RID",t),br(r,"AID",n.T),tE(n,r),n.o&&n.s&&NO(r,n.o,n.s),t=new z0(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=xU(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),kO(n.h,t),MO(t,r,e)}function tE(n,e){n.ia&&cO(n.ia,function(t,r){br(e,r,t)}),n.l&&aU({},function(t,r){br(e,r,t)})}function xU(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Is(n.l.Ra,n.l,n):null;e:{var i=n.i;let s=-1;for(;;){const u=["count="+t];-1==s?0<t?(s=i[0].h,u.push("ofs="+s)):s=0:u.push("ofs="+s);let d=!0;for(let g=0;g<t;g++){let y=i[g].h;const E=i[g].g;if(y-=s,0>y)s=Math.max(0,i[g].h-100),d=!1;else try{OK(E,u,"req"+y+"_")}catch{r&&r(E)}}if(d){r=u.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function RU(n){n.g||n.u||(n.Z=1,$B(n.Ia,n),n.A=0)}function LO(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=$0(Is(n.Ia,n),PU(n,n.A)),n.A++,0))}function VO(n){null!=n.B&&(Qt.clearTimeout(n.B),n.B=null)}function kU(n){n.g=new z0(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=bd(n.sa);br(e,"RID","rpc"),br(e,"SID",n.I),br(e,"CI",n.L?"0":"1"),br(e,"AID",n.T),br(e,"TYPE","xmlhttp"),tE(n,e),n.o&&n.s&&NO(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=CS(bd(e)),t.s=null,t.P=!0,rU(t,n)}function MS(n){null!=n.v&&(Qt.clearTimeout(n.v),n.v=null)}function OU(n,e){var t=null;if(n.g==e){MS(n),VO(n),n.g=null;var r=2}else{if(!RO(n.h,e))return;t=e.D,_U(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;ds(r=mS(),new XB(r,t)),AS(n)}else RU(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function BK(n,e){return!(mU(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=$0(Is(n.Ja,n,e),PU(n,n.C)),n.C++,0)))}(n,e)||2==r&&LO(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:nm(n,5);break;case 4:nm(n,10);break;case 3:nm(n,6);break;default:nm(n,2)}}function PU(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function nm(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Is(n.kb,n);t||(t=new tm("//www.google.com/images/cleardot.gif"),Qt.location&&"http"==Qt.location.protocol||bS(t,"https"),CS(t)),function PK(n,e){const t=new gS;if(Qt.Image){const r=new Image;r.onload=aS(IS,t,r,"TestLoadImage: loaded",!0,e),r.onerror=aS(IS,t,r,"TestLoadImage: error",!1,e),r.onabort=aS(IS,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=aS(IS,t,r,"TestLoadImage: timeout",!1,e),Qt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else eo(2);n.G=0,n.l&&n.l.va(e),NU(n),AU(n)}function NU(n){if(n.G=0,n.la=[],n.l){const e=yU(n.h);(0!=e.length||0!=n.i.length)&&(AB(n.la,e),AB(n.la,n.i),n.h.i.length=0,nO(n.i),n.i.length=0),n.l.ua()}}function FU(n,e,t){var r=t instanceof tm?bd(t):new tm(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),ES(r,r.m);else{var i=Qt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new tm(null,void 0);r&&bS(s,r),e&&(s.g=e),i&&ES(s,i),t&&(s.l=t),r=s}return e=n.za,(t=n.D)&&e&&br(r,t,e),br(r,"VER",n.ma),tE(n,r),r}function LU(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new qr(t&&n.Da&&!n.ra?new Q0({jb:!0}):n.ra)).Ka(n.H),e}function VU(){}function xS(){if(cv&&!(10<=Number(nK)))throw Error("Environmental error: no available transport.")}function aa(n,e){Wi.call(this),this.g=new SU(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!lS(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!lS(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new fv(this)}function BU(n){DO.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function UU(){TO.call(this),this.status=1}function fv(n){this.g=n}(Tt=qr.prototype).Ka=function(n){this.L=n},Tt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():SO.g(),this.C=function eU(n){return n.h||(n.h=n.i())}(this.u?this.u:SO),this.g.onreadystatechange=Is(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void bU(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=Qt.FormData&&n instanceof Qt.FormData,!(0<=SB(LK,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,u]of t)this.g.setRequestHeader(s,u);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{IU(this),0<this.B&&((this.K=function VK(n){return cv&&function tK(){return function Q6(n){var e=eK;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=MB(String(cS)).split("."),t=MB("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",s=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=rO(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||rO(0==i[2].length,0==s[2].length)||rO(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Is(this.qa,this)):this.A=CO(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){bU(this,s)}},Tt.qa=function(){typeof eO<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ds(this,"timeout"),this.abort(8))},Tt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ds(this,"complete"),ds(this,"abort"),TS(this))},Tt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),TS(this,!0)),qr.X.M.call(this)},Tt.Ha=function(){this.s||(this.F||this.v||this.l?CU(this):this.fb())},Tt.fb=function(){CU(this)},Tt.aa=function(){try{return 2<Ed(this)?this.g.status:-1}catch{return-1}},Tt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Tt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),NK(e)}},Tt.Ea=function(){return this.m},Tt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Tt=SU.prototype).ma=8,Tt.G=1,Tt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new z0(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=PB(s),FB(s,this.S)):s=this.S),null!==this.o||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=xU(this,i,e),br(t=bd(this.F),"RID",n),br(t,"CVER",22),this.D&&br(t,"X-HTTP-Session-Id",this.D),tE(this,t),s&&(this.N?e="headers="+encodeURIComponent(String(TU(s)))+"&"+e:this.o&&NO(t,this.o,s)),kO(this.h,i),this.Ya&&br(t,"TYPE","init"),this.O?(br(t,"$req",e),br(t,"SID","null"),i.Z=!0,MO(i,t,null)):MO(i,t,e),this.G=2}}else 3==this.G&&(n?MU(this,n):0==this.i.length||gU(this.h)||MU(this))},Tt.Ia=function(){if(this.u=null,kU(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=$0(Is(this.eb,this),n)}},Tt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,eo(10),SS(this),kU(this))},Tt.cb=function(){null!=this.v&&(this.v=null,SS(this),LO(this),eo(19))},Tt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),eo(2)):(this.j.info("Failed to ping google.com"),eo(1))},(Tt=VU.prototype).xa=function(){},Tt.wa=function(){},Tt.va=function(){},Tt.ua=function(){},Tt.Ra=function(){},xS.prototype.g=function(n,e){return new aa(n,e)},cs(aa,Wi),aa.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;eo(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=FU(n,null,n.V),AS(n)},aa.prototype.close=function(){FO(this.g)},aa.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=vO(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&AS(e)},aa.prototype.M=function(){this.g.l=null,delete this.j,FO(this.g),delete this.g,aa.X.M.call(this)},cs(BU,DO),cs(UU,TO),cs(fv,VU),fv.prototype.xa=function(){ds(this.g,"a")},fv.prototype.wa=function(n){ds(this.g,new BU(n))},fv.prototype.va=function(n){ds(this.g,new UU)},fv.prototype.ua=function(){ds(this.g,"b")},xS.prototype.createWebChannel=xS.prototype.g,aa.prototype.send=aa.prototype.u,aa.prototype.open=aa.prototype.m,aa.prototype.close=aa.prototype.close,_S.NO_ERROR=0,_S.TIMEOUT=8,_S.HTTP_ERROR=6,JB.COMPLETE="complete",tU.EventType=G0,G0.OPEN="a",G0.CLOSE="b",G0.ERROR="c",G0.MESSAGE="d",Wi.prototype.listen=Wi.prototype.N,qr.prototype.listenOnce=qr.prototype.O,qr.prototype.getLastError=qr.prototype.Oa,qr.prototype.getLastErrorCode=qr.prototype.Ea,qr.prototype.getStatus=qr.prototype.aa,qr.prototype.getResponseJson=qr.prototype.Sa,qr.prototype.getResponseText=qr.prototype.fa,qr.prototype.send=qr.prototype.da,qr.prototype.setWithCredentials=qr.prototype.Ka;var UK=wd.createWebChannelTransport=function(){return new xS},jK=wd.getStatEventTarget=function(){return mS()},BO=wd.ErrorCode=_S,HK=wd.EventType=JB,$K=wd.Event=Jg,jU=wd.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},GK=wd.FetchXmlHttpFactory=Q0,RS=wd.WebChannel=tU,zK=wd.XhrIo=qr;const HU="@firebase/firestore";class qi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qi.UNAUTHENTICATED=new qi(null),qi.GOOGLE_CREDENTIALS=new qi("google-credentials-uid"),qi.FIRST_PARTY=new qi("first-party-uid"),qi.MOCK_USER=new qi("mock-user");let pv="9.19.0";const Ef=new Fr.Yd("@firebase/firestore");function UO(){return Ef.logLevel}function je(n,...e){if(Ef.logLevel<=Fr.in.DEBUG){const t=e.map(jO);Ef.debug(`Firestore (${pv}): ${n}`,...t)}}function oi(n,...e){if(Ef.logLevel<=Fr.in.ERROR){const t=e.map(jO);Ef.error(`Firestore (${pv}): ${n}`,...t)}}function Au(n,...e){if(Ef.logLevel<=Fr.in.WARN){const t=e.map(jO);Ef.warn(`Firestore (${pv}): ${n}`,...t)}}function jO(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ft(n="Unexpected state"){const e=`FIRESTORE (${pv}) INTERNAL ASSERTION FAILED: `+n;throw oi(e),new Error(e)}function xt(n,e){n||ft()}function nt(n,e){return n}const we={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Le extends U.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class $U{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(qi.UNAUTHENTICATED))}shutdown(){}}class ZK{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class YK{constructor(e){this.t=e,this.currentUser=qi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let u=new xi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new xi,e.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const y=u;e.enqueueRetryable((0,Te.Z)(function*(){yield y.promise,yield s(r.currentUser)}))},g=y=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(y=>g(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new xi)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xt("string"==typeof r.accessToken),new $U(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return xt(null===e||"string"==typeof e),new qi(e)}}class QK{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=qi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class XK{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new QK(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(qi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class GU{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JK{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=s=>{null!=s.error&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const u=s.token!==this.T;return this.T=s.token,je("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(xt("string"==typeof t.token),this.T=t.token,new GU(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function e4(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class zU{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=e4(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function Xt(n,e){return n<e?-1:n>e?1:0}function gv(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function WU(n){return n+"\0"}class Er{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Le(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Le(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Le(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Le(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Er.fromMillis(Date.now())}static fromDate(e){return Er.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Er(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Xt(this.nanoseconds,e.nanoseconds):Xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ot{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ot(e)}static min(){return new Ot(new Er(0,0))}static max(){return new Ot(new Er(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class nE{constructor(e,t,r){void 0===t?t=0:t>e.length&&ft(),void 0===r?r=e.length-t:r>e.length-t&&ft(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===nE.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof nE?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),u=t.get(i);if(s<u)return-1;if(s>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class bn extends nE{construct(e,t,r){return new bn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Le(we.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new bn(t)}static emptyPath(){return new bn([])}}const t4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kr extends nE{construct(e,t,r){return new Kr(e,t,r)}static isValidIdentifier(e){return t4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Kr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Le(we.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new Le(we.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new Le(we.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,i+=2}else"`"===d?(u=!u,i++):"."!==d||u?(r+=d,i++):(s(),i++)}if(s(),u)throw new Le(we.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kr(t)}static emptyPath(){return new Kr([])}}class et{constructor(e){this.path=e}static fromPath(e){return new et(bn.fromString(e))}static fromName(e){return new et(bn.fromString(e).popFirst(5))}static empty(){return new et(bn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===bn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return bn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new et(new bn(e.slice()))}}class kS{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function HO(n){return n.fields.find(e=>2===e.kind)}function rm(n){return n.fields.filter(e=>2!==e.kind)}kS.UNKNOWN_ID=-1;class OS{constructor(e,t){this.fieldPath=e,this.kind=t}}class rE{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new rE(0,la.min())}}function qU(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ot.fromTimestamp(1e9===r?new Er(t+1,0):new Er(t,r));return new la(i,et.empty(),e)}function KU(n){return new la(n.readTime,n.key,-1)}class la{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new la(Ot.min(),et.empty(),-1)}static max(){return new la(Ot.max(),et.empty(),-1)}}function $O(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=et.comparator(n.documentKey,e.documentKey),0!==t?t:Xt(n.largestBatchId,e.largestBatchId))}const ZU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Cf(n){return GO.apply(this,arguments)}function GO(){return GO=(0,Te.Z)(function*(n){if(n.code!==we.FAILED_PRECONDITION||n.message!==ZU)throw n;je("LocalStore","Unexpectedly lost primary lease")}),GO.apply(this,arguments)}class ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ye((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ye?t:ye.resolve(t)}catch(t){return ye.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ye.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ye.reject(t)}static resolve(e){return new ye((t,r)=>{t(e)})}static reject(e){return new ye((t,r)=>{r(e)})}static waitFor(e){return new ye((t,r)=>{let i=0,s=0,u=!1;e.forEach(d=>{++i,d.next(()=>{++s,u&&s===i&&t()},g=>r(g))}),u=!0,s===i&&t()})}static or(e){let t=ye.resolve(!1);for(const r of e)t=t.next(i=>i?ye.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new ye((r,i)=>{const s=e.length,u=new Array(s);let d=0;for(let g=0;g<s;g++){const y=g;t(e[y]).next(E=>{u[y]=E,++d,d===s&&r(u)},E=>i(E))}})}static doWhile(e,t){return new ye((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class PS{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new xi,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new iE(e,t.error)):this.R.resolve()},this.transaction.onerror=r=>{const i=zO(r.target.error);this.R.reject(new iE(e,i))}}static open(e,t,r,i){try{return new PS(t,e.transaction(i,r))}catch(s){throw new iE(t,s)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(je("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new s4(t)}}class Rl{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Rl.S((0,U.z$)())&&oi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return je("SimpleDb","Removing database:",e),im(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,U.hl)())return!1;if(Rl.C())return!0;const e=(0,U.z$)(),t=Rl.S(e),r=0<t&&t<10,i=Rl.N(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static O(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,Te.Z)(function*(){return t.db||(je("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=u=>{r(u.target.result)},s.onblocked=()=>{i(new iE(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=u=>{const d=u.target.error;i("VersionError"===d.name?new Le(we.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Le(we.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new iE(e,d))},s.onupgradeneeded=u=>{je("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.V.M(u.target.result,s.transaction,u.oldVersion,t.version).next(()=>{je("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,Te.Z)(function*(){const u="readonly"===t;let d=0;for(;;){++d;try{s.db=yield s.$(e);const g=PS.open(s.db,e,u?"readonly":"readwrite",r),y=i(g).next(E=>(g.P(),E)).catch(E=>(g.abort(E),ye.reject(E))).toPromise();return y.catch(()=>{}),yield g.v,y}catch(g){const y=g,E="FirebaseError"!==y.name&&d<3;if(je("SimpleDb","Transaction failed with error:",y.message,"Retrying:",E),s.close(),!E)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class i4{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return im(this.L.delete())}}class iE extends Le{constructor(e,t){super(we.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function If(n){return"IndexedDbTransactionError"===n.name}class s4{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(je("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(je("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),im(r)}add(e){return je("SimpleDb","ADD",this.store.name,e,e),im(this.store.add(e))}get(e){return im(this.store.get(e)).next(t=>(void 0===t&&(t=null),je("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return je("SimpleDb","DELETE",this.store.name,e),im(this.store.delete(e))}count(){return je("SimpleDb","COUNT",this.store.name),im(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.W(i,(u,d)=>{s.push(d)}).next(()=>s)}{const i=this.store.getAll(r.range);return new ye((s,u)=>{i.onerror=d=>{u(d.target.error)},i.onsuccess=d=>{s(d.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ye((i,s)=>{r.onerror=u=>{s(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}J(e,t){je("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(s,u,d)=>d.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}X(e){const t=this.cursor({});return new ye((r,i)=>{t.onerror=s=>{const u=zO(s.target.error);i(u)},t.onsuccess=s=>{const u=s.target.result;u?e(u.primaryKey,u.value).next(d=>{d?u.continue():r()}):r()}})}W(e,t){const r=[];return new ye((i,s)=>{e.onerror=u=>{s(u.target.error)},e.onsuccess=u=>{const d=u.target.result;if(!d)return void i();const g=new i4(d),y=t(d.primaryKey,d.value,g);if(y instanceof ye){const E=y.catch(T=>(g.done(),ye.reject(T)));r.push(E)}g.isDone?i():null===g.K?d.continue():d.continue(g.K)}}).next(()=>ye.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function im(n){return new ye((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=zO(r.target.error);t(i)}})}let QU=!1;function zO(n){const e=Rl.S((0,U.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return QU||(QU=!0,setTimeout(()=>{throw r},0)),r}}return n}class o4{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;je("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Te.Z)(function*(){t.task=null;try{je("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){If(r)?je("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Cf(r)}yield t.et(6e4)}))}}class a4{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Te.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,s=!0;return ye.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return je("IndexBackiller",`Processing collection: ${u}`),this.it(e,u,i).next(d=>{i-=d,r.add(u)});s=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const u=s.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.rt(i,s)).next(d=>(je("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>u.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,s)=>{const u=KU(s);$O(u,r)>0&&(r=u)}),new la(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ua=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function sE(n){return null==n}function oE(n){return 0===n&&1/n==-1/0}function XU(n){return"number"==typeof n&&Number.isInteger(n)&&!oE(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function to(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=JU(e)),e=l4(n.get(t),e);return JU(e)}function l4(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function JU(n){return n+"\x01\x01"}function Mu(n){const e=n.length;if(xt(e>=2),2===e)return xt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),bn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const u=n.indexOf("\x01",s);switch((u<0||u>t)&&ft(),n.charAt(u+1)){case"\x01":const d=n.substring(s,u);let g;0===i.length?g=d:(i+=d,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(s,u),i+="\0";break;case"\x11":i+=n.substring(s,u+1);break;default:ft()}s=u+2}return new bn(r)}const e2=["userId","batchId"];function NS(n,e){return[n,to(e)]}function t2(n,e,t){return[n,to(e),t]}const u4={},c4=["prefixPath","collectionGroup","readTime","documentId"],d4=["prefixPath","collectionGroup","documentId"],h4=["collectionGroup","readTime","prefixPath","documentId"],f4=["canonicalId","targetId"],p4=["targetId","path"],g4=["path","targetId"],m4=["collectionId","parent"],_4=["indexId","uid"],y4=["uid","sequenceNumber"],v4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],w4=["indexId","uid","orderedDocumentKey"],b4=["userId","collectionPath","documentId"],E4=["userId","collectionPath","largestBatchId"],C4=["userId","collectionGroup","largestBatchId"],n2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],I4=[...n2,"documentOverlays"],r2=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],s2=r2,D4=[...s2,"indexConfiguration","indexState","indexEntries"];class WO extends YU{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function Ki(n,e){const t=nt(n);return Rl.O(t.at,e)}function o2(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function sm(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function a2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Zr{constructor(e,t){this.comparator=e,this.root=t||hs.EMPTY}insert(e,t){return new Zr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hs.BLACK,null,null))}remove(e){return new Zr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new FS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new FS(this.root,e,this.comparator,!1)}getReverseIterator(){return new FS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new FS(this.root,e,this.comparator,!0)}}class FS{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hs{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??hs.RED,this.left=i??hs.EMPTY,this.right=s??hs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new hs(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return hs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return hs.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ft();const e=this.left.check();if(e!==this.right.check())throw ft();return e+(this.isRed()?0:1)}}hs.EMPTY=null,hs.RED=!0,hs.BLACK=!1,hs.EMPTY=new class{constructor(){this.size=0}get key(){throw ft()}get value(){throw ft()}get color(){throw ft()}get left(){throw ft()}get right(){throw ft()}copy(n,e,t,r,i){return this}insert(n,e,t){return new hs(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Wn{constructor(e){this.comparator=e,this.data=new Zr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new l2(this.data.getIterator())}getIteratorFrom(e){return new l2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Wn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Wn(this.comparator);return t.data=e,t}}class l2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function mv(n){return n.hasNext()?n.getNext():void 0}class Do{constructor(e){this.fields=e,e.sort(Kr.comparator)}static empty(){return new Do([])}unionWith(e){let t=new Wn(Kr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Do(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return gv(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class T4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ri{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new T4("Invalid base64 string: "+i):i}}(e);return new Ri(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Ri(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ri.EMPTY_BYTE_STRING=new Ri("");const A4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Df(n){if(xt(!!n),"string"==typeof n){let e=0;const t=A4.exec(n);if(xt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Yr(n.seconds),nanos:Yr(n.nanos)}}function Yr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function om(n){return"string"==typeof n?Ri.fromBase64String(n):Ri.fromUint8Array(n)}function qO(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function u2(n){const e=n.mapValue.fields.__previous_value__;return qO(e)?u2(e):e}function aE(n){const e=Df(n.mapValue.fields.__local_write_time__.timestampValue);return new Er(e.seconds,e.nanos)}class M4{constructor(e,t,r,i,s,u,d,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.useFetchStreams=g}}class Tf{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Tf("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Tf&&e.projectId===this.projectId&&e.database===this.database}}const Sf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},LS={nullValue:"NULL_VALUE"};function am(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qO(n)?4:f2(n)?9007199254740991:10:ft()}function xu(n,e){if(n===e)return!0;const t=am(n);if(t!==am(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return aE(n).isEqual(aE(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Df(r.timestampValue),u=Df(i.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,om(n.bytesValue).isEqual(om(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Yr(r.geoPointValue.latitude)===Yr(i.geoPointValue.latitude)&&Yr(r.geoPointValue.longitude)===Yr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Yr(r.integerValue)===Yr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Yr(r.doubleValue),u=Yr(i.doubleValue);return s===u?oE(s)===oE(u):isNaN(s)&&isNaN(u)}return!1}(n,e);case 9:return gv(n.arrayValue.values||[],e.arrayValue.values||[],xu);case 10:return function(r,i){const s=r.mapValue.fields||{},u=i.mapValue.fields||{};if(o2(s)!==o2(u))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===u[d]||!xu(s[d],u[d])))return!1;return!0}(n,e);default:return ft()}var i}function lE(n,e){return void 0!==(n.values||[]).find(t=>xu(t,e))}function Af(n,e){if(n===e)return 0;const t=am(n),r=am(e);if(t!==r)return Xt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Xt(n.booleanValue,e.booleanValue);case 2:return function(i,s){const u=Yr(i.integerValue||i.doubleValue),d=Yr(s.integerValue||s.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(n,e);case 3:return c2(n.timestampValue,e.timestampValue);case 4:return c2(aE(n),aE(e));case 5:return Xt(n.stringValue,e.stringValue);case 6:return function(i,s){const u=om(i),d=om(s);return u.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const u=i.split("/"),d=s.split("/");for(let g=0;g<u.length&&g<d.length;g++){const y=Xt(u[g],d[g]);if(0!==y)return y}return Xt(u.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const u=Xt(Yr(i.latitude),Yr(s.latitude));return 0!==u?u:Xt(Yr(i.longitude),Yr(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const u=i.values||[],d=s.values||[];for(let g=0;g<u.length&&g<d.length;++g){const y=Af(u[g],d[g]);if(y)return y}return Xt(u.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Sf.mapValue&&s===Sf.mapValue)return 0;if(i===Sf.mapValue)return 1;if(s===Sf.mapValue)return-1;const u=i.fields||{},d=Object.keys(u),g=s.fields||{},y=Object.keys(g);d.sort(),y.sort();for(let E=0;E<d.length&&E<y.length;++E){const T=Xt(d[E],y[E]);if(0!==T)return T;const P=Af(u[d[E]],g[y[E]]);if(0!==P)return P}return Xt(d.length,y.length)}(n.mapValue,e.mapValue);default:throw ft()}}function c2(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Xt(n,e);const t=Df(n),r=Df(e),i=Xt(t.seconds,r.seconds);return 0!==i?i:Xt(t.nanos,r.nanos)}function _v(n){return KO(n)}function KO(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Df(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?om(n.bytesValue).toBase64():"referenceValue"in n?et.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const u of r.values||[])s?s=!1:i+=",",i+=KO(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",u=!0;for(const d of i)u?u=!1:s+=",",s+=`${d}:${KO(r.fields[d])}`;return s+"}"}(n.mapValue):ft();var e}function lm(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ZO(n){return!!n&&"integerValue"in n}function uE(n){return!!n&&"arrayValue"in n}function d2(n){return!!n&&"nullValue"in n}function h2(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function VS(n){return!!n&&"mapValue"in n}function cE(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return sm(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=cE(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cE(n.arrayValue.values[t]);return e}return Object.assign({},n)}function f2(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function x4(n){return"nullValue"in n?LS:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?lm(Tf.empty(),et.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ft()}function R4(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?lm(Tf.empty(),et.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Sf:ft()}function p2(n,e){const t=Af(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function g2(n,e){const t=Af(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Zi{constructor(e){this.value=e}static empty(){return new Zi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!VS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cE(t)}setAll(e){let t=Kr.emptyPath(),r={},i=[];e.forEach((u,d)=>{if(!t.isImmediateParentOf(d)){const g=this.getFieldsMap(t);this.applyChanges(g,r,i),r={},i=[],t=d.popLast()}u?r[d.lastSegment()]=cE(u):i.push(d.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());VS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];VS(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){sm(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Zi(cE(this.value))}}function m2(n){const e=[];return sm(n.fields,(t,r)=>{const i=new Kr([t]);if(VS(r)){const s=m2(r.mapValue).fields;if(0===s.length)e.push(i);else for(const u of s)e.push(i.child(u))}else e.push(i)}),new Do(e)}class hr{constructor(e,t,r,i,s,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=u,this.documentState=d}static newInvalidDocument(e){return new hr(e,0,Ot.min(),Ot.min(),Ot.min(),Zi.empty(),0)}static newFoundDocument(e,t,r,i){return new hr(e,1,t,Ot.min(),r,i,0)}static newNoDocument(e,t){return new hr(e,2,t,Ot.min(),Ot.min(),Zi.empty(),0)}static newUnknownDocument(e,t){return new hr(e,3,t,Ot.min(),Ot.min(),Zi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ot.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ot.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof hr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Mf{constructor(e,t){this.position=e,this.inclusive=t}}function _2(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],u=n.position[i];if(r=s.field.isKeyField()?et.comparator(et.fromName(u.referenceValue),t.key):Af(u,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function y2(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!xu(n.position[t],e.position[t]))return!1;return!0}class yv{constructor(e,t="asc"){this.field=e,this.dir=t}}function k4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class v2{}class mn extends v2{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new O4(e,t,r):"array-contains"===t?new F4(e,r):"in"===t?new D2(e,r):"not-in"===t?new L4(e,r):"array-contains-any"===t?new V4(e,r):new mn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new P4(e,r):new N4(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Af(t,this.value)):null!==t&&am(this.value)===am(t)&&this.matchesComparison(Af(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ft()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Hn extends v2{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new Hn(e,t)}matches(e){return vv(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function vv(n){return"and"===n.op}function YO(n){return"or"===n.op}function QO(n){return w2(n)&&vv(n)}function w2(n){for(const e of n.filters)if(e instanceof Hn)return!1;return!0}function XO(n){if(n instanceof mn)return n.field.canonicalString()+n.op.toString()+_v(n.value);if(QO(n))return n.filters.map(e=>XO(e)).join(",");{const e=n.filters.map(t=>XO(t)).join(",");return`${n.op}(${e})`}}function b2(n,e){return n instanceof mn?(t=n,(r=e)instanceof mn&&t.op===r.op&&t.field.isEqual(r.field)&&xu(t.value,r.value)):n instanceof Hn?function(t,r){return r instanceof Hn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,s,u)=>i&&b2(s,r.filters[u]),!0)}(n,e):void ft();var t,r}function E2(n,e){const t=n.filters.concat(e);return Hn.create(t,n.op)}function C2(n){return n instanceof mn?`${(e=n).field.canonicalString()} ${e.op} ${_v(e.value)}`:n instanceof Hn?function(e){return e.op.toString()+" {"+e.getFilters().map(C2).join(" ,")+"}"}(n):"Filter";var e}class O4 extends mn{constructor(e,t,r){super(e,t,r),this.key=et.fromName(r.referenceValue)}matches(e){const t=et.comparator(e.key,this.key);return this.matchesComparison(t)}}class P4 extends mn{constructor(e,t){super(e,"in",t),this.keys=I2(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class N4 extends mn{constructor(e,t){super(e,"not-in",t),this.keys=I2(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function I2(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>et.fromName(r.referenceValue))}class F4 extends mn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return uE(t)&&lE(t.arrayValue,this.value)}}class D2 extends mn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&lE(this.value.arrayValue,t)}}class L4 extends mn{constructor(e,t){super(e,"not-in",t)}matches(e){if(lE(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!lE(this.value.arrayValue,t)}}class V4 extends mn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!uE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>lE(this.value.arrayValue,r))}}class B4{constructor(e,t=null,r=[],i=[],s=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=u,this.endAt=d,this.ft=null}}function JO(n,e=null,t=[],r=[],i=null,s=null,u=null){return new B4(n,e,t,r,i,s,u)}function um(n){const e=nt(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>XO(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),sE(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>_v(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>_v(r)).join(",")),e.ft=t}return e.ft}function dE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!k4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!b2(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!y2(n.startAt,e.startAt)&&y2(n.endAt,e.endAt)}function BS(n){return et.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function US(n,e){return n.filters.filter(t=>t instanceof mn&&t.field.isEqual(e))}function T2(n,e,t){let r=LS,i=!0;for(const s of US(n,e)){let u=LS,d=!0;switch(s.op){case"<":case"<=":u=x4(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,d=!1;break;case"!=":case"not-in":u=LS}p2({value:r,inclusive:i},{value:u,inclusive:d})<0&&(r=u,i=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const u=t.position[s];p2({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function S2(n,e,t){let r=Sf,i=!0;for(const s of US(n,e)){let u=Sf,d=!0;switch(s.op){case">=":case">":u=R4(s.value),d=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,d=!1;break;case"!=":case"not-in":u=Sf}g2({value:r,inclusive:i},{value:u,inclusive:d})>0&&(r=u,i=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const u=t.position[s];g2({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class Cd{constructor(e,t=null,r=[],i=[],s=null,u="F",d=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=u,this.startAt=d,this.endAt=g,this.dt=null,this.wt=null}}function A2(n,e,t,r,i,s,u,d){return new Cd(n,e,t,r,i,s,u,d)}function wv(n){return new Cd(n)}function M2(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function eP(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function jS(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function tP(n){return null!==n.collectionGroup}function cm(n){const e=nt(n);if(null===e.dt){e.dt=[];const t=jS(e),r=eP(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new yv(t)),e.dt.push(new yv(Kr.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.dt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new yv(Kr.keyField(),s))}}}return e.dt}function no(n){const e=nt(n);if(!e.wt)if("F"===e.limitType)e.wt=JO(e.path,e.collectionGroup,cm(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of cm(e))t.push(new yv(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new Mf(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Mf(e.startAt.position,e.startAt.inclusive):null;e.wt=JO(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function nP(n,e){e.getFirstInequalityField(),jS(n);const t=n.filters.concat([e]);return new Cd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function HS(n,e,t){return new Cd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hE(n,e){return dE(no(n),no(e))&&n.limitType===e.limitType}function x2(n){return`${um(no(n))}|lt:${n.limitType}`}function rP(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>C2(r)).join(", ")}]`),sE(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>_v(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>_v(r)).join(",")),`Target(${t})`}(no(n))}; limitType=${n.limitType})`}function fE(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):et.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of cm(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,u){const d=_2(i,s,u);return i.inclusive?d<=0:d<0}(t.startAt,cm(t),r)||t.endAt&&!function(i,s,u){const d=_2(i,s,u);return i.inclusive?d>=0:d>0}(t.endAt,cm(t),r)));var t,r}function R2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function k2(n){return(e,t)=>{let r=!1;for(const i of cm(n)){const s=U4(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function U4(n,e,t){const r=n.field.isKeyField()?et.comparator(e.key,t.key):function(i,s,u){const d=s.data.field(i),g=u.data.field(i);return null!==d&&null!==g?Af(d,g):ft()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ft()}}class xf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){sm(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return a2(this.inner)}size(){return this.innerSize}}const j4=new Zr(et.comparator);function To(){return j4}const O2=new Zr(et.comparator);function pE(...n){let e=O2;for(const t of n)e=e.insert(t.key,t);return e}function P2(n){let e=O2;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ru(){return gE()}function N2(){return gE()}function gE(){return new xf(n=>n.toString(),(n,e)=>n.isEqual(e))}const H4=new Zr(et.comparator),$4=new Wn(et.comparator);function on(...n){let e=$4;for(const t of n)e=e.add(t);return e}const G4=new Wn(Xt);function $S(){return G4}function F2(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oE(e)?"-0":e}}function L2(n){return{integerValue:""+n}}function V2(n,e){return XU(e)?L2(e):F2(n,e)}class GS{constructor(){this._=void 0}}function z4(n,e,t){return n instanceof bv?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof dm?U2(n,e):n instanceof hm?j2(n,e):function(r,i){const s=B2(r,i),u=H2(s)+H2(r._t);return ZO(s)&&ZO(r._t)?L2(u):F2(r.serializer,u)}(n,e)}function W4(n,e,t){return n instanceof dm?U2(n,e):n instanceof hm?j2(n,e):t}function B2(n,e){return n instanceof Ev?ZO(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class bv extends GS{}class dm extends GS{constructor(e){super(),this.elements=e}}function U2(n,e){const t=$2(e);for(const r of n.elements)t.some(i=>xu(i,r))||t.push(r);return{arrayValue:{values:t}}}class hm extends GS{constructor(e){super(),this.elements=e}}function j2(n,e){let t=$2(e);for(const r of n.elements)t=t.filter(i=>!xu(i,r));return{arrayValue:{values:t}}}class Ev extends GS{constructor(e,t){super(),this.serializer=e,this._t=t}}function H2(n){return Yr(n.integerValue||n.doubleValue)}function $2(n){return uE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class mE{constructor(e,t){this.field=e,this.transform=t}}class K4{constructor(e,t){this.version=e,this.transformResults=t}}class Cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cr}static exists(e){return new Cr(void 0,e)}static updateTime(e){return new Cr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zS(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class WS{}function G2(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Iv(n.key,Cr.none()):new Cv(n.key,n.data,Cr.none());{const t=n.data,r=Zi.empty();let i=new Wn(Kr.comparator);for(let s of e.fields)if(!i.has(s)){let u=t.field(s);null===u&&s.length>1&&(s=s.popLast(),u=t.field(s)),null===u?r.delete(s):r.set(s,u),i=i.add(s)}return new Id(n.key,r,new Do(i.toArray()),Cr.none())}}function Z4(n,e,t){n instanceof Cv?function(r,i,s){const u=r.value.clone(),d=q2(r.fieldTransforms,i,s.transformResults);u.setAll(d),i.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Id?function(r,i,s){if(!zS(r.precondition,i))return void i.convertToUnknownDocument(s.version);const u=q2(r.fieldTransforms,i,s.transformResults),d=i.data;d.setAll(W2(r)),d.setAll(u),i.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function _E(n,e,t,r){return n instanceof Cv?function(i,s,u,d){if(!zS(i.precondition,s))return u;const g=i.value.clone(),y=K2(i.fieldTransforms,d,s);return g.setAll(y),s.convertToFoundDocument(s.version,g).setHasLocalMutations(),null}(n,e,t,r):n instanceof Id?function(i,s,u,d){if(!zS(i.precondition,s))return u;const g=K2(i.fieldTransforms,d,s),y=s.data;return y.setAll(W2(i)),y.setAll(g),s.convertToFoundDocument(s.version,y).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(E=>E.field))}(n,e,t,r):(u=t,zS(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):u);var s,u}function Y4(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=B2(r.transform,i||null);null!=s&&(null===t&&(t=Zi.empty()),t.set(r.field,s))}return t||null}function z2(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&gv(t,r,(i,s)=>function q4(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof dm&&r instanceof dm||t instanceof hm&&r instanceof hm?gv(t.elements,r.elements,xu):t instanceof Ev&&r instanceof Ev?xu(t._t,r._t):t instanceof bv&&r instanceof bv);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Cv extends WS{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Id extends WS{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function W2(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function q2(n,e,t){const r=new Map;xt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],u=s.transform,d=e.data.field(s.field);r.set(s.field,W4(u,d,t[i]))}return r}function K2(n,e,t){const r=new Map;for(const i of n){const s=i.transform,u=t.data.field(i.field);r.set(i.field,z4(s,u,e))}return r}class Iv extends WS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iP extends WS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class sP{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Z4(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=_E(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=_E(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=N2();return this.mutations.forEach(i=>{const s=e.get(i.key),u=s.overlayedDocument;let d=this.applyToLocalView(u,s.mutatedFields);d=t.has(i.key)?null:d;const g=G2(u,d);null!==g&&r.set(i.key,g),u.isValidDocument()||u.convertToNoDocument(Ot.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),on())}isEqual(e){return this.batchId===e.batchId&&gv(this.mutations,e.mutations,(t,r)=>z2(t,r))&&gv(this.baseMutations,e.baseMutations,(t,r)=>z2(t,r))}}class oP{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){xt(e.mutations.length===r.length);let i=H4;const s=e.mutations;for(let u=0;u<s.length;u++)i=i.insert(s[u].key,r[u].version);return new oP(e,t,r,i)}}class aP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class J4{constructor(e){this.count=e}}var bi,En;function Z2(n){switch(n){default:return ft();case we.CANCELLED:case we.UNKNOWN:case we.DEADLINE_EXCEEDED:case we.RESOURCE_EXHAUSTED:case we.INTERNAL:case we.UNAVAILABLE:case we.UNAUTHENTICATED:return!1;case we.INVALID_ARGUMENT:case we.NOT_FOUND:case we.ALREADY_EXISTS:case we.PERMISSION_DENIED:case we.FAILED_PRECONDITION:case we.ABORTED:case we.OUT_OF_RANGE:case we.UNIMPLEMENTED:case we.DATA_LOSS:return!0}}function Y2(n){if(void 0===n)return oi("GRPC error has no .code"),we.UNKNOWN;switch(n){case bi.OK:return we.OK;case bi.CANCELLED:return we.CANCELLED;case bi.UNKNOWN:return we.UNKNOWN;case bi.DEADLINE_EXCEEDED:return we.DEADLINE_EXCEEDED;case bi.RESOURCE_EXHAUSTED:return we.RESOURCE_EXHAUSTED;case bi.INTERNAL:return we.INTERNAL;case bi.UNAVAILABLE:return we.UNAVAILABLE;case bi.UNAUTHENTICATED:return we.UNAUTHENTICATED;case bi.INVALID_ARGUMENT:return we.INVALID_ARGUMENT;case bi.NOT_FOUND:return we.NOT_FOUND;case bi.ALREADY_EXISTS:return we.ALREADY_EXISTS;case bi.PERMISSION_DENIED:return we.PERMISSION_DENIED;case bi.FAILED_PRECONDITION:return we.FAILED_PRECONDITION;case bi.ABORTED:return we.ABORTED;case bi.OUT_OF_RANGE:return we.OUT_OF_RANGE;case bi.UNIMPLEMENTED:return we.UNIMPLEMENTED;case bi.DATA_LOSS:return we.DATA_LOSS;default:return ft()}}(En=bi||(bi={}))[En.OK=0]="OK",En[En.CANCELLED=1]="CANCELLED",En[En.UNKNOWN=2]="UNKNOWN",En[En.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",En[En.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",En[En.NOT_FOUND=5]="NOT_FOUND",En[En.ALREADY_EXISTS=6]="ALREADY_EXISTS",En[En.PERMISSION_DENIED=7]="PERMISSION_DENIED",En[En.UNAUTHENTICATED=16]="UNAUTHENTICATED",En[En.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",En[En.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",En[En.ABORTED=10]="ABORTED",En[En.OUT_OF_RANGE=11]="OUT_OF_RANGE",En[En.UNIMPLEMENTED=12]="UNIMPLEMENTED",En[En.INTERNAL=13]="INTERNAL",En[En.UNAVAILABLE=14]="UNAVAILABLE",En[En.DATA_LOSS=15]="DATA_LOSS";class uP{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return qS}static getOrCreateInstance(){return null===qS&&(qS=new uP),qS}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let qS=null;class yE{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,vE.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new yE(Ot.min(),i,$S(),To(),on())}}class vE{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new vE(r,t,on(),on(),on())}}class KS{constructor(e,t,r,i){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=i}}class Q2{constructor(e,t){this.targetId=e,this.Et=t}}class X2{constructor(e,t,r=Ri.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class J2{constructor(){this.At=0,this.Rt=tj(),this.vt=Ri.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}get current(){return this.bt}get resumeToken(){return this.vt}get Vt(){return 0!==this.At}get St(){return this.Pt}Dt(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}Ct(){let e=on(),t=on(),r=on();return this.Rt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ft()}}),new vE(this.vt,this.bt,e,t,r)}xt(){this.Pt=!1,this.Rt=tj()}Nt(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}$t(){this.At-=1}Mt(){this.Pt=!0,this.bt=!0}}class e8{constructor(e){this.Ft=e,this.Bt=new Map,this.Lt=To(),this.qt=ej(),this.Ut=new Wn(Xt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}zt(e){this.forEachTarget(e,t=>{const r=this.jt(t);switch(e.state){case 0:this.Wt(t)&&r.Dt(e.resumeToken);break;case 1:r.$t(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.$t(),r.Vt||this.removeTarget(t);break;case 3:this.Wt(t)&&(r.Mt(),r.Dt(e.resumeToken));break;case 4:this.Wt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:ft()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,i)=>{this.Wt(i)&&t(i)})}Jt(e){var t;const r=e.targetId,i=e.Et.count,s=this.Yt(r);if(s){const u=s.target;if(BS(u))if(0===i){const d=new et(u.path);this.Qt(r,d,hr.newNoDocument(d,Ot.min()))}else xt(1===i);else{const d=this.Zt(r);d!==i&&(this.Ht(r),this.Ut=this.Ut.add(r),null===(t=uP.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:d,existenceFilterCount:e.Et.count}))}}}Xt(e){const t=new Map;this.Bt.forEach((s,u)=>{const d=this.Yt(u);if(d){if(s.current&&BS(d.target)){const g=new et(d.target.path);null!==this.Lt.get(g)||this.te(u,g)||this.Qt(u,g,hr.newNoDocument(g,e))}s.St&&(t.set(u,s.Ct()),s.xt())}});let r=on();this.qt.forEach((s,u)=>{let d=!0;u.forEachWhile(g=>{const y=this.Yt(g);return!y||2===y.purpose||(d=!1,!1)}),d&&(r=r.add(s))}),this.Lt.forEach((s,u)=>u.setReadTime(e));const i=new yE(e,t,this.Ut,this.Lt,r);return this.Lt=To(),this.qt=ej(),this.Ut=new Wn(Xt),i}Gt(e,t){if(!this.Wt(e))return;const r=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.Wt(e))return;const i=this.jt(e);this.te(e,t)?i.Nt(t,1):i.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Zt(e){const t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.jt(e).Ot()}jt(e){let t=this.Bt.get(e);return t||(t=new J2,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new Wn(Xt),this.qt=this.qt.insert(e,t)),t}Wt(e){const t=null!==this.Yt(e);return t||je("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}Ht(e){this.Bt.set(e,new J2),this.Ft.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}function ej(){return new Zr(et.comparator)}function tj(){return new Zr(et.comparator)}const t8={asc:"ASCENDING",desc:"DESCENDING"},n8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},r8={and:"AND",or:"OR"};class i8{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Dv(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nj(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function s8(n,e){return Dv(n,e.toTimestamp())}function ai(n){return xt(!!n),Ot.fromTimestamp(function(e){const t=Df(e);return new Er(t.seconds,t.nanos)}(n))}function cP(n,e){return(t=n,new bn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function rj(n){const e=bn.fromString(n);return xt(hj(e)),e}function wE(n,e){return cP(n.databaseId,e.path)}function ku(n,e){const t=rj(e);if(t.get(1)!==n.databaseId.projectId)throw new Le(we.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Le(we.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new et(sj(t))}function dP(n,e){return cP(n.databaseId,e)}function ij(n){const e=rj(n);return 4===e.length?bn.emptyPath():sj(e)}function bE(n){return new bn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function sj(n){return xt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function oj(n,e,t){return{name:wE(n,e),fields:t.value.mapValue.fields}}function aj(n,e,t){const r=ku(n,e.name),i=ai(e.updateTime),s=e.createTime?ai(e.createTime):Ot.min(),u=new Zi({mapValue:{fields:e.fields}}),d=hr.newFoundDocument(r,i,s,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function EE(n,e){let t;if(e instanceof Cv)t={update:oj(n,e.key,e.value)};else if(e instanceof Iv)t={delete:wE(n,e.key)};else if(e instanceof Id)t={update:oj(n,e.key,e.data),updateMask:f8(e.fieldMask)};else{if(!(e instanceof iP))return ft();t={verify:wE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const u=s.transform;if(u instanceof bv)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof dm)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof hm)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Ev)return{fieldPath:s.field.canonicalString(),increment:u._t};throw ft()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:s8(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ft()),t;var i}function hP(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Cr.updateTime(ai(i.updateTime)):void 0!==i.exists?Cr.exists(i.exists):Cr.none():Cr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,u){let d=null;"setToServerValue"in u?(xt("REQUEST_TIME"===u.setToServerValue),d=new bv):"appendMissingElements"in u?d=new dm(u.appendMissingElements.values||[]):"removeAllFromArray"in u?d=new hm(u.removeAllFromArray.values||[]):"increment"in u?d=new Ev(s,u.increment):ft();const g=Kr.fromServerFormat(u.fieldPath);return new mE(g,d)}(n,i)):[];var i;if(e.update){const i=ku(n,e.update.name),s=new Zi({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new Do((e.updateMask.fieldPaths||[]).map(y=>Kr.fromServerFormat(y)));return new Id(i,s,u,t,r)}return new Cv(i,s,t,r)}if(e.delete){const i=ku(n,e.delete);return new Iv(i,t)}if(e.verify){const i=ku(n,e.verify);return new iP(i,t)}return ft()}function lj(n,e){return{documents:[dP(n,e.path)]}}function fP(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=dP(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=dP(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0!==g.length)return dj(Hn.create(g,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(g){if(0!==g.length)return g.map(y=>{return{field:Rf((E=y).field),direction:c8(E.dir)};var E})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const u=(y=e.limit,n.useProto3Json||sE(y)?y:{value:y});var y,d,g;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function uj(n){let e=ij(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){xt(1===r);const E=t.from[0];E.allDescendants?i=E.collectionId:e=e.child(E.collectionId)}let s=[];t.where&&(s=function(E){const T=cj(E);return T instanceof Hn&&QO(T)?T.getFilters():[T]}(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(E=>{return new yv(Tv((T=E).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let d=null;t.limit&&(d=function(E){let T;return T="object"==typeof E?E.value:E,sE(T)?null:T}(t.limit));let g=null;var E;t.startAt&&(g=new Mf((E=t.startAt).values||[],!!E.before));let y=null;return t.endAt&&(y=function(E){return new Mf(E.values||[],!E.before)}(t.endAt)),A2(e,i,u,s,d,"F",g,y)}function cj(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Tv(e.unaryFilter.field);return mn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Tv(e.unaryFilter.field);return mn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Tv(e.unaryFilter.field);return mn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Tv(e.unaryFilter.field);return mn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ft()}}(n):void 0!==n.fieldFilter?mn.create(Tv((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ft()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Hn.create(e.compositeFilter.filters.map(t=>cj(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ft()}}(e.compositeFilter.op))}(n):ft();var e}function c8(n){return t8[n]}function d8(n){return n8[n]}function h8(n){return r8[n]}function Rf(n){return{fieldPath:n.canonicalString()}}function Tv(n){return Kr.fromServerFormat(n.fieldPath)}function dj(n){return n instanceof mn?function(e){if("=="===e.op){if(h2(e.value))return{unaryFilter:{field:Rf(e.field),op:"IS_NAN"}};if(d2(e.value))return{unaryFilter:{field:Rf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(h2(e.value))return{unaryFilter:{field:Rf(e.field),op:"IS_NOT_NAN"}};if(d2(e.value))return{unaryFilter:{field:Rf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rf(e.field),op:d8(e.op),value:e.value}}}(n):n instanceof Hn?function(e){const t=e.getFilters().map(r=>dj(r));return 1===t.length?t[0]:{compositeFilter:{op:h8(e.op),filters:t}}}(n):ft()}function f8(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function hj(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class kf{constructor(e,t,r,i,s=Ot.min(),u=Ot.min(),d=Ri.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d}withSequenceNumber(e){return new kf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new kf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new kf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class fj{constructor(e){this.se=e}}function pj(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ZS(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:wE(i=n.se,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:Dv(i,s.version.toTimestamp()),createTime:Dv(i,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:fm(e.version)};else{if(!e.isUnknownDocument())return ft();r.unknownDocument={path:t.path.toArray(),version:fm(e.version)}}var i,s;return r}function ZS(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function fm(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function pm(n){const e=new Er(n.seconds,n.nanoseconds);return Ot.fromTimestamp(e)}function gm(n,e){const t=(e.baseMutations||[]).map(s=>hP(n.se,s));for(let s=0;s<e.mutations.length-1;++s){const u=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(u.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>hP(n.se,s)),i=Er.fromMillis(e.localWriteTimeMs);return new sP(e.batchId,i,t,r)}function CE(n){const e=pm(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?pm(n.lastLimboFreeSnapshotVersion):Ot.min();let r;var i;return void 0!==n.query.documents?(xt(1===(i=n.query).documents.length),r=no(wv(ij(i.documents[0])))):r=no(uj(n.query)),new kf(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Ri.fromBase64String(n.resumeToken))}function gj(n,e){const t=fm(e.snapshotVersion),r=fm(e.lastLimboFreeSnapshotVersion);let i;i=BS(e.target)?lj(n.se,e.target):fP(n.se,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:um(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function pP(n){const e=uj({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?HS(e,e.limit,"L"):e}function gP(n,e){return new aP(e.largestBatchId,hP(n.se,e.overlayMutation))}function mj(n,e){const t=e.path.lastSegment();return[n,to(e.path.popLast()),t]}function _j(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:fm(r.readTime),documentKey:to(r.documentKey.path),largestBatchId:r.largestBatchId}}class g8{getBundleMetadata(e,t){return yj(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:pm(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return yj(e).put({bundleId:(r=t).id,createTime:fm(ai(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return vj(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:pP(i.bundledQuery),readTime:pm(i.readTime)};var i})}saveNamedQuery(e,t){return vj(e).put({name:(r=t).name,readTime:fm(ai(r.readTime)),bundledQuery:r.bundledQuery});var r}}function yj(n){return Ki(n,"bundles")}function vj(n){return Ki(n,"namedQueries")}class YS{constructor(e,t){this.serializer=e,this.userId=t}static ie(e,t){return new YS(e,t.uid||"")}getOverlay(e,t){return IE(e).get(mj(this.userId,t)).next(r=>r?gP(this.serializer,r):null)}getOverlays(e,t){const r=Ru();return ye.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,u)=>{const d=new aP(t,u);i.push(this.re(e,d))}),ye.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(to(u.getCollectionPath())));const s=[];return i.forEach(u=>{const d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);s.push(IE(e).J("collectionPathOverlayIndex",d))}),ye.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Ru(),s=to(t),u=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return IE(e).j("collectionPathOverlayIndex",u).next(d=>{for(const g of d){const y=gP(this.serializer,g);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Ru();let u;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return IE(e).Z({index:"collectionGroupOverlayIndex",range:d},(g,y,E)=>{const T=gP(this.serializer,y);s.size()<i||T.largestBatchId===u?(s.set(T.getKey(),T),u=T.largestBatchId):E.done()}).next(()=>s)}re(e,t){return IE(e).put(function(r,i,s){const[u,d,g]=mj(i,s.mutation.key);return{userId:i,collectionPath:d,documentId:g,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:EE(r.se,s.mutation)}}(this.serializer,this.userId,t))}}function IE(n){return Ki(n,"documentOverlays")}class mm{constructor(){}oe(e,t){this.ue(e,t),t.ce()}ue(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(Yr(e.integerValue));else if("doubleValue"in e){const r=Yr(e.doubleValue);isNaN(r)?this.ae(t,13):(this.ae(t,15),oE(r)?t.he(0):t.he(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ae(t,20),"string"==typeof r?t.le(r):(t.le(`${r.seconds||""}`),t.he(r.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(om(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ae(t,45),t.he(r.latitude||0),t.he(r.longitude||0)}else"mapValue"in e?f2(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):ft()}fe(e,t){this.ae(t,25),this.ye(e,t)}ye(e,t){t.le(e)}me(e,t){const r=e.fields||{};this.ae(t,55);for(const i of Object.keys(r))this.fe(i,t),this.ue(r[i],t)}ge(e,t){const r=e.values||[];this.ae(t,50);for(const i of r)this.ue(i,t)}_e(e,t){this.ae(t,37),et.fromName(e).path.forEach(r=>{this.ae(t,60),this.ye(r,t)})}ae(e,t){e.he(t)}de(e){e.he(2)}}function m8(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function wj(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=m8(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}mm.pe=new mm;class _8{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ie(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Te(r.value),r=t.next();this.Ee()}Ae(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Re(r.value),r=t.next();this.ve()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Te(r);else if(r<2048)this.Te(960|r>>>6),this.Te(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Te(480|r>>>12),this.Te(128|63&r>>>6),this.Te(128|63&r);else{const i=t.codePointAt(0);this.Te(240|i>>>18),this.Te(128|63&i>>>12),this.Te(128|63&i>>>6),this.Te(128|63&i)}}this.Ee()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const i=t.codePointAt(0);this.Re(240|i>>>18),this.Re(128|63&i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i)}}this.ve()}Ve(e){const t=this.Se(e),r=wj(t);this.De(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ce(e){const t=this.Se(e),r=wj(t);this.De(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}xe(){this.Ne(255),this.Ne(255)}ke(){this.Oe(255),this.Oe(255)}reset(){this.position=0}seed(e){this.De(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Se(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Te(e){const t=255&e;0===t?(this.Ne(0),this.Ne(255)):255===t?(this.Ne(255),this.Ne(0)):this.Ne(t)}Re(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(e)}Ee(){this.Ne(0),this.Ne(1)}ve(){this.Oe(0),this.Oe(1)}Ne(e){this.De(1),this.buffer[this.position++]=e}Oe(e){this.De(1),this.buffer[this.position++]=~e}De(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class y8{constructor(e){this.Me=e}we(e){this.Me.Ie(e)}le(e){this.Me.be(e)}he(e){this.Me.Ve(e)}ce(){this.Me.xe()}}class v8{constructor(e){this.Me=e}we(e){this.Me.Ae(e)}le(e){this.Me.Pe(e)}he(e){this.Me.Ce(e)}ce(){this.Me.ke()}}class DE{constructor(){this.Me=new _8,this.Fe=new y8(this.Me),this.Be=new v8(this.Me)}seed(e){this.Me.seed(e)}Le(e){return 0===e?this.Fe:this.Be}$e(){return this.Me.$e()}reset(){this.Me.reset()}}class _m{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}qe(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new _m(this.indexId,this.documentKey,this.arrayValue,r)}}function Of(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=bj(n.arrayValue,e.arrayValue),0!==t?t:(t=bj(n.directionalValue,e.directionalValue),0!==t?t:et.comparator(n.documentKey,e.documentKey)))}function bj(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class w8{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.Ke=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ge=r:this.Ke.push(r)}}Qe(e){xt(e.collectionGroup===this.collectionId);const t=HO(e);if(void 0!==t&&!this.ze(t))return!1;const r=rm(e);let i=0,s=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ge){const u=r[i];if(!this.je(this.Ge,u)||!this.We(this.Ue[s++],u))return!1;++i}for(;i<r.length;++i){const u=r[i];if(s>=this.Ue.length||!this.We(this.Ue[s++],u))return!1}return!0}ze(e){for(const t of this.Ke)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Ej(n){var e,t;if(xt(n instanceof mn||n instanceof Hn),n instanceof mn){if(n instanceof D2){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>mn.create(n.field,"==",s)))||[];return Hn.create(i,"or")}return n}const r=n.filters.map(i=>Ej(i));return Hn.create(r,n.op)}function b8(n){if(0===n.getFilters().length)return[];const e=yP(Ej(n));return xt(Cj(e)),mP(e)||_P(e)?[e]:e.getFilters()}function mP(n){return n instanceof mn}function _P(n){return n instanceof Hn&&QO(n)}function Cj(n){return mP(n)||_P(n)||function(e){if(e instanceof Hn&&YO(e)){for(const t of e.getFilters())if(!mP(t)&&!_P(t))return!1;return!0}return!1}(n)}function yP(n){if(xt(n instanceof mn||n instanceof Hn),n instanceof mn)return n;if(1===n.filters.length)return yP(n.filters[0]);const e=n.filters.map(r=>yP(r));let t=Hn.create(e,n.op);return t=QS(t),Cj(t)?t:(xt(t instanceof Hn),xt(vv(t)),xt(t.filters.length>1),t.filters.reduce((r,i)=>vP(r,i)))}function vP(n,e){let t;return xt(n instanceof mn||n instanceof Hn),xt(e instanceof mn||e instanceof Hn),t=n instanceof mn?e instanceof mn?Hn.create([n,e],"and"):Ij(n,e):e instanceof mn?Ij(e,n):function(r,i){if(xt(r.filters.length>0&&i.filters.length>0),vv(r)&&vv(i))return E2(r,i.getFilters());const s=YO(r)?r:i,u=YO(r)?i:r,d=s.filters.map(g=>vP(g,u));return Hn.create(d,"or")}(n,e),QS(t)}function Ij(n,e){if(vv(e))return E2(e,n.getFilters());{const t=e.filters.map(r=>vP(n,r));return Hn.create(t,"or")}}function QS(n){if(xt(n instanceof mn||n instanceof Hn),n instanceof mn)return n;const e=n.getFilters();if(1===e.length)return QS(e[0]);if(w2(n))return n;const t=e.map(i=>QS(i)),r=[];return t.forEach(i=>{i instanceof mn?r.push(i):i instanceof Hn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Hn.create(r,n.op)}class E8{constructor(){this.He=new wP}addToCollectionParentIndex(e,t){return this.He.add(t),ye.resolve()}getCollectionParents(e,t){return ye.resolve(this.He.getEntries(t))}addFieldIndex(e,t){return ye.resolve()}deleteFieldIndex(e,t){return ye.resolve()}getDocumentsMatchingTarget(e,t){return ye.resolve(null)}getIndexType(e,t){return ye.resolve(0)}getFieldIndexes(e,t){return ye.resolve([])}getNextCollectionGroupToUpdate(e){return ye.resolve(null)}getMinOffset(e,t){return ye.resolve(la.min())}getMinOffsetFromCollectionGroup(e,t){return ye.resolve(la.min())}updateCollectionGroup(e,t,r){return ye.resolve()}updateIndexEntries(e,t){return ye.resolve()}}class wP{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Wn(bn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Wn(bn.comparator)).toArray()}}const XS=new Uint8Array(0);class C8{constructor(e,t){this.user=e,this.databaseId=t,this.Je=new wP,this.Ye=new xf(r=>um(r),(r,i)=>dE(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Je.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Je.add(t)});const s={collectionId:r,parent:to(i)};return Dj(e).put(s)}return ye.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[WU(t),""],!1,!0);return Dj(e).j(i).next(s=>{for(const u of s){if(u.collectionId!==t)break;r.push(Mu(u.parent))}return r})}addFieldIndex(e,t){const r=JS(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;delete i.indexId;const s=r.add(i);if(t.indexState){const u=SE(e);return s.next(d=>{u.put(_j(d,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=JS(e),i=SE(e),s=TE(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=TE(e);let i=!0;const s=new Map;return ye.forEach(this.Ze(t),u=>this.Xe(e,u).next(d=>{i&&(i=!!d),s.set(u,d)})).next(()=>{if(i){let u=on();const d=[];return ye.forEach(s,(g,y)=>{var E;je("IndexedDbIndexManager",`Using index ${E=g,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(Ze=>`${Ze.fieldPath}:${Ze.kind}`).join(",")}`} to execute ${um(t)}`);const T=function(Ze,tt){const Lt=HO(tt);if(void 0===Lt)return null;for(const jt of US(Ze,Lt.fieldPath))switch(jt.op){case"array-contains-any":return jt.value.arrayValue.values||[];case"array-contains":return[jt.value]}return null}(y,g),P=function(Ze,tt){const Lt=new Map;for(const jt of rm(tt))for(const vn of US(Ze,jt.fieldPath))switch(vn.op){case"==":case"in":Lt.set(jt.fieldPath.canonicalString(),vn.value);break;case"not-in":case"!=":return Lt.set(jt.fieldPath.canonicalString(),vn.value),Array.from(Lt.values())}return null}(y,g),B=function(Ze,tt){const Lt=[];let jt=!0;for(const vn of rm(tt)){const Ir=0===vn.kind?T2(Ze,vn.fieldPath,Ze.startAt):S2(Ze,vn.fieldPath,Ze.startAt);Lt.push(Ir.value),jt&&(jt=Ir.inclusive)}return new Mf(Lt,jt)}(y,g),q=function(Ze,tt){const Lt=[];let jt=!0;for(const vn of rm(tt)){const Ir=0===vn.kind?S2(Ze,vn.fieldPath,Ze.endAt):T2(Ze,vn.fieldPath,Ze.endAt);Lt.push(Ir.value),jt&&(jt=Ir.inclusive)}return new Mf(Lt,jt)}(y,g),ie=this.tn(g,y,B),ge=this.tn(g,y,q),Ue=this.en(g,y,P),Ye=this.nn(g.indexId,T,ie,B.inclusive,ge,q.inclusive,Ue);return ye.forEach(Ye,Ze=>r.H(Ze,t.limit).next(tt=>{tt.forEach(Lt=>{const jt=et.fromSegments(Lt.documentKey);u.has(jt)||(u=u.add(jt),d.push(jt))})}))}).next(()=>d)}return ye.resolve(null)})}Ze(e){let t=this.Ye.get(e);return t||(t=0===e.filters.length?[e]:b8(Hn.create(e.filters,"and")).map(r=>JO(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Ye.set(e,t),t)}nn(e,t,r,i,s,u,d){const g=(null!=t?t.length:1)*Math.max(r.length,s.length),y=g/(null!=t?t.length:1),E=[];for(let T=0;T<g;++T){const P=t?this.sn(t[T/y]):XS,B=this.rn(e,P,r[T%y],i),q=this.on(e,P,s[T%y],u),ie=d.map(ge=>this.rn(e,P,ge,!0));E.push(...this.createRange(B,q,ie))}return E}rn(e,t,r,i){const s=new _m(e,et.empty(),t,r);return i?s:s.qe()}on(e,t,r,i){const s=new _m(e,et.empty(),t,r);return i?s.qe():s}Xe(e,t){const r=new w8(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let u=null;for(const d of s)r.Qe(d)&&(!u||d.fields.length>u.fields.length)&&(u=d);return u})}getIndexType(e,t){let r=2;const i=this.Ze(t);return ye.forEach(i,s=>this.Xe(e,s).next(u=>{u?0!==r&&u.fields.length<function(d){let g=new Wn(Kr.comparator),y=!1;for(const E of d.filters)for(const T of E.getFlattenedFilters())T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?y=!0:g=g.add(T.field));for(const E of d.orderBy)E.field.isKeyField()||(g=g.add(E.field));return g.size+(y?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}un(e,t){const r=new DE;for(const i of rm(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const u=r.Le(i.kind);mm.pe.oe(s,u)}return r.$e()}sn(e){const t=new DE;return mm.pe.oe(e,t.Le(0)),t.$e()}cn(e,t){const r=new DE;return mm.pe.oe(lm(this.databaseId,t),r.Le(function(i){const s=rm(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.$e()}en(e,t,r){if(null===r)return[];let i=[];i.push(new DE);let s=0;for(const u of rm(e)){const d=r[s++];for(const g of i)if(this.an(t,u.fieldPath)&&uE(d))i=this.hn(i,u,d);else{const y=g.Le(u.kind);mm.pe.oe(d,y)}}return this.ln(i)}tn(e,t,r){return this.en(e,t,r.position)}ln(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}hn(e,t,r){const i=[...e],s=[];for(const u of r.arrayValue.values||[])for(const d of i){const g=new DE;g.seed(d.$e()),mm.pe.oe(u,g.Le(t.kind)),s.push(g)}return s}an(e,t){return!!e.filters.find(r=>r instanceof mn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=JS(e),i=SE(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(s=>{const u=[];return ye.forEach(s,d=>i.get([d.indexId,this.uid]).next(g=>{u.push(function(y,E){const T=E?new rE(E.sequenceNumber,new la(pm(E.readTime),new et(Mu(E.documentKey)),E.largestBatchId)):rE.empty(),P=y.fields.map(([B,q])=>new OS(Kr.fromServerFormat(B),q));return new kS(y.indexId,y.collectionGroup,P,T)}(d,g))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Xt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=JS(e),s=SE(e);return this.fn(e).next(u=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>ye.forEach(d,g=>s.put(_j(g.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return ye.forEach(t,(i,s)=>{const u=r.get(i.collectionGroup);return(u?ye.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),ye.forEach(d,g=>this.dn(e,i,g).next(y=>{const E=this.wn(s,g);return y.isEqual(E)?ye.resolve():this._n(e,s,g,y,E)}))))})}mn(e,t,r,i){return TE(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.cn(r,t.key),documentKey:t.key.path.toArray()})}gn(e,t,r,i){return TE(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.cn(r,t.key),t.key.path.toArray()])}dn(e,t,r){const i=TE(e);let s=new Wn(Of);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.cn(r,t)])},(u,d)=>{s=s.add(new _m(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>s)}wn(e,t){let r=new Wn(Of);const i=this.un(t,e);if(null==i)return r;const s=HO(t);if(null!=s){const u=e.data.field(s.fieldPath);if(uE(u))for(const d of u.arrayValue.values||[])r=r.add(new _m(t.indexId,e.key,this.sn(d),i))}else r=r.add(new _m(t.indexId,e.key,XS,i));return r}_n(e,t,r,i,s){je("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(d,g,y,E,T){const P=d.getIterator(),B=g.getIterator();let q=mv(P),ie=mv(B);for(;q||ie;){let ge=!1,Ue=!1;if(q&&ie){const Ye=y(q,ie);Ye<0?Ue=!0:Ye>0&&(ge=!0)}else null!=q?Ue=!0:ge=!0;ge?(E(ie),ie=mv(B)):Ue?(T(q),q=mv(P)):(q=mv(P),ie=mv(B))}}(i,s,Of,d=>{u.push(this.mn(e,t,r,d))},d=>{u.push(this.gn(e,t,r,d))}),ye.waitFor(u)}fn(e){let t=1;return SE(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,d)=>Of(u,d)).filter((u,d,g)=>!d||0!==Of(u,g[d-1]));const i=[];i.push(e);for(const u of r){const d=Of(u,e),g=Of(u,t);if(0===d)i[0]=e.qe();else if(d>0&&g<0)i.push(u),i.push(u.qe());else if(g>0)break}i.push(t);const s=[];for(let u=0;u<i.length;u+=2){if(this.yn(i[u],i[u+1]))return[];s.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,XS,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,XS,[]]))}return s}yn(e,t){return Of(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Tj)}getMinOffset(e,t){return ye.mapArray(this.Ze(t),r=>this.Xe(e,r).next(i=>i||ft())).next(Tj)}}function Dj(n){return Ki(n,"collectionParents")}function TE(n){return Ki(n,"indexEntries")}function JS(n){return Ki(n,"indexConfiguration")}function SE(n){return Ki(n,"indexState")}function Tj(n){xt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;$O(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new la(e.readTime,e.documentKey,t)}const Sj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class So{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new So(e,So.DEFAULT_COLLECTION_PERCENTILE,So.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Aj(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],u=IDBKeyRange.only(t.batchId);let d=0;const g=r.Z({range:u},(E,T,P)=>(d++,P.delete()));s.push(g.next(()=>{xt(1===d)}));const y=[];for(const E of t.mutations){const T=t2(e,E.key.path,t.batchId);s.push(i.delete(T)),y.push(E.key)}return ye.waitFor(s).next(()=>y)}function eA(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ft();e=n.noDocument}return JSON.stringify(e).length}So.DEFAULT_COLLECTION_PERCENTILE=10,So.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,So.DEFAULT=new So(41943040,So.DEFAULT_COLLECTION_PERCENTILE,So.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),So.DISABLED=new So(-1,0,0);class tA{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.pn={}}static ie(e,t,r,i){xt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new tA(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Pf(e).Z({index:"userMutationsIndex",range:r},(i,s,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Sv(e),u=Pf(e);return u.add({}).next(d=>{xt("number"==typeof d);const g=new sP(d,t,r,i),y=function(P,B,q){const ie=q.baseMutations.map(Ue=>EE(P.se,Ue)),ge=q.mutations.map(Ue=>EE(P.se,Ue));return{userId:B,batchId:q.batchId,localWriteTimeMs:q.localWriteTime.toMillis(),baseMutations:ie,mutations:ge}}(this.serializer,this.userId,g),E=[];let T=new Wn((P,B)=>Xt(P.canonicalString(),B.canonicalString()));for(const P of i){const B=t2(this.userId,P.key.path,d);T=T.add(P.key.path.popLast()),E.push(u.put(y)),E.push(s.put(B,u4))}return T.forEach(P=>{E.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.pn[d]=g.keys()}),ye.waitFor(E).next(()=>g)})}lookupMutationBatch(e,t){return Pf(e).get(t).next(r=>r?(xt(r.userId===this.userId),gm(this.serializer,r)):null)}In(e,t){return this.pn[t]?ye.resolve(this.pn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.pn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Pf(e).Z({index:"userMutationsIndex",range:i},(u,d,g)=>{d.userId===this.userId&&(xt(d.batchId>=r),s=gm(this.serializer,d)),g.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Pf(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,s,u)=>{r=s.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Pf(e).j("userMutationsIndex",t).next(r=>r.map(i=>gm(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=NS(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Sv(e).Z({range:i},(u,d,g)=>{const[y,E,T]=u,P=Mu(E);if(y===this.userId&&t.path.isEqual(P))return Pf(e).get(T).next(B=>{if(!B)throw ft();xt(B.userId===this.userId),s.push(gm(this.serializer,B))});g.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Wn(Xt);const i=[];return t.forEach(s=>{const u=NS(this.userId,s.path),d=IDBKeyRange.lowerBound(u),g=Sv(e).Z({range:d},(y,E,T)=>{const[P,B,q]=y,ie=Mu(B);P===this.userId&&s.path.isEqual(ie)?r=r.add(q):T.done()});i.push(g)}),ye.waitFor(i).next(()=>this.Tn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=NS(this.userId,r),u=IDBKeyRange.lowerBound(s);let d=new Wn(Xt);return Sv(e).Z({range:u},(g,y,E)=>{const[T,P,B]=g,q=Mu(P);T===this.userId&&r.isPrefixOf(q)?q.length===i&&(d=d.add(B)):E.done()}).next(()=>this.Tn(e,d))}Tn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Pf(e).get(s).next(u=>{if(null===u)throw ft();xt(u.userId===this.userId),r.push(gm(this.serializer,u))}))}),ye.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Aj(e.at,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.En(t.batchId)}),ye.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}En(e){delete this.pn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ye.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Sv(e).Z({range:r},(s,u,d)=>{if(s[0]===this.userId){const g=Mu(s[1]);i.push(g)}else d.done()}).next(()=>{xt(0===i.length)})})}containsKey(e,t){return Mj(e,this.userId,t)}An(e){return xj(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Mj(n,e,t){const r=NS(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let u=!1;return Sv(n).Z({range:s,Y:!0},(d,g,y)=>{const[E,T,P]=d;E===e&&T===i&&(u=!0),y.done()}).next(()=>u)}function Pf(n){return Ki(n,"mutations")}function Sv(n){return Ki(n,"documentMutations")}function xj(n){return Ki(n,"mutationQueues")}class ym{constructor(e){this.Rn=e}next(){return this.Rn+=2,this.Rn}static vn(){return new ym(0)}static bn(){return new ym(-1)}}class I8{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Pn(e).next(t=>{const r=new ym(t.highestTargetId);return t.highestTargetId=r.next(),this.Vn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Pn(e).next(t=>Ot.fromTimestamp(new Er(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Vn(e,i)))}addTargetData(e,t){return this.Sn(e,t).next(()=>this.Pn(e).next(r=>(r.targetCount+=1,this.Dn(t,r),this.Vn(e,r))))}updateTargetData(e,t){return this.Sn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Av(e).delete(t.targetId)).next(()=>this.Pn(e)).next(r=>(xt(r.targetCount>0),r.targetCount-=1,this.Vn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Av(e).Z((u,d)=>{const g=CE(d);g.sequenceNumber<=t&&null===r.get(g.targetId)&&(i++,s.push(this.removeTargetData(e,g)))}).next(()=>ye.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Av(e).Z((r,i)=>{const s=CE(i);t(s)})}Pn(e){return Rj(e).get("targetGlobalKey").next(t=>(xt(null!==t),t))}Vn(e,t){return Rj(e).put("targetGlobalKey",t)}Sn(e,t){return Av(e).put(gj(this.serializer,t))}Dn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=um(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Av(e).Z({range:i,index:"queryTargetsIndex"},(u,d,g)=>{const y=CE(d);dE(t,y.target)&&(s=y,g.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Nf(e);return t.forEach(u=>{const d=to(u.path);i.push(s.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,u))}),ye.waitFor(i)}removeMatchingKeys(e,t,r){const i=Nf(e);return ye.forEach(t,s=>{const u=to(s.path);return ye.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Nf(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Nf(e);let s=on();return i.Z({range:r,Y:!0},(u,d,g)=>{const y=Mu(u[1]),E=new et(y);s=s.add(E)}).next(()=>s)}containsKey(e,t){const r=to(t.path),i=IDBKeyRange.bound([r],[WU(r)],!1,!0);let s=0;return Nf(e).Z({index:"documentTargetsIndex",Y:!0,range:i},([u,d],g,y)=>{0!==u&&(s++,y.done())}).next(()=>s>0)}ne(e,t){return Av(e).get(t).next(r=>r?CE(r):null)}}function Av(n){return Ki(n,"targets")}function Rj(n){return Ki(n,"targetGlobal")}function Nf(n){return Ki(n,"targetDocuments")}function kj([n,e],[t,r]){const i=Xt(n,t);return 0===i?Xt(e,r):i}class D8{constructor(e){this.Cn=e,this.buffer=new Wn(kj),this.xn=0}Nn(){return++this.xn}kn(e){const t=[e,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();kj(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class T8{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.$n(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}$n(e){var t=this;je("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Te.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){If(r)?je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Cf(r)}yield t.$n(3e5)}))}}class S8{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.Fn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ye.resolve(ua.ct);const r=new D8(t);return this.Mn.forEachTarget(e,i=>r.kn(i.sequenceNumber)).next(()=>this.Mn.Bn(e,i=>r.kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Mn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector","Garbage collection skipped; disabled"),ye.resolve(Sj)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Sj):this.Ln(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}Ln(e,t){let r,i,s,u,d,g,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),i=this.params.maximumSequenceNumbersToCollect):i=T,u=Date.now(),this.nthSequenceNumber(e,i))).next(T=>(r=T,d=Date.now(),this.removeTargets(e,r,t))).next(T=>(s=T,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(y=Date.now(),UO()<=Fr.in.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-E}ms\n\tDetermined least recently used ${i} in `+(d-u)+`ms\n\tRemoved ${s} targets in `+(g-d)+`ms\n\tRemoved ${T} documents in `+(y-g)+`ms\nTotal Duration: ${y-E}ms`),ye.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:T})))}}class A8{constructor(e,t){this.db=e,this.garbageCollector=new S8(this,t)}Fn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Bn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Bn(e,t){return this.Un(e,(r,i)=>t(i))}addReference(e,t,r){return nA(e,r)}removeReference(e,t,r){return nA(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return nA(e,t)}Kn(e,t){return function(r,i){let s=!1;return xj(r).X(u=>Mj(r,u,i).next(d=>(d&&(s=!0),ye.resolve(!d)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Un(e,(u,d)=>{if(d<=t){const g=this.Kn(e,u).next(y=>{if(!y)return s++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Ot.min()),Nf(e).delete([0,to(u.path)])))});i.push(g)}}).next(()=>ye.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return nA(e,t)}Un(e,t){const r=Nf(e);let i,s=ua.ct;return r.Z({index:"documentTargetsIndex"},([u,d],{path:g,sequenceNumber:y})=>{0===u?(s!==ua.ct&&t(new et(Mu(i)),s),s=y,i=g):s=ua.ct}).next(()=>{s!==ua.ct&&t(new et(Mu(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function nA(n,e){return Nf(n).put((r=n.currentSequenceNumber,{targetId:0,path:to(e.path),sequenceNumber:r}));var r}class Oj{constructor(){this.changes=new xf(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ye.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class M8{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return vm(e).put(r)}removeEntry(e,t,r){return vm(e).delete(function(i,s){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],ZS(s),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Gn(e,r)))}getEntry(e,t){let r=hr.newInvalidDocument(t);return vm(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(AE(t))},(i,s)=>{r=this.Qn(t,s)}).next(()=>r)}zn(e,t){let r={size:0,document:hr.newInvalidDocument(t)};return vm(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(AE(t))},(i,s)=>{r={document:this.Qn(t,s),size:eA(s)}}).next(()=>r)}getEntries(e,t){let r=To();return this.jn(e,t,(i,s)=>{const u=this.Qn(i,s);r=r.insert(i,u)}).next(()=>r)}Wn(e,t){let r=To(),i=new Zr(et.comparator);return this.jn(e,t,(s,u)=>{const d=this.Qn(s,u);r=r.insert(s,d),i=i.insert(s,eA(u))}).next(()=>({documents:r,Hn:i}))}jn(e,t,r){if(t.isEmpty())return ye.resolve();let i=new Wn(Lj);t.forEach(g=>i=i.add(g));const s=IDBKeyRange.bound(AE(i.first()),AE(i.last())),u=i.getIterator();let d=u.getNext();return vm(e).Z({index:"documentKeyIndex",range:s},(g,y,E)=>{const T=et.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&Lj(d,T)<0;)r(d,null),d=u.getNext();d&&d.isEqual(T)&&(r(d,y),d=u.hasNext()?u.getNext():null),d?E.G(AE(d)):E.done()}).next(()=>{for(;d;)r(d,null),d=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const s=t.path,u=[s.popLast().toArray(),s.lastSegment(),ZS(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],d=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return vm(e).j(IDBKeyRange.bound(u,d,!0)).next(g=>{let y=To();for(const E of g){const T=this.Qn(et.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);T.isFoundDocument()&&(fE(t,T)||i.has(T.key))&&(y=y.insert(T.key,T))}return y})}getAllFromCollectionGroup(e,t,r,i){let s=To();const u=Fj(t,r),d=Fj(t,la.max());return vm(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,d,!0)},(g,y,E)=>{const T=this.Qn(et.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(T.key,T),s.size===i&&E.done()}).next(()=>s)}newChangeBuffer(e){return new x8(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Nj(e).get("remoteDocumentGlobalKey").next(t=>(xt(!!t),t))}Gn(e,t){return Nj(e).put("remoteDocumentGlobalKey",t)}Qn(e,t){if(t){const r=function p8(n,e){let t;if(e.document)t=aj(n.se,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=et.fromSegments(e.noDocument.path),i=pm(e.noDocument.readTime);t=hr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ft();{const r=et.fromSegments(e.unknownDocument.path),i=pm(e.unknownDocument.version);t=hr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Er(r[0],r[1]);return Ot.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Ot.min()))return r}return hr.newInvalidDocument(e)}}function Pj(n){return new M8(n)}class x8 extends Oj{constructor(e,t){super(),this.Jn=e,this.trackRemovals=t,this.Yn=new xf(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Wn((s,u)=>Xt(s.canonicalString(),u.canonicalString()));return this.changes.forEach((s,u)=>{const d=this.Yn.get(s);if(t.push(this.Jn.removeEntry(e,s,d.readTime)),u.isValidDocument()){const g=pj(this.Jn.serializer,u);i=i.add(s.path.popLast()),r+=eA(g)-d.size,t.push(this.Jn.addEntry(e,s,g))}else if(r-=d.size,this.trackRemovals){const g=pj(this.Jn.serializer,u.convertToNoDocument(Ot.min()));t.push(this.Jn.addEntry(e,s,g))}}),i.forEach(s=>{t.push(this.Jn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Jn.updateMetadata(e,r)),ye.waitFor(t)}getFromCache(e,t){return this.Jn.zn(e,t).next(r=>(this.Yn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Jn.Wn(e,t).next(({documents:r,Hn:i})=>(i.forEach((s,u)=>{this.Yn.set(s,{size:u,readTime:r.get(s).readTime})}),r))}}function Nj(n){return Ki(n,"remoteDocumentGlobal")}function vm(n){return Ki(n,"remoteDocumentsV14")}function AE(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Fj(n,e){const t=e.documentKey.path.toArray();return[n,ZS(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Lj(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Xt(t[s],r[s]),i)return i;return i=Xt(t.length,r.length),i||(i=Xt(t[t.length-2],r[r.length-2]),i||Xt(t[t.length-1],r[r.length-1]))}class R8{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Vj{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&_E(r.mutation,i,Do.empty(),Er.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,on()).next(()=>r))}getLocalViewOfDocuments(e,t,r=on()){const i=Ru();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let u=pE();return s.forEach((d,g)=>{u=u.insert(d,g.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=Ru();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,on()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((u,d)=>{t.set(u,d)})})}computeViews(e,t,r,i){let s=To();const u=gE(),d=gE();return t.forEach((g,y)=>{const E=r.get(y.key);i.has(y.key)&&(void 0===E||E.mutation instanceof Id)?s=s.insert(y.key,y):void 0!==E?(u.set(y.key,E.mutation.getFieldMask()),_E(E.mutation,y,E.mutation.getFieldMask(),Er.now())):u.set(y.key,Do.empty())}),this.recalculateAndSaveOverlays(e,s).next(g=>(g.forEach((y,E)=>u.set(y,E)),t.forEach((y,E)=>{var T;return d.set(y,new R8(E,null!==(T=u.get(y))&&void 0!==T?T:null))}),d))}recalculateAndSaveOverlays(e,t){const r=gE();let i=new Zr((u,d)=>u-d),s=on();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const d of u)d.keys().forEach(g=>{const y=t.get(g);if(null===y)return;let E=r.get(g)||Do.empty();E=d.applyToLocalView(y,E),r.set(g,E);const T=(i.get(d.batchId)||on()).add(g);i=i.insert(d.batchId,T)})}).next(()=>{const u=[],d=i.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),y=g.key,E=g.value,T=N2();E.forEach(P=>{if(!s.has(P)){const B=G2(t.get(P),r.get(P));null!==B&&T.set(P,B),s=s.add(P)}}),u.push(this.documentOverlayCache.saveOverlays(e,y,T))}return ye.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return et.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):tP(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const u=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):ye.resolve(Ru());let d=-1,g=s;return u.next(y=>ye.forEach(y,(E,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),s.get(E)?ye.resolve():this.remoteDocumentCache.getEntry(e,E).next(P=>{g=g.insert(E,P)}))).next(()=>this.populateOverlays(e,y,s)).next(()=>this.computeViews(e,g,y,on())).next(E=>({batchId:d,changes:P2(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new et(t)).next(r=>{let i=pE();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=pE();return this.indexManager.getCollectionParents(e,i).next(u=>ye.forEach(u,d=>{const g=(y=t,E=d.child(i),new Cd(E,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,E;return this.getDocumentsMatchingCollectionQuery(e,g,r).next(y=>{y.forEach((E,T)=>{s=s.insert(E,T)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(s=>{i.forEach((d,g)=>{const y=g.getKey();null===s.get(y)&&(s=s.insert(y,hr.newInvalidDocument(y)))});let u=pE();return s.forEach((d,g)=>{const y=i.get(d);void 0!==y&&_E(y.mutation,g,Do.empty(),Er.now()),fE(t,g)&&(u=u.insert(d,g))}),u})}}class k8{constructor(e){this.serializer=e,this.Zn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return ye.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:ai(r.createTime)}),ye.resolve()}getNamedQuery(e,t){return ye.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(r=t).name,query:pP(r.bundledQuery),readTime:ai(r.readTime)}),ye.resolve();var r}}class O8{constructor(){this.overlays=new Zr(et.comparator),this.ts=new Map}getOverlay(e,t){return ye.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ru();return ye.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.re(e,t,s)}),ye.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ts.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ts.delete(r)),ye.resolve()}getOverlaysForCollection(e,t,r){const i=Ru(),s=t.length+1,u=new et(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const g=d.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&g.largestBatchId>r&&i.set(g.getKey(),g)}return ye.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Zr((y,E)=>y-E);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let E=s.get(y.largestBatchId);null===E&&(E=Ru(),s=s.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const d=Ru(),g=s.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,E)=>d.set(y,E)),!(d.size()>=i)););return ye.resolve(d)}re(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.ts.get(i.largestBatchId).delete(r.key);this.ts.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new aP(t,r));let s=this.ts.get(t);void 0===s&&(s=on(),this.ts.set(t,s)),this.ts.set(t,s.add(r.key))}}class bP{constructor(){this.es=new Wn(Yi.ns),this.ss=new Wn(Yi.rs)}isEmpty(){return this.es.isEmpty()}addReference(e,t){const r=new Yi(e,t);this.es=this.es.add(r),this.ss=this.ss.add(r)}os(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.us(new Yi(e,t))}cs(e,t){e.forEach(r=>this.removeReference(r,t))}hs(e){const t=new et(new bn([])),r=new Yi(t,e),i=new Yi(t,e+1),s=[];return this.ss.forEachInRange([r,i],u=>{this.us(u),s.push(u.key)}),s}ls(){this.es.forEach(e=>this.us(e))}us(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}fs(e){const t=new et(new bn([])),r=new Yi(t,e),i=new Yi(t,e+1);let s=on();return this.ss.forEachInRange([r,i],u=>{s=s.add(u.key)}),s}containsKey(e){const t=new Yi(e,0),r=this.es.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Yi{constructor(e,t){this.key=e,this.ds=t}static ns(e,t){return et.comparator(e.key,t.key)||Xt(e.ds,t.ds)}static rs(e,t){return Xt(e.ds,t.ds)||et.comparator(e.key,t.key)}}class P8{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this._s=new Wn(Yi.ns)}checkEmpty(e){return ye.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.ws;this.ws++;const u=new sP(s,t,r,i);this.mutationQueue.push(u);for(const d of i)this._s=this._s.add(new Yi(d.key,s)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ye.resolve(u)}lookupMutationBatch(e,t){return ye.resolve(this.gs(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ys(t+1),s=i<0?0:i;return ye.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Yi(t,0),i=new Yi(t,Number.POSITIVE_INFINITY),s=[];return this._s.forEachInRange([r,i],u=>{const d=this.gs(u.ds);s.push(d)}),ye.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Wn(Xt);return t.forEach(i=>{const s=new Yi(i,0),u=new Yi(i,Number.POSITIVE_INFINITY);this._s.forEachInRange([s,u],d=>{r=r.add(d.ds)})}),ye.resolve(this.ps(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;et.isDocumentKey(s)||(s=s.child(""));const u=new Yi(new et(s),0);let d=new Wn(Xt);return this._s.forEachWhile(g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(d=d.add(g.ds)),!0)},u),ye.resolve(this.ps(d))}ps(e){const t=[];return e.forEach(r=>{const i=this.gs(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){xt(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();let r=this._s;return ye.forEach(t.mutations,i=>{const s=new Yi(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this._s=r})}En(e){}containsKey(e,t){const r=new Yi(t,0),i=this._s.firstAfterOrEqual(r);return ye.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ye.resolve()}Is(e,t){return this.ys(e)}ys(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}gs(e){const t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class N8{constructor(e){this.Ts=e,this.docs=new Zr(et.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,u=this.Ts(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ye.resolve(r?r.document.mutableCopy():hr.newInvalidDocument(t))}getEntries(e,t){let r=To();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():hr.newInvalidDocument(i))}),ye.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=To();const u=t.path,d=new et(u.child("")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:y,value:{document:E}}=g.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||$O(KU(E),r)<=0||(i.has(E.key)||fE(t,E))&&(s=s.insert(E.key,E.mutableCopy()))}return ye.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ft()}Es(e,t){return ye.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new F8(this)}getSize(e){return ye.resolve(this.size)}}class F8 extends Oj{constructor(e){super(),this.Jn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Jn.addEntry(e,i)):this.Jn.removeEntry(r)}),ye.waitFor(t)}getFromCache(e,t){return this.Jn.getEntry(e,t)}getAllFromCache(e,t){return this.Jn.getEntries(e,t)}}class L8{constructor(e){this.persistence=e,this.As=new xf(t=>um(t),dE),this.lastRemoteSnapshotVersion=Ot.min(),this.highestTargetId=0,this.Rs=0,this.vs=new bP,this.targetCount=0,this.bs=ym.vn()}forEachTarget(e,t){return this.As.forEach((r,i)=>t(i)),ye.resolve()}getLastRemoteSnapshotVersion(e){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ye.resolve(this.Rs)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Rs&&(this.Rs=t),ye.resolve()}Sn(e){this.As.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.bs=new ym(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}addTargetData(e,t){return this.Sn(t),this.targetCount+=1,ye.resolve()}updateTargetData(e,t){return this.Sn(t),ye.resolve()}removeTargetData(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,ye.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.As.forEach((u,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.As.delete(u),s.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),ye.waitFor(s).next(()=>i)}getTargetCount(e){return ye.resolve(this.targetCount)}getTargetData(e,t){const r=this.As.get(t)||null;return ye.resolve(r)}addMatchingKeys(e,t,r){return this.vs.os(t,r),ye.resolve()}removeMatchingKeys(e,t,r){this.vs.cs(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(u=>{s.push(i.markPotentiallyOrphaned(e,u))}),ye.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.vs.hs(t),ye.resolve()}getMatchingKeysForTargetId(e,t){const r=this.vs.fs(t);return ye.resolve(r)}containsKey(e,t){return ye.resolve(this.vs.containsKey(t))}}class Bj{constructor(e,t){this.Ps={},this.overlays={},this.Vs=new ua(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=e(this),this.Ds=new L8(this),this.indexManager=new E8,this.remoteDocumentCache=new N8(r=>this.referenceDelegate.Cs(r)),this.serializer=new fj(t),this.xs=new k8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ss=!1,Promise.resolve()}get started(){return this.Ss}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new O8,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ps[e.toKey()];return r||(r=new P8(t,this.referenceDelegate),this.Ps[e.toKey()]=r),r}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.xs}runTransaction(e,t,r){je("MemoryPersistence","Starting transaction:",e);const i=new V8(this.Vs.next());return this.referenceDelegate.Ns(),r(i).next(s=>this.referenceDelegate.ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Os(e,t){return ye.or(Object.values(this.Ps).map(r=>()=>r.containsKey(e,t)))}}class V8 extends YU{constructor(e){super(),this.currentSequenceNumber=e}}class rA{constructor(e){this.persistence=e,this.$s=new bP,this.Ms=null}static Fs(e){return new rA(e)}get Bs(){if(this.Ms)return this.Ms;throw ft()}addReference(e,t,r){return this.$s.addReference(r,t),this.Bs.delete(r.toString()),ye.resolve()}removeReference(e,t,r){return this.$s.removeReference(r,t),this.Bs.add(r.toString()),ye.resolve()}markPotentiallyOrphaned(e,t){return this.Bs.add(t.toString()),ye.resolve()}removeTarget(e,t){this.$s.hs(t.targetId).forEach(i=>this.Bs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Bs.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ns(){this.Ms=new Set}ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.Bs,r=>{const i=et.fromPath(r);return this.Ls(e,i).next(s=>{s||t.removeEntry(i,Ot.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ls(e,t).next(r=>{r?this.Bs.delete(t.toString()):this.Bs.add(t.toString())})}Cs(e){return 0}Ls(e,t){return ye.or([()=>ye.resolve(this.$s.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class B8{constructor(e){this.serializer=e}M(e,t,r,i){const s=new PS("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",e2,{unique:!0}),d.createObjectStore("documentMutations"),Uj(e),function(d){d.createObjectStore("remoteDocuments")}(e));let u=ye.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),Uj(e)),u=u.next(()=>function(d){const g=d.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ot.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",y)}(s))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(d,g){return g.store("mutations").j().next(y=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",e2,{unique:!0});const E=g.store("mutations"),T=y.map(P=>E.put(P));return ye.waitFor(T)})}(e,s))),u=u.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.qs(s))),r<6&&i>=6&&(u=u.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Us(s)))),r<7&&i>=7&&(u=u.next(()=>this.Ks(s))),r<8&&i>=8&&(u=u.next(()=>this.Gs(e,s))),r<9&&i>=9&&(u=u.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.Qs(s))),r<11&&i>=11&&(u=u.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(d){const g=d.createObjectStore("documentOverlays",{keyPath:b4});g.createIndex("collectionPathOverlayIndex",E4,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",C4,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(d){const g=d.createObjectStore("remoteDocumentsV14",{keyPath:c4});g.createIndex("documentKeyIndex",d4),g.createIndex("collectionGroupIndex",h4)}(e)).next(()=>this.zs(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>this.js(e,s))),r<15&&i>=15&&(u=u.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:_4}).createIndex("sequenceNumberIndex",y4,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:v4}).createIndex("documentKeyIndex",w4,{unique:!1})}(e))),u}Us(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=eA(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>ye.forEach(i,s=>{const u=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",u).next(d=>ye.forEach(d,g=>{xt(g.userId===s.userId);const y=gm(this.serializer,g);return Aj(e,s.userId,y).next(()=>{})}))}))}Ks(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Z((u,d)=>{const g=new bn(u),y=[0,to(g)];s.push(t.get(y).next(E=>E?ye.resolve():t.put({targetId:0,path:to(g),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ye.waitFor(s))})}Gs(e,t){e.createObjectStore("collectionParents",{keyPath:m4});const r=t.store("collectionParents"),i=new wP,s=u=>{if(i.add(u)){const d=u.lastSegment(),g=u.popLast();return r.put({collectionId:d,parent:to(g)})}};return t.store("remoteDocuments").Z({Y:!0},(u,d)=>{const g=new bn(u);return s(g.popLast())}).next(()=>t.store("documentMutations").Z({Y:!0},([u,d,g],y)=>{const E=Mu(d);return s(E.popLast())}))}Qs(e){const t=e.store("targets");return t.Z((r,i)=>{const s=CE(i),u=gj(this.serializer,s);return t.put(u)})}zs(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((s,u)=>{const d=t.store("remoteDocumentsV14"),g=(y=u,y.document?new et(bn.fromString(y.document.name).popFirst(5)):y.noDocument?et.fromSegments(y.noDocument.path):y.unknownDocument?et.fromSegments(y.unknownDocument.path):ft()).path.toArray();var y;const E={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(d.put(E))}).next(()=>ye.waitFor(i))}js(e,t){const r=t.store("mutations"),i=Pj(this.serializer),s=new Bj(rA.Fs,this.serializer.se);return r.j().next(u=>{const d=new Map;return u.forEach(g=>{var y;let E=null!==(y=d.get(g.userId))&&void 0!==y?y:on();gm(this.serializer,g).keys().forEach(T=>E=E.add(T)),d.set(g.userId,E)}),ye.forEach(d,(g,y)=>{const E=new qi(y),T=YS.ie(this.serializer,E),P=s.getIndexManager(E),B=tA.ie(E,this.serializer,P,s.referenceDelegate);return new Vj(i,B,T,P).recalculateAndSaveOverlaysForDocumentKeys(new WO(t,ua.ct),g).next()})})}}function Uj(n){n.createObjectStore("targetDocuments",{keyPath:p4}).createIndex("documentTargetsIndex",g4,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",f4,{unique:!0}),n.createObjectStore("targetGlobal")}const EP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class CP{constructor(e,t,r,i,s,u,d,g,y,E,T=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ws=s,this.window=u,this.document=d,this.Hs=y,this.Js=E,this.Ys=T,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=P=>Promise.resolve(),!CP.D())throw new Le(we.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new A8(this,i),this.si=t+"main",this.serializer=new fj(g),this.ii=new Rl(this.si,this.Ys,new B8(this.serializer)),this.Ds=new I8(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Pj(this.serializer),this.xs=new g8,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,!1===E&&oi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.oi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Le(we.FAILED_PRECONDITION,EP);return this.ui(),this.ci(),this.ai(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ds.getHighestSequenceNumber(e))}).then(e=>{this.Vs=new ua(e,this.Hs)}).then(()=>{this.Ss=!0}).catch(e=>(this.ii&&this.ii.close(),Promise.reject(e)))}hi(e){var t=this;return this.ni=function(){var r=(0,Te.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ii.B(function(){var t=(0,Te.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ws.enqueueAndForget((0,Te.Z)(function*(){t.started&&(yield t.oi())})))}oi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>iA(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.li(e).next(t=>{t||(this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)))})}).next(()=>this.fi(e)).next(t=>this.isPrimary&&!t?this.di(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(If(e))return je("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ws.enqueueRetryable(()=>this.ni(e)),this.isPrimary=e})}li(e){return ME(e).get("owner").next(t=>ye.resolve(this._i(t)))}mi(e){return iA(e).delete(this.clientId)}gi(){var e=this;return(0,Te.Z)(function*(){if(e.isPrimary&&!e.yi(e.ei,18e5)){e.ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ki(r,"clientMetadata");return i.j().next(s=>{const u=e.pi(s,18e5),d=s.filter(g=>-1===u.indexOf(g));return ye.forEach(d,g=>i.delete(g.clientId)).next(()=>d)})}).catch(()=>[]);if(e.ri)for(const r of t)e.ri.removeItem(e.Ii(r.clientId))}})()}ai(){this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.oi().then(()=>this.gi()).then(()=>this.ai()))}_i(e){return!!e&&e.ownerId===this.clientId}fi(e){return this.Js?ye.resolve(!0):ME(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)){if(this._i(t)&&this.networkEnabled)return!0;if(!this._i(t)){if(!t.allowTabSynchronization)throw new Le(we.FAILED_PRECONDITION,EP);return!1}}return!(!this.networkEnabled||!this.inForeground)||iA(e).j().next(r=>void 0===this.pi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,d=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&je("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Te.Z)(function*(){e.Ss=!1,e.Ei(),e.ti&&(e.ti.cancel(),e.ti=null),e.Ai(),e.Ri(),yield e.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new WO(t,ua.ct);return e.di(r).next(()=>e.mi(r))}),e.ii.close(),e.vi()})()}pi(e,t){return e.filter(r=>this.yi(r.updateTimeMs,t)&&!this.Ti(r.clientId))}bi(){return this.runTransaction("getActiveClients","readonly",e=>iA(e).j().next(t=>this.pi(t,18e5).map(r=>r.clientId)))}get started(){return this.Ss}getMutationQueue(e,t){return tA.ie(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new C8(e,this.serializer.se.databaseId)}getDocumentOverlayCache(e){return YS.ie(this.serializer,e)}getBundleCache(){return this.xs}runTransaction(e,t,r){je("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(u=this.Ys)?D4:14===u?s2:13===u?r2:12===u?I4:11===u?n2:void ft();var u;let d;return this.ii.runTransaction(e,i,s,g=>(d=new WO(g,this.Vs?this.Vs.next():ua.ct),"readwrite-primary"===t?this.li(d).next(y=>!!y||this.fi(d)).next(y=>{if(!y)throw oi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)),new Le(we.FAILED_PRECONDITION,ZU);return r(d)}).next(y=>this.wi(d).next(()=>y)):this.Pi(d).next(()=>r(d)))).then(g=>(d.raiseOnCommittedEvent(),g))}Pi(e){return ME(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)&&!this._i(t)&&!(this.Js||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Le(we.FAILED_PRECONDITION,EP)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ME(e).put("owner",t)}static D(){return Rl.D()}di(e){const t=ME(e);return t.get("owner").next(r=>this._i(r)?(je("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ye.resolve())}yi(e,t){const r=Date.now();return!(e<r-t||e>r&&(oi(`Detected an update time that is in the future: ${e} > ${r}`),1))}ui(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Xs=()=>{this.Ws.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.oi()))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground="visible"===this.document.visibilityState)}Ai(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}ci(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ei();const t=/(?:Version|Mobile)\/1[456]/;(0,U.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ws.enterRestrictedMode(!0),this.Ws.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}Ri(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ti(e){var t;try{const r=null!==(null===(t=this.ri)||void 0===t?void 0:t.getItem(this.Ii(e)));return je("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return oi("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ei(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(e){oi("Failed to set zombie client id.",e)}}vi(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch{}}Ii(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ME(n){return Ki(n,"owner")}function iA(n){return Ki(n,"clientMetadata")}function IP(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class DP{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Vi=r,this.Si=i}static Di(e,t){let r=on(),i=on();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new DP(e,t.fromCache,r,i)}}class jj{constructor(){this.Ci=!1}initialize(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ni(e,t).next(s=>s||this.ki(e,t,i,r)).next(s=>s||this.Oi(e,t))}Ni(e,t){if(M2(t))return ye.resolve(null);let r=no(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=HS(t,null,"F"),r=no(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const u=on(...s);return this.xi.getDocuments(e,u).next(d=>this.indexManager.getMinOffset(e,r).next(g=>{const y=this.$i(t,d);return this.Mi(t,y,u,g.readTime)?this.Ni(e,HS(t,null,"F")):this.Fi(e,y,t,g)}))})))}ki(e,t,r,i){return M2(t)||i.isEqual(Ot.min())?this.Oi(e,t):this.xi.getDocuments(e,r).next(s=>{const u=this.$i(t,s);return this.Mi(t,u,r,i)?this.Oi(e,t):(UO()<=Fr.in.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),rP(t)),this.Fi(e,u,t,qU(i,-1)))})}$i(e,t){let r=new Wn(k2(e));return t.forEach((i,s)=>{fE(e,s)&&(r=r.add(s))}),r}Mi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Oi(e,t){return UO()<=Fr.in.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",rP(t)),this.xi.getDocumentsMatchingQuery(e,t,la.min())}Fi(e,t,r,i){return this.xi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(u=>{s=s.insert(u.key,u)}),s))}}class U8{constructor(e,t,r,i){this.persistence=e,this.Bi=t,this.serializer=i,this.Li=new Zr(Xt),this.qi=new xf(s=>um(s),dE),this.Ui=new Map,this.Ki=e.getRemoteDocumentCache(),this.Ds=e.getTargetCache(),this.xs=e.getBundleCache(),this.Gi(r)}Gi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Vj(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Li))}}function Hj(n,e,t,r){return new U8(n,e,t,r)}function $j(n,e){return TP.apply(this,arguments)}function TP(){return TP=(0,Te.Z)(function*(n,e){const t=nt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Gi(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const u=[],d=[];let g=on();for(const y of i){u.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}for(const y of s){d.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(r,g).next(y=>({Qi:y,removedBatchIds:u,addedBatchIds:d}))})})}),TP.apply(this,arguments)}function j8(n,e){const t=nt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Ki.newChangeBuffer({trackRemovals:!0});return function(u,d,g,y){const E=g.batch,T=E.keys();let P=ye.resolve();return T.forEach(B=>{P=P.next(()=>y.getEntry(d,B)).next(q=>{const ie=g.docVersions.get(B);xt(null!==ie),q.version.compareTo(ie)<0&&(E.applyToRemoteDocument(q,g),q.isValidDocument()&&(q.setReadTime(g.commitVersion),y.addEntry(q)))})}),P.next(()=>u.mutationQueue.removeMutationBatch(d,E))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let d=on();for(let g=0;g<u.mutationResults.length;++g)u.mutationResults[g].transformResults.length>0&&(d=d.add(u.batch.mutations[g].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Gj(n){const e=nt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ds.getLastRemoteSnapshotVersion(t))}function H8(n,e){const t=nt(n),r=e.snapshotVersion;let i=t.Li;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const u=t.Ki.newChangeBuffer({trackRemovals:!0});i=t.Li;const d=[];e.targetChanges.forEach((E,T)=>{const P=i.get(T);if(!P)return;d.push(t.Ds.removeMatchingKeys(s,E.removedDocuments,T).next(()=>t.Ds.addMatchingKeys(s,E.addedDocuments,T)));let B=P.withSequenceNumber(s.currentSequenceNumber);var q,ie,ge;e.targetMismatches.has(T)?B=B.withResumeToken(Ri.EMPTY_BYTE_STRING,Ot.min()).withLastLimboFreeSnapshotVersion(Ot.min()):E.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(E.resumeToken,r)),i=i.insert(T,B),ie=B,ge=E,(0===(q=P).resumeToken.approximateByteSize()||ie.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8||ge.addedDocuments.size+ge.modifiedDocuments.size+ge.removedDocuments.size>0)&&d.push(t.Ds.updateTargetData(s,B))});let g=To(),y=on();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(s,E))}),d.push(zj(s,u,e.documentUpdates).next(E=>{g=E.zi,y=E.ji})),!r.isEqual(Ot.min())){const E=t.Ds.getLastRemoteSnapshotVersion(s).next(T=>t.Ds.setTargetsMetadata(s,s.currentSequenceNumber,r));d.push(E)}return ye.waitFor(d).next(()=>u.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,g,y)).next(()=>g)}).then(s=>(t.Li=i,s))}function zj(n,e,t){let r=on(),i=on();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let u=To();return t.forEach((d,g)=>{const y=s.get(d);g.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(d)),g.isNoDocument()&&g.version.isEqual(Ot.min())?(e.removeEntry(d,g.readTime),u=u.insert(d,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||0===g.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(g),u=u.insert(d,g)):je("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",g.version)}),{zi:u,ji:i}})}function $8(n,e){const t=nt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Mv(n,e){const t=nt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ds.getTargetData(r,e).next(s=>s?(i=s,ye.resolve(i)):t.Ds.allocateTargetId(r).next(u=>(i=new kf(e,u,0,r.currentSequenceNumber),t.Ds.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Li.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Li=t.Li.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function xv(n,e,t){return SP.apply(this,arguments)}function SP(){return SP=(0,Te.Z)(function*(n,e,t){const r=nt(n),i=r.Li.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!If(u))throw u;je("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Li=r.Li.remove(e),r.qi.delete(i.target)}),SP.apply(this,arguments)}function sA(n,e,t){const r=nt(n);let i=Ot.min(),s=on();return r.persistence.runTransaction("Execute query","readonly",u=>function(d,g,y){const E=nt(d),T=E.qi.get(y);return void 0!==T?ye.resolve(E.Li.get(T)):E.Ds.getTargetData(g,y)}(r,u,no(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Ds.getMatchingKeysForTargetId(u,d.targetId).next(g=>{s=g})}).next(()=>r.Bi.getDocumentsMatchingQuery(u,e,t?i:Ot.min(),t?s:on())).next(d=>(Kj(r,R2(e),d),{documents:d,Wi:s})))}function Wj(n,e){const t=nt(n),r=nt(t.Ds),i=t.Li.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ne(s,e).next(u=>u?u.target:null))}function qj(n,e){const t=nt(n),r=t.Ui.get(e)||Ot.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Ki.getAllFromCollectionGroup(i,e,qU(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Kj(t,e,i),i))}function Kj(n,e,t){let r=n.Ui.get(e)||Ot.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ui.set(e,r)}function AP(){return AP=(0,Te.Z)(function*(n,e,t,r){const i=nt(n);let s=on(),u=To();for(const y of t){const E=e.Hi(y.metadata.name);y.document&&(s=s.add(E));const T=e.Ji(y);T.setReadTime(e.Yi(y.metadata.readTime)),u=u.insert(E,T)}const d=i.Ki.newChangeBuffer({trackRemovals:!0}),g=yield Mv(i,(y=r,no(wv(bn.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>zj(y,d,u).next(E=>(d.apply(y),E)).next(E=>i.Ds.removeMatchingKeysForTargetId(y,g.targetId).next(()=>i.Ds.addMatchingKeys(y,s,g.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,E.zi,E.ji)).next(()=>E.zi)))}),AP.apply(this,arguments)}function z8(n,e){return MP.apply(this,arguments)}function MP(){return MP=(0,Te.Z)(function*(n,e,t=on()){const r=yield Mv(n,no(pP(e.bundledQuery))),i=nt(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const u=ai(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.xs.saveNamedQuery(s,e);const d=r.withResumeToken(Ri.EMPTY_BYTE_STRING,u);return i.Li=i.Li.insert(d.targetId,d),i.Ds.updateTargetData(s,d).next(()=>i.Ds.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ds.addMatchingKeys(s,t,r.targetId)).next(()=>i.xs.saveNamedQuery(s,e))})}),MP.apply(this,arguments)}function Zj(n,e){return`firestore_clients_${n}_${e}`}function Yj(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function xP(n,e){return`firestore_targets_${n}_${e}`}class oA{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let s,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(s=new Le(i.error.code,i.error.message))),u?new oA(e,t,i.state,s):(oi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Le(r.error.code,r.error.message))),s?new xE(e,r.state,i):(oi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class aA{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=$S();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=XU(r.activeTargetIds[u]),s=s.add(r.activeTargetIds[u]);return i?new aA(e,s):(oi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class RP{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new RP(t.clientId,t.onlineState):(oi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class kP{constructor(){this.activeTargetIds=$S()}tr(e){this.activeTargetIds=this.activeTargetIds.add(e)}er(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class OP{constructor(e,t,r,i,s){this.window=e,this.Ws=t,this.persistenceKey=r,this.nr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new Zr(Xt),this.started=!1,this.ur=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.cr=Zj(this.persistenceKey,this.nr),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.rr=this.rr.insert(this.nr,new kP),this.hr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.lr=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.dr=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this._r=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Te.Z)(function*(){const t=yield e.syncEngine.bi();for(const i of t){if(i===e.nr)continue;const s=e.getItem(Zj(e.persistenceKey,i));if(s){const u=aA.Zi(i,s);u&&(e.rr=e.rr.insert(u.clientId,u))}}e.mr();const r=e.storage.getItem(e.wr);if(r){const i=e.gr(r);i&&e.yr(i)}for(const i of e.ur)e.ir(i);e.ur=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.pr(this.rr)}isActiveQueryTarget(e){let t=!1;return this.rr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ir(e,"pending")}updateMutationState(e,t,r){this.Ir(e,t,r),this.Tr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(xP(this.persistenceKey,e));if(r){const i=xE.Zi(e,r);i&&(t=i.state)}}return this.Er.tr(e),this.mr(),t}removeLocalQueryTarget(e){this.Er.er(e),this.mr()}isLocalQueryTarget(e){return this.Er.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(xP(this.persistenceKey,e))}updateQueryState(e,t,r){this.Ar(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Tr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Rr(e)}notifyBundleLoaded(e){this.vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return je("SharedClientState","READ",e,t),t}setItem(e,t){je("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){je("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ir(e){var t=this;const r=e;if(r.storageArea===this.storage){if(je("SharedClientState","EVENT",r.key,r.newValue),r.key===this.cr)return void oi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable((0,Te.Z)(function*(){if(t.started){if(null!==r.key)if(t.hr.test(r.key)){if(null==r.newValue){const i=t.br(r.key);return t.Pr(i,null)}{const i=t.Vr(r.key,r.newValue);if(i)return t.Pr(i.clientId,i)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.gr(r.newValue);if(i)return t.yr(i)}}else if(r.key===t.ar){const i=function(s){let u=ua.ct;if(null!=s)try{const d=JSON.parse(s);xt("number"==typeof d),u=d}catch(d){oi("SharedClientState","Failed to read sequence number from WebStorage",d)}return u}(r.newValue);i!==ua.ct&&t.sequenceNumberHandler(i)}else if(r.key===t._r){const i=t.kr(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Or(s)))}}else t.ur.push(r)}))}}get Er(){return this.rr.get(this.nr)}mr(){this.setItem(this.cr,this.Er.Xi())}Ir(e,t,r){const i=new oA(this.currentUser,e,t,r),s=Yj(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Xi())}Tr(e){const t=Yj(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Rr(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.nr,onlineState:e}))}Ar(e,t,r){const i=xP(this.persistenceKey,e),s=new xE(e,t,r);this.setItem(i,s.Xi())}vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}br(e){const t=this.hr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.br(e);return aA.Zi(r,t)}Sr(e,t){const r=this.lr.exec(e),i=Number(r[1]);return oA.Zi(new qi(void 0!==r[2]?r[2]:null),i,t)}Cr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return xE.Zi(i,t)}gr(e){return RP.Zi(e)}kr(e){return JSON.parse(e)}Dr(e){var t=this;return(0,Te.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);je("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Nr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}Pr(e,t){const r=t?this.rr.insert(e,t):this.rr.remove(e),i=this.pr(this.rr),s=this.pr(r),u=[],d=[];return s.forEach(g=>{i.has(g)||u.push(g)}),i.forEach(g=>{s.has(g)||d.push(g)}),this.syncEngine.Fr(u,d).then(()=>{this.rr=r})}yr(e){this.rr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}pr(e){let t=$S();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Qj{constructor(){this.Br=new kP,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Br.tr(e),this.Lr[e]||"not-current"}updateQueryState(e,t,r){this.Lr[e]=t}removeLocalQueryTarget(e){this.Br.er(e)}isLocalQueryTarget(e){return this.Br.activeTargetIds.has(e)}clearQueryState(e){delete this.Lr[e]}getAllActiveQueryTargets(){return this.Br.activeTargetIds}isActiveQueryTarget(e){return this.Br.activeTargetIds.has(e)}start(){return this.Br=new kP,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class W8{qr(e){}shutdown(){}}class Xj{constructor(){this.Ur=()=>this.Kr(),this.Gr=()=>this.Qr(),this.zr=[],this.jr()}qr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}Kr(){je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Qr(){je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let lA=null;function PP(){return null===lA?lA=268435456+Math.round(2147483648*Math.random()):lA++,"0x"+lA.toString(16)}const q8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class K8{constructor(e){this.Wr=e.Wr,this.Hr=e.Hr}Jr(e){this.Yr=e}Zr(e){this.Xr=e}onMessage(e){this.eo=e}close(){this.Hr()}send(e){this.Wr(e)}no(){this.Yr()}so(e){this.Xr(e)}io(e){this.eo(e)}}const Ts="WebChannelConnection";class Z8 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.ro=(e.ssl?"https":"http")+"://"+e.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get uo(){return!1}co(e,t,r,i,s){const u=PP(),d=this.ao(e,t);je("RestConnection",`Sending RPC '${e}' ${u}:`,d,r);const g={};return this.ho(g,i,s),this.lo(e,d,g,r).then(y=>(je("RestConnection",`Received RPC '${e}' ${u}: `,y),y),y=>{throw Au("RestConnection",`RPC '${e}' ${u} failed with error: `,y,"url: ",d,"request:",r),y})}fo(e,t,r,i,s,u){return this.co(e,t,r,i,s)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+pv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ao(e,t){return`${this.ro}/v1/${t}:${q8[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,i){const s=PP();return new Promise((u,d)=>{const g=new zK;g.setWithCredentials(!0),g.listenOnce(HK.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case BO.NO_ERROR:const E=g.getResponseJson();je(Ts,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(E)),u(E);break;case BO.TIMEOUT:je(Ts,`RPC '${e}' ${s} timed out`),d(new Le(we.DEADLINE_EXCEEDED,"Request time out"));break;case BO.HTTP_ERROR:const T=g.getStatus();if(je(Ts,`RPC '${e}' ${s} failed with status:`,T,"response text:",g.getResponseText()),T>0){let P=g.getResponseJson();Array.isArray(P)&&(P=P[0]);const B=P?.error;if(B&&B.status&&B.message){const q=function(ie){const ge=ie.toLowerCase().replace(/_/g,"-");return Object.values(we).indexOf(ge)>=0?ge:we.UNKNOWN}(B.status);d(new Le(q,B.message))}else d(new Le(we.UNKNOWN,"Server responded with status "+g.getStatus()))}else d(new Le(we.UNAVAILABLE,"Connection failed."));break;default:ft()}}finally{je(Ts,`RPC '${e}' ${s} completed.`)}});const y=JSON.stringify(i);je(Ts,`RPC '${e}' ${s} sending request:`,i),g.send(t,"POST",y,r,15)})}wo(e,t,r){const i=PP(),s=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=UK(),d=jK(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new GK({})),this.ho(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const y=s.join("");je(Ts,`Creating RPC '${e}' stream ${i}: ${y}`,g);const E=u.createWebChannel(y,g);let T=!1,P=!1;const B=new K8({Wr:ie=>{P?je(Ts,`Not sending because RPC '${e}' stream ${i} is closed:`,ie):(T||(je(Ts,`Opening RPC '${e}' stream ${i} transport.`),E.open(),T=!0),je(Ts,`RPC '${e}' stream ${i} sending:`,ie),E.send(ie))},Hr:()=>E.close()}),q=(ie,ge,Ue)=>{ie.listen(ge,Ye=>{try{Ue(Ye)}catch(Ze){setTimeout(()=>{throw Ze},0)}})};return q(E,RS.EventType.OPEN,()=>{P||je(Ts,`RPC '${e}' stream ${i} transport opened.`)}),q(E,RS.EventType.CLOSE,()=>{P||(P=!0,je(Ts,`RPC '${e}' stream ${i} transport closed`),B.so())}),q(E,RS.EventType.ERROR,ie=>{P||(P=!0,Au(Ts,`RPC '${e}' stream ${i} transport errored:`,ie),B.so(new Le(we.UNAVAILABLE,"The operation could not be completed")))}),q(E,RS.EventType.MESSAGE,ie=>{var ge;if(!P){const Ue=ie.data[0];xt(!!Ue);const Ye=Ue,Ze=Ye.error||(null===(ge=Ye[0])||void 0===ge?void 0:ge.error);if(Ze){je(Ts,`RPC '${e}' stream ${i} received error:`,Ze);const tt=Ze.status;let Lt=function(vn){const Ir=bi[vn];if(void 0!==Ir)return Y2(Ir)}(tt),jt=Ze.message;void 0===Lt&&(Lt=we.INTERNAL,jt="Unknown error status: "+tt+" with message "+Ze.message),P=!0,B.so(new Le(Lt,jt)),E.close()}else je(Ts,`RPC '${e}' stream ${i} received:`,Ue),B.io(Ue)}}),q(d,$K.STAT_EVENT,ie=>{ie.stat===jU.PROXY?je(Ts,`RPC '${e}' stream ${i} detected buffering proxy`):ie.stat===jU.NOPROXY&&je(Ts,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{B.no()},0),B}}function Jj(){return typeof window<"u"?window:null}function uA(){return typeof document<"u"?document:null}function RE(n){return new i8(n,!0)}class NP{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Ws=e,this.timerId=t,this._o=r,this.mo=i,this.yo=s,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,t-r);i>0&&je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Ws.enqueueAfterDelay(this.timerId,i,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}vo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class eH{constructor(e,t,r,i,s,u,d,g){this.Ws=e,this.bo=r,this.Po=i,this.connection=s,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new NP(e,t)}xo(){return 1===this.state||5===this.state||this.No()}No(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.ko()}stop(){var e=this;return(0,Te.Z)(function*(){e.xo()&&(yield e.close(0))})()}Oo(){this.state=0,this.Co.reset()}$o(){this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,()=>this.Mo()))}Fo(e){this.Bo(),this.stream.send(e)}Mo(){var e=this;return(0,Te.Z)(function*(){if(e.No())return e.close(0)})()}Bo(){this.So&&(this.So.cancel(),this.So=null)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}close(e,t){var r=this;return(0,Te.Z)(function*(){r.Bo(),r.Lo(),r.Co.cancel(),r.Vo++,4!==e?r.Co.reset():t&&t.code===we.RESOURCE_EXHAUSTED?(oi(t.toString()),oi("Using maximum backoff delay to prevent overloading the backend."),r.Co.Eo()):t&&t.code===we.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Vo===t&&this.Ko(r,i)},r=>{e(()=>{const i=new Le(we.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Go(i)})})}Ko(e,t){const r=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr(()=>{r(()=>(this.state=2,this.Do=this.Ws.enqueueAfterDelay(this.Po,1e4,()=>(this.No()&&(this.state=3),Promise.resolve())),this.listener.Jr()))}),this.stream.Zr(i=>{r(()=>this.Go(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}ko(){var e=this;this.state=5,this.Co.Ao((0,Te.Z)(function*(){e.state=0,e.start()}))}Go(e){return je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Ws.enqueueAndForget(()=>this.Vo===e?t():(je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Y8 extends eH{constructor(e,t,r,i,s,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.serializer=s}Qo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.Co.reset();const t=function a8(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:ft(),i=e.targetChange.targetIds||[],s=function(g,y){return g.useProto3Json?(xt(void 0===y||"string"==typeof y),Ri.fromBase64String(y||"")):(xt(void 0===y||y instanceof Uint8Array),Ri.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(g){const y=void 0===g.code?we.UNKNOWN:Y2(g.code);return new Le(y,g.message||"")}(u);t=new X2(r,i,s,d||null)}else if("documentChange"in e){const r=e.documentChange,i=ku(n,r.document.name),s=ai(r.document.updateTime),u=r.document.createTime?ai(r.document.createTime):Ot.min(),d=new Zi({mapValue:{fields:r.document.fields}}),g=hr.newFoundDocument(i,s,u,d);t=new KS(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,i=ku(n,r.document),s=r.readTime?ai(r.readTime):Ot.min(),u=hr.newNoDocument(i,s);t=new KS([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=ku(n,r.document);t=new KS([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ft();{const r=e.filter,s=new J4(r.count||0);t=new Q2(r.targetId,s)}}var g;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ot.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Ot.min():s.readTime?ai(s.readTime):Ot.min()}(e);return this.listener.zo(t,r)}jo(e){const t={};t.database=bE(this.serializer),t.addTarget=function(i,s){let u;const d=s.target;return u=BS(d)?{documents:lj(i,d)}:{query:fP(i,d)},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?u.resumeToken=nj(i,s.resumeToken):s.snapshotVersion.compareTo(Ot.min())>0&&(u.readTime=Dv(i,s.snapshotVersion.toTimestamp())),u}(this.serializer,e);const r=function u8(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ft()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=bE(this.serializer),t.removeTarget=e,this.Fo(t)}}class Q8 extends eH{constructor(e,t,r,i,s,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.serializer=s,this.Ho=!1}get Jo(){return this.Ho}start(){this.Ho=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Ho&&this.Yo([])}Qo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(xt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();const t=function l8(n,e){return n&&n.length>0?(xt(void 0!==e),n.map(t=>function(r,i){let s=ai(r.updateTime?r.updateTime:i);return s.isEqual(Ot.min())&&(s=ai(i)),new K4(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ai(e.commitTime);return this.listener.Zo(r,t)}return xt(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}tu(){const e={};e.database=bE(this.serializer),this.Fo(e)}Yo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>EE(this.serializer,r))};this.Fo(t)}}class X8 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.eu=!1}nu(){if(this.eu)throw new Le(we.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.co(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Le(we.UNKNOWN,i.toString())})}fo(e,t,r,i){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.fo(e,t,r,s,u,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Le(we.UNKNOWN,s.toString())})}terminate(){this.eu=!0}}class eZ{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}ou(){0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.iu=null,this.cu("Backend didn't respond within 10 seconds."),this.uu("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.uu("Offline")))}set(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}uu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}cu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ru?(oi(t),this.ru=!1):je("OnlineStateTracker",t)}hu(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}class tZ{constructor(e,t,r,i,s){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=s,this._u.qr(d=>{r.enqueueAndForget((0,Te.Z)(function*(){var g;Dd(u)&&(je("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,Te.Z)(function*(y){const E=nt(y);E.du.add(4),yield Rv(E),E.mu.set("Unknown"),E.du.delete(4),yield kE(E)}),function(y){return g.apply(this,arguments)})(u))}))}),this.mu=new eZ(r,i)}}function kE(n){return LP.apply(this,arguments)}function LP(){return LP=(0,Te.Z)(function*(n){if(Dd(n))for(const e of n.wu)yield e(!0)}),LP.apply(this,arguments)}function Rv(n){return VP.apply(this,arguments)}function VP(){return VP=(0,Te.Z)(function*(n){for(const e of n.wu)yield e(!1)}),VP.apply(this,arguments)}function cA(n,e){const t=nt(n);t.fu.has(e.targetId)||(t.fu.set(e.targetId,e),jP(t)?UP(t):Ov(t).No()&&BP(t,e))}function OE(n,e){const t=nt(n),r=Ov(t);t.fu.delete(e),r.No()&&tH(t,e),0===t.fu.size&&(r.No()?r.$o():Dd(t)&&t.mu.set("Unknown"))}function BP(n,e){n.gu.Ot(e.targetId),Ov(n).jo(e)}function tH(n,e){n.gu.Ot(e),Ov(n).Wo(e)}function UP(n){n.gu=new e8({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.fu.get(e)||null}),Ov(n).start(),n.mu.ou()}function jP(n){return Dd(n)&&!Ov(n).xo()&&n.fu.size>0}function Dd(n){return 0===nt(n).du.size}function nH(n){n.gu=void 0}function nZ(n){return HP.apply(this,arguments)}function HP(){return HP=(0,Te.Z)(function*(n){n.fu.forEach((e,t)=>{BP(n,e)})}),HP.apply(this,arguments)}function rZ(n,e){return $P.apply(this,arguments)}function $P(){return $P=(0,Te.Z)(function*(n,e){nH(n),jP(n)?(n.mu.au(e),UP(n)):n.mu.set("Unknown")}),$P.apply(this,arguments)}function iZ(n,e,t){return GP.apply(this,arguments)}function GP(){return GP=(0,Te.Z)(function*(n,e,t){if(n.mu.set("Online"),e instanceof X2&&2===e.state&&e.cause)try{yield(r=(0,Te.Z)(function*(i,s){const u=s.cause;for(const d of s.targetIds)i.fu.has(d)&&(yield i.remoteSyncer.rejectListen(d,u),i.fu.delete(d),i.gu.removeTarget(d))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield dA(n,r)}else if(e instanceof KS?n.gu.Kt(e):e instanceof Q2?n.gu.Jt(e):n.gu.zt(e),!t.isEqual(Ot.min()))try{const r=yield Gj(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const u=i.gu.Xt(s);return u.targetChanges.forEach((d,g)=>{if(d.resumeToken.approximateByteSize()>0){const y=i.fu.get(g);y&&i.fu.set(g,y.withResumeToken(d.resumeToken,s))}}),u.targetMismatches.forEach(d=>{const g=i.fu.get(d);if(!g)return;i.fu.set(d,g.withResumeToken(Ri.EMPTY_BYTE_STRING,g.snapshotVersion)),tH(i,d);const y=new kf(g.target,d,1,g.sequenceNumber);BP(i,y)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){je("RemoteStore","Failed to raise snapshot:",r),yield dA(n,r)}var r}),GP.apply(this,arguments)}function dA(n,e,t){return zP.apply(this,arguments)}function zP(){return zP=(0,Te.Z)(function*(n,e,t){if(!If(e))throw e;n.du.add(1),yield Rv(n),n.mu.set("Offline"),t||(t=()=>Gj(n.localStore)),n.asyncQueue.enqueueRetryable((0,Te.Z)(function*(){je("RemoteStore","Retrying IndexedDB access"),yield t(),n.du.delete(1),yield kE(n)}))}),zP.apply(this,arguments)}function rH(n,e){return e().catch(t=>dA(n,t,e))}function kv(n){return WP.apply(this,arguments)}function WP(){return WP=(0,Te.Z)(function*(n){const e=nt(n),t=Ff(e);let r=e.lu.length>0?e.lu[e.lu.length-1].batchId:-1;for(;sZ(e);)try{const i=yield $8(e.localStore,r);if(null===i){0===e.lu.length&&t.$o();break}r=i.batchId,oZ(e,i)}catch(i){yield dA(e,i)}iH(e)&&sH(e)}),WP.apply(this,arguments)}function sZ(n){return Dd(n)&&n.lu.length<10}function oZ(n,e){n.lu.push(e);const t=Ff(n);t.No()&&t.Jo&&t.Yo(e.mutations)}function iH(n){return Dd(n)&&!Ff(n).xo()&&n.lu.length>0}function sH(n){Ff(n).start()}function aZ(n){return qP.apply(this,arguments)}function qP(){return qP=(0,Te.Z)(function*(n){Ff(n).tu()}),qP.apply(this,arguments)}function lZ(n){return KP.apply(this,arguments)}function KP(){return KP=(0,Te.Z)(function*(n){const e=Ff(n);for(const t of n.lu)e.Yo(t.mutations)}),KP.apply(this,arguments)}function uZ(n,e,t){return ZP.apply(this,arguments)}function ZP(){return ZP=(0,Te.Z)(function*(n,e,t){const r=n.lu.shift(),i=oP.from(r,e,t);yield rH(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield kv(n)}),ZP.apply(this,arguments)}function cZ(n,e){return YP.apply(this,arguments)}function YP(){return YP=(0,Te.Z)(function*(n,e){var t;e&&Ff(n).Jo&&(yield(t=(0,Te.Z)(function*(r,i){if(Z2(s=i.code)&&s!==we.ABORTED){const u=r.lu.shift();Ff(r).Oo(),yield rH(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield kv(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),iH(n)&&sH(n)}),YP.apply(this,arguments)}function oH(n,e){return QP.apply(this,arguments)}function QP(){return QP=(0,Te.Z)(function*(n,e){const t=nt(n);t.asyncQueue.verifyOperationInProgress(),je("RemoteStore","RemoteStore received new credentials");const r=Dd(t);t.du.add(3),yield Rv(t),r&&t.mu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.du.delete(3),yield kE(t)}),QP.apply(this,arguments)}function XP(n,e){return JP.apply(this,arguments)}function JP(){return JP=(0,Te.Z)(function*(n,e){const t=nt(n);e?(t.du.delete(2),yield kE(t)):e||(t.du.add(2),yield Rv(t),t.mu.set("Unknown"))}),JP.apply(this,arguments)}function Ov(n){return n.yu||(n.yu=function(e,t,r){const i=nt(e);return i.nu(),new Y8(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{Jr:nZ.bind(null,n),Zr:rZ.bind(null,n),zo:iZ.bind(null,n)}),n.wu.push(function(){var e=(0,Te.Z)(function*(t){t?(n.yu.Oo(),jP(n)?UP(n):n.mu.set("Unknown")):(yield n.yu.stop(),nH(n))});return function(t){return e.apply(this,arguments)}}())),n.yu}function Ff(n){return n.pu||(n.pu=function(e,t,r){const i=nt(e);return i.nu(),new Q8(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{Jr:aZ.bind(null,n),Zr:cZ.bind(null,n),Xo:lZ.bind(null,n),Zo:uZ.bind(null,n)}),n.wu.push(function(){var e=(0,Te.Z)(function*(t){t?(n.pu.Oo(),yield kv(n)):(yield n.pu.stop(),n.lu.length>0&&(je("RemoteStore",`Stopping write stream with ${n.lu.length} pending writes`),n.lu=[]))});return function(t){return e.apply(this,arguments)}}())),n.pu}class eN{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,s){const u=Date.now()+r,d=new eN(e,t,u,i,s);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Le(we.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pv(n,e){if(oi("AsyncQueue",`${e}: ${n}`),If(n))return new Le(we.UNAVAILABLE,`${e}: ${n}`);throw n}class Nv{constructor(e){this.comparator=e?(t,r)=>e(t,r)||et.comparator(t.key,r.key):(t,r)=>et.comparator(t.key,r.key),this.keyedMap=pE(),this.sortedSet=new Zr(this.comparator)}static emptySet(e){return new Nv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Nv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Nv;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class aH{constructor(){this.Iu=new Zr(et.comparator)}track(e){const t=e.doc.key,r=this.Iu.get(t);r?0!==e.type&&3===r.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==r.type?this.Iu=this.Iu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Iu=this.Iu.remove(t):1===e.type&&2===r.type?this.Iu=this.Iu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):ft():this.Iu=this.Iu.insert(t,e)}Tu(){const e=[];return this.Iu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Fv{constructor(e,t,r,i,s,u,d,g,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,i,s){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new Fv(e,t,Nv.emptySet(t),u,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class dZ{constructor(){this.Eu=void 0,this.listeners=[]}}class hZ{constructor(){this.queries=new xf(e=>x2(e),hE),this.onlineState="Unknown",this.Au=new Set}}function tN(n,e){return nN.apply(this,arguments)}function nN(){return nN=(0,Te.Z)(function*(n,e){const t=nt(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new dZ),i)try{s.Eu=yield t.onListen(r)}catch(u){const d=Pv(u,`Initialization of query '${rP(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,s),s.listeners.push(e),e.Ru(t.onlineState),s.Eu&&e.vu(s.Eu)&&sN(t)}),nN.apply(this,arguments)}function rN(n,e){return iN.apply(this,arguments)}function iN(){return iN=(0,Te.Z)(function*(n,e){const t=nt(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const u=s.listeners.indexOf(e);u>=0&&(s.listeners.splice(u,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),iN.apply(this,arguments)}function fZ(n,e){const t=nt(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const d of u.listeners)d.vu(i)&&(r=!0);u.Eu=i}}r&&sN(t)}function pZ(n,e,t){const r=nt(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function sN(n){n.Au.forEach(e=>{e.next()})}class oN{constructor(e,t,r){this.query=e,this.bu=t,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Fv(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),t=!0):this.Du(e,this.onlineState)&&(this.Cu(e),t=!0),this.Vu=e,t}onError(e){this.bu.error(e)}Ru(e){this.onlineState=e;let t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}Du(e,t){return!e.fromCache||(!this.options.xu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Su(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Cu(e){e=Fv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}class gZ{constructor(e,t){this.Nu=e,this.byteLength=t}ku(){return"metadata"in this.Nu}}class lH{constructor(e){this.serializer=e}Hi(e){return ku(this.serializer,e)}Ji(e){return e.metadata.exists?aj(this.serializer,e.document,!1):hr.newNoDocument(this.Hi(e.metadata.name),this.Yi(e.metadata.readTime))}Yi(e){return ai(e)}}class mZ{constructor(e,t,r){this.Ou=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=uH(e)}$u(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Nu.namedQuery)this.queries.push(e.Nu.namedQuery);else if(e.Nu.documentMetadata){this.documents.push({metadata:e.Nu.documentMetadata}),e.Nu.documentMetadata.exists||++t;const r=bn.fromString(e.Nu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Nu.document&&(this.documents[this.documents.length-1].document=e.Nu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new lH(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Hi(i.metadata.name);for(const u of i.metadata.queries){const d=(t.get(u)||on()).add(s);t.set(u,d)}}return t}complete(){var e=this;return(0,Te.Z)(function*(){const t=yield function G8(n,e,t,r){return AP.apply(this,arguments)}(e.localStore,new lH(e.serializer),e.documents,e.Ou.id),r=e.Mu(e.documents);for(const i of e.queries)yield z8(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Fu:e.collectionGroups,Bu:t}})()}}function uH(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class cH{constructor(e){this.key=e}}class dH{constructor(e){this.key=e}}class hH{constructor(e,t){this.query=e,this.Lu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=on(),this.mutatedKeys=on(),this.Ku=k2(e),this.Gu=new Nv(this.Ku)}get Qu(){return this.Lu}zu(e,t){const r=t?t.ju:new aH,i=t?t.Gu:this.Gu;let s=t?t.mutatedKeys:this.mutatedKeys,u=i,d=!1;const g="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((E,T)=>{const P=i.get(E),B=fE(this.query,T)?T:null,q=!!P&&this.mutatedKeys.has(P.key),ie=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let ge=!1;P&&B?P.data.isEqual(B.data)?q!==ie&&(r.track({type:3,doc:B}),ge=!0):this.Wu(P,B)||(r.track({type:2,doc:B}),ge=!0,(g&&this.Ku(B,g)>0||y&&this.Ku(B,y)<0)&&(d=!0)):!P&&B?(r.track({type:0,doc:B}),ge=!0):P&&!B&&(r.track({type:1,doc:P}),ge=!0,(g||y)&&(d=!0)),ge&&(B?(u=u.add(B),s=ie?s.add(E):s.delete(E)):(u=u.delete(E),s=s.delete(E)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const E="F"===this.query.limitType?u.last():u.first();u=u.delete(E.key),s=s.delete(E.key),r.track({type:1,doc:E})}return{Gu:u,ju:r,Mi:d,mutatedKeys:s}}Wu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const s=e.ju.Tu();s.sort((y,E)=>function(T,P){const B=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft()}};return B(T)-B(P)}(y.type,E.type)||this.Ku(y.doc,E.doc)),this.Hu(r);const u=t?this.Ju():[],d=0===this.Uu.size&&this.current?1:0,g=d!==this.qu;return this.qu=d,0!==s.length||g?{snapshot:new Fv(this.query,e.Gu,i,s,e.mutatedKeys,0===d,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),Yu:u}:{Yu:u}}Ru(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new aH,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}Zu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.Uu;this.Uu=on(),this.Gu.forEach(r=>{this.Zu(r.key)&&(this.Uu=this.Uu.add(r.key))});const t=[];return e.forEach(r=>{this.Uu.has(r)||t.push(new dH(r))}),this.Uu.forEach(r=>{e.has(r)||t.push(new cH(r))}),t}Xu(e){this.Lu=e.Wi,this.Uu=on();const t=this.zu(e.documents);return this.applyChanges(t,!0)}tc(){return Fv.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class _Z{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class yZ{constructor(e){this.key=e,this.ec=!1}}class vZ{constructor(e,t,r,i,s,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.nc={},this.sc=new xf(d=>x2(d),hE),this.ic=new Map,this.rc=new Set,this.oc=new Zr(et.comparator),this.uc=new Map,this.cc=new bP,this.ac={},this.hc=new Map,this.lc=ym.bn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function wZ(n,e){return aN.apply(this,arguments)}function aN(){return aN=(0,Te.Z)(function*(n,e){const t=xN(n);let r,i;const s=t.sc.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.tc();else{const u=yield Mv(t.localStore,no(e));t.isPrimaryClient&&cA(t.remoteStore,u);const d=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield lN(t,e,r,"current"===d,u.resumeToken)}return i}),aN.apply(this,arguments)}function lN(n,e,t,r,i){return uN.apply(this,arguments)}function uN(){return uN=(0,Te.Z)(function*(n,e,t,r,i){n.dc=(T,P,B)=>{return(q=(0,Te.Z)(function*(ie,ge,Ue,Ye){let Ze=ge.view.zu(Ue);Ze.Mi&&(Ze=yield sA(ie.localStore,ge.query,!1).then(({documents:jt})=>ge.view.zu(jt,Ze)));const tt=Ye&&Ye.targetChanges.get(ge.targetId),Lt=ge.view.applyChanges(Ze,ie.isPrimaryClient,tt);return vN(ie,ge.targetId,Lt.Yu),Lt.snapshot}),function(ie,ge,Ue,Ye){return q.apply(this,arguments)})(n,T,P,B);var q};const s=yield sA(n.localStore,e,!0),u=new hH(e,s.Wi),d=u.zu(s.documents),g=vE.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),y=u.applyChanges(d,n.isPrimaryClient,g);vN(n,t,y.Yu);const E=new _Z(e,t,u);return n.sc.set(e,E),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),y.snapshot}),uN.apply(this,arguments)}function bZ(n,e){return cN.apply(this,arguments)}function cN(){return cN=(0,Te.Z)(function*(n,e){const t=nt(n),r=t.sc.get(e),i=t.ic.get(r.targetId);if(i.length>1)return t.ic.set(r.targetId,i.filter(s=>!hE(s,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield xv(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),OE(t.remoteStore,r.targetId),Lv(t,r.targetId)}).catch(Cf))):(Lv(t,r.targetId),yield xv(t.localStore,r.targetId,!0))}),cN.apply(this,arguments)}function dN(){return dN=(0,Te.Z)(function*(n,e,t){const r=RN(n);try{const i=yield function(s,u){const d=nt(s),g=Er.now(),y=u.reduce((P,B)=>P.add(B.key),on());let E,T;return d.persistence.runTransaction("Locally write mutations","readwrite",P=>{let B=To(),q=on();return d.Ki.getEntries(P,y).next(ie=>{B=ie,B.forEach((ge,Ue)=>{Ue.isValidDocument()||(q=q.add(ge))})}).next(()=>d.localDocuments.getOverlayedDocuments(P,B)).next(ie=>{E=ie;const ge=[];for(const Ue of u){const Ye=Y4(Ue,E.get(Ue.key).overlayedDocument);null!=Ye&&ge.push(new Id(Ue.key,Ye,m2(Ye.value.mapValue),Cr.exists(!0)))}return d.mutationQueue.addMutationBatch(P,g,ge,u)}).next(ie=>{T=ie;const ge=ie.applyToLocalDocumentSet(E,q);return d.documentOverlayCache.saveOverlays(P,ie.batchId,ge)})}).then(()=>({batchId:T.batchId,changes:P2(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,u,d){let g=s.ac[s.currentUser.toKey()];g||(g=new Zr(Xt)),g=g.insert(u,d),s.ac[s.currentUser.toKey()]=g}(r,i.batchId,t),yield Td(r,i.changes),yield kv(r.remoteStore)}catch(i){const s=Pv(i,"Failed to persist write");t.reject(s)}}),dN.apply(this,arguments)}function fH(n,e){return hN.apply(this,arguments)}function hN(){return hN=(0,Te.Z)(function*(n,e){const t=nt(n);try{const r=yield H8(t.localStore,e);e.targetChanges.forEach((i,s)=>{const u=t.uc.get(s);u&&(xt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.ec=!0:i.modifiedDocuments.size>0?xt(u.ec):i.removedDocuments.size>0&&(xt(u.ec),u.ec=!1))}),yield Td(t,r,e)}catch(r){yield Cf(r)}}),hN.apply(this,arguments)}function pH(n,e,t){const r=nt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.sc.forEach((s,u)=>{const d=u.view.Ru(e);d.snapshot&&i.push(d.snapshot)}),function(s,u){const d=nt(s);d.onlineState=u;let g=!1;d.queries.forEach((y,E)=>{for(const T of E.listeners)T.Ru(u)&&(g=!0)}),g&&sN(d)}(r.eventManager,e),i.length&&r.nc.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function CZ(n,e,t){return fN.apply(this,arguments)}function fN(){return fN=(0,Te.Z)(function*(n,e,t){const r=nt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.uc.get(e),s=i&&i.key;if(s){let u=new Zr(et.comparator);u=u.insert(s,hr.newNoDocument(s,Ot.min()));const d=on().add(s),g=new yE(Ot.min(),new Map,new Wn(Xt),u,d);yield fH(r,g),r.oc=r.oc.remove(s),r.uc.delete(e),wN(r)}else yield xv(r.localStore,e,!1).then(()=>Lv(r,e,t)).catch(Cf)}),fN.apply(this,arguments)}function IZ(n,e){return pN.apply(this,arguments)}function pN(){return pN=(0,Te.Z)(function*(n,e){const t=nt(n),r=e.batch.batchId;try{const i=yield j8(t.localStore,e);yN(t,r,null),_N(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Td(t,i)}catch(i){yield Cf(i)}}),pN.apply(this,arguments)}function DZ(n,e,t){return gN.apply(this,arguments)}function gN(){return gN=(0,Te.Z)(function*(n,e,t){const r=nt(n);try{const i=yield function(s,u){const d=nt(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let y;return d.mutationQueue.lookupMutationBatch(g,u).next(E=>(xt(null!==E),y=E.keys(),d.mutationQueue.removeMutationBatch(g,E))).next(()=>d.mutationQueue.performConsistencyCheck(g)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(g,y,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y)).next(()=>d.localDocuments.getDocuments(g,y))})}(r.localStore,e);yN(r,e,t),_N(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Td(r,i)}catch(i){yield Cf(i)}}),gN.apply(this,arguments)}function mN(){return mN=(0,Te.Z)(function*(n,e){const t=nt(n);Dd(t.remoteStore)||je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const u=nt(s);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>u.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===r)return void e.resolve();const i=t.hc.get(r)||[];i.push(e),t.hc.set(r,i)}catch(r){const i=Pv(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),mN.apply(this,arguments)}function _N(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function yN(n,e,t){const r=nt(n);let i=r.ac[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.ac[r.currentUser.toKey()]=i}}function Lv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc.wc(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.hs(e).forEach(r=>{n.cc.containsKey(r)||gH(n,r)})}function gH(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(OE(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),wN(n))}function vN(n,e,t){for(const r of t)r instanceof cH?(n.cc.addReference(r.key,e),SZ(n,r)):r instanceof dH?(je("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||gH(n,r.key)):ft()}function SZ(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(je("SyncEngine","New document in limbo: "+t),n.rc.add(r),wN(n))}function wN(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new et(bn.fromString(e)),r=n.lc.next();n.uc.set(r,new yZ(t)),n.oc=n.oc.insert(t,r),cA(n.remoteStore,new kf(no(wv(t.path)),r,2,ua.ct))}}function Td(n,e,t){return bN.apply(this,arguments)}function bN(){return bN=(0,Te.Z)(function*(n,e,t){const r=nt(n),i=[],s=[],u=[];var d;r.sc.isEmpty()||(r.sc.forEach((d,g)=>{u.push(r.dc(g,e,t).then(y=>{if((y||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,y?.fromCache?"not-current":"current"),y){i.push(y);const E=DP.Di(g.targetId,y);s.push(E)}}))}),yield Promise.all(u),r.nc.zo(i),yield(d=(0,Te.Z)(function*(g,y){const E=nt(g);try{yield E.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>ye.forEach(y,P=>ye.forEach(P.Vi,B=>E.persistence.referenceDelegate.addReference(T,P.targetId,B)).next(()=>ye.forEach(P.Si,B=>E.persistence.referenceDelegate.removeReference(T,P.targetId,B)))))}catch(T){if(!If(T))throw T;je("LocalStore","Failed to update sequence numbers: "+T)}for(const T of y){const P=T.targetId;if(!T.fromCache){const B=E.Li.get(P),ie=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);E.Li=E.Li.insert(P,ie)}}}),function(g,y){return d.apply(this,arguments)})(r.localStore,s))}),bN.apply(this,arguments)}function AZ(n,e){return EN.apply(this,arguments)}function EN(){return EN=(0,Te.Z)(function*(n,e){const t=nt(n);if(!t.currentUser.isEqual(e)){je("SyncEngine","User change. New user:",e.toKey());const r=yield $j(t.localStore,e);t.currentUser=e,(i=t).hc.forEach(u=>{u.forEach(d=>{d.reject(new Le(we.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Td(t,r.Qi)}var i}),EN.apply(this,arguments)}function MZ(n,e){const t=nt(n),r=t.uc.get(e);if(r&&r.ec)return on().add(r.key);{let i=on();const s=t.ic.get(e);if(!s)return i;for(const u of s){const d=t.sc.get(u);i=i.unionWith(d.view.Qu)}return i}}function xZ(n,e){return CN.apply(this,arguments)}function CN(){return CN=(0,Te.Z)(function*(n,e){const t=nt(n),r=yield sA(t.localStore,e.query,!0),i=e.view.Xu(r);return t.isPrimaryClient&&vN(t,e.targetId,i.Yu),i}),CN.apply(this,arguments)}function RZ(n,e){return IN.apply(this,arguments)}function IN(){return IN=(0,Te.Z)(function*(n,e){const t=nt(n);return qj(t.localStore,e).then(r=>Td(t,r))}),IN.apply(this,arguments)}function kZ(n,e,t,r){return DN.apply(this,arguments)}function DN(){return DN=(0,Te.Z)(function*(n,e,t,r){const i=nt(n),s=yield function(u,d){const g=nt(u),y=nt(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",E=>y.In(E,d).next(T=>T?g.localDocuments.getDocuments(E,T):ye.resolve(null)))}(i.localStore,e);var d;null!==s?("pending"===t?yield kv(i.remoteStore):"acknowledged"===t||"rejected"===t?(yN(i,e,r||null),_N(i,e),d=e,nt(nt(i.localStore).mutationQueue).En(d)):ft(),yield Td(i,s)):je("SyncEngine","Cannot apply mutation batch with id: "+e)}),DN.apply(this,arguments)}function TN(){return TN=(0,Te.Z)(function*(n,e){const t=nt(n);if(xN(t),RN(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield mH(t,r.toArray());t.fc=!0,yield XP(t.remoteStore,!0);for(const s of i)cA(t.remoteStore,s)}else if(!1===e&&!1!==t.fc){const r=[];let i=Promise.resolve();t.ic.forEach((s,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(Lv(t,u),xv(t.localStore,u,!0))),OE(t.remoteStore,u)}),yield i,yield mH(t,r),function(s){const u=nt(s);u.uc.forEach((d,g)=>{OE(u.remoteStore,g)}),u.cc.ls(),u.uc=new Map,u.oc=new Zr(et.comparator)}(t),t.fc=!1,yield XP(t.remoteStore,!1)}}),TN.apply(this,arguments)}function mH(n,e,t){return SN.apply(this,arguments)}function SN(){return SN=(0,Te.Z)(function*(n,e,t){const r=nt(n),i=[],s=[];for(const u of e){let d;const g=r.ic.get(u);if(g&&0!==g.length){d=yield Mv(r.localStore,no(g[0]));for(const y of g){const E=r.sc.get(y),T=yield xZ(r,E);T.snapshot&&s.push(T.snapshot)}}else{const y=yield Wj(r.localStore,u);d=yield Mv(r.localStore,y),yield lN(r,_H(y),u,!1,d.resumeToken)}i.push(d)}return r.nc.zo(s),i}),SN.apply(this,arguments)}function _H(n){return A2(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function PZ(n){const e=nt(n);return nt(nt(e.localStore).persistence).bi()}function NZ(n,e,t,r){return AN.apply(this,arguments)}function AN(){return AN=(0,Te.Z)(function*(n,e,t,r){const i=nt(n);if(i.fc)return void je("SyncEngine","Ignoring unexpected query state notification.");const s=i.ic.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const u=yield qj(i.localStore,R2(s[0])),d=yE.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Ri.EMPTY_BYTE_STRING);yield Td(i,u,d);break}case"rejected":yield xv(i.localStore,e,!0),Lv(i,e,r);break;default:ft()}}),AN.apply(this,arguments)}function FZ(n,e,t){return MN.apply(this,arguments)}function MN(){return MN=(0,Te.Z)(function*(n,e,t){const r=xN(n);if(r.fc){for(const i of e){if(r.ic.has(i)){je("SyncEngine","Adding an already active target "+i);continue}const s=yield Wj(r.localStore,i),u=yield Mv(r.localStore,s);yield lN(r,_H(s),u.targetId,!1,u.resumeToken),cA(r.remoteStore,u)}for(const i of t)r.ic.has(i)&&(yield xv(r.localStore,i,!1).then(()=>{OE(r.remoteStore,i),Lv(r,i)}).catch(Cf))}}),MN.apply(this,arguments)}function xN(n){const e=nt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=fH.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MZ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CZ.bind(null,e),e.nc.zo=fZ.bind(null,e.eventManager),e.nc.wc=pZ.bind(null,e.eventManager),e}function RN(n){const e=nt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=IZ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DZ.bind(null,e),e}class hA{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Te.Z)(function*(){t.serializer=RE(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Hj(this.persistence,new jj,e.initialUser,this.serializer)}createPersistence(e){return new Bj(rA.Fs,this.serializer)}createSharedClientState(e){return new Qj}terminate(){var e=this;return(0,Te.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class kN extends hA{constructor(e,t,r){super(),this.mc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Te.Z)(function*(){yield t().call(r,e),yield r.mc.initialize(r,e),yield RN(r.mc.syncEngine),yield kv(r.mc.remoteStore),yield r.persistence.hi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Hj(this.persistence,new jj,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new T8(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new a4(t,this.persistence);return new o4(e.asyncQueue,r)}createPersistence(e){const t=IP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?So.withCacheSize(this.cacheSizeBytes):So.DEFAULT;return new CP(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Jj(),uA(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Qj}}class yH extends kN{constructor(e,t){super(e,t,!1),this.mc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Te.Z)(function*(){yield t().call(r,e);const i=r.mc.syncEngine;r.sharedClientState instanceof OP&&(r.sharedClientState.syncEngine={$r:kZ.bind(null,i),Mr:NZ.bind(null,i),Fr:FZ.bind(null,i),bi:PZ.bind(null,i),Or:RZ.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.hi(function(){var s=(0,Te.Z)(function*(u){yield function OZ(n,e){return TN.apply(this,arguments)}(r.mc.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=Jj();if(!OP.D(t))throw new Le(we.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=IP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new OP(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Vv{initialize(e,t){var r=this;return(0,Te.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>pH(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=AZ.bind(null,r.syncEngine),yield XP(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new hZ}createDatastore(e){const t=RE(e.databaseInfo.databaseId),r=new Z8(e.databaseInfo);return new X8(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=d=>pH(this.syncEngine,d,0),u=Xj.D()?new Xj:new W8,new tZ(t,r,i,s,u);var t,r,i,s,u}createSyncEngine(e,t){return function(r,i,s,u,d,g,y){const E=new vZ(r,i,s,u,d,g);return y&&(E.fc=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Te.Z)(function*(t){const r=nt(t);je("RemoteStore","RemoteStore shutting down."),r.du.add(5),yield Rv(r),r._u.shutdown(),r.mu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function vH(n,e=10240){let t=0;return{read:()=>(0,Te.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Te.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class fA{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.gc(this.observer.next,e)}error(e){this.observer.error?this.gc(this.observer.error,e):oi("Uncaught Error in snapshot listener:",e.toString())}yc(){this.muted=!0}gc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class VZ{constructor(e,t){this.Ic=e,this.serializer=t,this.metadata=new xi,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then(r=>{r&&r.ku()?this.metadata.resolve(r.Nu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Nu)}`))},r=>this.metadata.reject(r))}close(){return this.Ic.cancel()}getMetadata(){var e=this;return(0,Te.Z)(function*(){return e.metadata.promise})()}_c(){var e=this;return(0,Te.Z)(function*(){return yield e.getMetadata(),e.Ec()})()}Ec(){var e=this;return(0,Te.Z)(function*(){const t=yield e.Ac();if(null===t)return null;const r=e.Tc.decode(t),i=Number(r);isNaN(i)&&e.Rc(`length string (${r}) is not valid number`);const s=yield e.vc(i);return new gZ(JSON.parse(s),t.length+i)})()}bc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ac(){var e=this;return(0,Te.Z)(function*(){for(;e.bc()<0&&!(yield e.Pc()););if(0===e.buffer.length)return null;const t=e.bc();t<0&&e.Rc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,Te.Z)(function*(){for(;t.buffer.length<e;)(yield t.Pc())&&t.Rc("Reached the end of bundle when more is expected.");const r=t.Tc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Rc(e){throw this.Ic.cancel(),new Error(`Invalid bundle format: ${e}`)}Pc(){var e=this;return(0,Te.Z)(function*(){const t=yield e.Ic.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class BZ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Te.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Le(we.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Te.Z)(function*(s,u){const d=nt(s),g=bE(d.serializer)+"/documents",y={documents:u.map(B=>wE(d.serializer,B))},E=yield d.fo("BatchGetDocuments",g,y,u.length),T=new Map;E.forEach(B=>{const q=function o8(n,e){return"found"in e?function(t,r){xt(!!r.found);const i=ku(t,r.found.name),s=ai(r.found.updateTime),u=r.found.createTime?ai(r.found.createTime):Ot.min(),d=new Zi({mapValue:{fields:r.found.fields}});return hr.newFoundDocument(i,s,u,d)}(n,e):"missing"in e?function(t,r){xt(!!r.missing),xt(!!r.readTime);const i=ku(t,r.missing),s=ai(r.readTime);return hr.newNoDocument(i,s)}(n,e):ft()}(d.serializer,B);T.set(q.key.toString(),q)});const P=[];return u.forEach(B=>{const q=T.get(B.toString());xt(!!q),P.push(q)}),P}),function(s,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Iv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Te.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=et.fromPath(i);e.mutations.push(new iP(s,e.precondition(s)))}),yield(r=(0,Te.Z)(function*(i,s){const u=nt(i),d=bE(u.serializer)+"/documents",g={writes:s.map(y=>EE(u.serializer,y))};yield u.co("Commit",d,g)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ft();t=Ot.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Le(we.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ot.min())?Cr.exists(!1):Cr.updateTime(t):Cr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ot.min()))throw new Le(we.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Cr.updateTime(t)}return Cr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class UZ{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Vc=r.maxAttempts,this.Co=new NP(this.asyncQueue,"transaction_retry")}run(){this.Vc-=1,this.Sc()}Sc(){var e=this;this.Co.Ao((0,Te.Z)(function*(){const t=new BZ(e.datastore),r=e.Dc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Cc(s)}))}).catch(i=>{e.Cc(i)})}))}Dc(e){try{const t=this.updateFunction(e);return!sE(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Cc(e){this.Vc>0&&this.xc(e)?(this.Vc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sc(),Promise.resolve()))):this.deferred.reject(e)}xc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Z2(t)}return!1}}class jZ{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=qi.UNAUTHENTICATED,this.clientId=zU.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,Te.Z)(function*(d){je("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(je("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,Te.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Le(we.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Te.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Pv(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function pA(n,e){return ON.apply(this,arguments)}function ON(){return ON=(0,Te.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),je("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Te.Z)(function*(s){r.isEqual(s)||(yield $j(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),ON.apply(this,arguments)}function PN(n,e){return NN.apply(this,arguments)}function NN(){return NN=(0,Te.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield FN(n);je("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>oH(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>oH(e.remoteStore,s)),n._onlineComponents=e}),NN.apply(this,arguments)}function wH(n){return"FirebaseError"===n.name?n.code===we.FAILED_PRECONDITION||n.code===we.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function FN(n){return LN.apply(this,arguments)}function LN(){return LN=(0,Te.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){je("FirestoreClient","Using user provided OfflineComponentProvider");try{yield pA(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!wH(t))throw t;Au("Error using user provided cache. Falling back to memory cache: "+t),yield pA(n,new hA)}}else je("FirestoreClient","Using default OfflineComponentProvider"),yield pA(n,new hA);return n._offlineComponents}),LN.apply(this,arguments)}function gA(n){return VN.apply(this,arguments)}function VN(){return VN=(0,Te.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(je("FirestoreClient","Using user provided OnlineComponentProvider"),yield PN(n,n._uninitializedComponentsProvider._online)):(je("FirestoreClient","Using default OnlineComponentProvider"),yield PN(n,new Vv))),n._onlineComponents}),VN.apply(this,arguments)}function bH(n){return FN(n).then(e=>e.persistence)}function mA(n){return FN(n).then(e=>e.localStore)}function BN(n){return gA(n).then(e=>e.remoteStore)}function UN(n){return gA(n).then(e=>e.syncEngine)}function Bv(n){return jN.apply(this,arguments)}function jN(){return jN=(0,Te.Z)(function*(n){const e=yield gA(n),t=e.eventManager;return t.onListen=wZ.bind(null,e.syncEngine),t.onUnlisten=bZ.bind(null,e.syncEngine),t}),jN.apply(this,arguments)}function CH(n,e,t={}){const r=new xi;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(i,s,u,d,g){const y=new fA({next:T=>{s.enqueueAndForget(()=>rN(i,E));const P=T.docs.has(u);!P&&T.fromCache?g.reject(new Le(we.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&T.fromCache&&d&&"server"===d.source?g.reject(new Le(we.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new oN(wv(u.path),y,{includeMetadataChanges:!0,xu:!0});return tN(i,E)}(yield Bv(n),n.asyncQueue,e,t,r)})),r.promise}function IH(n,e,t={}){const r=new xi;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(i,s,u,d,g){const y=new fA({next:T=>{s.enqueueAndForget(()=>rN(i,E)),T.fromCache&&"server"===d.source?g.reject(new Le(we.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new oN(u,y,{includeMetadataChanges:!0,xu:!0});return tN(i,E)}(yield Bv(n),n.asyncQueue,e,t,r)})),r.promise}const DH=new Map;function HN(n,e,t){if(!t)throw new Le(we.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function TH(n,e,t,r){if(!0===e&&!0===r)throw new Le(we.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function SH(n){if(!et.isDocumentKey(n))throw new Le(we.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function AH(n){if(et.isDocumentKey(n))throw new Le(we.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _A(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ft()}function _n(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Le(we.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_A(n);throw new Le(we.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function MH(n,e){if(e<=0)throw new Le(we.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class xH{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Le(we.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Le(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,TH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class PE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xH({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Le(we.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Le(we.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xH(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new KK;switch(t.type){case"firstParty":return new XK(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Le(we.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=DH.get(e);t&&(je("ComponentProvider","Removing Datastore"),DH.delete(e),t.terminate())}(this),Promise.resolve()}}class fr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ou(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fr(this.firestore,e,this._key)}}class fs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fs(this.firestore,e,this._query)}}class Ou extends fs{constructor(e,t,r){super(e,t,wv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fr(this.firestore,null,new et(e))}withConverter(e){return new Ou(this.firestore,e,this._path)}}function kH(n,e,...t){if(n=(0,U.m9)(n),HN("collection","path",e),n instanceof PE){const r=bn.fromString(e,...t);return AH(r),new Ou(n,null,r)}{if(!(n instanceof fr||n instanceof Ou))throw new Le(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(bn.fromString(e,...t));return AH(r),new Ou(n.firestore,null,r)}}function yA(n,e,...t){if(n=(0,U.m9)(n),1===arguments.length&&(e=zU.A()),HN("doc","path",e),n instanceof PE){const r=bn.fromString(e,...t);return SH(r),new fr(n,null,new et(r))}{if(!(n instanceof fr||n instanceof Ou))throw new Le(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(bn.fromString(e,...t));return SH(r),new fr(n.firestore,n instanceof Ou?n.converter:null,new et(r))}}function OH(n,e){return n=(0,U.m9)(n),e=(0,U.m9)(e),(n instanceof fr||n instanceof Ou)&&(e instanceof fr||e instanceof Ou)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function $N(n,e){return n=(0,U.m9)(n),e=(0,U.m9)(e),n instanceof fs&&e instanceof fs&&n.firestore===e.firestore&&hE(n._query,e._query)&&n.converter===e.converter}class QZ{constructor(){this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new NP(this,"async_queue_retry"),this.qc=()=>{const t=uA();t&&je("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Co.vo()};const e=uA();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qc)}get isShuttingDown(){return this.Oc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Uc(),this.Kc(e)}enterRestrictedMode(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;const t=uA();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}enqueue(e){if(this.Uc(),this.Oc)return new Promise(()=>{});const t=new xi;return this.Kc(()=>this.Oc&&this.Bc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.kc.push(e),this.Gc()))}Gc(){var e=this;return(0,Te.Z)(function*(){if(0!==e.kc.length){try{yield e.kc[0](),e.kc.shift(),e.Co.reset()}catch(t){if(!If(t))throw t;je("AsyncQueue","Operation failed with retryable error: "+t)}e.kc.length>0&&e.Co.Ao(()=>e.Gc())}})()}Kc(e){const t=this.Nc.then(()=>(this.Fc=!0,e().catch(r=>{throw this.Mc=r,this.Fc=!1,oi("INTERNAL UNHANDLED ERROR: ",function(s){let u=s.message||"";return s.stack&&(u=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),u}(r)),r}).then(r=>(this.Fc=!1,r))));return this.Nc=t,t}enqueueAfterDelay(e,t,r){this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);const i=eN.createAndSchedule(this,e,t,r,s=>this.Qc(s));return this.$c.push(i),i}Uc(){this.Mc&&ft()}verifyOperationInProgress(){}zc(){var e=this;return(0,Te.Z)(function*(){let t;do{t=e.Nc,yield t}while(t!==e.Nc)})()}jc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Wc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Hc(e){this.Lc.push(e)}Qc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function GN(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class XZ{constructor(){this._progressObserver={},this._taskCompletionResolver=new xi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class pr extends PE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new QZ,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||PH(this),this._firestoreClient.terminate()}}function li(n){return n._firestoreClient||PH(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function PH(n){var e,t,r;const i=n._freezeSettings(),s=(d=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new M4(n._databaseId,d,n._persistenceKey,(y=i).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,y.useFetchStreams));var d,y;n._firestoreClient=new jZ(n._authCredentials,n._appCheckCredentials,n._queue,s),(null===(t=i.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function NH(n,e,t){const r=new xi;return n.asyncQueue.enqueue((0,Te.Z)(function*(){try{yield pA(n,t),yield PN(n,e),r.resolve()}catch(i){const s=i;if(!wH(s))throw s;Au("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function FH(n){if(n._initialized||n._terminated)throw new Le(we.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Pu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pu(Ri.fromBase64String(e))}catch(t){throw new Le(we.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pu(Ri.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Sd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Le(we.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class wm{constructor(e){this._methodName=e}}class vA{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Le(we.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Le(we.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Xt(this._lat,e._lat)||Xt(this._long,e._long)}}const c5=/^__.*__$/;class d5{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Id(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cv(e,this.data,t,this.fieldTransforms)}}class LH{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Id(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function VH(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft()}}class wA{constructor(e,t,r,i,s,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Jc(),this.fieldTransforms=s||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Yc(){return this.settings.Yc}Zc(e){return new wA(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Xc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Zc({path:r,ta:!1});return i.ea(e),i}na(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Zc({path:r,ta:!1});return i.Jc(),i}sa(e){return this.Zc({path:void 0,ta:!0})}ia(e){return CA(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Jc(){if(this.path)for(let e=0;e<this.path.length;e++)this.ea(this.path.get(e))}ea(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(VH(this.Yc)&&c5.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}class h5{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||RE(e)}ua(e,t,r,i=!1){return new wA({Yc:e,methodName:t,oa:r,path:Kr.emptyPath(),ta:!1,ra:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bm(n){const e=n._freezeSettings(),t=RE(n._databaseId);return new h5(n._databaseId,!!e.ignoreUndefinedProperties,t)}function bA(n,e,t,r,i,s={}){const u=n.ua(s.merge||s.mergeFields?2:0,e,t,i);KN("Data must be an object, but it was:",u,r);const d=jH(r,u);let g,y;if(s.merge)g=new Do(u.fieldMask),y=u.fieldTransforms;else if(s.mergeFields){const E=[];for(const T of s.mergeFields){const P=LE(e,T,t);if(!u.contains(P))throw new Le(we.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);$H(E,P)||E.push(P)}g=new Do(E),y=u.fieldTransforms.filter(T=>g.covers(T.field))}else g=null,y=u.fieldTransforms;return new d5(new Zi(d),g,y)}class FE extends wm{_toFieldTransform(e){if(2!==e.Yc)throw e.ia(1===e.Yc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof FE}}function BH(n,e,t){return new wA({Yc:3,oa:e.settings.oa,methodName:n._methodName,ta:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class zN extends wm{_toFieldTransform(e){return new mE(e.path,new bv)}isEqual(e){return e instanceof zN}}class f5 extends wm{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=BH(this,e,!0),r=this.ca.map(s=>Em(s,t)),i=new dm(r);return new mE(e.path,i)}isEqual(e){return this===e}}class p5 extends wm{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=BH(this,e,!0),r=this.ca.map(s=>Em(s,t)),i=new hm(r);return new mE(e.path,i)}isEqual(e){return this===e}}class g5 extends wm{constructor(e,t){super(e),this.aa=t}_toFieldTransform(e){const t=new Ev(e.serializer,V2(e.serializer,this.aa));return new mE(e.path,t)}isEqual(e){return this===e}}function WN(n,e,t,r){const i=n.ua(1,e,t);KN("Data must be an object, but it was:",i,r);const s=[],u=Zi.empty();sm(r,(g,y)=>{const E=EA(e,g,t);y=(0,U.m9)(y);const T=i.na(E);if(y instanceof FE)s.push(E);else{const P=Em(y,T);null!=P&&(s.push(E),u.set(E,P))}});const d=new Do(s);return new LH(u,d,i.fieldTransforms)}function qN(n,e,t,r,i,s){const u=n.ua(1,e,t),d=[LE(e,r,t)],g=[i];if(s.length%2!=0)throw new Le(we.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<s.length;P+=2)d.push(LE(e,s[P])),g.push(s[P+1]);const y=[],E=Zi.empty();for(let P=d.length-1;P>=0;--P)if(!$H(y,d[P])){const B=d[P];let q=g[P];q=(0,U.m9)(q);const ie=u.na(B);if(q instanceof FE)y.push(B);else{const ge=Em(q,ie);null!=ge&&(y.push(B),E.set(B,ge))}}const T=new Do(y);return new LH(E,T,u.fieldTransforms)}function UH(n,e,t,r=!1){return Em(t,n.ua(r?4:3,e))}function Em(n,e){if(HH(n=(0,U.m9)(n)))return KN("Unsupported field value:",e,n),jH(n,e);if(n instanceof wm)return function(t,r){if(!VH(r.Yc))throw r.ia(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ia(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ta&&4!==e.Yc)throw e.ia("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const u of t){let d=Em(u,r.sa(s));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,U.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return V2(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Er.fromDate(t);return{timestampValue:Dv(r.serializer,i)}}if(t instanceof Er){const i=new Er(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Dv(r.serializer,i)}}if(t instanceof vA)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Pu)return{bytesValue:nj(r.serializer,t._byteString)};if(t instanceof fr){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.ia(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:cP(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ia(`Unsupported field value: ${_A(t)}`)}(n,e)}function jH(n,e){const t={};return a2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sm(n,(r,i)=>{const s=Em(i,e.Xc(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function HH(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Er||n instanceof vA||n instanceof Pu||n instanceof fr||n instanceof wm)}function KN(n,e,t){if(!HH(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=_A(t);throw e.ia("an object"===r?n+" a custom object":n+" "+r)}var r}function LE(n,e,t){if((e=(0,U.m9)(e))instanceof Sd)return e._internalPath;if("string"==typeof e)return EA(n,e);throw CA("Field path arguments must be of type string or ",n,!1,void 0,t)}const m5=new RegExp("[~\\*/\\[\\]]");function EA(n,e,t){if(e.search(m5)>=0)throw CA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Sd(...e.split("."))._internalPath}catch{throw CA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function CA(n,e,t,r,i){const s=r&&!r.isEmpty(),u=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(s||u)&&(g+=" (found",s&&(g+=` in field ${r}`),u&&(g+=` in document ${i}`),g+=")"),new Le(we.INVALID_ARGUMENT,d+n+g)}function $H(n,e){return n.some(t=>t.isEqual(e))}class VE{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new fr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new _5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(IA("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class _5 extends VE{data(){return super.data()}}function IA(n,e){return"string"==typeof e?EA(n,e):e instanceof Sd?e._internalPath:e._delegate._internalPath}function GH(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Le(we.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ZN{}class BE extends ZN{}function Lf(n,e,...t){let r=[];e instanceof ZN&&r.push(e),r=r.concat(t),function(i){const s=i.filter(d=>d instanceof Uv).length,u=i.filter(d=>d instanceof UE).length;if(s>1||s>0&&u>0)throw new Le(we.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class UE extends BE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new UE(e,t,r)}_apply(e){const t=this._parse(e);return KH(e._query,t),new fs(e.firestore,e.converter,nP(e._query,t))}_parse(e){const t=bm(e.firestore);return function(i,s,u,d,g,y,E){let T;if(g.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Le(we.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){qH(E,y);const P=[];for(const B of E)P.push(WH(d,i,B));T={arrayValue:{values:P}}}else T=WH(d,i,E)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||qH(E,y),T=UH(u,"where",E,"in"===y||"not-in"===y);return mn.create(g,y,T)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Uv extends ZN{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Uv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Hn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let s=r;const u=i.getFlattenedFilters();for(const d of u)KH(s,d),s=nP(s,d)}(e._query,t),new fs(e.firestore,e.converter,nP(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class YN extends BE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new YN(e,t)}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new Le(we.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Le(we.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new yv(i,s);return function(d,g){if(null===eP(d)){const y=jS(d);null!==y&&ZH(0,y,g.field)}}(r,u),u}(e._query,this._field,this._direction);return new fs(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Cd(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class DA extends BE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new DA(e,t,r)}_apply(e){return new fs(e.firestore,e.converter,HS(e._query,this._limit,this._limitType))}}class TA extends BE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new TA(e,t,r)}_apply(e){const t=zH(e,this.type,this._docOrFields,this._inclusive);return new fs(e.firestore,e.converter,(i=t,new Cd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class SA extends BE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new SA(e,t,r)}_apply(e){const t=zH(e,this.type,this._docOrFields,this._inclusive);return new fs(e.firestore,e.converter,(i=t,new Cd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function zH(n,e,t,r){if(t[0]=(0,U.m9)(t[0]),t[0]instanceof VE)return function(i,s,u,d,g){if(!d)throw new Le(we.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const y=[];for(const E of cm(i))if(E.field.isKeyField())y.push(lm(s,d.key));else{const T=d.data.field(E.field);if(qO(T))throw new Le(we.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const P=E.field.canonicalString();throw new Le(we.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}y.push(T)}return new Mf(y,g)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=bm(n.firestore);return function(s,u,d,g,y,E){const T=s.explicitOrderBy;if(y.length>T.length)throw new Le(we.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let B=0;B<y.length;B++){const q=y[B];if(T[B].field.isKeyField()){if("string"!=typeof q)throw new Le(we.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof q}`);if(!tP(s)&&-1!==q.indexOf("/"))throw new Le(we.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${q}' contains a slash.`);const ie=s.path.child(bn.fromString(q));if(!et.isDocumentKey(ie))throw new Le(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${ie}' is not because it contains an odd number of segments.`);const ge=new et(ie);P.push(lm(u,ge))}else{const ie=UH(d,g,q);P.push(ie)}}return new Mf(P,E)}(n._query,n.firestore._databaseId,i,e,t,r)}}function WH(n,e,t){if("string"==typeof(t=(0,U.m9)(t))){if(""===t)throw new Le(we.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tP(e)&&-1!==t.indexOf("/"))throw new Le(we.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(bn.fromString(t));if(!et.isDocumentKey(r))throw new Le(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return lm(n,new et(r))}if(t instanceof fr)return lm(n,t._key);throw new Le(we.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_A(t)}.`)}function qH(n,e){if(!Array.isArray(n)||0===n.length)throw new Le(we.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KH(n,e){if(e.isInequality()){const r=jS(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Le(we.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=eP(n);null!==s&&ZH(0,i,s)}const t=function(r,i){for(const s of r)for(const u of s.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Le(we.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function ZH(n,e,t){if(!t.isEqual(e))throw new Le(we.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class QN{convertValue(e,t="none"){switch(am(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(om(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ft()}}convertObject(e,t){const r={};return sm(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new vA(Yr(e.latitude),Yr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=u2(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(aE(e));default:return null}}convertTimestamp(e){const t=Df(e);return new Er(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=bn.fromString(e);xt(hj(r));const i=new Tf(r.get(1),r.get(3)),s=new et(r.popFirst(5));return i.isEqual(t)||oi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function AA(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class T5 extends QN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fr(this.firestore,null,t)}}class Cm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ad extends VE{constructor(e,t,r,i,s,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new jE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(IA("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class jE extends Ad{data(e={}){return super.data(e)}}class Vf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Cm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new jE(this._firestore,this._userDataWriter,r.key,r,new Cm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Le(we.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new jE(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Cm(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const d=new jE(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Cm(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,y=-1;return 0!==u.type&&(g=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),1!==u.type&&(s=s.add(u.doc),y=s.indexOf(u.doc.key)),{type:A5(u.type),doc:d,oldIndex:g,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function A5(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft()}}function QH(n,e){return n instanceof Ad&&e instanceof Ad?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Vf&&e instanceof Vf&&n._firestore===e._firestore&&$N(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Bf extends QN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fr(this.firestore,null,t)}}function XH(n,e,t){n=_n(n,fr);const r=_n(n.firestore,pr),i=AA(n.converter,e,t);return jv(r,[bA(bm(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Cr.none())])}function JH(n,e,t,...r){n=_n(n,fr);const i=_n(n.firestore,pr),s=bm(i);let u;return u="string"==typeof(e=(0,U.m9)(e))||e instanceof Sd?qN(s,"updateDoc",n._key,e,t,r):WN(s,"updateDoc",n._key,e),jv(i,[u.toMutation(n._key,Cr.exists(!0))])}function e$(n,...e){var t,r,i;n=(0,U.m9)(n);let s={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||GN(e[u])||(s=e[u],u++);const d={includeMetadataChanges:s.includeMetadataChanges};if(GN(e[u])){const T=e[u];e[u]=null===(t=T.next)||void 0===t?void 0:t.bind(T),e[u+1]=null===(r=T.error)||void 0===r?void 0:r.bind(T),e[u+2]=null===(i=T.complete)||void 0===i?void 0:i.bind(T)}let g,y,E;if(n instanceof fr)y=_n(n.firestore,pr),E=wv(n._key.path),g={next:T=>{e[u]&&e[u](XN(y,n,T))},error:e[u+1],complete:e[u+2]};else{const T=_n(n,fs);y=_n(T.firestore,pr),E=T._query;const P=new Bf(y);g={next:B=>{e[u]&&e[u](new Vf(y,P,T,B))},error:e[u+1],complete:e[u+2]},GH(n._query)}return function(T,P,B,q){const ie=new fA(q),ge=new oN(P,ie,B);return T.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return tN(yield Bv(T),ge)})),()=>{ie.yc(),T.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return rN(yield Bv(T),ge)}))}}(li(y),E,d,g)}function jv(n,e){return function(t,r){const i=new xi;return t.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function EZ(n,e,t){return dN.apply(this,arguments)}(yield UN(t),r,i)})),i.promise}(li(n),e)}function XN(n,e,t){const r=t.docs.get(e._key),i=new Bf(n);return new Ad(n,i,e._key,r,new Cm(t.hasPendingWrites,t.fromCache),e.converter)}const G5={maxAttempts:5};class t${constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=bm(e)}set(e,t,r){this._verifyNotCommitted();const i=Uf(e,this._firestore),s=AA(i.converter,t,r),u=bA(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,Cr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Uf(e,this._firestore);let u;return u="string"==typeof(t=(0,U.m9)(t))||t instanceof Sd?qN(this._dataReader,"WriteBatch.update",s._key,t,r,i):WN(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(u.toMutation(s._key,Cr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Uf(e,this._firestore);return this._mutations=this._mutations.concat(new Iv(t._key,Cr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Le(we.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Uf(n,e){if((n=(0,U.m9)(n)).firestore!==e)throw new Le(we.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class z5 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=bm(e)}get(e){const t=Uf(e,this._firestore),r=new T5(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ft();const s=i[0];if(s.isFoundDocument())return new VE(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new VE(this._firestore,r,t._key,null,t.converter);throw ft()})}set(e,t,r){const i=Uf(e,this._firestore),s=AA(i.converter,t,r),u=bA(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const s=Uf(e,this._firestore);let u;return u="string"==typeof(t=(0,U.m9)(t))||t instanceof Sd?qN(this._dataReader,"Transaction.update",s._key,t,r,i):WN(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,u),this}delete(e){const t=Uf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Uf(e,this._firestore),r=new Bf(this._firestore);return super.get(e).then(i=>new Ad(this._firestore,r,t._key,i._document,new Cm(!1,!1),t.converter))}}function JN(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Le("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function r$(){if(typeof Uint8Array>"u")throw new Le("unimplemented","Uint8Arrays are not available in this environment.")}function i$(){if(!function S4(){return typeof atob<"u"}())throw new Le("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){pv=ji.SDK_VERSION,(0,ji._registerComponent)(new Ui.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),u=new pr(new YK(t.getProvider("auth-internal")),new JK(t.getProvider("app-check-internal")),function(d,g){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Le(we.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tf(d.options.projectId,g)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),(0,ji.registerVersion)(HU,"3.10.0",n),(0,ji.registerVersion)(HU,"3.10.0","esm2017")}();class HE{constructor(e){this._delegate=e}static fromBase64String(e){return i$(),new HE(Pu.fromBase64String(e))}static fromUint8Array(e){return r$(),new HE(Pu.fromUint8Array(e))}toBase64(){return i$(),this._delegate.toBase64()}toUint8Array(){return r$(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function eF(n){return function eY(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class tY{enableIndexedDbPersistence(e,t){return function e5(n,e){FH(n=_n(n,pr));const t=li(n);if(t._uninitializedComponentsProvider)throw new Le(we.FAILED_PRECONDITION,"SDK cache is already specified.");Au("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Vv;return NH(t,i,new kN(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function t5(n){FH(n=_n(n,pr));const e=li(n);if(e._uninitializedComponentsProvider)throw new Le(we.FAILED_PRECONDITION,"SDK cache is already specified.");Au("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Vv;return NH(e,r,new yH(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function n5(n){if(n._initialized&&!n._terminated)throw new Le(we.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new xi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Te.Z)(function*(){try{yield(t=(0,Te.Z)(function*(r){if(!Rl.D())return Promise.resolve();const i=r+"main";yield Rl.delete(i)}),function(r){return t.apply(this,arguments)})(IP(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class s${constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Tf||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Au("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function RH(n,e,t,r={}){var i;const s=(n=_n(n,PE))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&Au("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,d;if("string"==typeof r.mockUserToken)u=r.mockUserToken,d=qi.MOCK_USER;else{u=(0,U.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Le(we.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new qi(g)}n._authCredentials=new ZK(new $U(u,d))}}(this._delegate,e,t,r)}enableNetwork(){return function s5(n){return function HZ(n){return n.asyncQueue.enqueue((0,Te.Z)(function*(){const e=yield bH(n),t=yield BN(n);return e.setNetworkEnabled(!0),function(r){const i=nt(r);return i.du.delete(0),kE(i)}(t)}))}(li(n=_n(n,pr)))}(this._delegate)}disableNetwork(){return function o5(n){return function $Z(n){return n.asyncQueue.enqueue((0,Te.Z)(function*(){const e=yield bH(n),t=yield BN(n);return e.setNetworkEnabled(!1),(r=(0,Te.Z)(function*(i){const s=nt(i);s.du.add(0),yield Rv(s),s.mu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(li(n=_n(n,pr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,TH("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function r5(n){return function(e){const t=new xi;return e.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function TZ(n,e){return mN.apply(this,arguments)}(yield UN(e),t)})),t.promise}(li(n=_n(n,pr)))}(this._delegate)}onSnapshotsInSync(e){return function L5(n,e){return function WZ(n,e){const t=new fA(e);return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return r=yield Bv(n),i=t,nt(r).Au.add(i),void i.next();var r,i})),()=>{t.yc(),n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return r=yield Bv(n),i=t,void nt(r).Au.delete(i);var r,i}))}}(li(n=_n(n,pr)),GN(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Le("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Hv(this,kH(this._delegate,e))}catch(t){throw ro(t,"collection()","Firestore.collection()")}}doc(e){try{return new za(this,yA(this._delegate,e))}catch(t){throw ro(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new io(this,function YZ(n,e){if(n=_n(n,PE),HN("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Le(we.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new fs(n,null,(t=e,new Cd(bn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ro(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function W5(n,e,t){n=_n(n,pr);const r=Object.assign(Object.assign({},G5),t);return function(i){if(i.maxAttempts<1)throw new Le(we.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,u){const d=new xi;return i.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){const g=yield function EH(n){return gA(n).then(e=>e.datastore)}(i);new UZ(i.asyncQueue,g,u,s,d).run()})),d.promise}(li(n),i=>e(new z5(n,i)),r)}(this._delegate,t=>e(new o$(this,t)))}batch(){return li(this._delegate),new a$(new t$(this._delegate,e=>jv(this._delegate,e)))}loadBundle(e){return function a5(n,e){const t=li(n=_n(n,pr)),r=new XZ;return function qZ(n,e,t,r){const i=function(s,u){let d;return d="string"==typeof s?(new TextEncoder).encode(s):s,g=function(g,y){if(g instanceof Uint8Array)return vH(g,y);if(g instanceof ArrayBuffer)return vH(new Uint8Array(g),y);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new VZ(g,u);var g}(t,RE(e));n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){!function LZ(n,e,t){const r=nt(n);var i;(i=(0,Te.Z)(function*(s,u,d){try{const g=yield u.getMetadata();if(yield function(P,B){const q=nt(P),ie=ai(B.createTime);return q.persistence.runTransaction("hasNewerBundle","readonly",ge=>q.xs.getBundleMetadata(ge,B.id)).then(ge=>!!ge&&ge.createTime.compareTo(ie)>=0)}(s.localStore,g))return yield u.close(),d._completeWith({taskState:"Success",documentsLoaded:(P=g).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);d._updateProgress(uH(g));const y=new mZ(g,s.localStore,u.serializer);let E=yield u._c();for(;E;){const P=yield y.$u(E);P&&d._updateProgress(P),E=yield u._c()}const T=yield y.complete();return yield Td(s,T.Bu,void 0),yield function(P,B){const q=nt(P);return q.persistence.runTransaction("Save bundle","readwrite",ie=>q.xs.saveBundleMetadata(ie,B))}(s.localStore,g),d._completeWith(T.progress),Promise.resolve(T.Fu)}catch(g){return Au("SyncEngine",`Loading bundle failed with ${g}`),d._failWith(g),Promise.resolve(new Set)}var P}),function(s,u,d){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield UN(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function l5(n,e){return function KZ(n,e){return n.asyncQueue.enqueue((0,Te.Z)(function*(){return function(t,r){const i=nt(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.xs.getNamedQuery(s,r))}(yield mA(n),e)}))}(li(n=_n(n,pr)),e).then(t=>t?new fs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new io(this,t):null)}}class MA extends QN{constructor(e){super(),this.firestore=e}convertBytes(e){return new HE(new Pu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return za.forKey(t,this.firestore,null)}}class o${constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new MA(e)}get(e){const t=Dm(e);return this._delegate.get(t).then(r=>new $E(this._firestore,new Ad(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Dm(e);return r?(JN("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Dm(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Dm(e);return this._delegate.delete(t),this}}class a${constructor(e){this._delegate=e}set(e,t,r){const i=Dm(e);return r?(JN("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Dm(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Dm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Im{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new jE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new GE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Im.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Im(e,new MA(e),t),i.set(t,s)),s}}Im.INSTANCES=new WeakMap;class za{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new MA(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Le("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new za(t,new fr(t._delegate,r,new et(e)))}static forKey(e,t,r){return new za(t,new fr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Hv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Hv(this.firestore,kH(this._delegate,e))}catch(t){throw ro(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,U.m9)(e))instanceof fr&&OH(this._delegate,e)}set(e,t){t=JN("DocumentReference.set",t);try{return t?XH(this._delegate,e,t):XH(this._delegate,e)}catch(r){throw ro(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?JH(this._delegate,e):JH(this._delegate,e,t,...r)}catch(i){throw ro(i,"updateDoc()","DocumentReference.update()")}}delete(){return function N5(n){return jv(_n(n.firestore,pr),[new Iv(n._key,Cr.none())])}(this._delegate)}onSnapshot(...e){const t=l$(e),r=u$(e,i=>new $E(this.firestore,new Ad(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return e$(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function x5(n){n=_n(n,fr);const e=_n(n.firestore,pr),t=li(e),r=new Bf(e);return function GZ(n,e){const t=new xi;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return(r=(0,Te.Z)(function*(i,s,u){try{const d=yield function(g,y){const E=nt(g);return E.persistence.runTransaction("read document","readonly",T=>E.localDocuments.getDocument(T,y))}(i,s);d.isFoundDocument()?u.resolve(d):d.isNoDocument()?u.resolve(null):u.reject(new Le(we.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const g=Pv(d,`Failed to get document '${s} from cache`);u.reject(g)}}),function(i,s,u){return r.apply(this,arguments)})(yield mA(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Ad(e,r,n._key,i,new Cm(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function R5(n){n=_n(n,fr);const e=_n(n.firestore,pr);return CH(li(e),n._key,{source:"server"}).then(t=>XN(e,n,t))}(this._delegate):function M5(n){n=_n(n,fr);const e=_n(n.firestore,pr);return CH(li(e),n._key).then(t=>XN(e,n,t))}(this._delegate),t.then(r=>new $E(this.firestore,new Ad(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new za(this.firestore,this._delegate.withConverter(e?Im.getInstance(this.firestore,e):null))}}function ro(n,e,t){return n.message=n.message.replace(e,t),n}function l$(n){for(const e of n)if("object"==typeof e&&!eF(e))return e;return{}}function u$(n,e){var t,r;let i;return i=eF(n[0])?n[0]:eF(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class $E{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new za(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return QH(this._delegate,e._delegate)}}class GE extends $E{data(e){const t=this._delegate.data(e);return function qK(n,e){n||ft()}(void 0!==t),t}}class io{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new MA(e)}where(e,t,r){try{return new io(this.firestore,Lf(this._delegate,function y5(n,e,t){const r=e,i=IA("where",n);return UE._create(i,r,t)}(e,t,r)))}catch(i){throw ro(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new io(this.firestore,Lf(this._delegate,function v5(n,e="asc"){const t=e,r=IA("orderBy",n);return YN._create(r,t)}(e,t)))}catch(r){throw ro(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new io(this.firestore,Lf(this._delegate,function w5(n){return MH("limit",n),DA._create("limit",n,"F")}(e)))}catch(t){throw ro(t,"limit()","Query.limit()")}}limitToLast(e){try{return new io(this.firestore,Lf(this._delegate,function b5(n){return MH("limitToLast",n),DA._create("limitToLast",n,"L")}(e)))}catch(t){throw ro(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new io(this.firestore,Lf(this._delegate,function E5(...n){return TA._create("startAt",n,!0)}(...e)))}catch(t){throw ro(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new io(this.firestore,Lf(this._delegate,function C5(...n){return TA._create("startAfter",n,!1)}(...e)))}catch(t){throw ro(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new io(this.firestore,Lf(this._delegate,function I5(...n){return SA._create("endBefore",n,!1)}(...e)))}catch(t){throw ro(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new io(this.firestore,Lf(this._delegate,function D5(...n){return SA._create("endAt",n,!0)}(...e)))}catch(t){throw ro(t,"endAt()","Query.endAt()")}}isEqual(e){return $N(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function O5(n){n=_n(n,fs);const e=_n(n.firestore,pr),t=li(e),r=new Bf(e);return function zZ(n,e){const t=new xi;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return(r=(0,Te.Z)(function*(i,s,u){try{const d=yield sA(i,s,!0),g=new hH(s,d.Wi),y=g.zu(d.documents),E=g.applyChanges(y,!1);u.resolve(E.snapshot)}catch(d){const g=Pv(d,`Failed to execute query '${s} against cache`);u.reject(g)}}),function(i,s,u){return r.apply(this,arguments)})(yield mA(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Vf(e,r,n,i))}(this._delegate):"server"===e?.source?function P5(n){n=_n(n,fs);const e=_n(n.firestore,pr),t=li(e),r=new Bf(e);return IH(t,n._query,{source:"server"}).then(i=>new Vf(e,r,n,i))}(this._delegate):function k5(n){n=_n(n,fs);const e=_n(n.firestore,pr),t=li(e),r=new Bf(e);return GH(n._query),IH(t,n._query).then(i=>new Vf(e,r,n,i))}(this._delegate),t.then(r=>new tF(this.firestore,new Vf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=l$(e),r=u$(e,i=>new tF(this.firestore,new Vf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return e$(this._delegate,t,r)}withConverter(e){return new io(this.firestore,this._delegate.withConverter(e?Im.getInstance(this.firestore,e):null))}}class rY{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new GE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class tF{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new io(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new GE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new rY(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new GE(this._firestore,r))})}isEqual(e){return QH(this._delegate,e._delegate)}}class Hv extends io{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new za(this.firestore,e):null}doc(e){try{return new za(this.firestore,void 0===e?yA(this._delegate):yA(this._delegate,e))}catch(t){throw ro(t,"doc()","CollectionReference.doc()")}}add(e){return function F5(n,e){const t=_n(n.firestore,pr),r=yA(n),i=AA(n.converter,e);return jv(t,[bA(bm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Cr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new za(this.firestore,t))}isEqual(e){return OH(this._delegate,e._delegate)}withConverter(e){return new Hv(this.firestore,this._delegate.withConverter(e?Im.getInstance(this.firestore,e):null))}}function Dm(n){return _n(n,fr)}class nF{constructor(...e){this._delegate=new Sd(...e)}static documentId(){return new nF(Kr.keyField().canonicalString())}isEqual(e){return(e=(0,U.m9)(e))instanceof Sd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Tm{constructor(e){this._delegate=e}static serverTimestamp(){const e=function K5(){return new zN("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Tm(e)}static delete(){const e=function q5(){return new FE("deleteField")}();return e._methodName="FieldValue.delete",new Tm(e)}static arrayUnion(...e){const t=function Z5(...n){return new f5("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Tm(t)}static arrayRemove(...e){const t=function Y5(...n){return new p5("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Tm(t)}static increment(e){const t=function Q5(n){return new g5("increment",n)}(e);return t._methodName="FieldValue.increment",new Tm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const iY={Firestore:s$,GeoPoint:vA,Timestamp:Er,Blob:HE,Transaction:o$,WriteBatch:a$,DocumentReference:za,DocumentSnapshot:$E,Query:io,QueryDocumentSnapshot:GE,QuerySnapshot:tF,CollectionReference:Hv,FieldPath:nF,FieldValue:Tm,setLogLevel:function nY(n){!function WK(n){Ef.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function c$(n,e){return function aY(n,e=Bp.z){return new cr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function rF(n,e){return c$(n,e).pipe((0,Et.U)(t=>({payload:t,type:"query"})))}function xA(n,e){return rF(n,e).pipe(dl(void 0),Jk(),(0,Et.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,d)=>{const g=i.find(E=>E.doc.ref.isEqual(u.ref)),y=t?.payload.docs.find(E=>E.ref.isEqual(u.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(u.metadata)||!g&&y&&JSON.stringify(y.metadata)===JSON.stringify(u.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:u}})}),s}))}function d$(n,e,t){return xA(n,t).pipe(Wo((r,i)=>function uY(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function cY(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return iF(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return iF(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return iF(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),D_(),(0,Et.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function iF(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function h$(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function oY(n){(function sY(n,e){n.INTERNAL.registerComponent(new Ui.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},iY)))})(n,(e,t)=>new s$(e,t,new tY)),n.registerVersion("@firebase/firestore-compat","0.3.6")}(UC.Z);class f${constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=xA(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Et.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(dl(void 0),Jk(),ni(([r,i])=>i.length>0||!r),(0,Et.U)(([r,i])=>i),Tn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Wo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=h$(e);return d$(this.query,t,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}valueChanges(e={}){return rF(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Tn.iC)}get(e){return(0,un.D)(this.query.get(e)).pipe(Tn.iC)}add(e){return this.ref.add(e)}doc(e){return new p$(this.ref.doc(e),this.afs)}}class p${constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=_$(r,t);return new f$(i,s,this.afs)}snapshotChanges(){return function lY(n,e){return c$(n,e).pipe(dl(void 0),Jk(),(0,Et.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Et.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,un.D)(this.ref.get(e)).pipe(Tn.iC)}}class dY{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?xA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ni(t=>t.length>0),Tn.iC):xA(this.query,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Wo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=h$(e);return d$(this.query,t,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}valueChanges(e={}){return rF(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Tn.iC)}get(e){return(0,un.D)(this.query.get(e)).pipe(Tn.iC)}}const g$=new f.OlP("angularfire2.enableFirestorePersistence"),m$=new f.OlP("angularfire2.firestore.persistenceSettings"),hY=new f.OlP("angularfire2.firestore.settings"),fY=new f.OlP("angularfire2.firestore.use-emulator");function _$(n,e=(t=>t)){return{query:e(n),ref:n}}let pY=(()=>{class n{constructor(t,r,i,s,u,d,g,y,E,T,P,B,q,ie,ge,Ue,Ye){this.schedulers=g;const Ze=(0,Nr.on)(t,d,r),tt=E;T&&ff(Ze,d,P,q,ie,ge,B,Ue),[this.firestore,this.persistenceEnabled$]=(0,Nr.cc)(`${Ze.name}.firestore`,"AngularFirestore",Ze.name,()=>{const Lt=d.runOutsideAngular(()=>Ze.firestore());if(s&&Lt.settings(s),tt&&Lt.useEmulator(...tt),i&&!jr(u)){const jt=()=>{try{return(0,un.D)(Lt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(vn){return typeof console<"u"&&console.warn(vn),ut(!1)}};return[Lt,d.runOutsideAngular(jt)]}return[Lt,ut(!1)]},[s,tt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:u}=_$(i,r),d=this.schedulers.ngZone.run(()=>s);return new f$(d,u,this)}collectionGroup(t,r){const i=r||(u=>u),s=this.firestore.collectionGroup(t);return new dY(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new p$(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Nr.Dh),f.LFG(Nr.xv,8),f.LFG(g$,8),f.LFG(hY,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Tn.HU),f.LFG(m$,8),f.LFG(fY,8),f.LFG(m0,8),f.LFG(Qy,8),f.LFG(Vg,8),f.LFG(Bg,8),f.LFG(g0,8),f.LFG(Ug,8),f.LFG(jg,8),f.LFG(Fg,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),gY=(()=>{class n{constructor(){Lg.Z.registerVersion("angularfire",Tn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:g$,useValue:!0},{provide:m$,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[pY]}),n})();var mY=j(1144);const _Y=["addListener","removeListener"],yY=["addEventListener","removeEventListener"],vY=["on","off"];function sF(n,e,t,r){if((0,ti.m)(t)&&(r=t,t=void 0),r)return sF(n,e,t).pipe(M(r));const[i,s]=function EY(n){return(0,ti.m)(n.addEventListener)&&(0,ti.m)(n.removeEventListener)}(n)?yY.map(u=>d=>n[u](e,d,t)):function wY(n){return(0,ti.m)(n.addListener)&&(0,ti.m)(n.removeListener)}(n)?_Y.map(y$(n,e)):function bY(n){return(0,ti.m)(n.on)&&(0,ti.m)(n.off)}(n)?vY.map(y$(n,e)):[];if(!i&&(0,mY.z)(n))return(0,dr.z)(u=>sF(u,e,t))((0,wt.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new cr.y(u=>{const d=(...g)=>u.next(1<g.length?g:g[0]);return i(d),()=>s(d)})}function y$(n,e){return t=>r=>n[t](e,r)}var v$=j(4408);const zE={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=zE;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new kr.w0(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=zE;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=zE;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var w$=j(7565);new class IY extends w$.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class CY extends v$.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=zE.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(zE.cancelAnimationFrame(t),e._scheduled=void 0)}});let oF,TY=1;const RA={};function b$(n){return n in RA&&(delete RA[n],!0)}const SY={setImmediate(n){const e=TY++;return RA[e]=!0,oF||(oF=Promise.resolve()),oF.then(()=>b$(e)&&n()),e},clearImmediate(n){b$(n)}},{setImmediate:AY,clearImmediate:MY}=SY,kA={setImmediate(...n){const{delegate:e}=kA;return(e?.setImmediate||AY)(...n)},clearImmediate(n){const{delegate:e}=kA;return(e?.clearImmediate||MY)(n)},delegate:void 0};new class RY extends w$.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class xY extends v$.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=kA.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(kA.clearImmediate(t),e._scheduled=void 0)}});var PY=j(3532);function E$(n,e=Bp.z){return function OY(n){return(0,Dn.e)((e,t)=>{let r=!1,i=null,s=null,u=!1;const d=()=>{if(s?.unsubscribe(),s=null,r){r=!1;const y=i;i=null,t.next(y)}u&&t.complete()},g=()=>{s=null,u&&t.complete()};e.subscribe((0,G.x)(t,y=>{r=!0,i=y,s||(0,wt.Xf)(n(y)).subscribe(s=(0,G.x)(t,d,g))},()=>{u=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>function FY(n=0,e,t=Bp.P){let r=-1;return null!=e&&((0,PY.K)(e)?t=e:r=e),new cr.y(i=>{let s=function NY(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let u=0;return t.schedule(function(){i.closed||(i.next(u++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(n,e))}let VY=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new cn.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new cr.y(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(E$(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ut()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(ni(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=AT(r),s=t.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>sF(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.R0b),f.LFG(Du),f.LFG(re,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),C$=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new cn.x,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(E$(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Du),f.LFG(f.R0b),f.LFG(re,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),I$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),D$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[T0,I$,T0,I$]}),n})();class aF{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class lF extends aF{constructor(e,t,r,i){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i}}class T$ extends aF{constructor(e,t,r,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class UY extends aF{constructor(e){super(),this.element=e instanceof f.SBq?e.nativeElement:e}}class uF{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof lF?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof T$?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof UY?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class jY extends uF{constructor(e,t,r,i,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=u=>{const d=u.element,g=this._document.createComment("dom-portal");d.parentNode.insertBefore(g,d),this.outletElement.appendChild(d),this._attachedPortal=u,super.setDisposeFn(()=>{g.parentNode&&g.parentNode.replaceChild(d,g)})},this._document=s}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector||f.zs3.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let cF=(()=>{class n extends uF{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new f.vpe,this.attachDomPortal=s=>{const u=s.element,d=this._document.createComment("dom-portal");s.setAttachedHost(this),u.parentNode.insertBefore(d,u),this._getRootNode().appendChild(u),this._attachedPortal=s,super.setDisposeFn(()=>{d.parentNode&&d.parentNode.replaceChild(u,d)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),u=r.createComponent(s,r.length,t.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(u.hostView.rootNodes[0]),super.setDisposeFn(()=>u.destroy()),this._attachedPortal=t,this._attachedRef=u,this.attached.emit(u),u}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f._Vd),f.Y36(f.s_b),f.Y36(re))},n.\u0275dir=f.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[f.qOj]}),n})(),OA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const S$=bz();class HY{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=wi(-this._previousScrollPosition.left),e.style.top=wi(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,s=r.scrollBehavior||"",u=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),S$&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),S$&&(r.scrollBehavior=s,i.scrollBehavior=u)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class $Y{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class A${enable(){}disable(){}attach(){}}function dF(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function M$(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class GY{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();dF(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let zY=(()=>{class n{constructor(t,r,i,s){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new A$,this.close=u=>new $Y(this._scrollDispatcher,this._ngZone,this._viewportRuler,u),this.block=()=>new HY(this._viewportRuler,this._document),this.reposition=u=>new GY(this._scrollDispatcher,this._viewportRuler,this._ngZone,u),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(VY),f.LFG(C$),f.LFG(f.R0b),f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class x${constructor(e){if(this.scrollStrategy=new A$,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class WY{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let R$=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qY=(()=>{class n extends R${constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const s=this._attachedOverlays;for(let u=s.length-1;u>-1;u--)if(s[u]._keydownEvents.observers.length>0){const d=s[u]._keydownEvents;this._ngZone?this._ngZone.run(()=>d.next(i)):d.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re),f.LFG(f.R0b,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),KY=(()=>{class n extends R${constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=qg(s)},this._clickListener=s=>{const u=qg(s),d="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:u;this._pointerDownEventTarget=null;const g=this._attachedOverlays.slice();for(let y=g.length-1;y>-1;y--){const E=g[y];if(E._outsidePointerEvents.observers.length<1||!E.hasAttached())continue;if(E.overlayElement.contains(u)||E.overlayElement.contains(d))break;const T=E._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>T.next(s)):T.next(s)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re),f.LFG(Du),f.LFG(f.R0b,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),PA=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||ek()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<i.length;s++)i[s].remove()}const r=this._document.createElement("div");r.classList.add(t),ek()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re),f.LFG(Du))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class WE{constructor(e,t,r,i,s,u,d,g,y,E=!1){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=u,this._document=d,this._location=g,this._outsideClickDispatcher=y,this._animationsDisabled=E,this._backdropElement=null,this._backdropClick=new cn.x,this._attachments=new cn.x,this._detachments=new cn.x,this._locationChanges=kr.w0.EMPTY,this._backdropClickHandler=T=>this._backdropClick.next(T),this._backdropTransitionendHandler=T=>{this._disposeBackdrop(T.target)},this._keydownEvents=new cn.x,this._outsidePointerEvents=new cn.x,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Vs(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=wi(this._config.width),e.height=wi(this._config.height),e.minWidth=wi(this._config.minWidth),e.minHeight=wi(this._config.minHeight),e.maxWidth=wi(this._config.maxWidth),e.maxHeight=wi(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,r){const i=ST(t||[]).filter(s=>!!s);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(nk((0,Up.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const k$="cdk-overlay-connected-position-bounding-box",ZY=/([A-Za-z%]+)$/;class YY{constructor(e,t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new cn.x,this._resizeSubscription=kr.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(k$),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[];let u;for(let d of this._preferredPositions){let g=this._getOriginPoint(e,i,d),y=this._getOverlayPoint(g,t,d),E=this._getOverlayFit(y,t,r,d);if(E.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,g);this._canFitWithFlexibleDimensions(E,y,r)?s.push({position:d,origin:g,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(g,d)}):(!u||u.overlayFit.visibleArea<E.visibleArea)&&(u={overlayFit:E,overlayPoint:y,originPoint:g,position:d,overlayRect:t})}if(s.length){let d=null,g=-1;for(const y of s){const E=y.boundingBoxRect.width*y.boundingBoxRect.height*(y.position.weight||1);E>g&&(g=E,d=y)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(u.position,u.originPoint);this._applyPosition(u.position,u.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Sm(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(k$),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,s;if("center"==r.originX)i=e.left+e.width/2;else{const u=this._isRtl()?e.right:e.left,d=this._isRtl()?e.left:e.right;i="start"==r.originX?u:d}return t.left<0&&(i-=t.left),s="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:i,y:s}}_getOverlayPoint(e,t,r){let i,s;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+s}}_getOverlayFit(e,t,r,i){const s=P$(t);let{x:u,y:d}=e,g=this._getOffset(i,"x"),y=this._getOffset(i,"y");g&&(u+=g),y&&(d+=y);let P=0-d,B=d+s.height-r.height,q=this._subtractOverflows(s.width,0-u,u+s.width-r.width),ie=this._subtractOverflows(s.height,P,B),ge=q*ie;return{visibleArea:ge,isCompletelyWithinViewport:s.width*s.height===ge,fitsInViewportVertically:ie===s.height,fitsInViewportHorizontally:q==s.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,s=r.right-t.x,u=O$(this._overlayRef.getConfig().minHeight),d=O$(this._overlayRef.getConfig().minWidth),y=e.fitsInViewportHorizontally||null!=d&&d<=s;return(e.fitsInViewportVertically||null!=u&&u<=i)&&y}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=P$(t),s=this._viewportRect,u=Math.max(e.x+i.width-s.width,0),d=Math.max(e.y+i.height-s.height,0),g=Math.max(s.top-r.top-e.y,0),y=Math.max(s.left-r.left-e.x,0);let E=0,T=0;return E=i.width<=s.width?y||-u:e.x<this._viewportMargin?s.left-r.left-e.x:0,T=i.height<=s.height?g||-d:e.y<this._viewportMargin?s.top-r.top-e.y:0,this._previousPushAmount={x:E,y:T},{x:e.x+E,y:e.y+T}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new WY(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let s,u,d,E,T,P;if("top"===t.overlayY)u=e.y,s=r.height-u+this._viewportMargin;else if("bottom"===t.overlayY)d=r.height-e.y+2*this._viewportMargin,s=r.height-d+this._viewportMargin;else{const B=Math.min(r.bottom-e.y+r.top,e.y),q=this._lastBoundingBoxSize.height;s=2*B,u=e.y-B,s>q&&!this._isInitialRender&&!this._growAfterOpen&&(u=e.y-q/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)P=r.width-e.x+this._viewportMargin,E=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)T=e.x,E=r.right-e.x;else{const B=Math.min(r.right-e.x+r.left,e.x),q=this._lastBoundingBoxSize.width;E=2*B,T=e.x-B,E>q&&!this._isInitialRender&&!this._growAfterOpen&&(T=e.x-q/2)}return{top:u,left:T,bottom:d,right:P,width:E,height:s}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,u=this._overlayRef.getConfig().maxWidth;i.height=wi(r.height),i.top=wi(r.top),i.bottom=wi(r.bottom),i.width=wi(r.width),i.left=wi(r.left),i.right=wi(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=wi(s)),u&&(i.maxWidth=wi(u))}this._lastBoundingBoxSize=r,Sm(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Sm(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Sm(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,u=this._overlayRef.getConfig();if(i){const E=this._viewportRuler.getViewportScrollPosition();Sm(r,this._getExactOverlayY(t,e,E)),Sm(r,this._getExactOverlayX(t,e,E))}else r.position="static";let d="",g=this._getOffset(t,"x"),y=this._getOffset(t,"y");g&&(d+=`translateX(${g}px) `),y&&(d+=`translateY(${y}px)`),r.transform=d.trim(),u.maxHeight&&(i?r.maxHeight=wi(u.maxHeight):s&&(r.maxHeight="")),u.maxWidth&&(i?r.maxWidth=wi(u.maxWidth):s&&(r.maxWidth="")),Sm(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=wi(s.y),i}_getExactOverlayX(e,t,r){let u,i={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),u=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===u?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=wi(s.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:M$(e,r),isOriginOutsideView:dF(e,r),isOverlayClipped:M$(t,r),isOverlayOutsideView:dF(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?e.offsetX??this._offsetX:e.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&ST(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof f.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function Sm(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function O$(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(ZY);return t&&"px"!==t?null:parseFloat(e)}return n||null}function P$(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const N$="cdk-global-overlay-wrapper";class QY{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(N$),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:u,maxHeight:d}=r,g=!("100%"!==i&&"100vw"!==i||u&&"100%"!==u&&"100vw"!==u),y=!("100%"!==s&&"100vh"!==s||d&&"100%"!==d&&"100vh"!==d),E=this._xPosition,T=this._xOffset,P="rtl"===this._overlayRef.getConfig().direction;let B="",q="",ie="";g?ie="flex-start":"center"===E?(ie="center",P?q=T:B=T):P?"left"===E||"end"===E?(ie="flex-end",B=T):("right"===E||"start"===E)&&(ie="flex-start",q=T):"left"===E||"start"===E?(ie="flex-start",B=T):("right"===E||"end"===E)&&(ie="flex-end",q=T),e.position=this._cssPosition,e.marginLeft=g?"0":B,e.marginTop=y?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=g?"0":q,t.justifyContent=ie,t.alignItems=y?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(N$),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let XY=(()=>{class n{constructor(t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s}global(){return new QY}flexibleConnectedTo(t){return new YY(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(C$),f.LFG(re),f.LFG(Du),f.LFG(PA))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),JY=0,$v=(()=>{class n{constructor(t,r,i,s,u,d,g,y,E,T,P,B){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=s,this._keyboardDispatcher=u,this._injector=d,this._ngZone=g,this._document=y,this._directionality=E,this._location=T,this._outsideClickDispatcher=P,this._animationsModuleType=B}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),s=this._createPortalOutlet(i),u=new x$(t);return u.direction=u.direction||this._directionality.value,new WE(s,r,i,u,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+JY++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(f.z2F)),new jY(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(zY),f.LFG(PA),f.LFG(f._Vd),f.LFG(XY),f.LFG(qY),f.LFG(f.zs3),f.LFG(f.R0b),f.LFG(re),f.LFG(kT),f.LFG(Ee),f.LFG(KY),f.LFG(f.QbO,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const n7={provide:new f.OlP("cdk-connected-overlay-scroll-strategy"),deps:[$v],useFactory:function t7(n){return()=>n.scrollStrategies.reposition()}};let F$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[$v,n7],imports:[T0,OA,D$,D$]}),n})();function r7(n,e){}class NA{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let L$=(()=>{class n extends uF{constructor(t,r,i,s,u,d,g,y){super(),this._elementRef=t,this._focusTrapFactory=r,this._config=s,this._interactivityChecker=u,this._ngZone=d,this._overlayRef=g,this._focusMonitor=y,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=E=>{this._portalOutlet.hasAttached();const T=this._portalOutlet.attachDomPortal(E);return this._contentAttached(),T},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=i}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),r}attachTemplatePortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let r=null;if("string"==typeof t?r=this._document.querySelector(t):"boolean"==typeof t?r=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(r=t),this._config.restoreFocus&&r&&"function"==typeof r.focus){const i=JR(),s=this._elementRef.nativeElement;(!i||i===this._document.body||i===s||s.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,r=JR();return t===r||t.contains(r)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=JR())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(rk),f.Y36(re,8),f.Y36(NA),f.Y36(MT),f.Y36(f.R0b),f.Y36(WE),f.Y36(RT))},n.\u0275cmp=f.Xpm({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(t,r){if(1&t&&f.Gf(cF,7),2&t){let i;f.iGM(i=f.CRH())&&(r._portalOutlet=i.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,r){2&t&&f.uIk("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[f.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,r){1&t&&f.YNc(0,r7,0,0,"ng-template",0)},dependencies:[cF],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),n})();class hF{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new cn.x,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(r=>{27===r.keyCode&&!this.disableClose&&!tk(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(e,t){if(this.containerInstance){const r=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this.overlayRef.dispose(),r.next(e),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const V$=new f.OlP("DialogScrollStrategy"),i7=new f.OlP("DialogData"),s7=new f.OlP("DefaultDialogConfig"),a7={provide:V$,deps:[$v],useFactory:function o7(n){return()=>n.scrollStrategies.block()}};let l7=0,B$=(()=>{class n{constructor(t,r,i,s,u,d){this._overlay=t,this._injector=r,this._defaultOptions=i,this._parentDialog=s,this._overlayContainer=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new cn.x,this._afterOpenedAtThisLevel=new cn.x,this._ariaHiddenElements=new Map,this.afterAllClosed=_r(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(dl(void 0))),this._scrollStrategy=d}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(t,r){(r={...this._defaultOptions||new NA,...r}).id=r.id||"cdk-dialog-"+l7++,r.id&&this.getDialogById(r.id);const s=this._getOverlayConfig(r),u=this._overlay.create(s),d=new hF(u,r),g=this._attachContainer(u,d,r);return d.containerInstance=g,this._attachDialogContent(t,d,g,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(d),d.closed.subscribe(()=>this._removeOpenDialog(d,!0)),this.afterOpened.next(d),d}closeAll(){fF(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){fF(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),fF(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const r=new x$({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachContainer(t,r,i){const s=i.injector||i.viewContainerRef?.injector,u=[{provide:NA,useValue:i},{provide:hF,useValue:r},{provide:WE,useValue:t}];let d;i.container?"function"==typeof i.container?d=i.container:(d=i.container.type,u.push(...i.container.providers(i))):d=L$;const g=new lF(d,i.viewContainerRef,f.zs3.create({parent:s||this._injector,providers:u}),i.componentFactoryResolver);return t.attach(g).instance}_attachDialogContent(t,r,i,s){if(t instanceof f.Rgc){const u=this._createInjector(s,r,i,void 0);let d={$implicit:s.data,dialogRef:r};s.templateContext&&(d={...d,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),i.attachTemplatePortal(new T$(t,null,d,u))}else{const u=this._createInjector(s,r,i,this._injector),d=i.attachComponentPortal(new lF(t,s.viewContainerRef,u,s.componentFactoryResolver));r.componentInstance=d.instance}}_createInjector(t,r,i,s){const u=t.injector||t.viewContainerRef?.injector,d=[{provide:i7,useValue:t.data},{provide:hF,useValue:r}];return t.providers&&("function"==typeof t.providers?d.push(...t.providers(r,t,i)):d.push(...t.providers)),t.direction&&(!u||!u.get(kT,null,f.XFs.Optional))&&d.push({provide:kT,useValue:{value:t.direction,change:ut()}}),f.zs3.create({parent:u||s,providers:d})}_removeOpenDialog(t,r){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,u)=>{s?u.setAttribute("aria-hidden",s):u.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const r=t.parentElement.children;for(let i=r.length-1;i>-1;i--){const s=r[i];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return n.\u0275fac=function(t){return new(t||n)(f.LFG($v),f.LFG(f.zs3),f.LFG(s7,8),f.LFG(n,12),f.LFG(PA),f.LFG(V$))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function fF(n,e){let t=n.length;for(;t--;)e(n[t])}let u7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[B$,a7],imports:[F$,OA,cW,OA]}),n})();function c7(n,e){}const Gv={params:{enterAnimationDuration:"150ms",exitAnimationDuration:"75ms"}},d7={dialogContainer:G3("dialogContainer",[LV("void, exit",lv({opacity:0,transform:"scale(0.7)"})),LV("enter",lv({transform:"none"})),VV("* => enter",NV([PV("{{enterAnimationDuration}} cubic-bezier(0, 0, 0.2, 1)",lv({transform:"none",opacity:1})),UV("@*",BV(),{optional:!0})]),Gv),VV("* => void, * => exit",NV([PV("{{exitAnimationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)",lv({opacity:0})),UV("@*",BV(),{optional:!0})]),Gv)])};class FA{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0,this.enterAnimationDuration=Gv.params.enterAnimationDuration,this.exitAnimationDuration=Gv.params.exitAnimationDuration}}let h7=(()=>{class n extends L${constructor(t,r,i,s,u,d,g,y){super(t,r,i,s,u,d,g,y),this._animationStateChanged=new f.vpe}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(rk),f.Y36(re,8),f.Y36(FA),f.Y36(MT),f.Y36(f.R0b),f.Y36(WE),f.Y36(RT))},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],features:[f.qOj],decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})(),f7=(()=>{class n extends h7{constructor(t,r,i,s,u,d,g,y,E){super(t,r,i,s,u,d,g,E),this._changeDetectorRef=y,this._state="enter"}_onAnimationDone({toState:t,totalTime:r}){"enter"===t?this._openAnimationDone(r):"exit"===t&&this._animationStateChanged.next({state:"closed",totalTime:r})}_onAnimationStart({toState:t,totalTime:r}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:r}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:r})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_getAnimationState(){return{value:this._state,params:{enterAnimationDuration:this._config.enterAnimationDuration||Gv.params.enterAnimationDuration,exitAnimationDuration:this._config.exitAnimationDuration||Gv.params.exitAnimationDuration}}}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(rk),f.Y36(re,8),f.Y36(FA),f.Y36(MT),f.Y36(f.R0b),f.Y36(WE),f.Y36(f.sBO),f.Y36(RT))},n.\u0275cmp=f.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-dialog-container"],hostVars:7,hostBindings:function(t,r){1&t&&f.WFA("@dialogContainer.start",function(s){return r._onAnimationStart(s)})("@dialogContainer.done",function(s){return r._onAnimationDone(s)}),2&t&&(f.Ikx("id",r._config.id),f.uIk("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),f.d8E("@dialogContainer",r._getAnimationState()))},features:[f.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,r){1&t&&f.YNc(0,c7,0,0,"ng-template",0)},dependencies:[cF],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions.mat-dialog-actions-align-center,.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions.mat-dialog-actions-align-end,.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,data:{animation:[d7.dialogContainer]}}),n})();class p7{constructor(e,t,r){this._ref=e,this._containerInstance=r,this._afterOpened=new cn.x,this._beforeClosed=new cn.x,this._state=0,this.disableClose=t.disableClose,this.id=e.id,r._animationStateChanged.pipe(ni(i=>"opened"===i.state),Vs(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),r._animationStateChanged.pipe(ni(i=>"closed"===i.state),Vs(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),(0,Up.T)(this.backdropClick(),this.keydownEvents().pipe(ni(i=>27===i.keyCode&&!this.disableClose&&!tk(i)))).subscribe(i=>{this.disableClose||(i.preventDefault(),function g7(n,e,t){n._closeInteractionType=e,n.close(t)}(this,"keydown"===i.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(ni(t=>"closing"===t.state),Vs(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const m7=new f.OlP("MatDialogData"),_7=new f.OlP("mat-dialog-default-options"),U$=new f.OlP("mat-dialog-scroll-strategy"),v7={provide:U$,deps:[$v],useFactory:function y7(n){return()=>n.scrollStrategies.block()}};let w7=0,b7=(()=>{class n{constructor(t,r,i,s,u,d,g,y,E,T){this._overlay=t,this._defaultOptions=i,this._parentDialog=s,this._dialogRefConstructor=g,this._dialogContainerType=y,this._dialogDataToken=E,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new cn.x,this._afterOpenedAtThisLevel=new cn.x,this._idPrefix="mat-dialog-",this.afterAllClosed=_r(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(dl(void 0))),this._scrollStrategy=d,this._dialog=r.get(B$)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,r){let i;(r={...this._defaultOptions||new FA,...r}).id=r.id||`${this._idPrefix}${w7++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...r,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:FA,useValue:r},{provide:NA,useValue:r}]},templateContext:()=>({dialogRef:i}),providers:(u,d,g)=>(i=new this._dialogRefConstructor(u,r,g),i.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:g},{provide:this._dialogDataToken,useValue:d.data},{provide:this._dialogRefConstructor,useValue:i}])});return i.componentInstance=s.componentInstance,this.openDialogs.push(i),this.afterOpened.next(i),i.afterClosed().subscribe(()=>{const u=this.openDialogs.indexOf(i);u>-1&&(this.openDialogs.splice(u,1),this.openDialogs.length||this._getAfterAllClosed().next())}),i}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),E7=(()=>{class n extends b7{constructor(t,r,i,s,u,d,g,y){super(t,r,s,d,g,u,p7,f7,m7,y)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG($v),f.LFG(f.zs3),f.LFG(Ee,8),f.LFG(_7,8),f.LFG(U$),f.LFG(n,12),f.LFG(PA),f.LFG(f.QbO,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),C7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[E7,v7],imports:[u7,F$,OA,OT,OT]}),n})(),I7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[H3]}),n.\u0275inj=f.cJS({imports:[D3,jm,mM,F3,$6,Nr.hO.initializeApp(TB_firebase),v1,gY,yz,I1,C7]}),n})();rp().bootstrapModule(I7).catch(n=>console.error(n))},6461:(pt,ke)=>{var f;!function(){"use strict";var de=function(){this.init()};de.prototype={init:function(){var C=this||x;return C._counter=1e3,C._html5AudioPool=[],C.html5PoolSize=10,C._codecs={},C._howls=[],C._muted=!1,C._volume=1,C._canPlayEvent="canplaythrough",C._navigator=typeof window<"u"&&window.navigator?window.navigator:null,C.masterGain=null,C.noAudio=!1,C.usingWebAudio=!0,C.autoSuspend=!0,C.ctx=null,C.autoUnlock=!0,C._setup(),C},volume:function(C){var O=this||x;if(C=parseFloat(C),O.ctx||J(),typeof C<"u"&&C>=0&&C<=1){if(O._volume=C,O._muted)return O;O.usingWebAudio&&O.masterGain.gain.setValueAtTime(C,x.ctx.currentTime);for(var V=0;V<O._howls.length;V++)if(!O._howls[V]._webAudio)for(var $=O._howls[V]._getSoundIds(),ue=0;ue<$.length;ue++){var ee=O._howls[V]._soundById($[ue]);ee&&ee._node&&(ee._node.volume=ee._volume*C)}return O}return O._volume},mute:function(C){var O=this||x;O.ctx||J(),O._muted=C,O.usingWebAudio&&O.masterGain.gain.setValueAtTime(C?0:O._volume,x.ctx.currentTime);for(var V=0;V<O._howls.length;V++)if(!O._howls[V]._webAudio)for(var $=O._howls[V]._getSoundIds(),ue=0;ue<$.length;ue++){var ee=O._howls[V]._soundById($[ue]);ee&&ee._node&&(ee._node.muted=!!C||ee._muted)}return O},stop:function(){for(var C=this||x,O=0;O<C._howls.length;O++)C._howls[O].stop();return C},unload:function(){for(var C=this||x,O=C._howls.length-1;O>=0;O--)C._howls[O].unload();return C.usingWebAudio&&C.ctx&&typeof C.ctx.close<"u"&&(C.ctx.close(),C.ctx=null,J()),C},codecs:function(C){return(this||x)._codecs[C.replace(/^x-/,"")]},_setup:function(){var C=this||x;if(C.state=C.ctx&&C.ctx.state||"suspended",C._autoSuspend(),!C.usingWebAudio)if(typeof Audio<"u")try{typeof(new Audio).oncanplaythrough>"u"&&(C._canPlayEvent="canplay")}catch{C.noAudio=!0}else C.noAudio=!0;try{(new Audio).muted&&(C.noAudio=!0)}catch{}return C.noAudio||C._setupCodecs(),C},_setupCodecs:function(){var C=this||x,O=null;try{O=typeof Audio<"u"?new Audio:null}catch{return C}if(!O||"function"!=typeof O.canPlayType)return C;var V=O.canPlayType("audio/mpeg;").replace(/^no$/,""),$=C._navigator?C._navigator.userAgent:"",ue=$.match(/OPR\/([0-6].)/g),ee=ue&&parseInt(ue[0].split("/")[1],10)<33,W=-1!==$.indexOf("Safari")&&-1===$.indexOf("Chrome"),Me=$.match(/Version\/(.*?) /),Ge=W&&Me&&parseInt(Me[1],10)<15;return C._codecs={mp3:!(ee||!V&&!O.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!V,opus:!!O.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!O.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!O.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(O.canPlayType('audio/wav; codecs="1"')||O.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!O.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!O.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(O.canPlayType("audio/x-m4a;")||O.canPlayType("audio/m4a;")||O.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(O.canPlayType("audio/x-m4b;")||O.canPlayType("audio/m4b;")||O.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(O.canPlayType("audio/x-mp4;")||O.canPlayType("audio/mp4;")||O.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(Ge||!O.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(Ge||!O.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!O.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(O.canPlayType("audio/x-flac;")||O.canPlayType("audio/flac;")).replace(/^no$/,"")},C},_unlockAudio:function(){var C=this||x;if(!C._audioUnlocked&&C.ctx){C._audioUnlocked=!1,C.autoUnlock=!1,!C._mobileUnloaded&&44100!==C.ctx.sampleRate&&(C._mobileUnloaded=!0,C.unload()),C._scratchBuffer=C.ctx.createBuffer(1,1,22050);var O=function(V){for(;C._html5AudioPool.length<C.html5PoolSize;)try{var $=new Audio;$._unlocked=!0,C._releaseHtml5Audio($)}catch{C.noAudio=!0;break}for(var ue=0;ue<C._howls.length;ue++)if(!C._howls[ue]._webAudio)for(var ee=C._howls[ue]._getSoundIds(),W=0;W<ee.length;W++){var Me=C._howls[ue]._soundById(ee[W]);Me&&Me._node&&!Me._node._unlocked&&(Me._node._unlocked=!0,Me._node.load())}C._autoResume();var Ge=C.ctx.createBufferSource();Ge.buffer=C._scratchBuffer,Ge.connect(C.ctx.destination),typeof Ge.start>"u"?Ge.noteOn(0):Ge.start(0),"function"==typeof C.ctx.resume&&C.ctx.resume(),Ge.onended=function(){Ge.disconnect(0),C._audioUnlocked=!0,document.removeEventListener("touchstart",O,!0),document.removeEventListener("touchend",O,!0),document.removeEventListener("click",O,!0),document.removeEventListener("keydown",O,!0);for(var Ee=0;Ee<C._howls.length;Ee++)C._howls[Ee]._emit("unlock")}};return document.addEventListener("touchstart",O,!0),document.addEventListener("touchend",O,!0),document.addEventListener("click",O,!0),document.addEventListener("keydown",O,!0),C}},_obtainHtml5Audio:function(){var C=this||x;if(C._html5AudioPool.length)return C._html5AudioPool.pop();var O=(new Audio).play();return O&&typeof Promise<"u"&&(O instanceof Promise||"function"==typeof O.then)&&O.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(C){var O=this||x;return C._unlocked&&O._html5AudioPool.push(C),O},_autoSuspend:function(){var C=this;if(C.autoSuspend&&C.ctx&&!(typeof C.ctx.suspend>"u")&&x.usingWebAudio){for(var O=0;O<C._howls.length;O++)if(C._howls[O]._webAudio)for(var V=0;V<C._howls[O]._sounds.length;V++)if(!C._howls[O]._sounds[V]._paused)return C;return C._suspendTimer&&clearTimeout(C._suspendTimer),C._suspendTimer=setTimeout(function(){if(C.autoSuspend){C._suspendTimer=null,C.state="suspending";var $=function(){C.state="suspended",C._resumeAfterSuspend&&(delete C._resumeAfterSuspend,C._autoResume())};C.ctx.suspend().then($,$)}},3e4),C}},_autoResume:function(){var C=this;if(C.ctx&&!(typeof C.ctx.resume>"u")&&x.usingWebAudio)return"running"===C.state&&"interrupted"!==C.ctx.state&&C._suspendTimer?(clearTimeout(C._suspendTimer),C._suspendTimer=null):"suspended"===C.state||"running"===C.state&&"interrupted"===C.ctx.state?(C.ctx.resume().then(function(){C.state="running";for(var O=0;O<C._howls.length;O++)C._howls[O]._emit("resume")}),C._suspendTimer&&(clearTimeout(C._suspendTimer),C._suspendTimer=null)):"suspending"===C.state&&(C._resumeAfterSuspend=!0),C}};var x=new de,Y=function(C){C.src&&0!==C.src.length?this.init(C):console.error("An array of source files must be passed with any new Howl.")};Y.prototype={init:function(C){var O=this;return x.ctx||J(),O._autoplay=C.autoplay||!1,O._format="string"!=typeof C.format?C.format:[C.format],O._html5=C.html5||!1,O._muted=C.mute||!1,O._loop=C.loop||!1,O._pool=C.pool||5,O._preload="boolean"!=typeof C.preload&&"metadata"!==C.preload||C.preload,O._rate=C.rate||1,O._sprite=C.sprite||{},O._src="string"!=typeof C.src?C.src:[C.src],O._volume=void 0!==C.volume?C.volume:1,O._xhr={method:C.xhr&&C.xhr.method?C.xhr.method:"GET",headers:C.xhr&&C.xhr.headers?C.xhr.headers:null,withCredentials:!(!C.xhr||!C.xhr.withCredentials)&&C.xhr.withCredentials},O._duration=0,O._state="unloaded",O._sounds=[],O._endTimers={},O._queue=[],O._playLock=!1,O._onend=C.onend?[{fn:C.onend}]:[],O._onfade=C.onfade?[{fn:C.onfade}]:[],O._onload=C.onload?[{fn:C.onload}]:[],O._onloaderror=C.onloaderror?[{fn:C.onloaderror}]:[],O._onplayerror=C.onplayerror?[{fn:C.onplayerror}]:[],O._onpause=C.onpause?[{fn:C.onpause}]:[],O._onplay=C.onplay?[{fn:C.onplay}]:[],O._onstop=C.onstop?[{fn:C.onstop}]:[],O._onmute=C.onmute?[{fn:C.onmute}]:[],O._onvolume=C.onvolume?[{fn:C.onvolume}]:[],O._onrate=C.onrate?[{fn:C.onrate}]:[],O._onseek=C.onseek?[{fn:C.onseek}]:[],O._onunlock=C.onunlock?[{fn:C.onunlock}]:[],O._onresume=[],O._webAudio=x.usingWebAudio&&!O._html5,typeof x.ctx<"u"&&x.ctx&&x.autoUnlock&&x._unlockAudio(),x._howls.push(O),O._autoplay&&O._queue.push({event:"play",action:function(){O.play()}}),O._preload&&"none"!==O._preload&&O.load(),O},load:function(){var C=this,O=null;if(x.noAudio)C._emit("loaderror",null,"No audio support.");else{"string"==typeof C._src&&(C._src=[C._src]);for(var V=0;V<C._src.length;V++){var $,ue;if(C._format&&C._format[V])$=C._format[V];else{if("string"!=typeof(ue=C._src[V])){C._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}($=/^data:audio\/([^;,]+);/i.exec(ue))||($=/\.([^.]+)$/.exec(ue.split("?",1)[0])),$&&($=$[1].toLowerCase())}if($||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),$&&x.codecs($)){O=C._src[V];break}}if(O)return C._src=O,C._state="loading","https:"===window.location.protocol&&"http:"===O.slice(0,5)&&(C._html5=!0,C._webAudio=!1),new K(C),C._webAudio&&re(C),C;C._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(C,O){var V=this,$=null;if("number"==typeof C)$=C,C=null;else{if("string"==typeof C&&"loaded"===V._state&&!V._sprite[C])return null;if(typeof C>"u"&&(C="__default",!V._playLock)){for(var ue=0,ee=0;ee<V._sounds.length;ee++)V._sounds[ee]._paused&&!V._sounds[ee]._ended&&(ue++,$=V._sounds[ee]._id);1===ue?C=null:$=null}}var W=$?V._soundById($):V._inactiveSound();if(!W)return null;if($&&!C&&(C=W._sprite||"__default"),"loaded"!==V._state){W._sprite=C,W._ended=!1;var Me=W._id;return V._queue.push({event:"play",action:function(){V.play(Me)}}),Me}if($&&!W._paused)return O||V._loadQueue("play"),W._id;V._webAudio&&x._autoResume();var Ge=Math.max(0,W._seek>0?W._seek:V._sprite[C][0]/1e3),Ee=Math.max(0,(V._sprite[C][0]+V._sprite[C][1])/1e3-Ge),Ie=1e3*Ee/Math.abs(W._rate),Ae=V._sprite[C][0]/1e3,ze=(V._sprite[C][0]+V._sprite[C][1])/1e3;W._sprite=C,W._ended=!1;var qe=function(){W._paused=!1,W._seek=Ge,W._start=Ae,W._stop=ze,W._loop=!(!W._loop&&!V._sprite[C][2])};if(!(Ge>=ze)){var Q=W._node;if(V._webAudio){var Ce=function(){V._playLock=!1,qe(),V._refreshBuffer(W),Q.gain.setValueAtTime(W._muted||V._muted?0:W._volume,x.ctx.currentTime),W._playStart=x.ctx.currentTime,typeof Q.bufferSource.start>"u"?Q.bufferSource.noteGrainOn(0,Ge,W._loop?86400:Ee):Q.bufferSource.start(0,Ge,W._loop?86400:Ee),Ie!==1/0&&(V._endTimers[W._id]=setTimeout(V._ended.bind(V,W),Ie)),O||setTimeout(function(){V._emit("play",W._id),V._loadQueue()},0)};"running"===x.state&&"interrupted"!==x.ctx.state?Ce():(V._playLock=!0,V.once("resume",Ce),V._clearTimer(W._id))}else{var We=function(){Q.currentTime=Ge,Q.muted=W._muted||V._muted||x._muted||Q.muted,Q.volume=W._volume*x.volume(),Q.playbackRate=W._rate;try{var Xe=Q.play();if(Xe&&typeof Promise<"u"&&(Xe instanceof Promise||"function"==typeof Xe.then)?(V._playLock=!0,qe(),Xe.then(function(){V._playLock=!1,Q._unlocked=!0,O?V._loadQueue():V._emit("play",W._id)}).catch(function(){V._playLock=!1,V._emit("playerror",W._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),W._ended=!0,W._paused=!0})):O||(V._playLock=!1,qe(),V._emit("play",W._id)),Q.playbackRate=W._rate,Q.paused)return void V._emit("playerror",W._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==C||W._loop?V._endTimers[W._id]=setTimeout(V._ended.bind(V,W),Ie):(V._endTimers[W._id]=function(){V._ended(W),Q.removeEventListener("ended",V._endTimers[W._id],!1)},Q.addEventListener("ended",V._endTimers[W._id],!1))}catch(_e){V._emit("playerror",W._id,_e)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===Q.src&&(Q.src=V._src,Q.load());var rt=window&&window.ejecta||!Q.readyState&&x._navigator.isCocoonJS;if(Q.readyState>=3||rt)We();else{V._playLock=!0,V._state="loading";var gt=function(){V._state="loaded",We(),Q.removeEventListener(x._canPlayEvent,gt,!1)};Q.addEventListener(x._canPlayEvent,gt,!1),V._clearTimer(W._id)}}return W._id}V._ended(W)},pause:function(C){var O=this;if("loaded"!==O._state||O._playLock)return O._queue.push({event:"pause",action:function(){O.pause(C)}}),O;for(var V=O._getSoundIds(C),$=0;$<V.length;$++){O._clearTimer(V[$]);var ue=O._soundById(V[$]);if(ue&&!ue._paused&&(ue._seek=O.seek(V[$]),ue._rateSeek=0,ue._paused=!0,O._stopFade(V[$]),ue._node))if(O._webAudio){if(!ue._node.bufferSource)continue;typeof ue._node.bufferSource.stop>"u"?ue._node.bufferSource.noteOff(0):ue._node.bufferSource.stop(0),O._cleanBuffer(ue._node)}else(!isNaN(ue._node.duration)||ue._node.duration===1/0)&&ue._node.pause();arguments[1]||O._emit("pause",ue?ue._id:null)}return O},stop:function(C,O){var V=this;if("loaded"!==V._state||V._playLock)return V._queue.push({event:"stop",action:function(){V.stop(C)}}),V;for(var $=V._getSoundIds(C),ue=0;ue<$.length;ue++){V._clearTimer($[ue]);var ee=V._soundById($[ue]);ee&&(ee._seek=ee._start||0,ee._rateSeek=0,ee._paused=!0,ee._ended=!0,V._stopFade($[ue]),ee._node&&(V._webAudio?ee._node.bufferSource&&(typeof ee._node.bufferSource.stop>"u"?ee._node.bufferSource.noteOff(0):ee._node.bufferSource.stop(0),V._cleanBuffer(ee._node)):(!isNaN(ee._node.duration)||ee._node.duration===1/0)&&(ee._node.currentTime=ee._start||0,ee._node.pause(),ee._node.duration===1/0&&V._clearSound(ee._node))),O||V._emit("stop",ee._id))}return V},mute:function(C,O){var V=this;if("loaded"!==V._state||V._playLock)return V._queue.push({event:"mute",action:function(){V.mute(C,O)}}),V;if(typeof O>"u"){if("boolean"!=typeof C)return V._muted;V._muted=C}for(var $=V._getSoundIds(O),ue=0;ue<$.length;ue++){var ee=V._soundById($[ue]);ee&&(ee._muted=C,ee._interval&&V._stopFade(ee._id),V._webAudio&&ee._node?ee._node.gain.setValueAtTime(C?0:ee._volume,x.ctx.currentTime):ee._node&&(ee._node.muted=!!x._muted||C),V._emit("mute",ee._id))}return V},volume:function(){var V,$,W,C=this,O=arguments;if(0===O.length)return C._volume;if(1===O.length||2===O.length&&typeof O[1]>"u"){var ue=C._getSoundIds(),ee=ue.indexOf(O[0]);ee>=0?$=parseInt(O[0],10):V=parseFloat(O[0])}else O.length>=2&&(V=parseFloat(O[0]),$=parseInt(O[1],10));if(!(typeof V<"u"&&V>=0&&V<=1))return(W=$?C._soundById($):C._sounds[0])?W._volume:0;if("loaded"!==C._state||C._playLock)return C._queue.push({event:"volume",action:function(){C.volume.apply(C,O)}}),C;typeof $>"u"&&(C._volume=V),$=C._getSoundIds($);for(var Me=0;Me<$.length;Me++)(W=C._soundById($[Me]))&&(W._volume=V,O[2]||C._stopFade($[Me]),C._webAudio&&W._node&&!W._muted?W._node.gain.setValueAtTime(V,x.ctx.currentTime):W._node&&!W._muted&&(W._node.volume=V*x.volume()),C._emit("volume",W._id));return C},fade:function(C,O,V,$){var ue=this;if("loaded"!==ue._state||ue._playLock)return ue._queue.push({event:"fade",action:function(){ue.fade(C,O,V,$)}}),ue;C=Math.min(Math.max(0,parseFloat(C)),1),O=Math.min(Math.max(0,parseFloat(O)),1),V=parseFloat(V),ue.volume(C,$);for(var ee=ue._getSoundIds($),W=0;W<ee.length;W++){var Me=ue._soundById(ee[W]);if(Me){if($||ue._stopFade(ee[W]),ue._webAudio&&!Me._muted){var Ge=x.ctx.currentTime,Ee=Ge+V/1e3;Me._volume=C,Me._node.gain.setValueAtTime(C,Ge),Me._node.gain.linearRampToValueAtTime(O,Ee)}ue._startFadeInterval(Me,C,O,V,ee[W],typeof $>"u")}}return ue},_startFadeInterval:function(C,O,V,$,ue,ee){var W=this,Me=O,Ge=V-O,Ee=Math.abs(Ge/.01),Ie=Math.max(4,Ee>0?$/Ee:$),Ae=Date.now();C._fadeTo=V,C._interval=setInterval(function(){var ze=(Date.now()-Ae)/$;Ae=Date.now(),Me+=Ge*ze,Me=Math.round(100*Me)/100,Me=Ge<0?Math.max(V,Me):Math.min(V,Me),W._webAudio?C._volume=Me:W.volume(Me,C._id,!0),ee&&(W._volume=Me),(V<O&&Me<=V||V>O&&Me>=V)&&(clearInterval(C._interval),C._interval=null,C._fadeTo=null,W.volume(V,C._id),W._emit("fade",C._id))},Ie)},_stopFade:function(C){var O=this,V=O._soundById(C);return V&&V._interval&&(O._webAudio&&V._node.gain.cancelScheduledValues(x.ctx.currentTime),clearInterval(V._interval),V._interval=null,O.volume(V._fadeTo,C),V._fadeTo=null,O._emit("fade",C)),O},loop:function(){var V,$,ue,C=this,O=arguments;if(0===O.length)return C._loop;if(1===O.length){if("boolean"!=typeof O[0])return!!(ue=C._soundById(parseInt(O[0],10)))&&ue._loop;C._loop=V=O[0]}else 2===O.length&&(V=O[0],$=parseInt(O[1],10));for(var ee=C._getSoundIds($),W=0;W<ee.length;W++)(ue=C._soundById(ee[W]))&&(ue._loop=V,C._webAudio&&ue._node&&ue._node.bufferSource&&(ue._node.bufferSource.loop=V,V&&(ue._node.bufferSource.loopStart=ue._start||0,ue._node.bufferSource.loopEnd=ue._stop,C.playing(ee[W])&&(C.pause(ee[W],!0),C.play(ee[W],!0)))));return C},rate:function(){var V,$,W,C=this,O=arguments;if(0===O.length)$=C._sounds[0]._id;else if(1===O.length){var ue=C._getSoundIds(),ee=ue.indexOf(O[0]);ee>=0?$=parseInt(O[0],10):V=parseFloat(O[0])}else 2===O.length&&(V=parseFloat(O[0]),$=parseInt(O[1],10));if("number"!=typeof V)return(W=C._soundById($))?W._rate:C._rate;if("loaded"!==C._state||C._playLock)return C._queue.push({event:"rate",action:function(){C.rate.apply(C,O)}}),C;typeof $>"u"&&(C._rate=V),$=C._getSoundIds($);for(var Me=0;Me<$.length;Me++)if(W=C._soundById($[Me])){C.playing($[Me])&&(W._rateSeek=C.seek($[Me]),W._playStart=C._webAudio?x.ctx.currentTime:W._playStart),W._rate=V,C._webAudio&&W._node&&W._node.bufferSource?W._node.bufferSource.playbackRate.setValueAtTime(V,x.ctx.currentTime):W._node&&(W._node.playbackRate=V);var Ge=C.seek($[Me]),Ee=(C._sprite[W._sprite][0]+C._sprite[W._sprite][1])/1e3-Ge,Ie=1e3*Ee/Math.abs(W._rate);(C._endTimers[$[Me]]||!W._paused)&&(C._clearTimer($[Me]),C._endTimers[$[Me]]=setTimeout(C._ended.bind(C,W),Ie)),C._emit("rate",W._id)}return C},seek:function(){var V,$,C=this,O=arguments;if(0===O.length)C._sounds.length&&($=C._sounds[0]._id);else if(1===O.length){var ue=C._getSoundIds(),ee=ue.indexOf(O[0]);ee>=0?$=parseInt(O[0],10):C._sounds.length&&($=C._sounds[0]._id,V=parseFloat(O[0]))}else 2===O.length&&(V=parseFloat(O[0]),$=parseInt(O[1],10));if(typeof $>"u")return 0;if("number"==typeof V&&("loaded"!==C._state||C._playLock))return C._queue.push({event:"seek",action:function(){C.seek.apply(C,O)}}),C;var W=C._soundById($);if(W){if(!("number"==typeof V&&V>=0)){if(C._webAudio){var Ie=C.playing($)?x.ctx.currentTime-W._playStart:0,Ae=W._rateSeek?W._rateSeek-W._seek:0;return W._seek+(Ae+Ie*Math.abs(W._rate))}return W._node.currentTime}var Me=C.playing($);Me&&C.pause($,!0),W._seek=V,W._ended=!1,C._clearTimer($),!C._webAudio&&W._node&&!isNaN(W._node.duration)&&(W._node.currentTime=V);var Ge=function(){Me&&C.play($,!0),C._emit("seek",$)};if(Me&&!C._webAudio){var Ee=function(){C._playLock?setTimeout(Ee,0):Ge()};setTimeout(Ee,0)}else Ge()}return C},playing:function(C){var O=this;if("number"==typeof C){var V=O._soundById(C);return!!V&&!V._paused}for(var $=0;$<O._sounds.length;$++)if(!O._sounds[$]._paused)return!0;return!1},duration:function(C){var O=this,V=O._duration,$=O._soundById(C);return $&&(V=O._sprite[$._sprite][1]/1e3),V},state:function(){return this._state},unload:function(){for(var C=this,O=C._sounds,V=0;V<O.length;V++)O[V]._paused||C.stop(O[V]._id),C._webAudio||(C._clearSound(O[V]._node),O[V]._node.removeEventListener("error",O[V]._errorFn,!1),O[V]._node.removeEventListener(x._canPlayEvent,O[V]._loadFn,!1),O[V]._node.removeEventListener("ended",O[V]._endFn,!1),x._releaseHtml5Audio(O[V]._node)),delete O[V]._node,C._clearTimer(O[V]._id);var $=x._howls.indexOf(C);$>=0&&x._howls.splice($,1);var ue=!0;for(V=0;V<x._howls.length;V++)if(x._howls[V]._src===C._src||C._src.indexOf(x._howls[V]._src)>=0){ue=!1;break}return ae&&ue&&delete ae[C._src],x.noAudio=!1,C._state="unloaded",C._sounds=[],C=null,null},on:function(C,O,V,$){return"function"==typeof O&&this["_on"+C].push($?{id:V,fn:O,once:$}:{id:V,fn:O}),this},off:function(C,O,V){var $=this,ue=$["_on"+C],ee=0;if("number"==typeof O&&(V=O,O=null),O||V)for(ee=0;ee<ue.length;ee++){var W=V===ue[ee].id;if(O===ue[ee].fn&&W||!O&&W){ue.splice(ee,1);break}}else if(C)$["_on"+C]=[];else{var Me=Object.keys($);for(ee=0;ee<Me.length;ee++)0===Me[ee].indexOf("_on")&&Array.isArray($[Me[ee]])&&($[Me[ee]]=[])}return $},once:function(C,O,V){return this.on(C,O,V,1),this},_emit:function(C,O,V){for(var $=this,ue=$["_on"+C],ee=ue.length-1;ee>=0;ee--)(!ue[ee].id||ue[ee].id===O||"load"===C)&&(setTimeout(function(W){W.call(this,O,V)}.bind($,ue[ee].fn),0),ue[ee].once&&$.off(C,ue[ee].fn,ue[ee].id));return $._loadQueue(C),$},_loadQueue:function(C){var O=this;if(O._queue.length>0){var V=O._queue[0];V.event===C&&(O._queue.shift(),O._loadQueue()),C||V.action()}return O},_ended:function(C){var O=this,V=C._sprite;if(!O._webAudio&&C._node&&!C._node.paused&&!C._node.ended&&C._node.currentTime<C._stop)return setTimeout(O._ended.bind(O,C),100),O;var $=!(!C._loop&&!O._sprite[V][2]);if(O._emit("end",C._id),!O._webAudio&&$&&O.stop(C._id,!0).play(C._id),O._webAudio&&$){O._emit("play",C._id),C._seek=C._start||0,C._rateSeek=0,C._playStart=x.ctx.currentTime;var ue=1e3*(C._stop-C._start)/Math.abs(C._rate);O._endTimers[C._id]=setTimeout(O._ended.bind(O,C),ue)}return O._webAudio&&!$&&(C._paused=!0,C._ended=!0,C._seek=C._start||0,C._rateSeek=0,O._clearTimer(C._id),O._cleanBuffer(C._node),x._autoSuspend()),!O._webAudio&&!$&&O.stop(C._id,!0),O},_clearTimer:function(C){var O=this;if(O._endTimers[C]){if("function"!=typeof O._endTimers[C])clearTimeout(O._endTimers[C]);else{var V=O._soundById(C);V&&V._node&&V._node.removeEventListener("ended",O._endTimers[C],!1)}delete O._endTimers[C]}return O},_soundById:function(C){for(var O=this,V=0;V<O._sounds.length;V++)if(C===O._sounds[V]._id)return O._sounds[V];return null},_inactiveSound:function(){var C=this;C._drain();for(var O=0;O<C._sounds.length;O++)if(C._sounds[O]._ended)return C._sounds[O].reset();return new K(C)},_drain:function(){var C=this,O=C._pool,V=0,$=0;if(!(C._sounds.length<O)){for($=0;$<C._sounds.length;$++)C._sounds[$]._ended&&V++;for($=C._sounds.length-1;$>=0;$--){if(V<=O)return;C._sounds[$]._ended&&(C._webAudio&&C._sounds[$]._node&&C._sounds[$]._node.disconnect(0),C._sounds.splice($,1),V--)}}},_getSoundIds:function(C){if(typeof C>"u"){for(var V=[],$=0;$<this._sounds.length;$++)V.push(this._sounds[$]._id);return V}return[C]},_refreshBuffer:function(C){return C._node.bufferSource=x.ctx.createBufferSource(),C._node.bufferSource.buffer=ae[this._src],C._node.bufferSource.connect(C._panner?C._panner:C._node),C._node.bufferSource.loop=C._loop,C._loop&&(C._node.bufferSource.loopStart=C._start||0,C._node.bufferSource.loopEnd=C._stop||0),C._node.bufferSource.playbackRate.setValueAtTime(C._rate,x.ctx.currentTime),this},_cleanBuffer:function(C){var V=x._navigator&&x._navigator.vendor.indexOf("Apple")>=0;if(x._scratchBuffer&&C.bufferSource&&(C.bufferSource.onended=null,C.bufferSource.disconnect(0),V))try{C.bufferSource.buffer=x._scratchBuffer}catch{}return C.bufferSource=null,this},_clearSound:function(C){/MSIE |Trident\//.test(x._navigator&&x._navigator.userAgent)||(C.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var K=function(C){this._parent=C,this.init()};K.prototype={init:function(){var C=this,O=C._parent;return C._muted=O._muted,C._loop=O._loop,C._volume=O._volume,C._rate=O._rate,C._seek=0,C._paused=!0,C._ended=!0,C._sprite="__default",C._id=++x._counter,O._sounds.push(C),C.create(),C},create:function(){var C=this,O=C._parent,V=x._muted||C._muted||C._parent._muted?0:C._volume;return O._webAudio?(C._node=typeof x.ctx.createGain>"u"?x.ctx.createGainNode():x.ctx.createGain(),C._node.gain.setValueAtTime(V,x.ctx.currentTime),C._node.paused=!0,C._node.connect(x.masterGain)):x.noAudio||(C._node=x._obtainHtml5Audio(),C._errorFn=C._errorListener.bind(C),C._node.addEventListener("error",C._errorFn,!1),C._loadFn=C._loadListener.bind(C),C._node.addEventListener(x._canPlayEvent,C._loadFn,!1),C._endFn=C._endListener.bind(C),C._node.addEventListener("ended",C._endFn,!1),C._node.src=O._src,C._node.preload=!0===O._preload?"auto":O._preload,C._node.volume=V*x.volume(),C._node.load()),C},reset:function(){var C=this,O=C._parent;return C._muted=O._muted,C._loop=O._loop,C._volume=O._volume,C._rate=O._rate,C._seek=0,C._rateSeek=0,C._paused=!0,C._ended=!0,C._sprite="__default",C._id=++x._counter,C},_errorListener:function(){var C=this;C._parent._emit("loaderror",C._id,C._node.error?C._node.error.code:0),C._node.removeEventListener("error",C._errorFn,!1)},_loadListener:function(){var C=this,O=C._parent;O._duration=Math.ceil(10*C._node.duration)/10,0===Object.keys(O._sprite).length&&(O._sprite={__default:[0,1e3*O._duration]}),"loaded"!==O._state&&(O._state="loaded",O._emit("load"),O._loadQueue()),C._node.removeEventListener(x._canPlayEvent,C._loadFn,!1)},_endListener:function(){var C=this,O=C._parent;O._duration===1/0&&(O._duration=Math.ceil(10*C._node.duration)/10,O._sprite.__default[1]===1/0&&(O._sprite.__default[1]=1e3*O._duration),O._ended(C)),C._node.removeEventListener("ended",C._endFn,!1)}};var ae={},re=function(C){var O=C._src;if(ae[O])return C._duration=ae[O].duration,void z(C);if(/^data:[^;]+;base64,/.test(O)){for(var V=atob(O.split(",")[1]),$=new Uint8Array(V.length),ue=0;ue<V.length;++ue)$[ue]=V.charCodeAt(ue);ce($.buffer,C)}else{var ee=new XMLHttpRequest;ee.open(C._xhr.method,O,!0),ee.withCredentials=C._xhr.withCredentials,ee.responseType="arraybuffer",C._xhr.headers&&Object.keys(C._xhr.headers).forEach(function(W){ee.setRequestHeader(W,C._xhr.headers[W])}),ee.onload=function(){var W=(ee.status+"")[0];"0"===W||"2"===W||"3"===W?ce(ee.response,C):C._emit("loaderror",null,"Failed loading audio file with status: "+ee.status+".")},ee.onerror=function(){C._webAudio&&(C._html5=!0,C._webAudio=!1,C._sounds=[],delete ae[O],C.load())},me(ee)}},me=function(C){try{C.send()}catch{C.onerror()}},ce=function(C,O){var V=function(){O._emit("loaderror",null,"Decoding audio data failed.")},$=function(ue){ue&&O._sounds.length>0?(ae[O._src]=ue,z(O,ue)):V()};typeof Promise<"u"&&1===x.ctx.decodeAudioData.length?x.ctx.decodeAudioData(C).then($).catch(V):x.ctx.decodeAudioData(C,$,V)},z=function(C,O){O&&!C._duration&&(C._duration=O.duration),0===Object.keys(C._sprite).length&&(C._sprite={__default:[0,1e3*C._duration]}),"loaded"!==C._state&&(C._state="loaded",C._emit("load"),C._loadQueue())},J=function(){if(x.usingWebAudio){try{typeof AudioContext<"u"?x.ctx=new AudioContext:typeof webkitAudioContext<"u"?x.ctx=new webkitAudioContext:x.usingWebAudio=!1}catch{x.usingWebAudio=!1}x.ctx||(x.usingWebAudio=!1);var C=/iP(hone|od|ad)/.test(x._navigator&&x._navigator.platform),O=x._navigator&&x._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),V=O?parseInt(O[1],10):null;if(C&&V&&V<9){var $=/safari/.test(x._navigator&&x._navigator.userAgent.toLowerCase());x._navigator&&!$&&(x.usingWebAudio=!1)}x.usingWebAudio&&(x.masterGain=typeof x.ctx.createGain>"u"?x.ctx.createGainNode():x.ctx.createGain(),x.masterGain.gain.setValueAtTime(x._muted?0:x._volume,x.ctx.currentTime),x.masterGain.connect(x.ctx.destination)),x._setup()}};void 0!==(f=function(){return{Howler:x,Howl:Y}}.apply(ke,[]))&&(pt.exports=f),ke.Howler=x,ke.Howl=Y,typeof global<"u"?(global.HowlerGlobal=de,global.Howler=x,global.Howl=Y,global.Sound=K):typeof window<"u"&&(window.HowlerGlobal=de,window.Howler=x,window.Howl=Y,window.Sound=K)}(),function(){"use strict";var x;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(x){var Y=this;if(!Y.ctx||!Y.ctx.listener)return Y;for(var K=Y._howls.length-1;K>=0;K--)Y._howls[K].stereo(x);return Y},HowlerGlobal.prototype.pos=function(x,Y,K){var ae=this;return ae.ctx&&ae.ctx.listener?"number"!=typeof x?ae._pos:(ae._pos=[x,Y="number"!=typeof Y?ae._pos[1]:Y,K="number"!=typeof K?ae._pos[2]:K],typeof ae.ctx.listener.positionX<"u"?(ae.ctx.listener.positionX.setTargetAtTime(ae._pos[0],Howler.ctx.currentTime,.1),ae.ctx.listener.positionY.setTargetAtTime(ae._pos[1],Howler.ctx.currentTime,.1),ae.ctx.listener.positionZ.setTargetAtTime(ae._pos[2],Howler.ctx.currentTime,.1)):ae.ctx.listener.setPosition(ae._pos[0],ae._pos[1],ae._pos[2]),ae):ae},HowlerGlobal.prototype.orientation=function(x,Y,K,ae,re,me){var ce=this;if(!ce.ctx||!ce.ctx.listener)return ce;var z=ce._orientation;return"number"!=typeof x?z:(ce._orientation=[x,Y="number"!=typeof Y?z[1]:Y,K="number"!=typeof K?z[2]:K,ae="number"!=typeof ae?z[3]:ae,re="number"!=typeof re?z[4]:re,me="number"!=typeof me?z[5]:me],typeof ce.ctx.listener.forwardX<"u"?(ce.ctx.listener.forwardX.setTargetAtTime(x,Howler.ctx.currentTime,.1),ce.ctx.listener.forwardY.setTargetAtTime(Y,Howler.ctx.currentTime,.1),ce.ctx.listener.forwardZ.setTargetAtTime(K,Howler.ctx.currentTime,.1),ce.ctx.listener.upX.setTargetAtTime(ae,Howler.ctx.currentTime,.1),ce.ctx.listener.upY.setTargetAtTime(re,Howler.ctx.currentTime,.1),ce.ctx.listener.upZ.setTargetAtTime(me,Howler.ctx.currentTime,.1)):ce.ctx.listener.setOrientation(x,Y,K,ae,re,me),ce)},Howl.prototype.init=(x=Howl.prototype.init,function(Y){var K=this;return K._orientation=Y.orientation||[1,0,0],K._stereo=Y.stereo||null,K._pos=Y.pos||null,K._pannerAttr={coneInnerAngle:typeof Y.coneInnerAngle<"u"?Y.coneInnerAngle:360,coneOuterAngle:typeof Y.coneOuterAngle<"u"?Y.coneOuterAngle:360,coneOuterGain:typeof Y.coneOuterGain<"u"?Y.coneOuterGain:0,distanceModel:typeof Y.distanceModel<"u"?Y.distanceModel:"inverse",maxDistance:typeof Y.maxDistance<"u"?Y.maxDistance:1e4,panningModel:typeof Y.panningModel<"u"?Y.panningModel:"HRTF",refDistance:typeof Y.refDistance<"u"?Y.refDistance:1,rolloffFactor:typeof Y.rolloffFactor<"u"?Y.rolloffFactor:1},K._onstereo=Y.onstereo?[{fn:Y.onstereo}]:[],K._onpos=Y.onpos?[{fn:Y.onpos}]:[],K._onorientation=Y.onorientation?[{fn:Y.onorientation}]:[],x.call(this,Y)}),Howl.prototype.stereo=function(x,Y){var K=this;if(!K._webAudio)return K;if("loaded"!==K._state)return K._queue.push({event:"stereo",action:function(){K.stereo(x,Y)}}),K;var ae=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof Y>"u"){if("number"!=typeof x)return K._stereo;K._stereo=x,K._pos=[x,0,0]}for(var re=K._getSoundIds(Y),me=0;me<re.length;me++){var ce=K._soundById(re[me]);if(ce){if("number"!=typeof x)return ce._stereo;ce._stereo=x,ce._pos=[x,0,0],ce._node&&(ce._pannerAttr.panningModel="equalpower",(!ce._panner||!ce._panner.pan)&&de(ce,ae),"spatial"===ae?typeof ce._panner.positionX<"u"?(ce._panner.positionX.setValueAtTime(x,Howler.ctx.currentTime),ce._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),ce._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):ce._panner.setPosition(x,0,0):ce._panner.pan.setValueAtTime(x,Howler.ctx.currentTime)),K._emit("stereo",ce._id)}}return K},Howl.prototype.pos=function(x,Y,K,ae){var re=this;if(!re._webAudio)return re;if("loaded"!==re._state)return re._queue.push({event:"pos",action:function(){re.pos(x,Y,K,ae)}}),re;if(Y="number"!=typeof Y?0:Y,K="number"!=typeof K?-.5:K,typeof ae>"u"){if("number"!=typeof x)return re._pos;re._pos=[x,Y,K]}for(var me=re._getSoundIds(ae),ce=0;ce<me.length;ce++){var z=re._soundById(me[ce]);if(z){if("number"!=typeof x)return z._pos;z._pos=[x,Y,K],z._node&&((!z._panner||z._panner.pan)&&de(z,"spatial"),typeof z._panner.positionX<"u"?(z._panner.positionX.setValueAtTime(x,Howler.ctx.currentTime),z._panner.positionY.setValueAtTime(Y,Howler.ctx.currentTime),z._panner.positionZ.setValueAtTime(K,Howler.ctx.currentTime)):z._panner.setPosition(x,Y,K)),re._emit("pos",z._id)}}return re},Howl.prototype.orientation=function(x,Y,K,ae){var re=this;if(!re._webAudio)return re;if("loaded"!==re._state)return re._queue.push({event:"orientation",action:function(){re.orientation(x,Y,K,ae)}}),re;if(Y="number"!=typeof Y?re._orientation[1]:Y,K="number"!=typeof K?re._orientation[2]:K,typeof ae>"u"){if("number"!=typeof x)return re._orientation;re._orientation=[x,Y,K]}for(var me=re._getSoundIds(ae),ce=0;ce<me.length;ce++){var z=re._soundById(me[ce]);if(z){if("number"!=typeof x)return z._orientation;z._orientation=[x,Y,K],z._node&&(z._panner||(z._pos||(z._pos=re._pos||[0,0,-.5]),de(z,"spatial")),typeof z._panner.orientationX<"u"?(z._panner.orientationX.setValueAtTime(x,Howler.ctx.currentTime),z._panner.orientationY.setValueAtTime(Y,Howler.ctx.currentTime),z._panner.orientationZ.setValueAtTime(K,Howler.ctx.currentTime)):z._panner.setOrientation(x,Y,K)),re._emit("orientation",z._id)}}return re},Howl.prototype.pannerAttr=function(){var K,ae,re,x=this,Y=arguments;if(!x._webAudio)return x;if(0===Y.length)return x._pannerAttr;if(1===Y.length){if("object"!=typeof Y[0])return(re=x._soundById(parseInt(Y[0],10)))?re._pannerAttr:x._pannerAttr;K=Y[0],typeof ae>"u"&&(K.pannerAttr||(K.pannerAttr={coneInnerAngle:K.coneInnerAngle,coneOuterAngle:K.coneOuterAngle,coneOuterGain:K.coneOuterGain,distanceModel:K.distanceModel,maxDistance:K.maxDistance,refDistance:K.refDistance,rolloffFactor:K.rolloffFactor,panningModel:K.panningModel}),x._pannerAttr={coneInnerAngle:typeof K.pannerAttr.coneInnerAngle<"u"?K.pannerAttr.coneInnerAngle:x._coneInnerAngle,coneOuterAngle:typeof K.pannerAttr.coneOuterAngle<"u"?K.pannerAttr.coneOuterAngle:x._coneOuterAngle,coneOuterGain:typeof K.pannerAttr.coneOuterGain<"u"?K.pannerAttr.coneOuterGain:x._coneOuterGain,distanceModel:typeof K.pannerAttr.distanceModel<"u"?K.pannerAttr.distanceModel:x._distanceModel,maxDistance:typeof K.pannerAttr.maxDistance<"u"?K.pannerAttr.maxDistance:x._maxDistance,refDistance:typeof K.pannerAttr.refDistance<"u"?K.pannerAttr.refDistance:x._refDistance,rolloffFactor:typeof K.pannerAttr.rolloffFactor<"u"?K.pannerAttr.rolloffFactor:x._rolloffFactor,panningModel:typeof K.pannerAttr.panningModel<"u"?K.pannerAttr.panningModel:x._panningModel})}else 2===Y.length&&(K=Y[0],ae=parseInt(Y[1],10));for(var me=x._getSoundIds(ae),ce=0;ce<me.length;ce++)if(re=x._soundById(me[ce])){var z=re._pannerAttr;z={coneInnerAngle:typeof K.coneInnerAngle<"u"?K.coneInnerAngle:z.coneInnerAngle,coneOuterAngle:typeof K.coneOuterAngle<"u"?K.coneOuterAngle:z.coneOuterAngle,coneOuterGain:typeof K.coneOuterGain<"u"?K.coneOuterGain:z.coneOuterGain,distanceModel:typeof K.distanceModel<"u"?K.distanceModel:z.distanceModel,maxDistance:typeof K.maxDistance<"u"?K.maxDistance:z.maxDistance,refDistance:typeof K.refDistance<"u"?K.refDistance:z.refDistance,rolloffFactor:typeof K.rolloffFactor<"u"?K.rolloffFactor:z.rolloffFactor,panningModel:typeof K.panningModel<"u"?K.panningModel:z.panningModel};var J=re._panner;J?(J.coneInnerAngle=z.coneInnerAngle,J.coneOuterAngle=z.coneOuterAngle,J.coneOuterGain=z.coneOuterGain,J.distanceModel=z.distanceModel,J.maxDistance=z.maxDistance,J.refDistance=z.refDistance,J.rolloffFactor=z.rolloffFactor,J.panningModel=z.panningModel):(re._pos||(re._pos=x._pos||[0,0,-.5]),de(re,"spatial"))}return x},Sound.prototype.init=function(x){return function(){var Y=this,K=Y._parent;Y._orientation=K._orientation,Y._stereo=K._stereo,Y._pos=K._pos,Y._pannerAttr=K._pannerAttr,x.call(this),Y._stereo?K.stereo(Y._stereo):Y._pos&&K.pos(Y._pos[0],Y._pos[1],Y._pos[2],Y._id)}}(Sound.prototype.init),Sound.prototype.reset=function(x){return function(){var Y=this,K=Y._parent;return Y._orientation=K._orientation,Y._stereo=K._stereo,Y._pos=K._pos,Y._pannerAttr=K._pannerAttr,Y._stereo?K.stereo(Y._stereo):Y._pos?K.pos(Y._pos[0],Y._pos[1],Y._pos[2],Y._id):Y._panner&&(Y._panner.disconnect(0),Y._panner=void 0,K._refreshBuffer(Y)),x.call(this)}}(Sound.prototype.reset);var de=function(x,Y){"spatial"===(Y=Y||"spatial")?(x._panner=Howler.ctx.createPanner(),x._panner.coneInnerAngle=x._pannerAttr.coneInnerAngle,x._panner.coneOuterAngle=x._pannerAttr.coneOuterAngle,x._panner.coneOuterGain=x._pannerAttr.coneOuterGain,x._panner.distanceModel=x._pannerAttr.distanceModel,x._panner.maxDistance=x._pannerAttr.maxDistance,x._panner.refDistance=x._pannerAttr.refDistance,x._panner.rolloffFactor=x._pannerAttr.rolloffFactor,x._panner.panningModel=x._pannerAttr.panningModel,typeof x._panner.positionX<"u"?(x._panner.positionX.setValueAtTime(x._pos[0],Howler.ctx.currentTime),x._panner.positionY.setValueAtTime(x._pos[1],Howler.ctx.currentTime),x._panner.positionZ.setValueAtTime(x._pos[2],Howler.ctx.currentTime)):x._panner.setPosition(x._pos[0],x._pos[1],x._pos[2]),typeof x._panner.orientationX<"u"?(x._panner.orientationX.setValueAtTime(x._orientation[0],Howler.ctx.currentTime),x._panner.orientationY.setValueAtTime(x._orientation[1],Howler.ctx.currentTime),x._panner.orientationZ.setValueAtTime(x._orientation[2],Howler.ctx.currentTime)):x._panner.setOrientation(x._orientation[0],x._orientation[1],x._orientation[2])):(x._panner=Howler.ctx.createStereoPanner(),x._panner.pan.setValueAtTime(x._stereo,Howler.ctx.currentTime)),x._panner.connect(x._node),x._paused||x._parent.pause(x._id,!0).play(x._id,!0)}}()},9751:(pt,ke,j)=>{"use strict";j.d(ke,{y:()=>me});var f=j(930),de=j(727),x=j(8822),Y=j(9635),K=j(2416),ae=j(576),re=j(2806);let me=(()=>{class C{constructor(V){V&&(this._subscribe=V)}lift(V){const $=new C;return $.source=this,$.operator=V,$}subscribe(V,$,ue){const ee=function J(C){return C&&C instanceof f.Lv||function z(C){return C&&(0,ae.m)(C.next)&&(0,ae.m)(C.error)&&(0,ae.m)(C.complete)}(C)&&(0,de.Nn)(C)}(V)?V:new f.Hp(V,$,ue);return(0,re.x)(()=>{const{operator:W,source:Me}=this;ee.add(W?W.call(ee,Me):Me?this._subscribe(ee):this._trySubscribe(ee))}),ee}_trySubscribe(V){try{return this._subscribe(V)}catch($){V.error($)}}forEach(V,$){return new($=ce($))((ue,ee)=>{const W=new f.Hp({next:Me=>{try{V(Me)}catch(Ge){ee(Ge),W.unsubscribe()}},error:ee,complete:ue});this.subscribe(W)})}_subscribe(V){var $;return null===($=this.source)||void 0===$?void 0:$.subscribe(V)}[x.L](){return this}pipe(...V){return(0,Y.U)(V)(this)}toPromise(V){return new(V=ce(V))(($,ue)=>{let ee;this.subscribe(W=>ee=W,W=>ue(W),()=>$(ee))})}}return C.create=O=>new C(O),C})();function ce(C){var O;return null!==(O=C??K.v.Promise)&&void 0!==O?O:Promise}},7579:(pt,ke,j)=>{"use strict";j.d(ke,{x:()=>re});var f=j(9751),de=j(727);const Y=(0,j(3888).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var K=j(8737),ae=j(2806);let re=(()=>{class ce extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(J){const C=new me(this,this);return C.operator=J,C}_throwIfClosed(){if(this.closed)throw new Y}next(J){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const C of this.currentObservers)C.next(J)}})}error(J){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=J;const{observers:C}=this;for(;C.length;)C.shift().error(J)}})}complete(){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:J}=this;for(;J.length;)J.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var J;return(null===(J=this.observers)||void 0===J?void 0:J.length)>0}_trySubscribe(J){return this._throwIfClosed(),super._trySubscribe(J)}_subscribe(J){return this._throwIfClosed(),this._checkFinalizedStatuses(J),this._innerSubscribe(J)}_innerSubscribe(J){const{hasError:C,isStopped:O,observers:V}=this;return C||O?de.Lc:(this.currentObservers=null,V.push(J),new de.w0(()=>{this.currentObservers=null,(0,K.P)(V,J)}))}_checkFinalizedStatuses(J){const{hasError:C,thrownError:O,isStopped:V}=this;C?J.error(O):V&&J.complete()}asObservable(){const J=new f.y;return J.source=this,J}}return ce.create=(z,J)=>new me(z,J),ce})();class me extends re{constructor(z,J){super(),this.destination=z,this.source=J}next(z){var J,C;null===(C=null===(J=this.destination)||void 0===J?void 0:J.next)||void 0===C||C.call(J,z)}error(z){var J,C;null===(C=null===(J=this.destination)||void 0===J?void 0:J.error)||void 0===C||C.call(J,z)}complete(){var z,J;null===(J=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===J||J.call(z)}_subscribe(z){var J,C;return null!==(C=null===(J=this.source)||void 0===J?void 0:J.subscribe(z))&&void 0!==C?C:de.Lc}}},930:(pt,ke,j)=>{"use strict";j.d(ke,{Hp:()=>ue,Lv:()=>C});var f=j(576),de=j(727),x=j(2416),Y=j(7849),K=j(5032);const ae=ce("C",void 0,void 0);function ce(Ee,Ie,Ae){return{kind:Ee,value:Ie,error:Ae}}var z=j(3410),J=j(2806);class C extends de.w0{constructor(Ie){super(),this.isStopped=!1,Ie?(this.destination=Ie,(0,de.Nn)(Ie)&&Ie.add(this)):this.destination=Ge}static create(Ie,Ae,ze){return new ue(Ie,Ae,ze)}next(Ie){this.isStopped?Me(function me(Ee){return ce("N",Ee,void 0)}(Ie),this):this._next(Ie)}error(Ie){this.isStopped?Me(function re(Ee){return ce("E",void 0,Ee)}(Ie),this):(this.isStopped=!0,this._error(Ie))}complete(){this.isStopped?Me(ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ie){this.destination.next(Ie)}_error(Ie){try{this.destination.error(Ie)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const O=Function.prototype.bind;function V(Ee,Ie){return O.call(Ee,Ie)}class ${constructor(Ie){this.partialObserver=Ie}next(Ie){const{partialObserver:Ae}=this;if(Ae.next)try{Ae.next(Ie)}catch(ze){ee(ze)}}error(Ie){const{partialObserver:Ae}=this;if(Ae.error)try{Ae.error(Ie)}catch(ze){ee(ze)}else ee(Ie)}complete(){const{partialObserver:Ie}=this;if(Ie.complete)try{Ie.complete()}catch(Ae){ee(Ae)}}}class ue extends C{constructor(Ie,Ae,ze){let qe;if(super(),(0,f.m)(Ie)||!Ie)qe={next:Ie??void 0,error:Ae??void 0,complete:ze??void 0};else{let Q;this&&x.v.useDeprecatedNextContext?(Q=Object.create(Ie),Q.unsubscribe=()=>this.unsubscribe(),qe={next:Ie.next&&V(Ie.next,Q),error:Ie.error&&V(Ie.error,Q),complete:Ie.complete&&V(Ie.complete,Q)}):qe=Ie}this.destination=new $(qe)}}function ee(Ee){x.v.useDeprecatedSynchronousErrorHandling?(0,J.O)(Ee):(0,Y.h)(Ee)}function Me(Ee,Ie){const{onStoppedNotification:Ae}=x.v;Ae&&z.z.setTimeout(()=>Ae(Ee,Ie))}const Ge={closed:!0,next:K.Z,error:function W(Ee){throw Ee},complete:K.Z}},727:(pt,ke,j)=>{"use strict";j.d(ke,{Lc:()=>ae,w0:()=>K,Nn:()=>re});var f=j(576);const x=(0,j(3888).d)(ce=>function(J){ce(this),this.message=J?`${J.length} errors occurred during unsubscription:\n${J.map((C,O)=>`${O+1}) ${C.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=J});var Y=j(8737);class K{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:J}=this;if(J)if(this._parentage=null,Array.isArray(J))for(const V of J)V.remove(this);else J.remove(this);const{initialTeardown:C}=this;if((0,f.m)(C))try{C()}catch(V){z=V instanceof x?V.errors:[V]}const{_finalizers:O}=this;if(O){this._finalizers=null;for(const V of O)try{me(V)}catch($){z=z??[],$ instanceof x?z=[...z,...$.errors]:z.push($)}}if(z)throw new x(z)}}add(z){var J;if(z&&z!==this)if(this.closed)me(z);else{if(z instanceof K){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(J=this._finalizers)&&void 0!==J?J:[]).push(z)}}_hasParent(z){const{_parentage:J}=this;return J===z||Array.isArray(J)&&J.includes(z)}_addParent(z){const{_parentage:J}=this;this._parentage=Array.isArray(J)?(J.push(z),J):J?[J,z]:z}_removeParent(z){const{_parentage:J}=this;J===z?this._parentage=null:Array.isArray(J)&&(0,Y.P)(J,z)}remove(z){const{_finalizers:J}=this;J&&(0,Y.P)(J,z),z instanceof K&&z._removeParent(this)}}K.EMPTY=(()=>{const ce=new K;return ce.closed=!0,ce})();const ae=K.EMPTY;function re(ce){return ce instanceof K||ce&&"closed"in ce&&(0,f.m)(ce.remove)&&(0,f.m)(ce.add)&&(0,f.m)(ce.unsubscribe)}function me(ce){(0,f.m)(ce)?ce():ce.unsubscribe()}},2416:(pt,ke,j)=>{"use strict";j.d(ke,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(pt,ke,j)=>{"use strict";j.d(ke,{E:()=>de});const de=new(j(9751).y)(K=>K.complete())},8996:(pt,ke,j)=>{"use strict";j.d(ke,{D:()=>Ie});var f=j(8421),de=j(5363),x=j(9468),ae=j(9751),me=j(2202),ce=j(576),z=j(9672);function C(Ae,ze){if(!Ae)throw new Error("Iterable cannot be null");return new ae.y(qe=>{(0,z.f)(qe,ze,()=>{const Q=Ae[Symbol.asyncIterator]();(0,z.f)(qe,ze,()=>{Q.next().then(Ce=>{Ce.done?qe.complete():qe.next(Ce.value)})},0,!0)})})}var O=j(3670),V=j(8239),$=j(1144),ue=j(6495),ee=j(2206),W=j(4532),Me=j(3260);function Ie(Ae,ze){return ze?function Ee(Ae,ze){if(null!=Ae){if((0,O.c)(Ae))return function Y(Ae,ze){return(0,f.Xf)(Ae).pipe((0,x.R)(ze),(0,de.Q)(ze))}(Ae,ze);if((0,$.z)(Ae))return function re(Ae,ze){return new ae.y(qe=>{let Q=0;return ze.schedule(function(){Q===Ae.length?qe.complete():(qe.next(Ae[Q++]),qe.closed||this.schedule())})})}(Ae,ze);if((0,V.t)(Ae))return function K(Ae,ze){return(0,f.Xf)(Ae).pipe((0,x.R)(ze),(0,de.Q)(ze))}(Ae,ze);if((0,ee.D)(Ae))return C(Ae,ze);if((0,ue.T)(Ae))return function J(Ae,ze){return new ae.y(qe=>{let Q;return(0,z.f)(qe,ze,()=>{Q=Ae[me.h](),(0,z.f)(qe,ze,()=>{let Ce,We;try{({value:Ce,done:We}=Q.next())}catch(rt){return void qe.error(rt)}We?qe.complete():qe.next(Ce)},0,!0)}),()=>(0,ce.m)(Q?.return)&&Q.return()})}(Ae,ze);if((0,Me.L)(Ae))return function Ge(Ae,ze){return C((0,Me.Q)(Ae),ze)}(Ae,ze)}throw(0,W.z)(Ae)}(Ae,ze):(0,f.Xf)(Ae)}},8421:(pt,ke,j)=>{"use strict";j.d(ke,{Xf:()=>O});var f=j(655),de=j(1144),x=j(8239),Y=j(9751),K=j(3670),ae=j(2206),re=j(4532),me=j(6495),ce=j(3260),z=j(576),J=j(7849),C=j(8822);function O(Ee){if(Ee instanceof Y.y)return Ee;if(null!=Ee){if((0,K.c)(Ee))return function V(Ee){return new Y.y(Ie=>{const Ae=Ee[C.L]();if((0,z.m)(Ae.subscribe))return Ae.subscribe(Ie);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ee);if((0,de.z)(Ee))return function $(Ee){return new Y.y(Ie=>{for(let Ae=0;Ae<Ee.length&&!Ie.closed;Ae++)Ie.next(Ee[Ae]);Ie.complete()})}(Ee);if((0,x.t)(Ee))return function ue(Ee){return new Y.y(Ie=>{Ee.then(Ae=>{Ie.closed||(Ie.next(Ae),Ie.complete())},Ae=>Ie.error(Ae)).then(null,J.h)})}(Ee);if((0,ae.D)(Ee))return W(Ee);if((0,me.T)(Ee))return function ee(Ee){return new Y.y(Ie=>{for(const Ae of Ee)if(Ie.next(Ae),Ie.closed)return;Ie.complete()})}(Ee);if((0,ce.L)(Ee))return function Me(Ee){return W((0,ce.Q)(Ee))}(Ee)}throw(0,re.z)(Ee)}function W(Ee){return new Y.y(Ie=>{(function Ge(Ee,Ie){var Ae,ze,qe,Q;return(0,f.mG)(this,void 0,void 0,function*(){try{for(Ae=(0,f.KL)(Ee);!(ze=yield Ae.next()).done;)if(Ie.next(ze.value),Ie.closed)return}catch(Ce){qe={error:Ce}}finally{try{ze&&!ze.done&&(Q=Ae.return)&&(yield Q.call(Ae))}finally{if(qe)throw qe.error}}Ie.complete()})})(Ee,Ie).catch(Ae=>Ie.error(Ae))})}},6451:(pt,ke,j)=>{"use strict";j.d(ke,{T:()=>ae});var f=j(8189),de=j(8421),x=j(515),Y=j(3269),K=j(8996);function ae(...re){const me=(0,Y.yG)(re),ce=(0,Y._6)(re,1/0),z=re;return z.length?1===z.length?(0,de.Xf)(z[0]):(0,f.J)(ce)((0,K.D)(z,me)):x.E}},5403:(pt,ke,j)=>{"use strict";j.d(ke,{x:()=>de});var f=j(930);function de(Y,K,ae,re,me){return new x(Y,K,ae,re,me)}class x extends f.Lv{constructor(K,ae,re,me,ce,z){super(K),this.onFinalize=ce,this.shouldUnsubscribe=z,this._next=ae?function(J){try{ae(J)}catch(C){K.error(C)}}:super._next,this._error=me?function(J){try{me(J)}catch(C){K.error(C)}finally{this.unsubscribe()}}:super._error,this._complete=re?function(){try{re()}catch(J){K.error(J)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var K;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ae}=this;super.unsubscribe(),!ae&&(null===(K=this.onFinalize)||void 0===K||K.call(this))}}}},4004:(pt,ke,j)=>{"use strict";j.d(ke,{U:()=>x});var f=j(4482),de=j(5403);function x(Y,K){return(0,f.e)((ae,re)=>{let me=0;ae.subscribe((0,de.x)(re,ce=>{re.next(Y.call(K,ce,me++))}))})}},8189:(pt,ke,j)=>{"use strict";j.d(ke,{J:()=>x});var f=j(5577),de=j(4671);function x(Y=1/0){return(0,f.z)(de.y,Y)}},5577:(pt,ke,j)=>{"use strict";j.d(ke,{z:()=>me});var f=j(4004),de=j(8421),x=j(4482),Y=j(9672),K=j(5403),re=j(576);function me(ce,z,J=1/0){return(0,re.m)(z)?me((C,O)=>(0,f.U)((V,$)=>z(C,V,O,$))((0,de.Xf)(ce(C,O))),J):("number"==typeof z&&(J=z),(0,x.e)((C,O)=>function ae(ce,z,J,C,O,V,$,ue){const ee=[];let W=0,Me=0,Ge=!1;const Ee=()=>{Ge&&!ee.length&&!W&&z.complete()},Ie=ze=>W<C?Ae(ze):ee.push(ze),Ae=ze=>{V&&z.next(ze),W++;let qe=!1;(0,de.Xf)(J(ze,Me++)).subscribe((0,K.x)(z,Q=>{O?.(Q),V?Ie(Q):z.next(Q)},()=>{qe=!0},void 0,()=>{if(qe)try{for(W--;ee.length&&W<C;){const Q=ee.shift();$?(0,Y.f)(z,$,()=>Ae(Q)):Ae(Q)}Ee()}catch(Q){z.error(Q)}}))};return ce.subscribe((0,K.x)(z,Ie,()=>{Ge=!0,Ee()})),()=>{ue?.()}}(C,O,ce,J)))}},5363:(pt,ke,j)=>{"use strict";j.d(ke,{Q:()=>Y});var f=j(9672),de=j(4482),x=j(5403);function Y(K,ae=0){return(0,de.e)((re,me)=>{re.subscribe((0,x.x)(me,ce=>(0,f.f)(me,K,()=>me.next(ce),ae),()=>(0,f.f)(me,K,()=>me.complete(),ae),ce=>(0,f.f)(me,K,()=>me.error(ce),ae)))})}},3099:(pt,ke,j)=>{"use strict";j.d(ke,{B:()=>K});var f=j(8421),de=j(7579),x=j(930),Y=j(4482);function K(re={}){const{connector:me=(()=>new de.x),resetOnError:ce=!0,resetOnComplete:z=!0,resetOnRefCountZero:J=!0}=re;return C=>{let O,V,$,ue=0,ee=!1,W=!1;const Me=()=>{V?.unsubscribe(),V=void 0},Ge=()=>{Me(),O=$=void 0,ee=W=!1},Ee=()=>{const Ie=O;Ge(),Ie?.unsubscribe()};return(0,Y.e)((Ie,Ae)=>{ue++,!W&&!ee&&Me();const ze=$=$??me();Ae.add(()=>{ue--,0===ue&&!W&&!ee&&(V=ae(Ee,J))}),ze.subscribe(Ae),!O&&ue>0&&(O=new x.Hp({next:qe=>ze.next(qe),error:qe=>{W=!0,Me(),V=ae(Ge,ce,qe),ze.error(qe)},complete:()=>{ee=!0,Me(),V=ae(Ge,z),ze.complete()}}),(0,f.Xf)(Ie).subscribe(O))})(C)}}function ae(re,me,...ce){if(!0===me)return void re();if(!1===me)return;const z=new x.Hp({next:()=>{z.unsubscribe(),re()}});return me(...ce).subscribe(z)}},9468:(pt,ke,j)=>{"use strict";j.d(ke,{R:()=>de});var f=j(4482);function de(x,Y=0){return(0,f.e)((K,ae)=>{ae.add(x.schedule(()=>K.subscribe(ae),Y))})}},8505:(pt,ke,j)=>{"use strict";j.d(ke,{b:()=>K});var f=j(576),de=j(4482),x=j(5403),Y=j(4671);function K(ae,re,me){const ce=(0,f.m)(ae)||re||me?{next:ae,error:re,complete:me}:ae;return ce?(0,de.e)((z,J)=>{var C;null===(C=ce.subscribe)||void 0===C||C.call(ce);let O=!0;z.subscribe((0,x.x)(J,V=>{var $;null===($=ce.next)||void 0===$||$.call(ce,V),J.next(V)},()=>{var V;O=!1,null===(V=ce.complete)||void 0===V||V.call(ce),J.complete()},V=>{var $;O=!1,null===($=ce.error)||void 0===$||$.call(ce,V),J.error(V)},()=>{var V,$;O&&(null===(V=ce.unsubscribe)||void 0===V||V.call(ce)),null===($=ce.finalize)||void 0===$||$.call(ce)}))}):Y.y}},4408:(pt,ke,j)=>{"use strict";j.d(ke,{o:()=>K});var f=j(727);class de extends f.w0{constructor(re,me){super()}schedule(re,me=0){return this}}const x={setInterval(ae,re,...me){const{delegate:ce}=x;return ce?.setInterval?ce.setInterval(ae,re,...me):setInterval(ae,re,...me)},clearInterval(ae){const{delegate:re}=x;return(re?.clearInterval||clearInterval)(ae)},delegate:void 0};var Y=j(8737);class K extends de{constructor(re,me){super(re,me),this.scheduler=re,this.work=me,this.pending=!1}schedule(re,me=0){var ce;if(this.closed)return this;this.state=re;const z=this.id,J=this.scheduler;return null!=z&&(this.id=this.recycleAsyncId(J,z,me)),this.pending=!0,this.delay=me,this.id=null!==(ce=this.id)&&void 0!==ce?ce:this.requestAsyncId(J,this.id,me),this}requestAsyncId(re,me,ce=0){return x.setInterval(re.flush.bind(re,this),ce)}recycleAsyncId(re,me,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return me;null!=me&&x.clearInterval(me)}execute(re,me){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(re,me);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,me){let z,ce=!1;try{this.work(re)}catch(J){ce=!0,z=J||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:re,scheduler:me}=this,{actions:ce}=me;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Y.P)(ce,this),null!=re&&(this.id=this.recycleAsyncId(me,re,null)),this.delay=null,super.unsubscribe()}}}},7565:(pt,ke,j)=>{"use strict";j.d(ke,{v:()=>x});var f=j(6063);class de{constructor(K,ae=de.now){this.schedulerActionCtor=K,this.now=ae}schedule(K,ae=0,re){return new this.schedulerActionCtor(this,K).schedule(re,ae)}}de.now=f.l.now;class x extends de{constructor(K,ae=de.now){super(K,ae),this.actions=[],this._active=!1}flush(K){const{actions:ae}=this;if(this._active)return void ae.push(K);let re;this._active=!0;do{if(re=K.execute(K.state,K.delay))break}while(K=ae.shift());if(this._active=!1,re){for(;K=ae.shift();)K.unsubscribe();throw re}}}},4986:(pt,ke,j)=>{"use strict";j.d(ke,{P:()=>Y,z:()=>x});var f=j(4408);const x=new(j(7565).v)(f.o),Y=x},6063:(pt,ke,j)=>{"use strict";j.d(ke,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(pt,ke,j)=>{"use strict";j.d(ke,{z:()=>f});const f={setTimeout(de,x,...Y){const{delegate:K}=f;return K?.setTimeout?K.setTimeout(de,x,...Y):setTimeout(de,x,...Y)},clearTimeout(de){const{delegate:x}=f;return(x?.clearTimeout||clearTimeout)(de)},delegate:void 0}},2202:(pt,ke,j)=>{"use strict";j.d(ke,{h:()=>de});const de=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(pt,ke,j)=>{"use strict";j.d(ke,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(pt,ke,j)=>{"use strict";j.d(ke,{_6:()=>ae,jO:()=>Y,yG:()=>K});var f=j(576),de=j(3532);function x(re){return re[re.length-1]}function Y(re){return(0,f.m)(x(re))?re.pop():void 0}function K(re){return(0,de.K)(x(re))?re.pop():void 0}function ae(re,me){return"number"==typeof x(re)?re.pop():me}},8737:(pt,ke,j)=>{"use strict";function f(de,x){if(de){const Y=de.indexOf(x);0<=Y&&de.splice(Y,1)}}j.d(ke,{P:()=>f})},3888:(pt,ke,j)=>{"use strict";function f(de){const Y=de(K=>{Error.call(K),K.stack=(new Error).stack});return Y.prototype=Object.create(Error.prototype),Y.prototype.constructor=Y,Y}j.d(ke,{d:()=>f})},2806:(pt,ke,j)=>{"use strict";j.d(ke,{O:()=>Y,x:()=>x});var f=j(2416);let de=null;function x(K){if(f.v.useDeprecatedSynchronousErrorHandling){const ae=!de;if(ae&&(de={errorThrown:!1,error:null}),K(),ae){const{errorThrown:re,error:me}=de;if(de=null,re)throw me}}else K()}function Y(K){f.v.useDeprecatedSynchronousErrorHandling&&de&&(de.errorThrown=!0,de.error=K)}},9672:(pt,ke,j)=>{"use strict";function f(de,x,Y,K=0,ae=!1){const re=x.schedule(function(){Y(),ae?de.add(this.schedule(null,K)):this.unsubscribe()},K);if(de.add(re),!ae)return re}j.d(ke,{f:()=>f})},4671:(pt,ke,j)=>{"use strict";function f(de){return de}j.d(ke,{y:()=>f})},1144:(pt,ke,j)=>{"use strict";j.d(ke,{z:()=>f});const f=de=>de&&"number"==typeof de.length&&"function"!=typeof de},2206:(pt,ke,j)=>{"use strict";j.d(ke,{D:()=>de});var f=j(576);function de(x){return Symbol.asyncIterator&&(0,f.m)(x?.[Symbol.asyncIterator])}},576:(pt,ke,j)=>{"use strict";function f(de){return"function"==typeof de}j.d(ke,{m:()=>f})},3670:(pt,ke,j)=>{"use strict";j.d(ke,{c:()=>x});var f=j(8822),de=j(576);function x(Y){return(0,de.m)(Y[f.L])}},6495:(pt,ke,j)=>{"use strict";j.d(ke,{T:()=>x});var f=j(2202),de=j(576);function x(Y){return(0,de.m)(Y?.[f.h])}},8239:(pt,ke,j)=>{"use strict";j.d(ke,{t:()=>de});var f=j(576);function de(x){return(0,f.m)(x?.then)}},3260:(pt,ke,j)=>{"use strict";j.d(ke,{L:()=>Y,Q:()=>x});var f=j(655),de=j(576);function x(K){return(0,f.FC)(this,arguments,function*(){const re=K.getReader();try{for(;;){const{value:me,done:ce}=yield(0,f.qq)(re.read());if(ce)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(me)}}finally{re.releaseLock()}})}function Y(K){return(0,de.m)(K?.getReader)}},3532:(pt,ke,j)=>{"use strict";j.d(ke,{K:()=>de});var f=j(576);function de(x){return x&&(0,f.m)(x.schedule)}},4482:(pt,ke,j)=>{"use strict";j.d(ke,{A:()=>de,e:()=>x});var f=j(576);function de(Y){return(0,f.m)(Y?.lift)}function x(Y){return K=>{if(de(K))return K.lift(function(ae){try{return Y(ae,this)}catch(re){this.error(re)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(pt,ke,j)=>{"use strict";function f(){}j.d(ke,{Z:()=>f})},9635:(pt,ke,j)=>{"use strict";j.d(ke,{U:()=>x,z:()=>de});var f=j(4671);function de(...Y){return x(Y)}function x(Y){return 0===Y.length?f.y:1===Y.length?Y[0]:function(ae){return Y.reduce((re,me)=>me(re),ae)}}},7849:(pt,ke,j)=>{"use strict";j.d(ke,{h:()=>x});var f=j(2416),de=j(3410);function x(Y){de.z.setTimeout(()=>{const{onUnhandledError:K}=f.v;if(!K)throw Y;K(Y)})}},4532:(pt,ke,j)=>{"use strict";function f(de){return new TypeError(`You provided ${null!==de&&"object"==typeof de?"an invalid object":`'${de}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(ke,{z:()=>f})},655:(pt,ke,j)=>{"use strict";function Y(_e,De){var xe={};for(var Fe in _e)Object.prototype.hasOwnProperty.call(_e,Fe)&&De.indexOf(Fe)<0&&(xe[Fe]=_e[Fe]);if(null!=_e&&"function"==typeof Object.getOwnPropertySymbols){var Be=0;for(Fe=Object.getOwnPropertySymbols(_e);Be<Fe.length;Be++)De.indexOf(Fe[Be])<0&&Object.prototype.propertyIsEnumerable.call(_e,Fe[Be])&&(xe[Fe[Be]]=_e[Fe[Be]])}return xe}function C(_e,De,xe,Fe){return new(xe||(xe=Promise))(function(Oe,mt){function zt(ln){try{ot(Fe.next(ln))}catch(_t){mt(_t)}}function gn(ln){try{ot(Fe.throw(ln))}catch(_t){mt(_t)}}function ot(ln){ln.done?Oe(ln.value):function Be(Oe){return Oe instanceof xe?Oe:new xe(function(mt){mt(Oe)})}(ln.value).then(zt,gn)}ot((Fe=Fe.apply(_e,De||[])).next())})}function Ee(_e){return this instanceof Ee?(this.v=_e,this):new Ee(_e)}function Ie(_e,De,xe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Be,Fe=xe.apply(_e,De||[]),Oe=[];return Be={},mt("next"),mt("throw"),mt("return"),Be[Symbol.asyncIterator]=function(){return this},Be;function mt(St){Fe[St]&&(Be[St]=function(Dr){return new Promise(function(Nn,Ln){Oe.push([St,Dr,Nn,Ln])>1||zt(St,Dr)})})}function zt(St,Dr){try{!function gn(St){St.value instanceof Ee?Promise.resolve(St.value.v).then(ot,ln):_t(Oe[0][2],St)}(Fe[St](Dr))}catch(Nn){_t(Oe[0][3],Nn)}}function ot(St){zt("next",St)}function ln(St){zt("throw",St)}function _t(St,Dr){St(Dr),Oe.shift(),Oe.length&&zt(Oe[0][0],Oe[0][1])}}function ze(_e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xe,De=_e[Symbol.asyncIterator];return De?De.call(_e):(_e=function ue(_e){var De="function"==typeof Symbol&&Symbol.iterator,xe=De&&_e[De],Fe=0;if(xe)return xe.call(_e);if(_e&&"number"==typeof _e.length)return{next:function(){return _e&&Fe>=_e.length&&(_e=void 0),{value:_e&&_e[Fe++],done:!_e}}};throw new TypeError(De?"Object is not iterable.":"Symbol.iterator is not defined.")}(_e),xe={},Fe("next"),Fe("throw"),Fe("return"),xe[Symbol.asyncIterator]=function(){return this},xe);function Fe(Oe){xe[Oe]=_e[Oe]&&function(mt){return new Promise(function(zt,gn){!function Be(Oe,mt,zt,gn){Promise.resolve(gn).then(function(ot){Oe({value:ot,done:zt})},mt)}(zt,gn,(mt=_e[Oe](mt)).done,mt.value)})}}}j.d(ke,{FC:()=>Ie,KL:()=>ze,_T:()=>Y,mG:()=>C,qq:()=>Ee})},4650:(pt,ke,j)=>{"use strict";j.d(ke,{$8M:()=>np,$Z:()=>Te,AFp:()=>Uy,AaK:()=>me,BQk:()=>W_,CHM:()=>Hl,CRH:()=>AD,CZH:()=>cf,CqO:()=>pI,D6c:()=>LR,EJc:()=>yR,EpF:()=>q_,F4k:()=>K_,FYo:()=>cw,FiY:()=>pe,G48:()=>Fg,Gf:()=>jb,GfV:()=>dw,Gpc:()=>J,Ikx:()=>hb,JOm:()=>js,KtG:()=>Po,LFG:()=>Qn,LSH:()=>Pc,Lbi:()=>gR,Lck:()=>Sy,MMx:()=>Ay,NdJ:()=>Kh,OlP:()=>Jt,Oqu:()=>ug,PXZ:()=>XD,Q6J:()=>Jc,QGY:()=>Kw,QP$:()=>Nt,QbO:()=>jy,Qsj:()=>gC,R0b:()=>Io,RDi:()=>Ep,Rgc:()=>Ag,SBq:()=>Np,Sil:()=>Jb,Suo:()=>SD,TTD:()=>Rs,TgZ:()=>qh,Tol:()=>Dl,Udp:()=>ty,VKq:()=>Ob,WFA:()=>Z_,X6Q:()=>f0,XFs:()=>it,Xpm:()=>Pe,Xts:()=>Ah,Y36:()=>Ui,YKP:()=>Ty,YNc:()=>$_,Yjl:()=>oe,Yz7:()=>ot,Z0I:()=>Dr,ZZ4:()=>Xy,_Bn:()=>Sl,_UZ:()=>qw,_Vd:()=>Pp,_c5:()=>NR,_uU:()=>lg,aQg:()=>w0,c2e:()=>GD,cJS:()=>_t,cg1:()=>oy,d8E:()=>fb,dDg:()=>ZD,dqk:()=>Cn,eFA:()=>tT,ekj:()=>sg,eoX:()=>YD,f3M:()=>Et,g9A:()=>$D,h0i:()=>af,hGG:()=>FR,iGM:()=>eR,ifc:()=>bt,ip1:()=>Pg,jDz:()=>Cg,kL8:()=>gb,lG2:()=>X,lqb:()=>Vc,lri:()=>s0,n5z:()=>ol,oAB:()=>Yt,oxw:()=>td,q4F:()=>yC,qLn:()=>Fp,qOj:()=>Gw,qZA:()=>vu,rWj:()=>pd,sBO:()=>xR,sIi:()=>mu,s_b:()=>Py,soG:()=>Hy,tb:()=>df,tp0:()=>st,uIk:()=>yu,vHH:()=>$,vpe:()=>Ua,wAp:()=>kt,xp6:()=>ww,ynx:()=>z_,z2F:()=>hf,zSh:()=>xp,zs3:()=>hu});var f=j(7579),de=j(727),x=j(9751),Y=j(6451),K=j(3099);function ae(o){for(let a in o)if(o[a]===ae)return a;throw Error("Could not find renamed property on target object.")}function re(o,a){for(const l in a)a.hasOwnProperty(l)&&!o.hasOwnProperty(l)&&(o[l]=a[l])}function me(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(me).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function ce(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const z=ae({__forward_ref__:ae});function J(o){return o.__forward_ref__=J,o.toString=function(){return me(this())},o}function C(o){return O(o)?o():o}function O(o){return"function"==typeof o&&o.hasOwnProperty(z)&&o.__forward_ref__===J}class $ extends Error{constructor(a,l){super(function ue(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}(a,l)),this.code=a}}function ee(o){return"string"==typeof o?o:null==o?"":String(o)}function Ie(o,a){throw new $(-201,!1)}function Be(o,a){null==o&&function Oe(o,a,l,c){throw new Error(`ASSERTION ERROR: ${o}`+(null==c?"":` [Expected=> ${l} ${c} ${a} <=Actual]`))}(a,o,null,"!=")}function ot(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function _t(o){return{providers:o.providers||[],imports:o.imports||[]}}function St(o){return Nn(o,Xi)||Nn(o,ki)}function Dr(o){return null!==St(o)}function Nn(o,a){return o.hasOwnProperty(a)?o[a]:null}function ui(o){return o&&(o.hasOwnProperty(Ei)||o.hasOwnProperty(ha))?o[Ei]:null}const Xi=ae({\u0275prov:ae}),Ei=ae({\u0275inj:ae}),ki=ae({ngInjectableDef:ae}),ha=ae({ngInjectorDef:ae});var it=(()=>((it=it||{})[it.Default=0]="Default",it[it.Host=1]="Host",it[it.Self=2]="Self",it[it.SkipSelf=4]="SkipSelf",it[it.Optional=8]="Optional",it))();let Qr;function Tr(o){const a=Qr;return Qr=o,a}function Oi(o,a,l){const c=St(o);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:l&it.Optional?null:void 0!==a?a:void Ie(me(o))}function Kn(o){return{toString:o}.toString()}var sr=(()=>((sr=sr||{})[sr.OnPush=0]="OnPush",sr[sr.Default=1]="Default",sr))(),bt=(()=>{return(o=bt||(bt={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",bt;var o})();const Cn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ar={},Ht=[],As=ae({\u0275cmp:ae}),dn=ae({\u0275dir:ae}),Ji=ae({\u0275pipe:ae}),hn=ae({\u0275mod:ae}),Mr=ae({\u0275fac:ae}),ci=ae({__NG_ELEMENT_ID__:ae});let ct=0;function Pe(o){return Kn(()=>{const l=!0===o.standalone,c={},h={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===sr.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&o.dependencies||null,getStandaloneInjector:null,selectors:o.selectors||Ht,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||bt.Emulated,id:"c"+ct++,styles:o.styles||Ht,_:null,setInput:null,schemas:o.schemas||null,tView:null},_=o.dependencies,w=o.features;return h.inputs=te(o.inputs,c),h.outputs=te(o.outputs),w&&w.forEach(I=>I(h)),h.directiveDefs=_?()=>("function"==typeof _?_():_).map(Vt).filter(Gt):null,h.pipeDefs=_?()=>("function"==typeof _?_():_).map(Je).filter(Gt):null,h})}function Vt(o){return ve(o)||he(o)}function Gt(o){return null!==o}function Yt(o){return Kn(()=>({type:o.type,bootstrap:o.bootstrap||Ht,declarations:o.declarations||Ht,imports:o.imports||Ht,exports:o.exports||Ht,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function te(o,a){if(null==o)return Ar;const l={};for(const c in o)if(o.hasOwnProperty(c)){let h=o[c],_=h;Array.isArray(h)&&(_=h[1],h=h[0]),l[h]=c,a&&(a[h]=_)}return l}const X=Pe;function oe(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function ve(o){return o[As]||null}function he(o){return o[dn]||null}function Je(o){return o[Ji]||null}function Nt(o){const a=ve(o)||he(o)||Je(o);return null!==a&&a.standalone}function en(o,a){const l=o[hn]||null;if(!l&&!0===a)throw new Error(`Type ${me(o)} does not have '\u0275mod' property.`);return l}function xr(o){return Array.isArray(o)&&"object"==typeof o[1]}function di(o){return Array.isArray(o)&&!0===o[1]}function Pl(o){return 0!=(8&o.flags)}function Ka(o){return 2==(2&o.flags)}function Bu(o){return 1==(1&o.flags)}function Jr(o){return null!==o.template}function Hf(o){return 0!=(256&o[2])}function _s(o,a){return o.hasOwnProperty(Mr)?o[Mr]:null}class xs{constructor(a,l,c){this.previousValue=a,this.currentValue=l,this.firstChange=c}isFirstChange(){return this.firstChange}}function Rs(){return ko}function ko(o){return o.type.prototype.ngOnChanges&&(o.setInput=Fl),Za}function Za(){const o=Gf(this),a=o?.current;if(a){const l=o.previous;if(l===Ar)o.previous=a;else for(let c in a)l[c]=a[c];o.current=null,this.ngOnChanges(a)}}function Fl(o,a,l,c){const h=Gf(o)||function pa(o,a){return o[$u]=a}(o,{previous:Ar,current:null}),_=h.current||(h.current={}),w=h.previous,I=this.declaredInputs[l],D=w[I];_[I]=new xs(D&&D.currentValue,a,w===Ar),o[c]=a}Rs.ngInherit=!0;const $u="__ngSimpleChanges__";function Gf(o){return o[$u]||null}function Zn(o){for(;Array.isArray(o);)o=o[0];return o}function Ni(o,a){return Zn(a[o])}function ei(o,a){return Zn(a[o.index])}function ma(o,a){return o.data[a]}function er(o,a){const l=a[o];return xr(l)?l:l[0]}function Ya(o){return 64==(64&o[2])}function ts(o,a){return null==a?null:o[a]}function Oo(o){o[18]=0}function Gn(o,a){o[5]+=a;let l=o,c=o[3];for(;null!==c&&(1===a&&1===l[5]||-1===a&&0===l[5]);)c[5]+=a,l=c,c=c[3]}const Pt={lFrame:tl(null),bindingsEnabled:!0};function _a(){return Pt.bindingsEnabled}function Ne(){return Pt.lFrame.lView}function tn(){return Pt.lFrame.tView}function Hl(o){return Pt.lFrame.contextLView=o,o[8]}function Po(o){return Pt.lFrame.contextLView=null,o}function ur(){let o=ya();for(;null!==o&&64===o.type;)o=o.parent;return o}function ya(){return Pt.lFrame.currentTNode}function hi(o,a){const l=Pt.lFrame;l.currentTNode=o,l.isParent=a}function $l(){return Pt.lFrame.isParent}function va(){Pt.lFrame.isParent=!1}function el(){return Pt.lFrame.bindingIndex++}function Fi(o){const a=Pt.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,l}function Bd(o,a){const l=Pt.lFrame;l.bindingIndex=l.bindingRootIndex=o,No(a)}function No(o){Pt.lFrame.currentDirectiveIndex=o}function Yu(o){const a=Pt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}function ho(){return Pt.lFrame.currentQueryIndex}function Fo(o){Pt.lFrame.currentQueryIndex=o}function zl(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function Ud(o,a,l){if(l&it.SkipSelf){let h=a,_=o;for(;!(h=h.parent,null!==h||l&it.Host||(h=zl(_),null===h||(_=_[15],10&h.type))););if(null===h)return!1;a=h,o=_}const c=Pt.lFrame=Qu();return c.currentTNode=a,c.lView=o,!0}function fo(o){const a=Qu(),l=o[1];Pt.lFrame=a,a.currentTNode=l.firstChild,a.lView=o,a.tView=l,a.contextLView=o,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function Qu(){const o=Pt.lFrame,a=null===o?null:o.child;return null===a?tl(o):a}function tl(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function Yf(){const o=Pt.lFrame;return Pt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Wl=Yf;function wa(){const o=Yf();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Hr(){return Pt.lFrame.selectedIndex}function Lo(o){Pt.lFrame.selectedIndex=o}function In(){const o=Pt.lFrame;return ma(o.tView,o.selectedIndex)}function Xf(o,a){for(let l=a.directiveStart,c=a.directiveEnd;l<c;l++){const _=o.data[l].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:I,ngAfterViewInit:D,ngAfterViewChecked:R,ngOnDestroy:F}=_;w&&(o.contentHooks||(o.contentHooks=[])).push(-l,w),I&&((o.contentHooks||(o.contentHooks=[])).push(l,I),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(l,I)),D&&(o.viewHooks||(o.viewHooks=[])).push(-l,D),R&&((o.viewHooks||(o.viewHooks=[])).push(l,R),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(l,R)),null!=F&&(o.destroyHooks||(o.destroyHooks=[])).push(l,F)}}function ba(o,a,l){Ju(o,a,3,l)}function Xu(o,a,l,c){(3&o[2])===l&&Ju(o,a,l,c)}function Bm(o,a){let l=o[2];(3&l)===a&&(l&=2047,l+=1,o[2]=l)}function Ju(o,a,l,c){const _=c??-1,w=a.length-1;let I=0;for(let D=void 0!==c?65535&o[18]:0;D<w;D++)if("number"==typeof a[D+1]){if(I=a[D],null!=c&&I>=c)break}else a[D]<0&&(o[18]+=65536),(I<_||-1==_)&&(Wv(o,l,a,D),o[18]=(4294901760&o[18])+D+2),D++}function Wv(o,a,l,c){const h=l[c]<0,_=l[c+1],I=o[h?-l[c]:l[c]];if(h){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{_.call(I)}finally{}}}else try{_.call(I)}finally{}}class ec{constructor(a,l,c){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=c}}function Kl(o,a,l){let c=0;for(;c<l.length;){const h=l[c];if("number"==typeof h){if(0!==h)break;c++;const _=l[c++],w=l[c++],I=l[c++];o.setAttribute(a,w,I,_)}else{const _=h,w=l[++c];Zl(_)?o.setProperty(a,_,w):o.setAttribute(a,_,w),c++}}return c}function Vo(o){return 3===o||4===o||6===o}function Zl(o){return 64===o.charCodeAt(0)}function Bo(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let l=-1;for(let c=0;c<a.length;c++){const h=a[c];"number"==typeof h?l=h:0===l||nl(o,l,h,null,-1===l||2===l?a[++c]:null)}}return o}function nl(o,a,l,c,h){let _=0,w=o.length;if(-1===a)w=-1;else for(;_<o.length;){const I=o[_++];if("number"==typeof I){if(I===a){w=-1;break}if(I>a){w=_-1;break}}}for(;_<o.length;){const I=o[_];if("number"==typeof I)break;if(I===l){if(null===c)return void(null!==h&&(o[_+1]=h));if(c===o[_+1])return void(o[_+2]=h)}_++,null!==c&&_++,null!==h&&_++}-1!==w&&(o.splice(w,0,a),_=w+1),o.splice(_++,0,l),null!==c&&o.splice(_++,0,c),null!==h&&o.splice(_++,0,h)}function rl(o){return-1!==o}function Ca(o){return 32767&o}function Ps(o,a){let l=function ep(o){return o>>16}(o),c=a;for(;l>0;)c=c[15],l--;return c}let il=!0;function go(o){const a=il;return il=o,a}let nc=0;const mr={};function Rn(o,a){const l=Uo(o,a);if(-1!==l)return l;const c=a[1];c.firstCreatePass&&(o.injectorIndex=a.length,Yl(c.data,o),Yl(a,null),Yl(c.blueprint,null));const h=Ql(o,a),_=o.injectorIndex;if(rl(h)){const w=Ca(h),I=Ps(h,a),D=I[1].data;for(let R=0;R<8;R++)a[_+R]=I[w+R]|D[w+R]}return a[_+8]=h,_}function Yl(o,a){o.push(0,0,0,0,0,0,0,0,a)}function Uo(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function Ql(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let l=0,c=null,h=a;for(;null!==h;){if(c=oc(h),null===c)return-1;if(l++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|l<<16}return-1}function Ia(o,a,l){!function Kd(o,a,l){let c;"string"==typeof l?c=l.charCodeAt(0)||0:l.hasOwnProperty(ci)&&(c=l[ci]),null==c&&(c=l[ci]=nc++);const h=255&c;a.data[o+(h>>5)]|=1<<h}(o,a,l)}function sl(o,a,l){if(l&it.Optional||void 0!==o)return o;Ie()}function Zd(o,a,l,c){if(l&it.Optional&&void 0===c&&(c=null),0==(l&(it.Self|it.Host))){const h=o[9],_=Tr(void 0);try{return h?h.get(a,c,l&it.Optional):Oi(a,c,l&it.Optional)}finally{Tr(_)}}return sl(c,0,l)}function jo(o,a,l,c=it.Default,h){if(null!==o){if(1024&a[2]){const w=function sc(o,a,l,c,h){let _=o,w=a;for(;null!==_&&null!==w&&1024&w[2]&&!(256&w[2]);){const I=Ho(_,w,l,c|it.Self,mr);if(I!==mr)return I;let D=_.parent;if(!D){const R=w[21];if(R){const F=R.get(l,mr,c);if(F!==mr)return F}D=oc(w),w=w[15]}_=D}return h}(o,a,l,c,mr);if(w!==mr)return w}const _=Ho(o,a,l,c,mr);if(_!==mr)return _}return Zd(a,l,c,h)}function Ho(o,a,l,c,h){const _=function tp(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(ci)?o[ci]:void 0;return"number"==typeof a?a>=0?255&a:ic:a}(l);if("function"==typeof _){if(!Ud(a,o,c))return c&it.Host?sl(h,0,c):Zd(a,l,c,h);try{const w=_(c);if(null!=w||c&it.Optional)return w;Ie()}finally{Wl()}}else if("number"==typeof _){let w=null,I=Uo(o,a),D=-1,R=c&it.Host?a[16][6]:null;for((-1===I||c&it.SkipSelf)&&(D=-1===I?Ql(o,a):a[I+8],-1!==D&&rc(c,!1)?(w=a[1],I=Ca(D),a=Ps(D,a)):I=-1);-1!==I;){const F=a[1];if(Da(_,I,F.data)){const H=Jl(I,a,l,w,c,R);if(H!==mr)return H}D=a[I+8],-1!==D&&rc(c,a[1].data[I+8]===R)&&Da(_,I,a)?(w=F,I=Ca(D),a=Ps(D,a)):I=-1}}return h}function Jl(o,a,l,c,h,_){const w=a[1],I=w.data[o+8],F=Ns(I,w,l,null==c?Ka(I)&&il:c!=w&&0!=(3&I.type),h&it.Host&&_===I);return null!==F?ns(a,w,F,I):mr}function Ns(o,a,l,c,h){const _=o.providerIndexes,w=a.data,I=1048575&_,D=o.directiveStart,F=_>>20,ne=h?I+F:o.directiveEnd;for(let fe=c?I:I+F;fe<ne;fe++){const Se=w[fe];if(fe<D&&l===Se||fe>=D&&Se.type===l)return fe}if(h){const fe=w[D];if(fe&&Jr(fe)&&fe.type===l)return D}return null}function ns(o,a,l,c){let h=o[l];const _=a.data;if(function zd(o){return o instanceof ec}(h)){const w=h;w.resolving&&function Me(o,a){const l=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new $(-200,`Circular dependency in DI detected for ${o}${l}`)}(function W(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():ee(o)}(_[l]));const I=go(w.canSeeViewProviders);w.resolving=!0;const D=w.injectImpl?Tr(w.injectImpl):null;Ud(o,c,it.Default);try{h=o[l]=w.factory(void 0,_,o,c),a.firstCreatePass&&l>=c.directiveStart&&function Vm(o,a,l){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:_}=a.type.prototype;if(c){const w=ko(a);(l.preOrderHooks||(l.preOrderHooks=[])).push(o,w),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,w)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-o,h),_&&((l.preOrderHooks||(l.preOrderHooks=[])).push(o,_),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,_))}(l,_[l],a)}finally{null!==D&&Tr(D),go(I),w.resolving=!1,Wl()}}return h}function Da(o,a,l){return!!(l[a+(o>>5)]&1<<o)}function rc(o,a){return!(o&it.Self||o&it.Host&&a)}class rs{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,c){return jo(this._tNode,this._lView,a,c,l)}}function ic(){return new rs(ur(),Ne())}function ol(o){return Kn(()=>{const a=o.prototype.constructor,l=a[Mr]||al(a),c=Object.prototype;let h=Object.getPrototypeOf(o.prototype).constructor;for(;h&&h!==c;){const _=h[Mr]||al(h);if(_&&_!==l)return _;h=Object.getPrototypeOf(h)}return _=>new _})}function al(o){return O(o)?()=>{const a=al(C(o));return a&&a()}:_s(o)}function oc(o){const a=o[1],l=a.type;return 2===l?a.declTNode:1===l?o[6]:null}function np(o){return function Xl(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const l=o.attrs;if(l){const c=l.length;let h=0;for(;h<c;){const _=l[h];if(Vo(_))break;if(0===_)h+=2;else if("number"==typeof _)for(h++;h<c&&"string"==typeof l[h];)h++;else{if(_===a)return l[h+1];h+=2}}}return null}(ur(),o)}const ll="__parameters__";function Li(o,a,l){return Kn(()=>{const c=function eu(o){return function(...l){if(o){const c=o(...l);for(const h in c)this[h]=c[h]}}}(a);function h(..._){if(this instanceof h)return c.apply(this,_),this;const w=new h(..._);return I.annotation=w,I;function I(D,R,F){const H=D.hasOwnProperty(ll)?D[ll]:Object.defineProperty(D,ll,{value:[]})[ll];for(;H.length<=F;)H.push(null);return(H[F]=H[F]||[]).push(w),D}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=o,h.annotationCls=h,h})}class Jt{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=ot({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function $r(o,a){void 0===a&&(a=o);for(let l=0;l<o.length;l++){let c=o[l];Array.isArray(c)?(a===o&&(a=o.slice(0,l)),$r(c,a)):a!==o&&a.push(c)}return a}function Di(o,a){o.forEach(l=>Array.isArray(l)?Di(l,a):a(l))}function ip(o,a,l){a>=o.length?o.push(l):o.splice(a,0,l)}function ul(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function Gr(o,a,l){let c=is(o,a);return c>=0?o[1|c]=l:(c=~c,function Qd(o,a,l,c){let h=o.length;if(h==a)o.push(l,c);else if(1===h)o.push(c,o[0]),o[0]=l;else{for(h--,o.push(o[h-1],o[h]);h>a;)o[h]=o[h-2],h--;o[a]=l,o[a+1]=c}}(o,c,a,l)),c}function Ta(o,a){const l=is(o,a);if(l>=0)return o[1|l]}function is(o,a){return function hc(o,a,l){let c=0,h=o.length>>l;for(;h!==c;){const _=c+(h-c>>1),w=o[_<<l];if(a===w)return _<<l;w>a?h=_:c=_+1}return~(h<<l)}(o,a,1)}const cn={},Yn="__NG_DI_FLAG__",Go="ngTempTokenPath",cr=/\n/gm,eh="__source";let Ti;function mo(o){const a=Ti;return Ti=o,a}function gc(o,a=it.Default){if(void 0===Ti)throw new $(-203,!1);return null===Ti?Oi(o,void 0,a):Ti.get(o,a&it.Optional?null:void 0,a)}function Qn(o,a=it.Default){return(function ps(){return Qr}()||gc)(C(o),a)}function Et(o,a=it.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),Qn(o,a)}function mc(o){const a=[];for(let l=0;l<o.length;l++){const c=C(o[l]);if(Array.isArray(c)){if(0===c.length)throw new $(900,!1);let h,_=it.Default;for(let w=0;w<c.length;w++){const I=c[w],D=M(I);"number"==typeof D?-1===D?h=I.token:_|=D:h=I}a.push(Qn(h,_))}else a.push(Qn(c))}return a}function S(o,a){return o[Yn]=a,o.prototype[Yn]=a,o}function M(o){return o[Yn]}const pe=S(Li("Optional"),8),st=S(Li("SkipSelf"),4);var js=(()=>((js=js||{})[js.Important=1]="Important",js[js.DashCase=2]="DashCase",js))();const sh=new Map;let Qv=0;const qo="__ngContext__";function Rt(o,a){xr(a)?(o[qo]=a[20],function Qm(o){sh.set(o[20],o)}(a)):o[qo]=a}function wc(o,a){return undefined(o,a)}function Ec(o){const a=o[3];return di(a)?a[3]:a}function uu(o){return r_(o[13])}function gp(o){return r_(o[4])}function r_(o){for(;null!==o&&!di(o);)o=o[4];return o}function fl(o,a,l,c,h){if(null!=c){let _,w=!1;di(c)?_=c:xr(c)&&(w=!0,c=c[0]);const I=Zn(c);0===o&&null!==l?null==h?_p(a,l,I):Ra(a,l,I,h||null,!0):1===o&&null!==l?Ra(a,l,I,h||null,!0):2===o?function Sc(o,a,l){const c=Dc(o,a);c&&function yp(o,a,l,c){o.removeChild(a,l,c)}(o,c,a,l)}(a,I,w):3===o&&a.destroyNode(I),null!=_&&function ka(o,a,l,c,h){const _=l[7];_!==Zn(l)&&fl(a,o,c,_,h);for(let I=10;I<l.length;I++){const D=l[I];Mc(D[1],D,o,a,c,_)}}(a,o,_,l,h)}}function Ic(o,a,l){return o.createElement(a,l)}function cu(o,a){const l=o[9],c=l.indexOf(a),h=a[3];512&a[2]&&(a[2]&=-513,Gn(h,-1)),l.splice(c,1)}function xa(o,a){if(o.length<=10)return;const l=10+a,c=o[l];if(c){const h=c[17];null!==h&&h!==o&&cu(h,c),a>0&&(o[l-1][4]=c[4]);const _=ul(o,10+a);!function Zo(o,a){Mc(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(c[1],c);const w=_[19];null!==w&&w.detachView(_[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function pl(o,a){if(!(128&a[2])){const l=a[11];l.destroyNode&&Mc(o,a,l,3,null,null),function ph(o){let a=o[13];if(!a)return gh(o[1],o);for(;a;){let l=null;if(xr(a))l=a[13];else{const c=a[10];c&&(l=c)}if(!l){for(;a&&!a[4]&&a!==o;)xr(a)&&gh(a[1],a),a=a[3];null===a&&(a=o),xr(a)&&gh(a[1],a),l=a&&a[4]}a=l}}(a)}}function gh(o,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function s_(o,a){let l;if(null!=o&&null!=(l=o.destroyHooks))for(let c=0;c<l.length;c+=2){const h=a[l[c]];if(!(h instanceof ec)){const _=l[c+1];if(Array.isArray(_))for(let w=0;w<_.length;w+=2){const I=h[_[w]],D=_[w+1];try{D.call(I)}finally{}}else try{_.call(h)}finally{}}}}(o,a),function i_(o,a){const l=o.cleanup,c=a[7];let h=-1;if(null!==l)for(let _=0;_<l.length-1;_+=2)if("string"==typeof l[_]){const w=l[_+1],I="function"==typeof w?w(a):Zn(a[w]),D=c[h=l[_+2]],R=l[_+3];"boolean"==typeof R?I.removeEventListener(l[_],D,R):R>=0?c[h=R]():c[h=-R].unsubscribe(),_+=2}else{const w=c[h=l[_+1]];l[_].call(w)}if(null!==c){for(let _=h+1;_<c.length;_++)(0,c[_])();a[7]=null}}(o,a),1===a[1].type&&a[11].destroy();const l=a[17];if(null!==l&&di(a[3])){l!==a[3]&&cu(l,a);const c=a[19];null!==c&&c.detachView(o)}!function ah(o){sh.delete(o[20])}(a)}}function Hs(o,a,l){return function o_(o,a,l){let c=a;for(;null!==c&&40&c.type;)c=(a=c).parent;if(null===c)return l[0];if(2&c.flags){const h=o.data[c.directiveStart].encapsulation;if(h===bt.None||h===bt.Emulated)return null}return ei(c,l)}(o,a.parent,l)}function Ra(o,a,l,c,h){o.insertBefore(a,l,c,h)}function _p(o,a,l){o.appendChild(a,l)}function a_(o,a,l,c,h){null!==c?Ra(o,a,l,c,h):_p(o,a,l)}function Dc(o,a){return o.parentNode(a)}let vs,vp=function yh(o,a,l){return 40&o.type?ei(o,l):null};function nr(o,a,l,c){const h=Hs(o,c,a),_=a[11],I=function _h(o,a,l){return vp(o,a,l)}(c.parent||a[6],c,a);if(null!=h)if(Array.isArray(l))for(let D=0;D<l.length;D++)a_(_,h,l[D],I,!1);else a_(_,h,l,I,!1)}function $s(o,a){if(null!==a){const l=a.type;if(3&l)return ei(a,o);if(4&l)return wp(-1,o[a.index]);if(8&l){const c=a.child;if(null!==c)return $s(o,c);{const h=o[a.index];return di(h)?wp(-1,h):Zn(h)}}if(32&l)return wc(a,o)()||Zn(o[a.index]);{const c=wh(o,a);return null!==c?Array.isArray(c)?c[0]:$s(Ec(o[16]),c):$s(o,a.next)}}return null}function wh(o,a){return null!==a?o[16][6].projection[a.projection]:null}function wp(o,a){const l=10+o+1;if(l<a.length){const c=a[l],h=c[1].firstChild;if(null!==h)return $s(c,h)}return a[7]}function Ac(o,a,l,c,h,_,w){for(;null!=l;){const I=c[l.index],D=l.type;if(w&&0===a&&(I&&Rt(Zn(I),c),l.flags|=4),64!=(64&l.flags))if(8&D)Ac(o,a,l.child,c,h,_,!1),fl(a,o,h,I,_);else if(32&D){const R=wc(l,c);let F;for(;F=R();)fl(a,o,h,F,_);fl(a,o,h,I,_)}else 16&D?u_(o,a,c,l,h,_):fl(a,o,h,I,_);l=w?l.projectionNext:l.next}}function Mc(o,a,l,c,h,_){Ac(l,c,o.firstChild,a,h,_,!1)}function u_(o,a,l,c,h,_){const w=l[16],D=w[6].projection[c.projection];if(Array.isArray(D))for(let R=0;R<D.length;R++)fl(a,o,h,D[R],_);else Ac(o,a,D,w[3],h,_,!0)}function d_(o,a,l){o.setAttribute(a,"style",l)}function bp(o,a,l){""===l?o.removeAttribute(a,"class"):o.setAttribute(a,"class",l)}function Ep(o){vs=o}class Ip{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function L(o){return o instanceof Ip?o.changingThisBreaksApplicationSecurity:o}const p_=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Wr=(()=>((Wr=Wr||{})[Wr.NONE=0]="NONE",Wr[Wr.HTML=1]="HTML",Wr[Wr.STYLE=2]="STYLE",Wr[Wr.SCRIPT=3]="SCRIPT",Wr[Wr.URL=4]="URL",Wr[Wr.RESOURCE_URL=5]="RESOURCE_URL",Wr))();function Pc(o){const a=function Nc(){const o=Ne();return o&&o[12]}();return a?a.sanitize(Wr.URL,o)||"":function se(o,a){const l=function be(o){return o instanceof Ip&&o.getTypeName()||null}(o);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===a}(o,"URL")?L(o):function Th(o){return(o=String(o)).match(p_)?o:"unsafe:"+o}(ee(o))}const Ah=new Jt("ENVIRONMENT_INITIALIZER"),Fc=new Jt("INJECTOR",-1),iC=new Jt("INJECTOR_DEF_TYPES");class sC{get(a,l=cn){if(l===cn){const c=new Error(`NullInjectorError: No provider for ${me(a)}!`);throw c.name="NullInjectorError",c}return l}}function KA(...o){return{\u0275providers:oC(0,o)}}function oC(o,...a){const l=[],c=new Set;let h;return Di(a,_=>{const w=_;sw(w,l,[],c)&&(h||(h=[]),h.push(w))}),void 0!==h&&aC(h,l),l}function aC(o,a){for(let l=0;l<o.length;l++){const{providers:h}=o[l];Di(h,_=>{a.push(_)})}}function sw(o,a,l,c){if(!(o=C(o)))return!1;let h=null,_=ui(o);const w=!_&&ve(o);if(_||w){if(w&&!w.standalone)return!1;h=o}else{const D=o.ngModule;if(_=ui(D),!_)return!1;h=D}const I=c.has(h);if(w){if(I)return!1;if(c.add(h),w.dependencies){const D="function"==typeof w.dependencies?w.dependencies():w.dependencies;for(const R of D)sw(R,a,l,c)}}else{if(!_)return!1;{if(null!=_.imports&&!I){let R;c.add(h);try{Di(_.imports,F=>{sw(F,a,l,c)&&(R||(R=[]),R.push(F))})}finally{}void 0!==R&&aC(R,a)}if(!I){const R=_s(h)||(()=>new h);a.push({provide:h,useFactory:R,deps:Ht},{provide:iC,useValue:h,multi:!0},{provide:Ah,useValue:()=>Qn(h),multi:!0})}const D=_.providers;null==D||I||Di(D,F=>{a.push(F)})}}return h!==o&&void 0!==o.providers}const ZA=ae({provide:String,useValue:ae});function ow(o){return null!==o&&"object"==typeof o&&ZA in o}function ml(o){return"function"==typeof o}const xp=new Jt("Set Injector scope."),Lc={},YA={};let lw;function y_(){return void 0===lw&&(lw=new sC),lw}class Vc{}class Rp extends Vc{constructor(a,l,c,h){super(),this.parent=l,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,uw(a,w=>this.processProvider(w)),this.records.set(Fc,Bc(void 0,this)),h.has("environment")&&this.records.set(Vc,Bc(void 0,this));const _=this.records.get(xp);null!=_&&"string"==typeof _.value&&this.scopes.add(_.value),this.injectorDefTypes=new Set(this.get(iC.multi,Ht,it.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const l=mo(this),c=Tr(void 0);try{return a()}finally{mo(l),Tr(c)}}get(a,l=cn,c=it.Default){this.assertNotDestroyed();const h=mo(this),_=Tr(void 0);try{if(!(c&it.SkipSelf)){let I=this.records.get(a);if(void 0===I){const D=function QA(o){return"function"==typeof o||"object"==typeof o&&o instanceof Jt}(a)&&St(a);I=D&&this.injectableDefInScope(D)?Bc(v_(a),Lc):null,this.records.set(a,I)}if(null!=I)return this.hydrate(a,I)}return(c&it.Self?y_():this.parent).get(a,l=c&it.Optional&&l===cn?null:l)}catch(w){if("NullInjectorError"===w.name){if((w[Go]=w[Go]||[]).unshift(me(a)),h)throw w;return function N(o,a,l,c){const h=o[Go];throw a[eh]&&h.unshift(a[eh]),o.message=function G(o,a,l,c=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let h=me(a);if(Array.isArray(a))h=a.map(me).join(" -> ");else if("object"==typeof a){let _=[];for(let w in a)if(a.hasOwnProperty(w)){let I=a[w];_.push(w+":"+("string"==typeof I?JSON.stringify(I):me(I)))}h=`{${_.join(", ")}}`}return`${l}${c?"("+c+")":""}[${h}]: ${o.replace(cr,"\n  ")}`}("\n"+o.message,h,l,c),o.ngTokenPath=h,o[Go]=null,o}(w,a,"R3InjectorError",this.source)}throw w}finally{Tr(_),mo(h)}}resolveInjectorInitializers(){const a=mo(this),l=Tr(void 0);try{const c=this.get(Ah.multi,Ht,it.Self);for(const h of c)h()}finally{mo(a),Tr(l)}}toString(){const a=[],l=this.records;for(const c of l.keys())a.push(me(c));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new $(205,!1)}processProvider(a){let l=ml(a=C(a))?a:C(a&&a.provide);const c=function w_(o){return ow(o)?Bc(void 0,o.useValue):Bc(kp(o),Lc)}(a);if(ml(a)||!0!==a.multi)this.records.get(l);else{let h=this.records.get(l);h||(h=Bc(void 0,Lc,!0),h.factory=()=>mc(h.multi),this.records.set(l,h)),l=a,h.multi.push(a)}this.records.set(l,c)}hydrate(a,l){return l.value===Lc&&(l.value=YA,l.value=l.factory()),"object"==typeof l.value&&l.value&&function dC(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(a){if(!a.providedIn)return!1;const l=C(a.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function v_(o){const a=St(o),l=null!==a?a.factory:_s(o);if(null!==l)return l;if(o instanceof Jt)throw new $(204,!1);if(o instanceof Function)return function cC(o){const a=o.length;if(a>0)throw function nu(o,a){const l=[];for(let c=0;c<o;c++)l.push(a);return l}(a,"?"),new $(204,!1);const l=function Ln(o){const a=o&&(o[Xi]||o[ki]);if(a){const l=function qn(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),a}return null}(o);return null!==l?()=>l.factory(o):()=>new o}(o);throw new $(204,!1)}function kp(o,a,l){let c;if(ml(o)){const h=C(o);return _s(h)||v_(h)}if(ow(o))c=()=>C(o.useValue);else if(function lC(o){return!(!o||!o.useFactory)}(o))c=()=>o.useFactory(...mc(o.deps||[]));else if(function aw(o){return!(!o||!o.useExisting)}(o))c=()=>Qn(C(o.useExisting));else{const h=C(o&&(o.useClass||o.provide));if(!function Op(o){return!!o.deps}(o))return _s(h)||v_(h);c=()=>new h(...mc(o.deps))}return c}function Bc(o,a,l=!1){return{factory:o,value:a,multi:l?[]:void 0}}function XA(o){return!!o.\u0275providers}function uw(o,a){for(const l of o)Array.isArray(l)?uw(l,a):XA(l)?uw(l.\u0275providers,a):a(l)}class hC{}class eM{resolveComponentFactory(a){throw function b_(o){const a=Error(`No component factory found for ${me(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let Pp=(()=>{class o{}return o.NULL=new eM,o})();function tM(){return Mh(ur(),Ne())}function Mh(o,a){return new Np(ei(o,a))}let Np=(()=>{class o{constructor(l){this.nativeElement=l}}return o.__NG_ELEMENT_ID__=tM,o})();function pC(o){return o instanceof Np?o.nativeElement:o}class cw{}let gC=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function mC(){const o=Ne(),l=er(ur().index,o);return(xr(l)?l:o)[11]}(),o})(),_C=(()=>{class o{}return o.\u0275prov=ot({token:o,providedIn:"root",factory:()=>null}),o})();class dw{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const yC=new dw("14.3.0"),hw={};function pw(o){return o.ngOriginalError}class Fp{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a);this._console.error("ERROR",a),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&pw(a);for(;l&&pw(l);)l=pw(l);return l||null}}function _l(o){return o instanceof Function?o():o}function Lp(o,a,l){let c=o.length;for(;;){const h=o.indexOf(a,l);if(-1===h)return h;if(0===h||o.charCodeAt(h-1)<=32){const _=a.length;if(h+_===c||o.charCodeAt(h+_)<=32)return h}l=h+1}}const TC="ng-template";function sM(o,a,l){let c=0;for(;c<o.length;){let h=o[c++];if(l&&"class"===h){if(h=o[c],-1!==Lp(h.toLowerCase(),a,0))return!0}else if(1===h){for(;c<o.length&&"string"==typeof(h=o[c++]);)if(h.toLowerCase()===a)return!0;return!1}}return!1}function SC(o){return 4===o.type&&o.value!==TC}function oM(o,a,l){return a===(4!==o.type||l?o.value:TC)}function AC(o,a,l){let c=4;const h=o.attrs||[],_=function yw(o){for(let a=0;a<o.length;a++)if(Vo(o[a]))return a;return o.length}(h);let w=!1;for(let I=0;I<a.length;I++){const D=a[I];if("number"!=typeof D){if(!w)if(4&c){if(c=2|1&c,""!==D&&!oM(o,D,l)||""===D&&1===a.length){if(Un(c))return!1;w=!0}}else{const R=8&c?D:a[++I];if(8&c&&null!==o.attrs){if(!sM(o.attrs,R,l)){if(Un(c))return!1;w=!0}continue}const H=aM(8&c?"class":D,h,SC(o),l);if(-1===H){if(Un(c))return!1;w=!0;continue}if(""!==R){let ne;ne=H>_?"":h[H+1].toLowerCase();const fe=8&c?ne:null;if(fe&&-1!==Lp(fe,R,0)||2&c&&R!==ne){if(Un(c))return!1;w=!0}}}}else{if(!w&&!Un(c)&&!Un(D))return!1;if(w&&Un(D))continue;w=!1,c=D|1&c}}return Un(c)||w}function Un(o){return 0==(1&o)}function aM(o,a,l,c){if(null===a)return-1;let h=0;if(c||!l){let _=!1;for(;h<a.length;){const w=a[h];if(w===o)return h;if(3===w||6===w)_=!0;else{if(1===w||2===w){let I=a[++h];for(;"string"==typeof I;)I=a[++h];continue}if(4===w)break;if(0===w){h+=4;continue}}h+=_?1:2}return-1}return function lM(o,a){let l=o.indexOf(4);if(l>-1)for(l++;l<o.length;){const c=o[l];if("number"==typeof c)return-1;if(c===a)return l;l++}return-1}(a,o)}function mw(o,a,l=!1){for(let c=0;c<a.length;c++)if(AC(o,a[c],l))return!0;return!1}function vw(o,a){return o?":not("+a.trim()+")":a}function EF(o){let a=o[0],l=1,c=2,h="",_=!1;for(;l<o.length;){let w=o[l];if("string"==typeof w)if(2&c){const I=o[++l];h+="["+w+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?h+="."+w:4&c&&(h+=" "+w);else""!==h&&!Un(w)&&(a+=vw(_,h),h=""),c=w,_=_||!Un(c);l++}return""!==h&&(a+=vw(_,h)),a}const qt={};function ww(o){Vp(tn(),Ne(),Hr()+o,!1)}function Vp(o,a,l,c){if(!c)if(3==(3&a[2])){const _=o.preOrderCheckHooks;null!==_&&ba(a,_,l)}else{const _=o.preOrderHooks;null!==_&&Xu(a,_,0,l)}Lo(l)}function RC(o,a=null,l=null,c){const h=kC(o,a,l,c);return h.resolveInjectorInitializers(),h}function kC(o,a=null,l=null,c,h=new Set){const _=[l||Ht,KA(o)];return c=c||("object"==typeof o?void 0:me(o)),new Rp(_,a||y_(),c||null,h)}let hu=(()=>{class o{static create(l,c){if(Array.isArray(l))return RC({name:""},c,l,"");{const h=l.name??"";return RC({name:h},l.parent,l.providers,h)}}}return o.THROW_IF_NOT_FOUND=cn,o.NULL=new sC,o.\u0275prov=ot({token:o,providedIn:"any",factory:()=>Qn(Fc)}),o.__NG_ELEMENT_ID__=-1,o})();function Ui(o,a=it.Default){const l=Ne();return null===l?Qn(o,a):jo(ur(),l,C(o),a)}function Te(){throw new Error("invalid")}function U(o,a){return o<<17|a<<2}function Fr(o){return o>>17&32767}function jp(o){return 2|o}function Pa(o){return(131068&o)>>2}function Sw(o,a){return-131069&o|a<<2}function T_(o){return 1|o}function kw(o,a){const l=o.contentQueries;if(null!==l)for(let c=0;c<l.length;c+=2){const h=l[c],_=l[c+1];if(-1!==_){const w=o.data[_];Fo(h),w.contentQueries(2,a[_],_)}}}function qp(o,a,l,c,h,_,w,I,D,R,F){const H=a.blueprint.slice();return H[0]=h,H[2]=76|c,(null!==F||o&&1024&o[2])&&(H[2]|=1024),Oo(H),H[3]=H[15]=o,H[8]=l,H[10]=w||o&&o[10],H[11]=I||o&&o[11],H[12]=D||o&&o[12]||null,H[9]=R||o&&o[9]||null,H[6]=_,H[20]=function oh(){return Qv++}(),H[21]=F,H[16]=2==a.type?o[16]:H,H}function pu(o,a,l,c,h){let _=o.data[a];if(null===_)_=function k_(o,a,l,c,h){const _=ya(),w=$l(),D=o.data[a]=function IM(o,a,l,c,h,_){return{type:l,index:c,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?_:_&&_.parent,l,a,c,h);return null===o.firstChild&&(o.firstChild=D),null!==_&&(w?null==_.child&&null!==D.parent&&(_.child=D):null===_.next&&(_.next=D)),D}(o,a,l,c,h),function Nm(){return Pt.lFrame.inI18n}()&&(_.flags|=64);else if(64&_.type){_.type=l,_.value=c,_.attrs=h;const w=function Ja(){const o=Pt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();_.injectorIndex=null===w?-1:w.injectorIndex}return hi(_,!0),_}function $c(o,a,l,c){if(0===l)return-1;const h=a.length;for(let _=0;_<l;_++)a.push(c),o.blueprint.push(c),o.data.push(null);return h}function Kp(o,a,l){fo(a);try{const c=o.viewQuery;null!==c&&Fh(1,c,l);const h=o.template;null!==h&&Ow(o,a,h,1,l),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&kw(o,a),o.staticViewQueries&&Fh(2,o.viewQuery,l);const _=o.components;null!==_&&function ZC(o,a){for(let l=0;l<a.length;l++)iI(o,a[l])}(a,_)}catch(c){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),c}finally{a[2]&=-5,wa()}}function O_(o,a,l,c){const h=a[2];if(128!=(128&h)){fo(a);try{Oo(a),function Zf(o){return Pt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==l&&Ow(o,a,l,2,c);const w=3==(3&h);if(w){const R=o.preOrderCheckHooks;null!==R&&ba(a,R,null)}else{const R=o.preOrderHooks;null!==R&&Xu(a,R,0,null),Bm(a,0)}if(function PM(o){for(let a=uu(o);null!==a;a=gp(a)){if(!a[2])continue;const l=a[9];for(let c=0;c<l.length;c++){const h=l[c],_=h[3];0==(512&h[2])&&Gn(_,1),h[2]|=512}}}(a),function nI(o){for(let a=uu(o);null!==a;a=gp(a))for(let l=10;l<a.length;l++){const c=a[l],h=c[1];Ya(c)&&O_(h,c,h.template,c[8])}}(a),null!==o.contentQueries&&kw(o,a),w){const R=o.contentCheckHooks;null!==R&&ba(a,R)}else{const R=o.contentHooks;null!==R&&Xu(a,R,1),Bm(a,1)}!function qC(o,a){const l=o.hostBindingOpCodes;if(null!==l)try{for(let c=0;c<l.length;c++){const h=l[c];if(h<0)Lo(~h);else{const _=h,w=l[++c],I=l[++c];Bd(w,_),I(2,a[_])}}}finally{Lo(-1)}}(o,a);const I=o.components;null!==I&&function KC(o,a){for(let l=0;l<a.length;l++)rI(o,a[l])}(a,I);const D=o.viewQuery;if(null!==D&&Fh(2,D,c),w){const R=o.viewCheckHooks;null!==R&&ba(a,R)}else{const R=o.viewHooks;null!==R&&Xu(a,R,2),Bm(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,Gn(a[3],-1))}finally{wa()}}}function Ow(o,a,l,c,h){const _=Hr(),w=2&c;try{Lo(-1),w&&a.length>22&&Vp(o,a,22,!1),l(c,h)}finally{Lo(_)}}function YC(o,a,l){if(Pl(a)){const h=a.directiveEnd;for(let _=a.directiveStart;_<h;_++){const w=o.data[_];w.contentQueries&&w.contentQueries(1,l[_],_)}}}function Zp(o,a,l){!_a()||(function AM(o,a,l,c){const h=l.directiveStart,_=l.directiveEnd;o.firstCreatePass||Rn(l,a),Rt(c,a);const w=l.initialInputs;for(let I=h;I<_;I++){const D=o.data[I],R=Jr(D);R&&RM(a,l,D);const F=ns(a,o,I,l);Rt(F,a),null!==w&&kM(0,I-h,F,D,0,w),R&&(er(l.index,a)[8]=F)}}(o,a,l,ei(l,a)),128==(128&l.flags)&&function MM(o,a,l){const c=l.directiveStart,h=l.directiveEnd,_=l.index,w=function Zu(){return Pt.lFrame.currentDirectiveIndex}();try{Lo(_);for(let I=c;I<h;I++){const D=o.data[I],R=a[I];No(I),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&wl(D,R)}}finally{Lo(-1),No(w)}}(o,a,l))}function Yp(o,a,l=ei){const c=a.localNames;if(null!==c){let h=a.index+1;for(let _=0;_<c.length;_+=2){const w=c[_+1],I=-1===w?l(a,o):o[w];o[h++]=I}}}function P_(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=Pw(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function Pw(o,a,l,c,h,_,w,I,D,R){const F=22+c,H=F+h,ne=function bM(o,a){const l=[];for(let c=0;c<a;c++)l.push(c<o?null:qt);return l}(F,H),fe="function"==typeof R?R():R;return ne[1]={type:o,blueprint:ne,template:l,queries:null,viewQuery:I,declTNode:a,data:ne.slice().fill(null,F),bindingStartIndex:F,expandoStartIndex:H,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:D,consts:fe,incompleteFirstPass:!1}}function QC(o,a,l,c){const h=Hw(a);null===l?h.push(c):(h.push(l),o.firstCreatePass&&Sn(o).push(c,h.length-1))}function Nw(o,a,l){for(let c in o)if(o.hasOwnProperty(c)){const h=o[c];(l=null===l?{}:l).hasOwnProperty(c)?l[c].push(a,h):l[c]=[a,h]}return l}function Fw(o,a){const c=a.directiveEnd,h=o.data,_=a.attrs,w=[];let I=null,D=null;for(let R=a.directiveStart;R<c;R++){const F=h[R],H=F.inputs,ne=null===_||SC(a)?null:jw(H,_);w.push(ne),I=Nw(H,R,I),D=Nw(F.outputs,R,D)}null!==I&&(I.hasOwnProperty("class")&&(a.flags|=16),I.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=w,a.inputs=I,a.outputs=D}function zs(o,a,l,c,h,_,w,I){const D=ei(a,l);let F,R=a.inputs;!I&&null!=R&&(F=R[c])?(Va(o,l,F,c,h),Ka(a)&&JC(l,a.index)):3&a.type&&(c=function XC(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(c),h=null!=w?w(h,a.value||"",c):h,_.setProperty(D,c,h))}function JC(o,a){const l=er(a,o);16&l[2]||(l[2]|=32)}function N_(o,a,l,c){let h=!1;if(_a()){const _=function Vw(o,a,l){const c=o.directiveRegistry;let h=null;if(c)for(let _=0;_<c.length;_++){const w=c[_];mw(l,w.selectors,!1)&&(h||(h=[]),Ia(Rn(l,a),o,w.type),Jr(w)?(eI(o,l),h.unshift(w)):h.push(w))}return h}(o,a,l),w=null===c?null:{"":-1};if(null!==_){h=!0,Gc(l,o.data.length,_.length);for(let F=0;F<_.length;F++){const H=_[F];H.providersResolver&&H.providersResolver(H)}let I=!1,D=!1,R=$c(o,a,_.length,null);for(let F=0;F<_.length;F++){const H=_[F];l.mergedAttrs=Bo(l.mergedAttrs,H.hostAttrs),Bw(o,l,a,R,H),F_(R,H,w),null!==H.contentQueries&&(l.flags|=8),(null!==H.hostBindings||null!==H.hostAttrs||0!==H.hostVars)&&(l.flags|=128);const ne=H.type.prototype;!I&&(ne.ngOnChanges||ne.ngOnInit||ne.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(l.index),I=!0),!D&&(ne.ngOnChanges||ne.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(l.index),D=!0),R++}Fw(o,l)}w&&function xM(o,a,l){if(a){const c=o.localNames=[];for(let h=0;h<a.length;h+=2){const _=l[a[h+1]];if(null==_)throw new $(-301,!1);c.push(a[h],_)}}}(l,c,w)}return l.mergedAttrs=Bo(l.mergedAttrs,l.attrs),h}function Lw(o,a,l,c,h,_){const w=_.hostBindings;if(w){let I=o.hostBindingOpCodes;null===I&&(I=o.hostBindingOpCodes=[]);const D=~a.index;(function SM(o){let a=o.length;for(;a>0;){const l=o[--a];if("number"==typeof l&&l<0)return l}return 0})(I)!=D&&I.push(D),I.push(c,h,w)}}function wl(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function eI(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function F_(o,a,l){if(l){if(a.exportAs)for(let c=0;c<a.exportAs.length;c++)l[a.exportAs[c]]=o;Jr(a)&&(l[""]=o)}}function Gc(o,a,l){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+l,o.providerIndexes=a}function Bw(o,a,l,c,h){o.data[c]=h;const _=h.factory||(h.factory=_s(h.type)),w=new ec(_,Jr(h),Ui);o.blueprint[c]=w,l[c]=w,Lw(o,a,0,c,$c(o,l,h.hostVars,qt),h)}function RM(o,a,l){const c=ei(a,o),h=P_(l),_=o[10],w=V_(o,qp(o,h,null,l.onPush?32:16,c,a,_,_.createRenderer(c,l),null,null,null));o[a.index]=w}function La(o,a,l,c,h,_){const w=ei(o,a);!function Uw(o,a,l,c,h,_,w){if(null==_)o.removeAttribute(a,h,l);else{const I=null==w?ee(_):w(_,c||"",h);o.setAttribute(a,h,I,l)}}(a[11],w,_,o.value,l,c,h)}function kM(o,a,l,c,h,_){const w=_[a];if(null!==w){const I=c.setInput;for(let D=0;D<w.length;){const R=w[D++],F=w[D++],H=w[D++];null!==I?c.setInput(l,H,R,F):l[F]=H}}}function jw(o,a){let l=null,c=0;for(;c<a.length;){const h=a[c];if(0!==h)if(5!==h){if("number"==typeof h)break;o.hasOwnProperty(h)&&(null===l&&(l=[]),l.push(h,o[h],a[c+1])),c+=2}else c+=2;else c+=4}return l}function tI(o,a,l,c){return new Array(o,!0,!1,a,null,0,c,l,null,null)}function rI(o,a){const l=er(a,o);if(Ya(l)){const c=l[1];48&l[2]?O_(c,l,c.template,l[8]):l[5]>0&&L_(l)}}function L_(o){for(let c=uu(o);null!==c;c=gp(c))for(let h=10;h<c.length;h++){const _=c[h];if(Ya(_))if(512&_[2]){const w=_[1];O_(w,_,w.template,_[8])}else _[5]>0&&L_(_)}const l=o[1].components;if(null!==l)for(let c=0;c<l.length;c++){const h=er(l[c],o);Ya(h)&&h[5]>0&&L_(h)}}function iI(o,a){const l=er(a,o),c=l[1];(function sI(o,a){for(let l=a.length;l<o.blueprint.length;l++)a.push(o.blueprint[l])})(c,l),Kp(c,l,l[8])}function V_(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function B_(o){for(;o;){o[2]|=32;const a=Ec(o);if(Hf(o)&&!a)return o;o=a}return null}function Qp(o,a,l,c=!0){const h=a[10];h.begin&&h.begin();try{O_(o,a,o.template,l)}catch(w){throw c&&rn(a,w),w}finally{h.end&&h.end()}}function Fh(o,a,l){Fo(0),a(o,l)}function Hw(o){return o[7]||(o[7]=[])}function Sn(o){return o.cleanup||(o.cleanup=[])}function yn(o,a,l){return(null===o||Jr(o))&&(l=function Ll(o){for(;Array.isArray(o);){if("object"==typeof o[1])return o;o=o[0]}return null}(l[a.index])),l[11]}function rn(o,a){const l=o[9],c=l?l.get(Fp,null):null;c&&c.handleError(a)}function Va(o,a,l,c,h){for(let _=0;_<l.length;){const w=l[_++],I=l[_++],D=a[w],R=o.data[w];null!==R.setInput?R.setInput(D,h,c,I):D[I]=h}}function Lh(o,a,l){let c=l?o.styles:null,h=l?o.classes:null,_=0;if(null!==a)for(let w=0;w<a.length;w++){const I=a[w];"number"==typeof I?_=I:1==_?h=ce(h,I):2==_&&(c=ce(c,I+": "+a[++w]+";"))}l?o.styles=c:o.stylesWithoutHost=c,l?o.classes=h:o.classesWithoutHost=h}function U_(o,a,l,c,h=!1){for(;null!==l;){const _=a[l.index];if(null!==_&&c.push(Zn(_)),di(_))for(let I=10;I<_.length;I++){const D=_[I],R=D[1].firstChild;null!==R&&U_(D[1],D,R,c)}const w=l.type;if(8&w)U_(o,a,l.child,c);else if(32&w){const I=wc(l,a);let D;for(;D=I();)c.push(D)}else if(16&w){const I=wh(a,l);if(Array.isArray(I))c.push(...I);else{const D=Ec(a[16]);U_(D[1],D,I,c,!0)}}l=h?l.projectionNext:l.next}return c}class bl{constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,l=a[1];return U_(l,a,l.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(di(a)){const l=a[8],c=l?l.indexOf(this):-1;c>-1&&(xa(a,c),ul(l,c))}this._attachedToViewContainer=!1}pl(this._lView[1],this._lView)}onDestroy(a){QC(this._lView[1],this._lView,null,a)}markForCheck(){B_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Qp(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function JE(o,a){Mc(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=a}}class oI extends bl{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;Qp(a[1],a,a[8],!1)}checkNoChanges(){}get context(){return null}}class zn extends Pp{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=ve(a);return new zc(l,this.ngModule)}}function sn(o){const a=[];for(let l in o)o.hasOwnProperty(l)&&a.push({propName:o[l],templateName:l});return a}class LM{constructor(a,l){this.injector=a,this.parentInjector=l}get(a,l,c){const h=this.injector.get(a,hw,c);return h!==hw||l===hw?h:this.parentInjector.get(a,l,c)}}class zc extends hC{constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function CF(o){return o.map(EF).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return sn(this.componentDef.inputs)}get outputs(){return sn(this.componentDef.outputs)}create(a,l,c,h){let _=(h=h||this.ngModule)instanceof Vc?h:h?.injector;_&&null!==this.componentDef.getStandaloneInjector&&(_=this.componentDef.getStandaloneInjector(_)||_);const w=_?new LM(a,_):a,I=w.get(cw,null);if(null===I)throw new $(407,!1);const D=w.get(_C,null),R=I.createRenderer(null,this.componentDef),F=this.componentDef.selectors[0][0]||"div",H=c?function CM(o,a,l){return o.selectRootElement(a,l===bt.ShadowDom)}(R,c,this.componentDef.encapsulation):Ic(R,F,function as(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(F)),ne=this.componentDef.onPush?288:272,fe=Pw(0,null,null,1,0,null,null,null,null,null),Se=qp(null,fe,null,ne,null,null,I,R,D,w,null);let $e,Qe;fo(Se);try{const dt=function aI(o,a,l,c,h,_){const w=l[1];l[22]=o;const D=pu(w,22,2,"#host",null),R=D.mergedAttrs=a.hostAttrs;null!==R&&(Lh(D,R,!0),null!==o&&(Kl(h,o,R),null!==D.classes&&bp(h,o,D.classes),null!==D.styles&&d_(h,o,D.styles)));const F=c.createRenderer(o,a),H=qp(l,P_(a),null,a.onPush?32:16,l[22],D,c,F,_||null,null,null);return w.firstCreatePass&&(Ia(Rn(D,l),w,a.type),eI(w,D),Gc(D,l.length,1)),V_(l,H),l[22]=H}(H,this.componentDef,Se,I,R);if(H)if(c)Kl(R,H,["ng-version",yC.full]);else{const{attrs:Dt,classes:Re}=function cM(o){const a=[],l=[];let c=1,h=2;for(;c<o.length;){let _=o[c];if("string"==typeof _)2===h?""!==_&&a.push(_,o[++c]):8===h&&l.push(_);else{if(!Un(h))break;h=_}c++}return{attrs:a,classes:l}}(this.componentDef.selectors[0]);Dt&&Kl(R,H,Dt),Re&&Re.length>0&&bp(R,H,Re.join(" "))}if(Qe=ma(fe,22),void 0!==l){const Dt=Qe.projection=[];for(let Re=0;Re<this.ngContentSelectors.length;Re++){const Ut=l[Re];Dt.push(null!=Ut?Array.from(Ut):null)}}$e=function Wc(o,a,l,c){const h=l[1],_=function TM(o,a,l){const c=ur();o.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),Bw(o,c,a,$c(o,a,1,null),l),Fw(o,c));const h=ns(a,o,c.directiveStart,c);Rt(h,a);const _=ei(c,a);return _&&Rt(_,a),h}(h,l,a);if(o[8]=l[8]=_,null!==c)for(const I of c)I(_,a);if(a.contentQueries){const I=ur();a.contentQueries(1,_,I.directiveStart)}const w=ur();return!h.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(Lo(w.index),Lw(l[1],w,0,w.directiveStart,w.directiveEnd,a),wl(a,_)),_}(dt,this.componentDef,Se,[$w]),Kp(fe,Se,null)}finally{wa()}return new VM(this.componentType,$e,Mh(Qe,Se),Se,Qe)}}class VM extends class JA{}{constructor(a,l,c,h,_){super(),this.location=c,this._rootLView=h,this._tNode=_,this.instance=l,this.hostView=this.changeDetectorRef=new oI(h),this.componentType=a}setInput(a,l){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[a])){const _=this._rootLView;Va(_[1],_,h,a,l),JC(_,this._tNode.index)}}get injector(){return new rs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function $w(){const o=ur();Xf(Ne()[1],o)}function Gw(o){let a=function Vh(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),l=!0;const c=[o];for(;a;){let h;if(Jr(o))h=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new $(903,!1);h=a.\u0275dir}if(h){if(l){c.push(h);const w=o;w.inputs=zw(o.inputs),w.declaredInputs=zw(o.declaredInputs),w.outputs=zw(o.outputs);const I=h.hostBindings;I&&uI(o,I);const D=h.viewQuery,R=h.contentQueries;if(D&&BM(o,D),R&&UM(o,R),re(o.inputs,h.inputs),re(o.declaredInputs,h.declaredInputs),re(o.outputs,h.outputs),Jr(h)&&h.data.animation){const F=o.data;F.animation=(F.animation||[]).concat(h.data.animation)}}const _=h.features;if(_)for(let w=0;w<_.length;w++){const I=_[w];I&&I.ngInherit&&I(o),I===Gw&&(l=!1)}}a=Object.getPrototypeOf(a)}!function lI(o){let a=0,l=null;for(let c=o.length-1;c>=0;c--){const h=o[c];h.hostVars=a+=h.hostVars,h.hostAttrs=Bo(h.hostAttrs,l=Bo(l,h.hostAttrs))}}(c)}function zw(o){return o===Ar?{}:o===Ht?[]:o}function BM(o,a){const l=o.viewQuery;o.viewQuery=l?(c,h)=>{a(c,h),l(c,h)}:a}function UM(o,a){const l=o.contentQueries;o.contentQueries=l?(c,h,_)=>{a(c,h,_),l(c,h,_)}:a}function uI(o,a){const l=o.hostBindings;o.hostBindings=l?(c,h)=>{a(c,h),l(c,h)}:a}let Kc=null;function gu(){if(!Kc){const o=Cn.Symbol;if(o&&o.iterator)Kc=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<a.length;++l){const c=a[l];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Kc=c)}}}return Kc}function mu(o){return!!Hi(o)&&(Array.isArray(o)||!(o instanceof Map)&&gu()in o)}function Hi(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function $i(o,a,l){return!Object.is(o[a],l)&&(o[a]=l,!0)}function yu(o,a,l,c){const h=Ne();return $i(h,el(),a)&&(tn(),La(In(),h,o,a,l,c)),yu}function $_(o,a,l,c,h,_,w,I){const D=Ne(),R=tn(),F=o+22,H=R.firstCreatePass?function $M(o,a,l,c,h,_,w,I,D){const R=a.consts,F=pu(a,o,4,w||null,ts(R,I));N_(a,l,F,ts(R,D)),Xf(a,F);const H=F.tViews=Pw(2,F,c,h,_,a.directiveRegistry,a.pipeRegistry,null,a.schemas,R);return null!==a.queries&&(a.queries.template(a,F),H.queries=a.queries.embeddedTView(F)),F}(F,R,D,a,l,c,h,_,w):R.data[F];hi(H,!1);const ne=D[11].createComment("");nr(R,D,ne,H),Rt(ne,D),V_(D,D[F]=tI(ne,D,ne,H)),Bu(H)&&Zp(R,D,H),null!=w&&Yp(D,H,I)}function Jc(o,a,l){const c=Ne();return $i(c,el(),a)&&zs(tn(),In(),c,o,a,c[11],l,!1),Jc}function ed(o,a,l,c,h){const w=h?"class":"style";Va(o,l,a.inputs[w],w,c)}function qh(o,a,l,c){const h=Ne(),_=tn(),w=22+o,I=h[11],D=h[w]=Ic(I,a,function Lm(){return Pt.lFrame.currentNamespace}()),R=_.firstCreatePass?function GM(o,a,l,c,h,_,w){const I=a.consts,R=pu(a,o,2,h,ts(I,_));return N_(a,l,R,ts(I,w)),null!==R.attrs&&Lh(R,R.attrs,!1),null!==R.mergedAttrs&&Lh(R,R.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,R),R}(w,_,h,0,a,l,c):_.data[w];hi(R,!0);const F=R.mergedAttrs;null!==F&&Kl(I,D,F);const H=R.classes;null!==H&&bp(I,D,H);const ne=R.styles;return null!==ne&&d_(I,D,ne),64!=(64&R.flags)&&nr(_,h,D,R),0===function zu(){return Pt.lFrame.elementDepthCount}()&&Rt(D,h),function Ul(){Pt.lFrame.elementDepthCount++}(),Bu(R)&&(Zp(_,h,R),YC(_,R,h)),null!==c&&Yp(h,R),qh}function vu(){let o=ur();$l()?va():(o=o.parent,hi(o,!1));const a=o;!function Wu(){Pt.lFrame.elementDepthCount--}();const l=tn();return l.firstCreatePass&&(Xf(l,o),Pl(o)&&l.queries.elementEnd(o)),null!=a.classesWithoutHost&&function Ii(o){return 0!=(16&o.flags)}(a)&&ed(l,a,Ne(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Jf(o){return 0!=(32&o.flags)}(a)&&ed(l,a,Ne(),a.stylesWithoutHost,!1),vu}function qw(o,a,l,c){return qh(o,a,l,c),vu(),qw}function z_(o,a,l){const c=Ne(),h=tn(),_=o+22,w=h.firstCreatePass?function G_(o,a,l,c,h){const _=a.consts,w=ts(_,c),I=pu(a,o,8,"ng-container",w);return null!==w&&Lh(I,w,!0),N_(a,l,I,ts(_,h)),null!==a.queries&&a.queries.elementStart(a,I),I}(_,h,c,a,l):h.data[_];hi(w,!0);const I=c[_]=c[11].createComment("");return nr(h,c,I,w),Rt(I,c),Bu(w)&&(Zp(h,c,w),YC(h,w,c)),null!=l&&Yp(c,w),z_}function W_(){let o=ur();const a=tn();return $l()?va():(o=o.parent,hi(o,!1)),a.firstCreatePass&&(Xf(a,o),Pl(o)&&a.queries.elementEnd(o)),W_}function q_(){return Ne()}function Kw(o){return!!o&&"function"==typeof o.then}function K_(o){return!!o&&"function"==typeof o.subscribe}const pI=K_;function Kh(o,a,l,c){const h=Ne(),_=tn(),w=ur();return Jp(_,h,h[11],w,o,a,0,c),Kh}function Z_(o,a){const l=ur(),c=Ne(),h=tn();return Jp(h,c,yn(Yu(h.data),l,c),l,o,a),Z_}function Jp(o,a,l,c,h,_,w,I){const D=Bu(c),F=o.firstCreatePass&&Sn(o),H=a[8],ne=Hw(a);let fe=!0;if(3&c.type||I){const Qe=ei(c,a),dt=I?I(Qe):Qe,Dt=ne.length,Re=I?Mn=>I(Zn(Mn[c.index])):c.index;let Ut=null;if(!I&&D&&(Ut=function gI(o,a,l,c){const h=o.cleanup;if(null!=h)for(let _=0;_<h.length-1;_+=2){const w=h[_];if(w===l&&h[_+1]===c){const I=a[7],D=h[_+2];return I.length>D?I[D]:null}"string"==typeof w&&(_+=2)}return null}(o,a,h,c.index)),null!==Ut)(Ut.__ngLastListenerFn__||Ut).__ngNextListenerFn__=_,Ut.__ngLastListenerFn__=_,fe=!1;else{_=eg(c,a,H,_,!1);const Mn=l.listen(dt,h,_);ne.push(_,Mn),F&&F.push(h,Re,Dt,Dt+1)}}else _=eg(c,a,H,_,!1);const Se=c.outputs;let $e;if(fe&&null!==Se&&($e=Se[h])){const Qe=$e.length;if(Qe)for(let dt=0;dt<Qe;dt+=2){const ir=a[$e[dt]][$e[dt+1]].subscribe(_),md=ne.length;ne.push(_,ir),F&&F.push(h,c.index,md,-(md+1))}}}function mI(o,a,l,c){try{return!1!==l(c)}catch(h){return rn(o,h),!1}}function eg(o,a,l,c,h){return function _(w){if(w===Function)return c;B_(2&o.flags?er(o.index,a):a);let D=mI(a,0,c,w),R=_.__ngNextListenerFn__;for(;R;)D=mI(a,0,R,w)&&D,R=R.__ngNextListenerFn__;return h&&!1===D&&(w.preventDefault(),w.returnValue=!1),D}}function td(o=1){return function Qf(o){return(Pt.lFrame.contextLView=function jd(o,a){for(;o>0;)a=a[15],o--;return a}(o,Pt.lFrame.contextLView))[8]}(o)}function Il(o,a,l,c,h){const _=o[l+1],w=null===a;let I=c?Fr(_):Pa(_),D=!1;for(;0!==I&&(!1===D||w);){const F=o[I+1];WM(o[I],a)&&(D=!0,o[I+1]=c?T_(F):jp(F)),I=c?Fr(F):Pa(F)}D&&(o[l+1]=c?jp(_):T_(_))}function WM(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&is(o,a)>=0}const si={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Yh(o){return o.substring(si.key,si.keyEnd)}function ng(o,a){const l=si.textEnd;return l===a?-1:(a=si.keyEnd=function Xw(o,a,l){for(;a<l&&o.charCodeAt(a)>32;)a++;return a}(o,si.key=a,l),wo(o,a,l))}function wo(o,a,l){for(;a<l&&o.charCodeAt(a)<=32;)a++;return a}function ty(o,a,l){return zi(o,a,l,!1),ty}function sg(o,a){return zi(o,a,null,!0),sg}function Dl(o){!function Eo(o,a,l,c){const h=tn(),_=Fi(2);h.firstUpdatePass&&CI(h,null,_,c);const w=Ne();if(l!==qt&&$i(w,_,l)){const I=h.data[Hr()];if(SI(I,c)&&!og(h,_)){let D=c?I.classesWithoutHost:I.stylesWithoutHost;null!==D&&(l=ce(D,l||"")),ed(h,I,w,l,c)}else!function ex(o,a,l,c,h,_,w,I){h===qt&&(h=Ht);let D=0,R=0,F=0<h.length?h[0]:null,H=0<_.length?_[0]:null;for(;null!==F||null!==H;){const ne=D<h.length?h[D+1]:void 0,fe=R<_.length?_[R+1]:void 0;let $e,Se=null;F===H?(D+=2,R+=2,ne!==fe&&(Se=H,$e=fe)):null===H||null!==F&&F<H?(D+=2,Se=F):(R+=2,Se=H,$e=fe),null!==Se&&DI(o,a,l,c,Se,$e,w,I),F=D<h.length?h[D]:null,H=R<_.length?_[R]:null}}(h,I,w,w[11],w[_+1],w[_+1]=function II(o,a,l){if(null==l||""===l)return Ht;const c=[],h=L(l);if(Array.isArray(h))for(let _=0;_<h.length;_++)o(c,h[_],!0);else if("object"==typeof h)for(const _ in h)h.hasOwnProperty(_)&&o(c,_,h[_]);else"string"==typeof h&&a(c,h);return c}(o,a,l),c,_)}}(Gr,bo,o,!0)}function bo(o,a){for(let l=function KM(o){return function ig(o){si.key=0,si.keyEnd=0,si.value=0,si.valueEnd=0,si.textEnd=o.length}(o),ng(o,wo(o,0,si.textEnd))}(a);l>=0;l=ng(a,l))Gr(o,Yh(a),!0)}function zi(o,a,l,c){const h=Ne(),_=tn(),w=Fi(2);_.firstUpdatePass&&CI(_,o,w,c),a!==qt&&$i(h,w,a)&&DI(_,_.data[Hr()],h,h[11],o,h[w+1]=function tx(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=me(L(o)))),o}(a,l),c,w)}function og(o,a){return a>=o.expandoStartIndex}function CI(o,a,l,c){const h=o.data;if(null===h[l+1]){const _=h[Hr()],w=og(o,l);SI(_,c)&&null===a&&!w&&(a=!1),a=function YM(o,a,l,c){const h=Yu(o);let _=c?a.residualClasses:a.residualStyles;if(null===h)0===(c?a.classBindings:a.styleBindings)&&(l=ag(l=Jw(null,o,a,l,c),a.attrs,c),_=null);else{const w=a.directiveStylingLast;if(-1===w||o[w]!==h)if(l=Jw(h,o,a,l,c),null===_){let D=function QM(o,a,l){const c=l?a.classBindings:a.styleBindings;if(0!==Pa(c))return o[Fr(c)]}(o,a,c);void 0!==D&&Array.isArray(D)&&(D=Jw(null,o,a,D[1],c),D=ag(D,a.attrs,c),function XM(o,a,l,c){o[Fr(l?a.classBindings:a.styleBindings)]=c}(o,a,c,D))}else _=function JM(o,a,l){let c;const h=a.directiveEnd;for(let _=1+a.directiveStylingLast;_<h;_++)c=ag(c,o[_].hostAttrs,l);return ag(c,a.attrs,l)}(o,a,c)}return void 0!==_&&(c?a.residualClasses=_:a.residualStyles=_),l}(h,_,a,c),function nd(o,a,l,c,h,_){let w=_?a.classBindings:a.styleBindings,I=Fr(w),D=Pa(w);o[c]=l;let F,R=!1;if(Array.isArray(l)){const H=l;F=H[1],(null===F||is(H,F)>0)&&(R=!0)}else F=l;if(h)if(0!==D){const ne=Fr(o[I+1]);o[c+1]=U(ne,I),0!==ne&&(o[ne+1]=Sw(o[ne+1],c)),o[I+1]=function jC(o,a){return 131071&o|a<<17}(o[I+1],c)}else o[c+1]=U(I,0),0!==I&&(o[I+1]=Sw(o[I+1],c)),I=c;else o[c+1]=U(D,0),0===I?I=c:o[D+1]=Sw(o[D+1],c),D=c;R&&(o[c+1]=jp(o[c+1])),Il(o,F,c,!0),Il(o,F,c,!1),function Zh(o,a,l,c,h){const _=h?o.residualClasses:o.residualStyles;null!=_&&"string"==typeof a&&is(_,a)>=0&&(l[c+1]=T_(l[c+1]))}(a,F,o,c,_),w=U(I,D),_?a.classBindings=w:a.styleBindings=w}(h,_,a,l,w,c)}}function Jw(o,a,l,c,h){let _=null;const w=l.directiveEnd;let I=l.directiveStylingLast;for(-1===I?I=l.directiveStart:I++;I<w&&(_=a[I],c=ag(c,_.hostAttrs,h),_!==o);)I++;return null!==o&&(l.directiveStylingLast=I),c}function ag(o,a,l){const c=l?1:2;let h=-1;if(null!==a)for(let _=0;_<a.length;_++){const w=a[_];"number"==typeof w?h=w:h===c&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Gr(o,w,!!l||a[++_]))}return void 0===o?null:o}function DI(o,a,l,c,h,_,w,I){if(!(3&a.type))return;const D=o.data,R=D[I+1];ny(function HC(o){return 1==(1&o)}(R)?TI(D,a,l,h,Pa(R),w):void 0)||(ny(_)||function Tw(o){return 2==(2&o)}(R)&&(_=TI(D,null,l,h,I,w)),function c_(o,a,l,c,h){if(a)h?o.addClass(l,c):o.removeClass(l,c);else{let _=-1===c.indexOf("-")?void 0:js.DashCase;null==h?o.removeStyle(l,c,_):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),_|=js.Important),o.setStyle(l,c,h,_))}}(c,w,Ni(Hr(),l),h,_))}function TI(o,a,l,c,h,_){const w=null===a;let I;for(;h>0;){const D=o[h],R=Array.isArray(D),F=R?D[1]:D,H=null===F;let ne=l[h+1];ne===qt&&(ne=H?Ht:void 0);let fe=H?Ta(ne,c):F===c?ne:void 0;if(R&&!ny(fe)&&(fe=Ta(D,c)),ny(fe)&&(I=fe,w))return I;const Se=o[h+1];h=w?Fr(Se):Pa(Se)}if(null!==a){let D=_?a.residualClasses:a.residualStyles;null!=D&&(I=Ta(D,c))}return I}function ny(o){return void 0!==o}function SI(o,a){return 0!=(o.flags&(a?16:32))}function lg(o,a=""){const l=Ne(),c=tn(),h=o+22,_=c.firstCreatePass?pu(c,h,1,a,null):c.data[h],w=l[h]=function Cc(o,a){return o.createText(a)}(l[11],a);nr(c,l,w,_),hi(_,!1)}function ug(o){return ry("",o,""),ug}function ry(o,a,l){const c=Ne(),h=function Qc(o,a,l,c){return $i(o,el(),l)?a+ee(l)+c:qt}(c,o,a,l);return h!==qt&&function pn(o,a,l){const c=Ni(a,o);!function hh(o,a,l){o.setValue(a,l)}(o[11],c,l)}(c,Hr(),h),ry}function hb(o,a,l){const c=Ne();return $i(c,el(),a)&&zs(tn(),In(),c,o,a,c[11],l,!0),hb}function fb(o,a,l){const c=Ne();if($i(c,el(),a)){const _=tn(),w=In();zs(_,w,c,o,a,yn(Yu(_.data),w,c),l,!0)}return fb}const rd=void 0;var LI=["en",[["a","p"],["AM","PM"],rd],[["AM","PM"],rd,rd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],rd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],rd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",rd,"{1} 'at' {0}",rd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function pb(o){const l=Math.floor(Math.abs(o)),c=o.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===c?1:5}];let Xh={};function oy(o){const a=function ay(o){return o.toLowerCase().replace(/_/g,"-")}(o);let l=mb(a);if(l)return l;const c=a.split("-")[0];if(l=mb(c),l)return l;if("en"===c)return LI;throw new $(701,!1)}function gb(o){return oy(o)[kt.PluralCase]}function mb(o){return o in Xh||(Xh[o]=Cn.ng&&Cn.ng.common&&Cn.ng.common.locales&&Cn.ng.common.locales[o]),Xh[o]}var kt=(()=>((kt=kt||{})[kt.LocaleId=0]="LocaleId",kt[kt.DayPeriodsFormat=1]="DayPeriodsFormat",kt[kt.DayPeriodsStandalone=2]="DayPeriodsStandalone",kt[kt.DaysFormat=3]="DaysFormat",kt[kt.DaysStandalone=4]="DaysStandalone",kt[kt.MonthsFormat=5]="MonthsFormat",kt[kt.MonthsStandalone=6]="MonthsStandalone",kt[kt.Eras=7]="Eras",kt[kt.FirstDayOfWeek=8]="FirstDayOfWeek",kt[kt.WeekendRange=9]="WeekendRange",kt[kt.DateFormat=10]="DateFormat",kt[kt.TimeFormat=11]="TimeFormat",kt[kt.DateTimeFormat=12]="DateTimeFormat",kt[kt.NumberSymbols=13]="NumberSymbols",kt[kt.NumberFormats=14]="NumberFormats",kt[kt.CurrencyCode=15]="CurrencyCode",kt[kt.CurrencySymbol=16]="CurrencySymbol",kt[kt.CurrencyName=17]="CurrencyName",kt[kt.Currencies=18]="Currencies",kt[kt.Directionality=19]="Directionality",kt[kt.PluralCase=20]="PluralCase",kt[kt.ExtraData=21]="ExtraData",kt))();const Jh="en-US";let BI=Jh;function Dy(o,a,l,c,h){if(o=C(o),Array.isArray(o))for(let _=0;_<o.length;_++)Dy(o[_],a,l,c,h);else{const _=tn(),w=Ne();let I=ml(o)?o:C(o.provide),D=kp(o);const R=ur(),F=1048575&R.providerIndexes,H=R.directiveStart,ne=R.providerIndexes>>20;if(ml(o)||!o.multi){const fe=new ec(D,h,Ui),Se=Tb(I,a,h?F:F+ne,H);-1===Se?(Ia(Rn(R,w),_,I),Db(_,o,a.length),a.push(I),R.directiveStart++,R.directiveEnd++,h&&(R.providerIndexes+=1048576),l.push(fe),w.push(fe)):(l[Se]=fe,w[Se]=fe)}else{const fe=Tb(I,a,F+ne,H),Se=Tb(I,a,F,F+ne),$e=fe>=0&&l[fe],Qe=Se>=0&&l[Se];if(h&&!Qe||!h&&!$e){Ia(Rn(R,w),_,I);const dt=function sf(o,a,l,c,h){const _=new ec(o,l,Ui);return _.multi=[],_.index=a,_.componentProviders=0,oD(_,h,c&&!l),_}(h?aD:Sb,l.length,h,c,D);!h&&Qe&&(l[Se].providerFactory=dt),Db(_,o,a.length,0),a.push(I),R.directiveStart++,R.directiveEnd++,h&&(R.providerIndexes+=1048576),l.push(dt),w.push(dt)}else Db(_,o,fe>-1?fe:Se,oD(l[h?Se:fe],D,!h&&c));!h&&c&&Qe&&l[Se].componentProviders++}}}function Db(o,a,l,c){const h=ml(a),_=function uC(o){return!!o.useClass}(a);if(h||_){const D=(_?C(a.useClass):a).prototype.ngOnDestroy;if(D){const R=o.destroyHooks||(o.destroyHooks=[]);if(!h&&a.multi){const F=R.indexOf(l);-1===F?R.push(l,[c,D]):R[F+1].push(c,D)}else R.push(l,D)}}}function oD(o,a,l){return l&&o.componentProviders++,o.multi.push(a)-1}function Tb(o,a,l,c){for(let h=l;h<c;h++)if(a[h]===o)return h;return-1}function Sb(o,a,l,c){return Ab(this.multi,[])}function aD(o,a,l,c){const h=this.multi;let _;if(this.providerFactory){const w=this.providerFactory.componentProviders,I=ns(l,l[1],this.providerFactory.index,c);_=I.slice(0,w),Ab(h,_);for(let D=w;D<I.length;D++)_.push(I[D])}else _=[],Ab(h,_);return _}function Ab(o,a){for(let l=0;l<o.length;l++)a.push((0,o[l])());return a}function Sl(o,a=[]){return l=>{l.providersResolver=(c,h)=>function Ox(o,a,l){const c=tn();if(c.firstCreatePass){const h=Jr(o);Dy(l,c.data,c.blueprint,h,!0),Dy(a,c.data,c.blueprint,h,!1)}}(c,h?h(o):o,a)}}class af{}class Ty{}function Sy(o,a){return new ld(o,a??null)}class ld extends af{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new zn(this);const c=en(a);this._bootstrapComponents=_l(c.bootstrap),this._r3Injector=kC(a,l,[{provide:af,useValue:this},{provide:Pp,useValue:this.componentFactoryResolver}],me(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Mb extends Ty{constructor(a){super(),this.moduleType=a}create(a){return new ld(this.moduleType,a)}}class lD extends af{constructor(a,l,c){super(),this.componentFactoryResolver=new zn(this),this.instance=null;const h=new Rp([...a,{provide:af,useValue:this},{provide:Pp,useValue:this.componentFactoryResolver}],l||y_(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function Ay(o,a,l=null){return new lD(o,a,l).injector}let uD=(()=>{class o{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const c=oC(0,l.type),h=c.length>0?Ay([c],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,h)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=ot({token:o,providedIn:"environment",factory:()=>new o(Qn(Vc))}),o})();function Cg(o){o.getStandaloneInjector=a=>a.get(uD).getOrCreateStandaloneInjector(o)}function Ob(o,a,l,c){return function lf(o,a,l,c,h,_){const w=a+l;return $i(o,w,h)?function vo(o,a,l){return o[a]=l}(o,w+1,_?c.call(_,h):c(h)):function Dg(o,a){const l=o[a];return l===qt?void 0:l}(o,w+1)}(Ne(),function fi(){const o=Pt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}(),o,a,l,c)}function Fb(o){return a=>{setTimeout(o,void 0,a)}}const Ua=class wD extends f.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,c){let h=a,_=l||(()=>null),w=c;if(a&&"object"==typeof a){const D=a;h=D.next?.bind(D),_=D.error?.bind(D),w=D.complete?.bind(D)}this.__isAsync&&(_=Fb(_),h&&(h=Fb(h)),w&&(w=Fb(w)));const I=super.subscribe({next:h,error:_,complete:w});return a instanceof de.w0&&a.add(I),I}};function Gx(){return this._results[gu()]()}class Lb{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=gu(),c=Lb.prototype;c[l]||(c[l]=Gx)}get changes(){return this._changes||(this._changes=new Ua)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const c=this;c.dirty=!1;const h=$r(a);(this._changesDetected=!function zm(o,a,l){if(o.length!==a.length)return!1;for(let c=0;c<o.length;c++){let h=o[c],_=a[c];if(l&&(h=l(h),_=l(_)),_!==h)return!1}return!0}(c._results,h,l))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ag=(()=>{class o{}return o.__NG_ELEMENT_ID__=qx,o})();const zx=Ag,Wx=class extends zx{constructor(a,l,c){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=c}createEmbeddedView(a,l){const c=this._declarationTContainer.tViews,h=qp(this._declarationLView,c,a,16,null,c.declTNode,null,null,null,null,l||null);h[17]=this._declarationLView[this._declarationTContainer.index];const w=this._declarationLView[19];return null!==w&&(h[19]=w.createEmbeddedView(c)),Kp(c,h,a),new bl(h)}};function qx(){return Oy(ur(),Ne())}function Oy(o,a){return 4&o.type?new Wx(a,o,Mh(o,a)):null}let Py=(()=>{class o{}return o.__NG_ELEMENT_ID__=Kx,o})();function Kx(){return CD(ur(),Ne())}const Zx=Py,bD=class extends Zx{constructor(a,l,c){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=c}get element(){return Mh(this._hostTNode,this._hostLView)}get injector(){return new rs(this._hostTNode,this._hostLView)}get parentInjector(){const a=Ql(this._hostTNode,this._hostLView);if(rl(a)){const l=Ps(a,this._hostLView),c=Ca(a);return new rs(l[1].data[c+8],l)}return new rs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=ED(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,l,c){let h,_;"number"==typeof c?h=c:null!=c&&(h=c.index,_=c.injector);const w=a.createEmbeddedView(l||{},_);return this.insert(w,h),w}createComponent(a,l,c,h,_){const w=a&&!function Vi(o){return"function"==typeof o}(a);let I;if(w)I=l;else{const H=l||{};I=H.index,c=H.injector,h=H.projectableNodes,_=H.environmentInjector||H.ngModuleRef}const D=w?a:new zc(ve(a)),R=c||this.parentInjector;if(!_&&null==D.ngModule){const ne=(w?R:this.parentInjector).get(Vc,null);ne&&(_=ne)}const F=D.create(R,h,void 0,_);return this.insert(F.hostView,I),F}insert(a,l){const c=a._lView,h=c[1];if(function Qa(o){return di(o[3])}(c)){const F=this.indexOf(a);if(-1!==F)this.detach(F);else{const H=c[3],ne=new bD(H,H[6],H[3]);ne.detach(ne.indexOf(a))}}const _=this._adjustIndex(l),w=this._lContainer;!function ew(o,a,l,c){const h=10+c,_=l.length;c>0&&(l[h-1][4]=a),c<_-10?(a[4]=l[h],ip(l,10+c,a)):(l.push(a),a[4]=null),a[3]=l;const w=a[17];null!==w&&l!==w&&function tw(o,a){const l=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===l?o[9]=[a]:l.push(a)}(w,a);const I=a[19];null!==I&&I.insertView(o),a[2]|=64}(h,c,w,_);const I=wp(_,w),D=c[11],R=Dc(D,w[7]);return null!==R&&function mp(o,a,l,c,h,_){c[0]=h,c[6]=a,Mc(o,c,l,1,h,_)}(h,w[6],D,c,R,I),a.attachToViewContainerRef(),ip(Vb(w),_,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=ED(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),c=xa(this._lContainer,l);c&&(ul(Vb(this._lContainer),l),pl(c[1],c))}detach(a){const l=this._adjustIndex(a,-1),c=xa(this._lContainer,l);return c&&null!=ul(Vb(this._lContainer),l)?new bl(c):null}_adjustIndex(a,l=0){return a??this.length+l}};function ED(o){return o[8]}function Vb(o){return o[8]||(o[8]=[])}function CD(o,a){let l;const c=a[o.index];if(di(c))l=c;else{let h;if(8&o.type)h=Zn(c);else{const _=a[11];h=_.createComment("");const w=ei(o,a);Ra(_,Dc(_,w),h,function Tc(o,a){return o.nextSibling(a)}(_,w),!1)}a[o.index]=l=tI(c,a,h,o),V_(a,l)}return new bD(l,o,a)}class Mg{constructor(a){this.queryList=a,this.matches=null}clone(){return new Mg(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ny{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const c=null!==a.contentQueries?a.contentQueries[0]:l.length,h=[];for(let _=0;_<c;_++){const w=l.getByIndex(_);h.push(this.queries[w.indexInDeclarationView].clone())}return new Ny(h)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==RD(a,l).matches&&this.queries[l].setDirty()}}class ID{constructor(a,l,c=null){this.predicate=a,this.flags=l,this.read=c}}class Fy{constructor(a=[]){this.queries=a}elementStart(a,l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let c=0;c<this.length;c++){const h=null!==l?l.length:0,_=this.getByIndex(c).embeddedTView(a,h);_&&(_.indexInDeclarationView=c,null!==l?l.push(_):l=[_])}return null!==l?new Fy(l):null}template(a,l){for(let c=0;c<this.queries.length;c++)this.queries[c].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class Bb{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new Bb(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let c=a.parent;for(;null!==c&&8&c.type&&c.index!==l;)c=c.parent;return l===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const _=c[h];this.matchTNodeWithReadOption(a,l,Qx(l,_)),this.matchTNodeWithReadOption(a,l,Ns(l,a,_,!1,!1))}else c===Ag?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,Ns(l,a,c,!1,!1))}matchTNodeWithReadOption(a,l,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===Np||h===Py||h===Ag&&4&l.type)this.addMatch(l.index,-2);else{const _=Ns(l,a,h,!1,!1);null!==_&&this.addMatch(l.index,_)}else this.addMatch(l.index,c)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function Qx(o,a){const l=o.localNames;if(null!==l)for(let c=0;c<l.length;c+=2)if(l[c]===a)return l[c+1];return null}function Jx(o,a,l,c){return-1===l?function Xx(o,a){return 11&o.type?Mh(o,a):4&o.type?Oy(o,a):null}(a,o):-2===l?function DD(o,a,l){return l===Np?Mh(a,o):l===Ag?Oy(a,o):l===Py?CD(a,o):void 0}(o,a,c):ns(o,o[1],l,a)}function TD(o,a,l,c){const h=a[19].queries[c];if(null===h.matches){const _=o.data,w=l.matches,I=[];for(let D=0;D<w.length;D+=2){const R=w[D];I.push(R<0?null:Jx(a,_[R],w[D+1],l.metadata.read))}h.matches=I}return h.matches}function Ub(o,a,l,c){const h=o.queries.getByIndex(l),_=h.matches;if(null!==_){const w=TD(o,a,h,l);for(let I=0;I<_.length;I+=2){const D=_[I];if(D>0)c.push(w[I/2]);else{const R=_[I+1],F=a[-D];for(let H=10;H<F.length;H++){const ne=F[H];ne[17]===ne[3]&&Ub(ne[1],ne,R,c)}if(null!==F[9]){const H=F[9];for(let ne=0;ne<H.length;ne++){const fe=H[ne];Ub(fe[1],fe,R,c)}}}}}return c}function eR(o){const a=Ne(),l=tn(),c=ho();Fo(c+1);const h=RD(l,c);if(o.dirty&&function Bl(o){return 4==(4&o[2])}(a)===(2==(2&h.metadata.flags))){if(null===h.matches)o.reset([]);else{const _=h.crossesNgTemplate?Ub(l,a,c,[]):TD(l,a,h,c);o.reset(_,pC),o.notifyOnChanges()}return!0}return!1}function jb(o,a,l){const c=tn();c.firstCreatePass&&(xD(c,new ID(o,a,l),-1),2==(2&a)&&(c.staticViewQueries=!0)),MD(c,Ne(),a)}function SD(o,a,l,c){const h=tn();if(h.firstCreatePass){const _=ur();xD(h,new ID(a,l,c),_.index),function nR(o,a){const l=o.contentQueries||(o.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(o.queries.length-1,a)}(h,o),2==(2&l)&&(h.staticContentQueries=!0)}MD(h,Ne(),l)}function AD(){return function tR(o,a){return o[19].queries[a].queryList}(Ne(),ho())}function MD(o,a,l){const c=new Lb(4==(4&l));QC(o,a,c,c.destroy),null===a[19]&&(a[19]=new Ny),a[19].queries.push(new Mg(c))}function xD(o,a,l){null===o.queries&&(o.queries=new Fy),o.queries.track(new Bb(a,l))}function RD(o,a){return o.queries.getByIndex(a)}function Og(...o){}const Pg=new Jt("Application Initializer");let cf=(()=>{class o{constructor(l){this.appInits=l,this.resolve=Og,this.reject=Og,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const _=this.appInits[h]();if(Kw(_))l.push(_);else if(pI(_)){const w=new Promise((I,D)=>{_.subscribe({complete:I,error:D})});l.push(w)}}Promise.all(l).then(()=>{c()}).catch(h=>{this.reject(h)}),0===l.length&&c(),this.initialized=!0}}return o.\u0275fac=function(l){return new(l||o)(Qn(Pg,8))},o.\u0275prov=ot({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Uy=new Jt("AppId",{providedIn:"root",factory:function HD(){return`${Xb()}${Xb()}${Xb()}`}});function Xb(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const $D=new Jt("Platform Initializer"),gR=new Jt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),df=new Jt("appBootstrapListener"),jy=new Jt("AnimationModuleType");let GD=(()=>{class o{log(l){console.log(l)}warn(l){console.warn(l)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=ot({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const Hy=new Jt("LocaleId",{providedIn:"root",factory:()=>Et(Hy,it.Optional|it.SkipSelf)||function _R(){return typeof $localize<"u"&&$localize.locale||Jh}()}),yR=new Jt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class WD{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let Jb=(()=>{class o{compileModuleSync(l){return new Mb(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const c=this.compileModuleSync(l),_=_l(en(l).declarations).reduce((w,I)=>{const D=ve(I);return D&&w.push(new zc(D)),w},[]);return new WD(c,_)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=ot({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const KD=(()=>Promise.resolve(0))();function Wy(o){typeof Zone>"u"?KD.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Io{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ua(!1),this.onMicrotaskEmpty=new Ua(!1),this.onStable=new Ua(!1),this.onError=new Ua(!1),typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const _=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new _("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&l,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function e0(){let o=Cn.requestAnimationFrame,a=Cn.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const c=a[Zone.__symbol__("OriginalDelegate")];c&&(a=c)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function n0(o){const a=()=>{!function qy(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Cn,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,Ng(o),o.isCheckStableRunning=!0,t0(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),Ng(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,c,h,_,w,I)=>{try{return Ky(o),l.invokeTask(h,_,w,I)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||o.shouldCoalesceRunChangeDetection)&&a(),r0(o)}},onInvoke:(l,c,h,_,w,I,D)=>{try{return Ky(o),l.invoke(h,_,w,I,D)}finally{o.shouldCoalesceRunChangeDetection&&a(),r0(o)}},onHasTask:(l,c,h,_)=>{l.hasTask(h,_),c===h&&("microTask"==_.change?(o._hasPendingMicrotasks=_.microTask,Ng(o),t0(o)):"macroTask"==_.change&&(o.hasPendingMacrotasks=_.macroTask))},onHandleError:(l,c,h,_)=>(l.handleError(h,_),o.runOutsideAngular(()=>o.onError.emit(_)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Io.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(Io.isInAngularZone())throw new $(909,!1)}run(a,l,c){return this._inner.run(a,l,c)}runTask(a,l,c,h){const _=this._inner,w=_.scheduleEventTask("NgZoneEvent: "+h,a,bR,Og,Og);try{return _.runTask(w,l,c)}finally{_.cancelTask(w)}}runGuarded(a,l,c){return this._inner.runGuarded(a,l,c)}runOutsideAngular(a){return this._outer.run(a)}}const bR={};function t0(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function Ng(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function Ky(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function r0(o){o._nesting--,t0(o)}class ER{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ua,this.onMicrotaskEmpty=new Ua,this.onStable=new Ua,this.onError=new Ua}run(a,l,c){return a.apply(l,c)}runGuarded(a,l,c){return a.apply(l,c)}runOutsideAngular(a){return a()}runTask(a,l,c,h){return a.apply(l,c)}}const s0=new Jt(""),pd=new Jt("");let o0,ZD=(()=>{class o{constructor(l,c,h){this._ngZone=l,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,o0||(function CR(o){o0=o}(h),h.addToWindow(c)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Io.assertNotInAngularZone(),Wy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Wy(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(l)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,c,h){let _=-1;c&&c>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==_),l(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:l,timeoutId:_,updateCb:h})}whenStable(l,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,c,h){return[]}}return o.\u0275fac=function(l){return new(l||o)(Qn(Io),Qn(YD),Qn(pd))},o.\u0275prov=ot({token:o,factory:o.\u0275fac}),o})(),YD=(()=>{class o{constructor(){this._applications=new Map}registerApplication(l,c){this._applications.set(l,c)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,c=!0){return o0?.findTestabilityInTree(this,l,c)??null}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=ot({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})(),bu=null;const QD=new Jt("AllowMultipleToken"),a0=new Jt("PlatformDestroyListeners");class XD{constructor(a,l){this.name=a,this.token=l}}function tT(o,a,l=[]){const c=`Platform: ${a}`,h=new Jt(c);return(_=[])=>{let w=Yy();if(!w||w.injector.get(QD,!1)){const I=[...l,..._,{provide:h,useValue:!0}];o?o(I):function JD(o){if(bu&&!bu.get(QD,!1))throw new $(400,!1);bu=o;const a=o.get(c0);(function eT(o){const a=o.get($D,null);a&&a.forEach(l=>l())})(o)}(function u0(o=[],a){return hu.create({name:a,providers:[{provide:xp,useValue:"platform"},{provide:a0,useValue:new Set([()=>bu=null])},...o]})}(I,c))}return function nT(o){const a=Yy();if(!a)throw new $(401,!1);return a}()}}function Yy(){return bu?.get(c0)??null}let c0=(()=>{class o{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,c){const h=function rT(o,a){let l;return l="noop"===o?new ER:("zone.js"===o?void 0:o)||new Io(a),l}(c?.ngZone,function TR(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(c)),_=[{provide:Io,useValue:h}];return h.run(()=>{const w=hu.create({providers:_,parent:this.injector,name:l.moduleType.name}),I=l.create(w),D=I.injector.get(Fp,null);if(!D)throw new $(402,!1);return h.runOutsideAngular(()=>{const R=h.onError.subscribe({next:F=>{D.handleError(F)}});I.onDestroy(()=>{d0(this._modules,I),R.unsubscribe()})}),function SR(o,a,l){try{const c=l();return Kw(c)?c.catch(h=>{throw a.runOutsideAngular(()=>o.handleError(h)),h}):c}catch(c){throw a.runOutsideAngular(()=>o.handleError(c)),c}}(D,h,()=>{const R=I.injector.get(cf);return R.runInitializers(),R.donePromise.then(()=>(function UI(o){Be(o,"Expected localeId to be defined"),"string"==typeof o&&(BI=o.toLowerCase().replace(/_/g,"-"))}(I.injector.get(Hy,Jh)||Jh),this._moduleDoBootstrap(I),I))})})}bootstrapModule(l,c=[]){const h=AR({},c);return function IR(o,a,l){const c=new Mb(l);return Promise.resolve(c)}(0,0,l).then(_=>this.bootstrapModuleFactory(_,h))}_moduleDoBootstrap(l){const c=l.injector.get(hf);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new $(403,!1);l.instance.ngDoBootstrap(c)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new $(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const l=this._injector.get(a0,null);l&&(l.forEach(c=>c()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(l){return new(l||o)(Qn(hu))},o.\u0275prov=ot({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function AR(o,a){return Array.isArray(a)?a.reduce(AR,o):{...o,...a}}let hf=(()=>{class o{constructor(l,c,h){this._zone=l,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new x.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),w=new x.y(I=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{Io.assertNotInAngularZone(),Wy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{Io.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{D.unsubscribe(),R.unsubscribe()}});this.isStable=(0,Y.T)(_,w.pipe((0,K.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,c){const h=l instanceof hC;if(!this._injector.get(cf).done)throw!h&&Nt(l),new $(405,false);let w;w=h?l:this._injector.get(Pp).resolveComponentFactory(l),this.componentTypes.push(w.componentType);const I=function Zy(o){return o.isBoundToModule}(w)?void 0:this._injector.get(af),R=w.create(hu.NULL,[],c||w.selector,I),F=R.location.nativeElement,H=R.injector.get(s0,null);return H?.registerApplication(F),R.onDestroy(()=>{this.detachView(R.hostView),d0(this.components,R),H?.unregisterApplication(F)}),this._loadComponent(R),R}tick(){if(this._runningTick)throw new $(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const c=l;this._views.push(c),c.attachToAppRef(this)}detachView(l){const c=l;d0(this._views,c),c.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(df,[]).concat(this._bootstrapListeners).forEach(h=>h(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>d0(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new $(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(l){return new(l||o)(Qn(Io),Qn(Vc),Qn(Fp))},o.\u0275prov=ot({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function d0(o,a){const l=o.indexOf(a);l>-1&&o.splice(l,1)}let oT=!0,h0=!1;function f0(){return h0=!0,oT}function Fg(){if(h0)throw new Error("Cannot enable prod mode after platform setup.");oT=!1}let xR=(()=>{class o{}return o.__NG_ELEMENT_ID__=f1,o})();function f1(o){return function RR(o,a,l){if(Ka(o)&&!l){const c=er(o.index,a);return new bl(c,c)}return 47&o.type?new bl(a[16],a):null}(ur(),Ne(),16==(16&o))}class _0{constructor(){}supports(a){return mu(a)}create(a){return new uT(a)}}const lT=(o,a)=>a;class uT{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||lT}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,c=this._removalsHead,h=0,_=null;for(;l||c;){const w=!c||l&&l.currentIndex<y0(c,h,_)?l:c,I=y0(w,h,_),D=w.currentIndex;if(w===c)h--,c=c._nextRemoved;else if(l=l._next,null==w.previousIndex)h++;else{_||(_=[]);const R=I-h,F=D-h;if(R!=F){for(let ne=0;ne<R;ne++){const fe=ne<_.length?_[ne]:_[ne]=0,Se=fe+ne;F<=Se&&Se<R&&(_[ne]=fe+1)}_[w.previousIndex]=F-R}}I!==D&&a(w,I,D)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!mu(a))throw new $(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let h,_,w,l=this._itHead,c=!1;if(Array.isArray(a)){this.length=a.length;for(let I=0;I<this.length;I++)_=a[I],w=this._trackByFn(I,_),null!==l&&Object.is(l.trackById,w)?(c&&(l=this._verifyReinsertion(l,_,w,I)),Object.is(l.item,_)||this._addIdentityChange(l,_)):(l=this._mismatch(l,_,w,I),c=!0),l=l._next}else h=0,function jM(o,a){if(Array.isArray(o))for(let l=0;l<o.length;l++)a(o[l]);else{const l=o[gu()]();let c;for(;!(c=l.next()).done;)a(c.value)}}(a,I=>{w=this._trackByFn(h,I),null!==l&&Object.is(l.trackById,w)?(c&&(l=this._verifyReinsertion(l,I,w,h)),Object.is(l.item,I)||this._addIdentityChange(l,I)):(l=this._mismatch(l,I,w,h),c=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,c,h){let _;return null===a?_=this._itTail:(_=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,_,h)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,_,h)):a=this._addAfter(new cT(l,c),_,h),a}_verifyReinsertion(a,l,c,h){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==_?a=this._reinsertAfter(_,a._prev,h):a.currentIndex!=h&&(a.currentIndex=h,this._addToMoves(a,h)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const h=a._prevRemoved,_=a._nextRemoved;return null===h?this._removalsHead=_:h._nextRemoved=_,null===_?this._removalsTail=h:_._prevRemoved=h,this._insertAfter(a,l,c),this._addToMoves(a,c),a}_moveAfter(a,l,c){return this._unlink(a),this._insertAfter(a,l,c),this._addToMoves(a,c),a}_addAfter(a,l,c){return this._insertAfter(a,l,c),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,c){const h=null===l?this._itHead:l._next;return a._next=h,a._prev=l,null===h?this._itTail=a:h._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new dT),this._linkedRecords.put(a),a.currentIndex=c,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,c=a._next;return null===l?this._itHead=c:l._next=c,null===c?this._itTail=l:c._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new dT),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class cT{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Hg{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===l||l<=c.currentIndex)&&Object.is(c.trackById,a))return c;return null}remove(a){const l=a._prevDup,c=a._nextDup;return null===l?this._head=c:l._nextDup=c,null===c?this._tail=l:c._prevDup=l,null===this._head}}class dT{constructor(){this.map=new Map}put(a){const l=a.trackById;let c=this.map.get(l);c||(c=new Hg,this.map.set(l,c)),c.add(a)}get(a,l){const h=this.map.get(a);return h?h.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function y0(o,a,l){const c=o.previousIndex;if(null===c)return c;let h=0;return l&&c<l.length&&(h=l[c]),c+a+h}class hT{constructor(){}supports(a){return a instanceof Map||Hi(a)}create(){return new kR}}class kR{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||Hi(a)))throw new $(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(c,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,c),this._appendAfter=l,l=l._next;else{const _=this._getOrCreateRecordForKey(h,c);l=this._insertBeforeOrAppend(l,_)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let c=l;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const c=a._prev;return l._next=a,l._prev=c,a._prev=l,c&&(c._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const h=this._records.get(a);this._maybeAddToChanges(h,l);const _=h._prev,w=h._next;return _&&(_._next=w),w&&(w._prev=_),h._next=null,h._prev=null,h}const c=new fT(a);return this._records.set(a,c),c.currentValue=l,this._addToAdditions(c),c}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(c=>l(a[c],c))}}class fT{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function v0(){return new Xy([new _0])}let Xy=(()=>{class o{constructor(l){this.factories=l}static create(l,c){if(null!=c){const h=c.factories.slice();l=l.concat(h)}return new o(l)}static extend(l){return{provide:o,useFactory:c=>o.create(l,c||v0()),deps:[[o,new st,new pe]]}}find(l){const c=this.factories.find(h=>h.supports(l));if(null!=c)return c;throw new $(901,!1)}}return o.\u0275prov=ot({token:o,providedIn:"root",factory:v0}),o})();function pT(){return new w0([new hT])}let w0=(()=>{class o{constructor(l){this.factories=l}static create(l,c){if(c){const h=c.factories.slice();l=l.concat(h)}return new o(l)}static extend(l){return{provide:o,useFactory:c=>o.create(l,c||pT()),deps:[[o,new st,new pe]]}}find(l){const c=this.factories.find(h=>h.supports(l));if(c)return c;throw new $(901,!1)}}return o.\u0275prov=ot({token:o,providedIn:"root",factory:pT}),o})();const NR=tT(null,"core",[]);let FR=(()=>{class o{constructor(l){}}return o.\u0275fac=function(l){return new(l||o)(Qn(hf))},o.\u0275mod=Yt({type:o}),o.\u0275inj=_t({}),o})();function LR(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}},3942:(pt,ke,j)=>{"use strict";j.d(ke,{Z:()=>$});var f=j(2090),de=j(4859),x=j(9681),Y=j(1877);class K{constructor(ee,W){this._delegate=ee,this.firebase=W,(0,x._addComponent)(ee,new de.wA("app-compat",()=>this,"PUBLIC")),this.container=ee.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ee){this._delegate.automaticDataCollectionEnabled=ee}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ee=>{this._delegate.checkDestroyed(),ee()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,x.deleteApp)(this._delegate)))}_getService(ee,W=x._DEFAULT_ENTRY_NAME){var Me;this._delegate.checkDestroyed();const Ge=this._delegate.container.getProvider(ee);return!Ge.isInitialized()&&"EXPLICIT"===(null===(Me=Ge.getComponent())||void 0===Me?void 0:Me.instantiationMode)&&Ge.initialize(),Ge.getImmediate({identifier:W})}_removeServiceInstance(ee,W=x._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ee).clearInstance(W)}_addComponent(ee){(0,x._addComponent)(this._delegate,ee)}_addOrOverwriteComponent(ee){(0,x._addOrOverwriteComponent)(this._delegate,ee)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const re=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function ce(){const ue=function me(ue){const ee={},W={__esModule:!0,initializeApp:function Ee(qe,Q={}){const Ce=x.initializeApp(qe,Q);if((0,f.r3)(ee,Ce.name))return ee[Ce.name];const We=new ue(Ce,W);return ee[Ce.name]=We,We},app:Ge,registerVersion:x.registerVersion,setLogLevel:x.setLogLevel,onLog:x.onLog,apps:null,SDK_VERSION:x.SDK_VERSION,INTERNAL:{registerComponent:function Ae(qe){const Q=qe.name,Ce=Q.replace("-compat","");if(x._registerComponent(qe)&&"PUBLIC"===qe.type){const We=(rt=Ge())=>{if("function"!=typeof rt[Ce])throw re.create("invalid-app-argument",{appName:Q});return rt[Ce]()};void 0!==qe.serviceProps&&(0,f.ZB)(We,qe.serviceProps),W[Ce]=We,ue.prototype[Ce]=function(...rt){return this._getService.bind(this,Q).apply(this,qe.multipleInstances?rt:[])}}return"PUBLIC"===qe.type?W[Ce]:null},removeApp:function Me(qe){delete ee[qe]},useAsService:function ze(qe,Q){return"serverAuth"===Q?null:Q},modularAPIs:x}};function Ge(qe){if(!(0,f.r3)(ee,qe=qe||x._DEFAULT_ENTRY_NAME))throw re.create("no-app",{appName:qe});return ee[qe]}return W.default=W,Object.defineProperty(W,"apps",{get:function Ie(){return Object.keys(ee).map(qe=>ee[qe])}}),Ge.App=ue,W}(K);return ue.INTERNAL=Object.assign(Object.assign({},ue.INTERNAL),{createFirebaseNamespace:ce,extendNamespace:function ee(W){(0,f.ZB)(ue,W)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),ue}(),J=new Y.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){J.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ue=self.firebase.SDK_VERSION;ue&&ue.indexOf("LITE")>=0&&J.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const $=z;!function V(ue){(0,x.registerVersion)("@firebase/app-compat","0.2.7",ue)}()},9681:(pt,ke,j)=>{"use strict";j.r(ke),j.d(ke,{FirebaseError:()=>Y.ZR,SDK_VERSION:()=>ui,_DEFAULT_ENTRY_NAME:()=>Be,_addComponent:()=>gn,_addOrOverwriteComponent:()=>ot,_apps:()=>mt,_clearComponents:()=>Dr,_components:()=>zt,_getProvider:()=>_t,_registerComponent:()=>ln,_removeServiceInstance:()=>St,deleteApp:()=>ha,getApp:()=>Ei,getApps:()=>ki,initializeApp:()=>Xi,onLog:()=>ps,registerVersion:()=>Qr,setLogLevel:()=>Tr});var f=j(5861),de=j(4859),x=j(1877),Y=j(2090),K=j(8766);class ae{constructor(Pe){this.container=Pe}getPlatformInfoString(){return this.container.getProviders().map(lt=>{if(function re(ct){return"VERSION"===ct.getComponent()?.type}(lt)){const Vt=lt.getImmediate();return`${Vt.library}/${Vt.version}`}return null}).filter(lt=>lt).join(" ")}}const me="@firebase/app",z=new x.Yd("@firebase/app"),Be="[DEFAULT]",Oe={[me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},mt=new Map,zt=new Map;function gn(ct,Pe){try{ct.container.addComponent(Pe)}catch(lt){z.debug(`Component ${Pe.name} failed to register with FirebaseApp ${ct.name}`,lt)}}function ot(ct,Pe){ct.container.addOrOverwriteComponent(Pe)}function ln(ct){const Pe=ct.name;if(zt.has(Pe))return z.debug(`There were multiple attempts to register component ${Pe}.`),!1;zt.set(Pe,ct);for(const lt of mt.values())gn(lt,ct);return!0}function _t(ct,Pe){const lt=ct.container.getProvider("heartbeat").getImmediate({optional:!0});return lt&&lt.triggerHeartbeat(),ct.container.getProvider(Pe)}function St(ct,Pe,lt=Be){_t(ct,Pe).clearInstance(lt)}function Dr(){zt.clear()}const Ln=new Y.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class qn{constructor(Pe,lt,Vt){this._isDeleted=!1,this._options=Object.assign({},Pe),this._config=Object.assign({},lt),this._name=lt.name,this._automaticDataCollectionEnabled=lt.automaticDataCollectionEnabled,this._container=Vt,this.container.addComponent(new de.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Pe){this.checkDestroyed(),this._automaticDataCollectionEnabled=Pe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Pe){this._isDeleted=Pe}checkDestroyed(){if(this.isDeleted)throw Ln.create("app-deleted",{appName:this._name})}}const ui="9.19.1";function Xi(ct,Pe={}){let lt=ct;"object"!=typeof Pe&&(Pe={name:Pe});const Vt=Object.assign({name:Be,automaticDataCollectionEnabled:!1},Pe),Gt=Vt.name;if("string"!=typeof Gt||!Gt)throw Ln.create("bad-app-name",{appName:String(Gt)});if(lt||(lt=(0,Y.aH)()),!lt)throw Ln.create("no-options");const Yt=mt.get(Gt);if(Yt){if((0,Y.vZ)(lt,Yt.options)&&(0,Y.vZ)(Vt,Yt.config))return Yt;throw Ln.create("duplicate-app",{appName:Gt})}const Xr=new de.H0(Gt);for(const X of zt.values())Xr.addComponent(X);const te=new qn(lt,Vt,Xr);return mt.set(Gt,te),te}function Ei(ct=Be){const Pe=mt.get(ct);if(!Pe&&ct===Be)return Xi();if(!Pe)throw Ln.create("no-app",{appName:ct});return Pe}function ki(){return Array.from(mt.values())}function ha(ct){return it.apply(this,arguments)}function it(){return(it=(0,f.Z)(function*(ct){const Pe=ct.name;mt.has(Pe)&&(mt.delete(Pe),yield Promise.all(ct.container.getProviders().map(lt=>lt.delete())),ct.isDeleted=!0)})).apply(this,arguments)}function Qr(ct,Pe,lt){var Vt;let Gt=null!==(Vt=Oe[ct])&&void 0!==Vt?Vt:ct;lt&&(Gt+=`-${lt}`);const Yt=Gt.match(/\s|\//),Xr=Pe.match(/\s|\//);if(Yt||Xr){const te=[`Unable to register library "${Gt}" with version "${Pe}":`];return Yt&&te.push(`library name "${Gt}" contains illegal characters (whitespace or "/")`),Yt&&Xr&&te.push("and"),Xr&&te.push(`version name "${Pe}" contains illegal characters (whitespace or "/")`),void z.warn(te.join(" "))}ln(new de.wA(`${Gt}-version`,()=>({library:Gt,version:Pe}),"VERSION"))}function ps(ct,Pe){if(null!==ct&&"function"!=typeof ct)throw Ln.create("invalid-log-argument");(0,x.Am)(ct,Pe)}function Tr(ct){(0,x.Ub)(ct)}const Kn="firebase-heartbeat-store";let sr=null;function kn(){return sr||(sr=(0,K.X3)("firebase-heartbeat-database",1,{upgrade:(ct,Pe)=>{0===Pe&&ct.createObjectStore(Kn)}}).catch(ct=>{throw Ln.create("idb-open",{originalErrorMessage:ct.message})})),sr}function bt(){return(bt=(0,f.Z)(function*(ct){try{return(yield kn()).transaction(Kn).objectStore(Kn).get(Sr(ct))}catch(Pe){if(Pe instanceof Y.ZR)z.warn(Pe.message);else{const lt=Ln.create("idb-get",{originalErrorMessage:Pe?.message});z.warn(lt.message)}}})).apply(this,arguments)}function Cn(ct,Pe){return or.apply(this,arguments)}function or(){return(or=(0,f.Z)(function*(ct,Pe){try{const Vt=(yield kn()).transaction(Kn,"readwrite");return yield Vt.objectStore(Kn).put(Pe,Sr(ct)),Vt.done}catch(lt){if(lt instanceof Y.ZR)z.warn(lt.message);else{const Vt=Ln.create("idb-set",{originalErrorMessage:lt?.message});z.warn(Vt.message)}}})).apply(this,arguments)}function Sr(ct){return`${ct.name}!${ct.options.appId}`}class As{constructor(Pe){this.container=Pe,this._heartbeatsCache=null;const lt=this.container.getProvider("app").getImmediate();this._storage=new hn(lt),this._heartbeatsCachePromise=this._storage.read().then(Vt=>(this._heartbeatsCache=Vt,Vt))}triggerHeartbeat(){var Pe=this;return(0,f.Z)(function*(){const Vt=Pe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Gt=dn();if(null===Pe._heartbeatsCache&&(Pe._heartbeatsCache=yield Pe._heartbeatsCachePromise),Pe._heartbeatsCache.lastSentHeartbeatDate!==Gt&&!Pe._heartbeatsCache.heartbeats.some(Yt=>Yt.date===Gt))return Pe._heartbeatsCache.heartbeats.push({date:Gt,agent:Vt}),Pe._heartbeatsCache.heartbeats=Pe._heartbeatsCache.heartbeats.filter(Yt=>{const Xr=new Date(Yt.date).valueOf();return Date.now()-Xr<=2592e6}),Pe._storage.overwrite(Pe._heartbeatsCache)})()}getHeartbeatsHeader(){var Pe=this;return(0,f.Z)(function*(){if(null===Pe._heartbeatsCache&&(yield Pe._heartbeatsCachePromise),null===Pe._heartbeatsCache||0===Pe._heartbeatsCache.heartbeats.length)return"";const lt=dn(),{heartbeatsToSend:Vt,unsentEntries:Gt}=function Ji(ct,Pe=1024){const lt=[];let Vt=ct.slice();for(const Gt of ct){const Yt=lt.find(Xr=>Xr.agent===Gt.agent);if(Yt){if(Yt.dates.push(Gt.date),Mr(lt)>Pe){Yt.dates.pop();break}}else if(lt.push({agent:Gt.agent,dates:[Gt.date]}),Mr(lt)>Pe){lt.pop();break}Vt=Vt.slice(1)}return{heartbeatsToSend:lt,unsentEntries:Vt}}(Pe._heartbeatsCache.heartbeats),Yt=(0,Y.L)(JSON.stringify({version:2,heartbeats:Vt}));return Pe._heartbeatsCache.lastSentHeartbeatDate=lt,Gt.length>0?(Pe._heartbeatsCache.heartbeats=Gt,yield Pe._storage.overwrite(Pe._heartbeatsCache)):(Pe._heartbeatsCache.heartbeats=[],Pe._storage.overwrite(Pe._heartbeatsCache)),Yt})()}}function dn(){return(new Date).toISOString().substring(0,10)}class hn{constructor(Pe){this.app=Pe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,Y.hl)()&&(0,Y.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Pe=this;return(0,f.Z)(function*(){return(yield Pe._canUseIndexedDBPromise)&&(yield function It(ct){return bt.apply(this,arguments)}(Pe.app))||{heartbeats:[]}})()}overwrite(Pe){var lt=this;return(0,f.Z)(function*(){var Vt;if(yield lt._canUseIndexedDBPromise){const Yt=yield lt.read();return Cn(lt.app,{lastSentHeartbeatDate:null!==(Vt=Pe.lastSentHeartbeatDate)&&void 0!==Vt?Vt:Yt.lastSentHeartbeatDate,heartbeats:Pe.heartbeats})}})()}add(Pe){var lt=this;return(0,f.Z)(function*(){var Vt;if(yield lt._canUseIndexedDBPromise){const Yt=yield lt.read();return Cn(lt.app,{lastSentHeartbeatDate:null!==(Vt=Pe.lastSentHeartbeatDate)&&void 0!==Vt?Vt:Yt.lastSentHeartbeatDate,heartbeats:[...Yt.heartbeats,...Pe.heartbeats]})}})()}}function Mr(ct){return(0,Y.L)(JSON.stringify({version:2,heartbeats:ct})).length}!function ci(ct){ln(new de.wA("platform-logger",Pe=>new ae(Pe),"PRIVATE")),ln(new de.wA("heartbeat",Pe=>new As(Pe),"PRIVATE")),Qr(me,"0.9.7",ct),Qr(me,"0.9.7","esm2017"),Qr("fire-js","")}("")},4859:(pt,ke,j)=>{"use strict";j.d(ke,{H0:()=>me,wA:()=>x,zt:()=>K});var f=j(5861),de=j(2090);class x{constructor(z,J,C){this.name=z,this.instanceFactory=J,this.type=C,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const Y="[DEFAULT]";class K{constructor(z,J){this.name=z,this.container=J,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const J=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(J)){const C=new de.BH;if(this.instancesDeferred.set(J,C),this.isInitialized(J)||this.shouldAutoInitialize())try{const O=this.getOrInitializeService({instanceIdentifier:J});O&&C.resolve(O)}catch{}}return this.instancesDeferred.get(J).promise}getImmediate(z){var J;const C=this.normalizeInstanceIdentifier(z?.identifier),O=null!==(J=z?.optional)&&void 0!==J&&J;if(!this.isInitialized(C)&&!this.shouldAutoInitialize()){if(O)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:C})}catch(V){if(O)return null;throw V}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function re(ce){return"EAGER"===ce.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:Y})}catch{}for(const[J,C]of this.instancesDeferred.entries()){const O=this.normalizeInstanceIdentifier(J);try{const V=this.getOrInitializeService({instanceIdentifier:O});C.resolve(V)}catch{}}}}clearInstance(z=Y){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,f.Z)(function*(){const J=Array.from(z.instances.values());yield Promise.all([...J.filter(C=>"INTERNAL"in C).map(C=>C.INTERNAL.delete()),...J.filter(C=>"_delete"in C).map(C=>C._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=Y){return this.instances.has(z)}getOptions(z=Y){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:J={}}=z,C=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(C))throw Error(`${this.name}(${C}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const O=this.getOrInitializeService({instanceIdentifier:C,options:J});for(const[V,$]of this.instancesDeferred.entries())C===this.normalizeInstanceIdentifier(V)&&$.resolve(O);return O}onInit(z,J){var C;const O=this.normalizeInstanceIdentifier(J),V=null!==(C=this.onInitCallbacks.get(O))&&void 0!==C?C:new Set;V.add(z),this.onInitCallbacks.set(O,V);const $=this.instances.get(O);return $&&z($,O),()=>{V.delete(z)}}invokeOnInitCallbacks(z,J){const C=this.onInitCallbacks.get(J);if(C)for(const O of C)try{O(z,J)}catch{}}getOrInitializeService({instanceIdentifier:z,options:J={}}){let C=this.instances.get(z);if(!C&&this.component&&(C=this.component.instanceFactory(this.container,{instanceIdentifier:(ce=z,ce===Y?void 0:ce),options:J}),this.instances.set(z,C),this.instancesOptions.set(z,J),this.invokeOnInitCallbacks(C,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,C)}catch{}var ce;return C||null}normalizeInstanceIdentifier(z=Y){return this.component?this.component.multipleInstances?z:Y:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class me{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const J=this.getProvider(z.name);if(J.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);J.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const J=new K(z,this);return this.providers.set(z,J),J}getProviders(){return Array.from(this.providers.values())}}},1877:(pt,ke,j)=>{"use strict";j.d(ke,{Am:()=>ce,Ub:()=>me,Yd:()=>re,in:()=>de});const f=[];var de=(()=>{return(z=de||(de={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",de;var z})();const x={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},Y=de.INFO,K={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},ae=(z,J,...C)=>{if(J<z.logLevel)return;const O=(new Date).toISOString(),V=K[J];if(!V)throw new Error(`Attempted to log a message with an invalid logType (value: ${J})`);console[V](`[${O}]  ${z.name}:`,...C)};class re{constructor(J){this.name=J,this._logLevel=Y,this._logHandler=ae,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(J){if(!(J in de))throw new TypeError(`Invalid value "${J}" assigned to \`logLevel\``);this._logLevel=J}setLogLevel(J){this._logLevel="string"==typeof J?x[J]:J}get logHandler(){return this._logHandler}set logHandler(J){if("function"!=typeof J)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=J}get userLogHandler(){return this._userLogHandler}set userLogHandler(J){this._userLogHandler=J}debug(...J){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...J),this._logHandler(this,de.DEBUG,...J)}log(...J){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...J),this._logHandler(this,de.VERBOSE,...J)}info(...J){this._userLogHandler&&this._userLogHandler(this,de.INFO,...J),this._logHandler(this,de.INFO,...J)}warn(...J){this._userLogHandler&&this._userLogHandler(this,de.WARN,...J),this._logHandler(this,de.WARN,...J)}error(...J){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...J),this._logHandler(this,de.ERROR,...J)}}function me(z){f.forEach(J=>{J.setLogLevel(z)})}function ce(z,J){for(const C of f){let O=null;J&&J.level&&(O=x[J.level]),C.userLogHandler=null===z?null:(V,$,...ue)=>{const ee=ue.map(W=>{if(null==W)return null;if("string"==typeof W)return W;if("number"==typeof W||"boolean"==typeof W)return W.toString();if(W instanceof Error)return W.message;try{return JSON.stringify(W)}catch{return null}}).filter(W=>W).join(" ");$>=(O??V.logLevel)&&z({level:de[$].toLowerCase(),message:ee,args:ue,type:V.name})}}}},259:(pt,ke,j)=>{"use strict";j.d(ke,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=j(9681);(0,f.registerVersion)("firebase","9.19.1","app")},9260:(pt,ke,j)=>{"use strict";j.d(ke,{Z:()=>f.Z});var f=j(3942);f.Z.registerVersion("firebase","9.19.1","app-compat")},9800:(pt,ke,j)=>{"use strict";j.r(ke);var f=j(5861),de=j(3942),x=j(2090),Y=j(9681),K=j(1877),ae=j(655),re=j(4859);const $=function O(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ue=function V(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ee=new x.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Me=new K.Yd("@firebase/auth");function Ge(v,...p){Me.logLevel<=K.in.ERROR&&Me.error(`Auth (${Y.SDK_VERSION}): ${v}`,...p)}function Ee(v,...p){throw qe(v,...p)}function Ie(v,...p){return qe(v,...p)}function Ae(v,p,m){const b=Object.assign(Object.assign({},ue()),{[p]:m});return new x.LL("auth","Firebase",b).create(p,{appName:v.name})}function ze(v,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&Ee(v,"argument-error"),Ae(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qe(v,...p){if("string"!=typeof v){const m=p[0],b=[...p.slice(1)];return b[0]&&(b[0].appName=v.name),v._errorFactory.create(m,...b)}return ee.create(v,...p)}function Q(v,p,...m){if(!v)throw qe(p,...m)}function Ce(v){const p="INTERNAL ASSERTION FAILED: "+v;throw Ge(p),new Error(p)}function We(v,p){v||Ce(p)}const rt=new Map;function gt(v){We(v instanceof Function,"Expected a class definition");let p=rt.get(v);return p?(We(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,rt.set(v,p),p)}function De(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function xe(){return"http:"===Fe()||"https:"===Fe()}function Fe(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class mt{constructor(p,m){this.shortDelay=p,this.longDelay=m,We(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,x.uI)()||(0,x.b$)()}get(){return function Be(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(xe()||(0,x.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function zt(v,p){We(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class gn{static initialize(p,m,b){this.fetchImpl=p,m&&(this.headersImpl=m),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ce("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ce("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ce("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ot={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ln=new mt(3e4,6e4);function _t(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function St(v,p,m,b){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,f.Z)(function*(v,p,m,b,k={}){return Nn(v,k,(0,f.Z)(function*(){let L={},se={};b&&("GET"===p?se=b:L={body:JSON.stringify(b)});const be=(0,x.xO)(Object.assign({key:v.config.apiKey},se)).slice(1),Ke=yield v._getAdditionalHeaders();return Ke["Content-Type"]="application/json",v.languageCode&&(Ke["X-Firebase-Locale"]=v.languageCode),gn.fetch()(Xi(v,v.config.apiHost,m,be),Object.assign({method:p,headers:Ke,referrerPolicy:"no-referrer"},L))}))})).apply(this,arguments)}function Nn(v,p,m){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,f.Z)(function*(v,p,m){v._canInitEmulator=!1;const b=Object.assign(Object.assign({},ot),p);try{const k=new Ei(v),L=yield Promise.race([m(),k.promise]);k.clearNetworkTimeout();const se=yield L.json();if("needConfirmation"in se)throw ki(v,"account-exists-with-different-credential",se);if(L.ok&&!("errorMessage"in se))return se;{const be=L.ok?se.errorMessage:se.error.message,[Ke,at]=be.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ke)throw ki(v,"credential-already-in-use",se);if("EMAIL_EXISTS"===Ke)throw ki(v,"email-already-in-use",se);if("USER_DISABLED"===Ke)throw ki(v,"user-disabled",se);const Ft=b[Ke]||Ke.toLowerCase().replace(/[_\s]+/g,"-");if(at)throw Ae(v,Ft,at);Ee(v,Ft)}}catch(k){if(k instanceof x.ZR)throw k;Ee(v,"network-request-failed",{message:String(k)})}})).apply(this,arguments)}function qn(v,p,m,b){return ui.apply(this,arguments)}function ui(){return(ui=(0,f.Z)(function*(v,p,m,b,k={}){const L=yield St(v,p,m,b,k);return"mfaPendingCredential"in L&&Ee(v,"multi-factor-auth-required",{_serverResponse:L}),L})).apply(this,arguments)}function Xi(v,p,m,b){const k=`${p}${m}?${b}`;return v.config.emulator?zt(v.config,k):`${v.config.apiScheme}://${k}`}class Ei{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,b)=>{this.timer=setTimeout(()=>b(Ie(this.auth,"network-request-failed")),ln.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ki(v,p,m){const b={appName:v.name};m.email&&(b.email=m.email),m.phoneNumber&&(b.phoneNumber=m.phoneNumber);const k=Ie(v,p,b);return k.customData._tokenResponse=m,k}function it(){return(it=(0,f.Z)(function*(v,p){return St(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Qr(v,p){return ps.apply(this,arguments)}function ps(){return(ps=(0,f.Z)(function*(v,p){return St(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Tr(v,p){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,f.Z)(function*(v,p){return St(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function gs(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function kn(){return(kn=(0,f.Z)(function*(v,p=!1){const m=(0,x.m9)(v),b=yield m.getIdToken(p),k=bt(b);Q(k&&k.exp&&k.auth_time&&k.iat,m.auth,"internal-error");const L="object"==typeof k.firebase?k.firebase:void 0,se=L?.sign_in_provider;return{claims:k,token:b,authTime:gs(It(k.auth_time)),issuedAtTime:gs(It(k.iat)),expirationTime:gs(It(k.exp)),signInProvider:se||null,signInSecondFactor:L?.sign_in_second_factor||null}})).apply(this,arguments)}function It(v){return 1e3*Number(v)}function bt(v){const[p,m,b]=v.split(".");if(void 0===p||void 0===m||void 0===b)return Ge("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,x.tV)(m);return k?JSON.parse(k):(Ge("Failed to decode base64 JWT payload"),null)}catch(k){return Ge("Caught error parsing JWT payload as JSON",k?.toString()),null}}function or(v,p){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,f.Z)(function*(v,p,m=!1){if(m)return p;try{return yield p}catch(b){throw b instanceof x.ZR&&Ar(b)&&v.auth.currentUser===v&&(yield v.auth.signOut()),b}})).apply(this,arguments)}function Ar({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Ht{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const k=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,k)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const b=this.getInterval(p);this.timerId=setTimeout((0,f.Z)(function*(){yield m.iteration()}),b)}iteration(){var p=this;return(0,f.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&p.schedule(!0))}p.schedule()})()}}class As{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=gs(this.lastLoginAt),this.creationTime=gs(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function dn(v){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,f.Z)(function*(v){var p;const m=v.auth,b=yield v.getIdToken(),k=yield or(v,Tr(m,{idToken:b}));Q(k?.users.length,m,"internal-error");const L=k.users[0];v._notifyReloadListener(L);const se=null!==(p=L.providerUserInfo)&&void 0!==p&&p.length?ct(L.providerUserInfo):[],be=ci(v.providerData,se),Ft=!!v.isAnonymous&&!(v.email&&L.passwordHash||be?.length),Mt={uid:L.localId,displayName:L.displayName||null,photoURL:L.photoUrl||null,email:L.email||null,emailVerified:L.emailVerified||!1,phoneNumber:L.phoneNumber||null,tenantId:L.tenantId||null,providerData:be,metadata:new As(L.createdAt,L.lastLoginAt),isAnonymous:Ft};Object.assign(v,Mt)})).apply(this,arguments)}function Mr(){return(Mr=(0,f.Z)(function*(v){const p=(0,x.m9)(v);yield dn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function ci(v,p){return[...v.filter(b=>!p.some(k=>k.providerId===b.providerId)),...p]}function ct(v){return v.map(p=>{var{providerId:m}=p,b=(0,ae._T)(p,["providerId"]);return{providerId:m,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function lt(){return(lt=(0,f.Z)(function*(v,p){const m=yield Nn(v,{},(0,f.Z)(function*(){const b=(0,x.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:k,apiKey:L}=v.config,se=Xi(v,k,"/v1/token",`key=${L}`),be=yield v._getAdditionalHeaders();return be["Content-Type"]="application/x-www-form-urlencoded",gn.fetch()(se,{method:"POST",headers:be,body:b})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Vt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){Q(p.idToken,"internal-error"),Q(typeof p.idToken<"u","internal-error"),Q(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function Cn(v){const p=bt(v);return Q(p,"internal-error"),Q(typeof p.exp<"u","internal-error"),Q(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var b=this;return(0,f.Z)(function*(){return Q(!b.accessToken||b.refreshToken,p,"user-token-expired"),m||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(p,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var b=this;return(0,f.Z)(function*(){const{accessToken:k,refreshToken:L,expiresIn:se}=yield function Pe(v,p){return lt.apply(this,arguments)}(p,m);b.updateTokensAndExpiration(k,L,Number(se))})()}updateTokensAndExpiration(p,m,b){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(p,m){const{refreshToken:b,accessToken:k,expirationTime:L}=m,se=new Vt;return b&&(Q("string"==typeof b,"internal-error",{appName:p}),se.refreshToken=b),k&&(Q("string"==typeof k,"internal-error",{appName:p}),se.accessToken=k),L&&(Q("number"==typeof L,"internal-error",{appName:p}),se.expirationTime=L),se}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Vt,this.toJSON())}_performRefresh(){return Ce("not implemented")}}function Gt(v,p){Q("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class Yt{constructor(p){var{uid:m,auth:b,stsTokenManager:k}=p,L=(0,ae._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ht(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=b,this.stsTokenManager=k,this.accessToken=k.accessToken,this.displayName=L.displayName||null,this.email=L.email||null,this.emailVerified=L.emailVerified||!1,this.phoneNumber=L.phoneNumber||null,this.photoURL=L.photoURL||null,this.isAnonymous=L.isAnonymous||!1,this.tenantId=L.tenantId||null,this.providerData=L.providerData?[...L.providerData]:[],this.metadata=new As(L.createdAt||void 0,L.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,f.Z)(function*(){const b=yield or(m,m.stsTokenManager.getToken(m.auth,p));return Q(b,m.auth,"internal-error"),m.accessToken!==b&&(m.accessToken=b,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),b})()}getIdTokenResult(p){return function sr(v){return kn.apply(this,arguments)}(this,p)}reload(){return function hn(v){return Mr.apply(this,arguments)}(this)}_assign(p){this!==p&&(Q(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const m=new Yt(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(p){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var b=this;return(0,f.Z)(function*(){let k=!1;p.idToken&&p.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(p),k=!0),m&&(yield dn(b)),yield b.auth._persistUserIfCurrent(b),k&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var p=this;return(0,f.Z)(function*(){const m=yield p.getIdToken();return yield or(p,function ha(v,p){return it.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var b,k,L,se,be,Ke,at,Ft;const Mt=null!==(b=m.displayName)&&void 0!==b?b:void 0,Pr=null!==(k=m.email)&&void 0!==k?k:void 0,ws=null!==(L=m.phoneNumber)&&void 0!==L?L:void 0,Oa=null!==(se=m.photoURL)&&void 0!==se?se:void 0,Oc=null!==(be=m.tenantId)&&void 0!==be?be:void 0,Dh=null!==(Ke=m._redirectEventId)&&void 0!==Ke?Ke:void 0,p_=null!==(at=m.createdAt)&&void 0!==at?at:void 0,Th=null!==(Ft=m.lastLoginAt)&&void 0!==Ft?Ft:void 0,{uid:os,emailVerified:gl,isAnonymous:g_,providerData:Dp,stsTokenManager:m_}=m;Q(os&&m_,p,"internal-error");const VA=Vt.fromJSON(this.name,m_);Q("string"==typeof os,p,"internal-error"),Gt(Mt,p.name),Gt(Pr,p.name),Q("boolean"==typeof gl,p,"internal-error"),Q("boolean"==typeof g_,p,"internal-error"),Gt(ws,p.name),Gt(Oa,p.name),Gt(Oc,p.name),Gt(Dh,p.name),Gt(p_,p.name),Gt(Th,p.name);const Sh=new Yt({uid:os,auth:p,email:Pr,emailVerified:gl,displayName:Mt,isAnonymous:g_,photoURL:Oa,phoneNumber:ws,tenantId:Oc,stsTokenManager:VA,createdAt:p_,lastLoginAt:Th});return Dp&&Array.isArray(Dp)&&(Sh.providerData=Dp.map(eC=>Object.assign({},eC))),Dh&&(Sh._redirectEventId=Dh),Sh}static _fromIdTokenResponse(p,m,b=!1){return(0,f.Z)(function*(){const k=new Vt;k.updateFromServerResponse(m);const L=new Yt({uid:m.localId,auth:p,stsTokenManager:k,isAnonymous:b});return yield dn(L),L})()}}const te=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(m,b){var k=this;return(0,f.Z)(function*(){k.storage[m]=b})()}_get(m){var b=this;return(0,f.Z)(function*(){const k=b.storage[m];return void 0===k?null:k})()}_remove(m){var b=this;return(0,f.Z)(function*(){delete b.storage[m]})()}_addListener(m,b){}_removeListener(m,b){}}return v.type="NONE",v})();function X(v,p,m){return`firebase:${v}:${p}:${m}`}class oe{constructor(p,m,b){this.persistence=p,this.auth=m,this.userKey=b;const{config:k,name:L}=this.auth;this.fullUserKey=X(this.userKey,k.apiKey,L),this.fullPersistenceKey=X("persistence",k.apiKey,L),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,f.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?Yt._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,f.Z)(function*(){if(m.persistence===p)return;const b=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,b?m.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,b="authUser"){return(0,f.Z)(function*(){if(!m.length)return new oe(gt(te),p,b);const k=(yield Promise.all(m.map(function(){var at=(0,f.Z)(function*(Ft){if(yield Ft._isAvailable())return Ft});return function(Ft){return at.apply(this,arguments)}}()))).filter(at=>at);let L=k[0]||gt(te);const se=X(b,p.config.apiKey,p.name);let be=null;for(const at of m)try{const Ft=yield at._get(se);if(Ft){const Mt=Yt._fromJSON(p,Ft);at!==L&&(be=Mt),L=at;break}}catch{}const Ke=k.filter(at=>at._shouldAllowMigration);return L._shouldAllowMigration&&Ke.length?(L=Ke[0],be&&(yield L._set(se,be.toJSON())),yield Promise.all(m.map(function(){var at=(0,f.Z)(function*(Ft){if(Ft!==L)try{yield Ft._remove(se)}catch{}});return function(Ft){return at.apply(this,arguments)}}())),new oe(L,p,b)):new oe(L,p,b)})()}}function ve(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(en(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(he(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(He(p))return"Blackberry";if(yt(p))return"Webos";if(Je(p))return"Safari";if((p.includes("chrome/")||Nt(p))&&!p.includes("edge/"))return"Chrome";if(fn(p))return"Android";{const b=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===b?.length)return b[1]}return"Other"}function he(v=(0,x.z$)()){return/firefox\//i.test(v)}function Je(v=(0,x.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Nt(v=(0,x.z$)()){return/crios\//i.test(v)}function en(v=(0,x.z$)()){return/iemobile/i.test(v)}function fn(v=(0,x.z$)()){return/android/i.test(v)}function He(v=(0,x.z$)()){return/blackberry/i.test(v)}function yt(v=(0,x.z$)()){return/webos/i.test(v)}function vt(v=(0,x.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Ao(v=(0,x.z$)()){return vt(v)||fn(v)||yt(v)||He(v)||/windows phone/i.test(v)||en(v)}function so(v,p=[]){let m;switch(v){case"Browser":m=ve((0,x.z$)());break;case"Worker":m=`${ve((0,x.z$)())}-${v}`;break;default:m=v}const b=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${Y.SDK_VERSION}/${b}`}class fa{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const b=L=>new Promise((se,be)=>{try{se(p(L))}catch(Ke){be(Ke)}});b.onAbort=m,this.queue.push(b);const k=this.queue.length-1;return()=>{this.queue[k]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,f.Z)(function*(){if(m.auth.currentUser===p)return;const b=[];try{for(const k of m.queue)yield k(p),k.onAbort&&b.push(k.onAbort)}catch(k){b.reverse();for(const L of b)try{L()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:k?.message})}})()}}class Kt{constructor(p,m,b){this.app=p,this.heartbeatServiceProvider=m,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mo(this),this.idTokenSubscription=new Mo(this),this.beforeStateQueue=new fa(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ee,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(p,m){var b=this;return m&&(this._popupRedirectResolver=gt(m)),this._initializationPromise=this.queue((0,f.Z)(function*(){var k,L;if(!b._deleted&&(b.persistenceManager=yield oe.create(b,p),!b._deleted)){if(null!==(k=b._popupRedirectResolver)&&void 0!==k&&k._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch{}yield b.initializeCurrentUser(m),b.lastNotifiedUid=(null===(L=b.currentUser)||void 0===L?void 0:L.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,f.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,f.Z)(function*(){var b;const k=yield m.assertedPersistence.getCurrentUser();let L=k,se=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const be=null===(b=m.redirectUser)||void 0===b?void 0:b._redirectEventId,Ke=L?._redirectEventId,at=yield m.tryRedirectSignIn(p);(!be||be===Ke)&&at?.user&&(L=at.user,se=!0)}if(!L)return m.directlySetCurrentUser(null);if(!L._redirectEventId){if(se)try{yield m.beforeStateQueue.runMiddleware(L)}catch(be){L=k,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(be))}return L?m.reloadAndSetCurrentUserOrClear(L):m.directlySetCurrentUser(null)}return Q(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===L._redirectEventId?m.directlySetCurrentUser(L):m.reloadAndSetCurrentUserOrClear(L)})()}tryRedirectSignIn(p){var m=this;return(0,f.Z)(function*(){let b=null;try{b=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,f.Z)(function*(){try{yield dn(p)}catch(b){if("auth/network-request-failed"!==b?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Oe(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,f.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,f.Z)(function*(){const b=p?(0,x.m9)(p):null;return b&&Q(b.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(b&&b._clone(m))})()}_updateCurrentUser(p,m=!1){var b=this;return(0,f.Z)(function*(){if(!b._deleted)return p&&Q(b.tenantId===p.tenantId,b,"tenant-id-mismatch"),m||(yield b.beforeStateQueue.runMiddleware(p)),b.queue((0,f.Z)(function*(){yield b.directlySetCurrentUser(p),b.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,f.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,f.Z)(function*(){yield m.assertedPersistence.setPersistence(gt(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new x.LL("auth","Firebase",p())}onAuthStateChanged(p,m,b){return this.registerStateListener(this.authStateSubscription,p,m,b)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,b){return this.registerStateListener(this.idTokenSubscription,p,m,b)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var b=this;return(0,f.Z)(function*(){const k=yield b.getOrInitRedirectPersistenceManager(m);return null===p?k.removeCurrentUser():k.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,f.Z)(function*(){if(!m.redirectPersistenceManager){const b=p&&gt(p)||m._popupRedirectResolver;Q(b,m,"argument-error"),m.redirectPersistenceManager=yield oe.create(m,[gt(b._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,f.Z)(function*(){var b,k;return m._isInitialized&&(yield m.queue((0,f.Z)(function*(){}))),(null===(b=m._currentUser)||void 0===b?void 0:b._redirectEventId)===p?m._currentUser:(null===(k=m.redirectUser)||void 0===k?void 0:k._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,f.Z)(function*(){if(p===m.currentUser)return m.queue((0,f.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,b,k){if(this._deleted)return()=>{};const L="function"==typeof m?m:m.next.bind(m),se=this._isInitialized?Promise.resolve():this._initializationPromise;return Q(se,this,"internal-error"),se.then(()=>L(this.currentUser)),"function"==typeof m?p.addObserver(m,b,k):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,f.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=so(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,f.Z)(function*(){var m;const b={"X-Client-Version":p.clientVersion};p.app.options.appId&&(b["X-Firebase-gmpid"]=p.app.options.appId);const k=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return k&&(b["X-Firebase-Client"]=k),b})()}}function Vn(v){return(0,x.m9)(v)}class Mo{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,x.ne)(m=>this.observer=m)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ms(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function oo(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class Br{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return Ce("not implemented")}_getIdTokenResponse(p){return Ce("not implemented")}_linkToIdToken(p,m){return Ce("not implemented")}_getReauthenticationResolver(p){return Ce("not implemented")}}function lr(v,p){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,f.Z)(function*(v,p){return St(v,"POST","/v1/accounts:resetPassword",_t(v,p))})).apply(this,arguments)}function wn(v,p){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,f.Z)(function*(v,p){return St(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Lu(v,p){return xo.apply(this,arguments)}function xo(){return(xo=(0,f.Z)(function*(v,p){return St(v,"POST","/v1/accounts:update",_t(v,p))})).apply(this,arguments)}function Ro(){return(Ro=(0,f.Z)(function*(v,p){return qn(v,"POST","/v1/accounts:signInWithPassword",_t(v,p))})).apply(this,arguments)}function lo(v,p){return es.apply(this,arguments)}function es(){return(es=(0,f.Z)(function*(v,p){return St(v,"POST","/v1/accounts:sendOobCode",_t(v,p))})).apply(this,arguments)}function Ur(v,p){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,f.Z)(function*(v,p){return lo(v,p)})).apply(this,arguments)}function xr(v,p){return di.apply(this,arguments)}function di(){return(di=(0,f.Z)(function*(v,p){return lo(v,p)})).apply(this,arguments)}function Pl(v,p){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,f.Z)(function*(v,p){return lo(v,p)})).apply(this,arguments)}function Bu(v,p){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,f.Z)(function*(v,p){return lo(v,p)})).apply(this,arguments)}function xd(){return(xd=(0,f.Z)(function*(v,p){return qn(v,"POST","/v1/accounts:signInWithEmailLink",_t(v,p))})).apply(this,arguments)}function Uu(){return(Uu=(0,f.Z)(function*(v,p){return qn(v,"POST","/v1/accounts:signInWithEmailLink",_t(v,p))})).apply(this,arguments)}class ju extends Br{constructor(p,m,b,k=null){super("password",b),this._email=p,this._password=m,this._tenantId=k}static _fromEmailAndPassword(p,m){return new ju(p,m,"password")}static _fromEmailAndCode(p,m,b=null){return new ju(p,m,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,f.Z)(function*(){switch(m.signInMethod){case"password":return function qa(v,p){return Ro.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Hf(v,p){return xd.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:Ee(p,"internal-error")}})()}_linkToIdToken(p,m){var b=this;return(0,f.Z)(function*(){switch(b.signInMethod){case"password":return wn(p,{idToken:m,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function Rd(v,p){return Uu.apply(this,arguments)}(p,{idToken:m,email:b._email,oobCode:b._password});default:Ee(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function gr(v,p){return kd.apply(this,arguments)}function kd(){return(kd=(0,f.Z)(function*(v,p){return qn(v,"POST","/v1/accounts:signInWithIdp",_t(v,p))})).apply(this,arguments)}class Ms extends Br{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new Ms(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):Ee("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:k}=m,L=(0,ae._T)(m,["providerId","signInMethod"]);if(!b||!k)return null;const se=new Ms(b,k);return se.idToken=L.idToken||void 0,se.accessToken=L.accessToken||void 0,se.secret=L.secret,se.nonce=L.nonce,se.pendingToken=L.pendingToken||null,se}_getIdTokenResponse(p){return gr(p,this.buildRequest())}_linkToIdToken(p,m){const b=this.buildRequest();return b.idToken=m,gr(p,b)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,gr(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,x.xO)(m)}return p}}function Rm(v,p){return Od.apply(this,arguments)}function Od(){return(Od=(0,f.Z)(function*(v,p){return St(v,"POST","/v1/accounts:sendVerificationCode",_t(v,p))})).apply(this,arguments)}function uo(){return(uo=(0,f.Z)(function*(v,p){return qn(v,"POST","/v1/accounts:signInWithPhoneNumber",_t(v,p))})).apply(this,arguments)}function Pd(){return(Pd=(0,f.Z)(function*(v,p){const m=yield qn(v,"POST","/v1/accounts:signInWithPhoneNumber",_t(v,p));if(m.temporaryProof)throw ki(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Om={USER_NOT_FOUND:"user-not-found"};function Nd(){return(Nd=(0,f.Z)(function*(v,p){return qn(v,"POST","/v1/accounts:signInWithPhoneNumber",_t(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Om)})).apply(this,arguments)}class co extends Br{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new co({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new co({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function Hu(v,p){return uo.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function km(v,p){return Pd.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Pm(v,p){return Nd.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:b,verificationCode:k}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:b,code:k}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:b,phoneNumber:k,temporaryProof:L}=p;return b||m||k||L?new co({verificationId:m,verificationCode:b,phoneNumber:k,temporaryProof:L}):null}}class Nl{constructor(p){var m,b,k,L,se,be;const Ke=(0,x.zd)((0,x.pd)(p)),at=null!==(m=Ke.apiKey)&&void 0!==m?m:null,Ft=null!==(b=Ke.oobCode)&&void 0!==b?b:null,Mt=function Fd(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(k=Ke.mode)&&void 0!==k?k:null);Q(at&&Ft&&Mt,"argument-error"),this.apiKey=at,this.operation=Mt,this.code=Ft,this.continueUrl=null!==(L=Ke.continueUrl)&&void 0!==L?L:null,this.languageCode=null!==(se=Ke.languageCode)&&void 0!==se?se:null,this.tenantId=null!==(be=Ke.tenantId)&&void 0!==be?be:null}static parseLink(p){const m=function Ld(v){const p=(0,x.zd)((0,x.pd)(v)).link,m=p?(0,x.zd)((0,x.pd)(p)).deep_link_id:null,b=(0,x.zd)((0,x.pd)(v)).deep_link_id;return(b?(0,x.zd)((0,x.pd)(b)).link:null)||b||m||p||v}(p);try{return new Nl(m)}catch{return null}}}let _s=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,b){return ju._fromEmailAndPassword(m,b)}static credentialWithLink(m,b){const k=Nl.parseLink(b);return Q(k,"argument-error"),ju._fromEmailAndCode(m,k.code,k.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class xs{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Rs extends xs{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class ko extends Rs{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return Q("providerId"in m&&"signInMethod"in m,"argument-error"),Ms._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return Q(p.idToken||p.accessToken,"argument-error"),Ms._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return ko.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return ko.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:b,oauthTokenSecret:k,pendingToken:L,nonce:se,providerId:be}=p;if(!b&&!k&&!m&&!L||!be)return null;try{return new ko(be)._credential({idToken:m,accessToken:b,nonce:se,pendingToken:L})}catch{return null}}}let Za=(()=>{class v extends Rs{constructor(){super("facebook.com")}static credential(m){return Ms._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Fl=(()=>{class v extends Rs{constructor(){super("google.com"),this.addScope("profile")}static credential(m,b){return Ms._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:b})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:b,oauthAccessToken:k}=m;if(!b&&!k)return null;try{return v.credential(b,k)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),$u=(()=>{class v extends Rs{constructor(){super("github.com")}static credential(m){return Ms._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class pa extends Br{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return gr(p,this.buildRequest())}_linkToIdToken(p,m){const b=this.buildRequest();return b.idToken=m,gr(p,b)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,gr(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:k,pendingToken:L}=m;return b&&k&&L&&b===k?new pa(b,L):null}static _create(p,m){return new pa(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Pi extends xs{constructor(p){Q(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Pi.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Pi.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=pa.fromJSON(p);return Q(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:b}=p;if(!m||!b)return null;try{return pa._create(b,m)}catch{return null}}}let Ci=(()=>{class v extends Rs{constructor(){super("twitter.com")}static credential(m,b){return Ms._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:b})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:b,oauthTokenSecret:k}=m;if(!b||!k)return null;try{return v.credential(b,k)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function ga(v,p){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,f.Z)(function*(v,p){return qn(v,"POST","/v1/accounts:signUp",_t(v,p))})).apply(this,arguments)}class jr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,b,k=!1){return(0,f.Z)(function*(){const L=yield Yt._fromIdTokenResponse(p,b,k),se=zf(b);return new jr({user:L,providerId:se,_tokenResponse:b,operationType:m})})()}static _forOperation(p,m,b){return(0,f.Z)(function*(){yield p._updateTokensIfNecessary(b,!0);const k=zf(b);return new jr({user:p,providerId:k,_tokenResponse:b,operationType:m})})()}}function zf(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Zn(){return(Zn=(0,f.Z)(function*(v){var p;const m=Vn(v);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new jr({user:m.currentUser,providerId:null,operationType:"signIn"});const b=yield ga(m,{returnSecureToken:!0}),k=yield jr._fromIdTokenResponse(m,"signIn",b,!0);return yield m._updateCurrentUser(k.user),k})).apply(this,arguments)}class Ll extends x.ZR{constructor(p,m,b,k){var L;super(m.code,m.message),this.operationType=b,this.user=k,Object.setPrototypeOf(this,Ll.prototype),this.customData={appName:p.name,tenantId:null!==(L=p.tenantId)&&void 0!==L?L:void 0,_serverResponse:m.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(p,m,b,k){return new Ll(p,m,b,k)}}function qf(v,p,m,b){return("reauthenticate"===p?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(L=>{throw"auth/multi-factor-auth-required"===L.code?Ll._fromErrorAndOperation(v,L,p,b):L})}function Ni(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function Vl(){return(Vl=(0,f.Z)(function*(v,p){const m=(0,x.m9)(v);yield er(!0,m,p);const{providerUserInfo:b}=yield Qr(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),k=Ni(b||[]);return m.providerData=m.providerData.filter(L=>k.has(L.providerId)),k.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function ma(v,p){return Os.apply(this,arguments)}function Os(){return(Os=(0,f.Z)(function*(v,p,m=!1){const b=yield or(v,p._linkToIdToken(v.auth,yield v.getIdToken()),m);return jr._forOperation(v,"link",b)})).apply(this,arguments)}function er(v,p,m){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,f.Z)(function*(v,p,m){yield dn(p);const k=!1===v?"provider-already-linked":"no-such-provider";Q(Ni(p.providerData).has(m)===v,p.auth,k)})).apply(this,arguments)}function Ya(v,p){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,f.Z)(function*(v,p,m=!1){const{auth:b}=v,k="reauthenticate";try{const L=yield or(v,qf(b,k,p,v),m);Q(L.idToken,b,"internal-error");const se=bt(L.idToken);Q(se,b,"internal-error");const{sub:be}=se;return Q(v.uid===be,b,"user-mismatch"),jr._forOperation(v,k,L)}catch(L){throw"auth/user-not-found"===L?.code&&Ee(b,"user-mismatch"),L}})).apply(this,arguments)}function ts(v,p){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,f.Z)(function*(v,p,m=!1){const b="signIn",k=yield qf(v,b,p),L=yield jr._fromIdTokenResponse(v,b,k);return m||(yield v._updateCurrentUser(L.user)),L})).apply(this,arguments)}function Gn(v,p){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,f.Z)(function*(v,p){return ts(Vn(v),p)})).apply(this,arguments)}function Xa(v,p){return Vd.apply(this,arguments)}function Vd(){return(Vd=(0,f.Z)(function*(v,p){const m=(0,x.m9)(v);return yield er(!1,m,p.providerId),ma(m,p)})).apply(this,arguments)}function zu(v,p){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,f.Z)(function*(v,p){return Ya((0,x.m9)(v),p)})).apply(this,arguments)}function Wu(v,p){return _a.apply(this,arguments)}function _a(){return(_a=(0,f.Z)(function*(v,p){return qn(v,"POST","/v1/accounts:signInWithCustomToken",_t(v,p))})).apply(this,arguments)}function jl(){return(jl=(0,f.Z)(function*(v,p){const m=Vn(v),b=yield Wu(m,{token:p,returnSecureToken:!0}),k=yield jr._fromIdTokenResponse(m,"signIn",b);return yield m._updateCurrentUser(k.user),k})).apply(this,arguments)}class Ne{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?tn._fromServerResponse(p,m):"totpInfo"in m?Hl._fromServerResponse(p,m):Ee(p,"internal-error")}}class tn extends Ne{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new tn(m)}}class Hl extends Ne{constructor(p){super("totp",p)}static _fromServerResponse(p,m){return new Hl(m)}}function Po(v,p,m){var b;Q((null===(b=m.url)||void 0===b?void 0:b.length)>0,v,"invalid-continue-uri"),Q(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(Q(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(Q(m.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function ya(){return(ya=(0,f.Z)(function*(v,p,m){const b=(0,x.m9)(v),k={requestType:"PASSWORD_RESET",email:p};m&&Po(b,k,m),yield xr(b,k)})).apply(this,arguments)}function hi(){return(hi=(0,f.Z)(function*(v,p,m){yield lr((0,x.m9)(v),{oobCode:p,newPassword:m})})).apply(this,arguments)}function va(){return(va=(0,f.Z)(function*(v,p){yield Lu((0,x.m9)(v),{oobCode:p})})).apply(this,arguments)}function Kf(v,p){return On.apply(this,arguments)}function On(){return(On=(0,f.Z)(function*(v,p){const m=(0,x.m9)(v),b=yield lr(m,{oobCode:p}),k=b.requestType;switch(Q(k,m,"internal-error"),k){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Q(b.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Q(b.mfaInfo,m,"internal-error");default:Q(b.email,m,"internal-error")}let L=null;return b.mfaInfo&&(L=Ne._fromServerResponse(Vn(m),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:L},operation:k}})).apply(this,arguments)}function Gl(){return(Gl=(0,f.Z)(function*(v,p){const{data:m}=yield Kf((0,x.m9)(v),p);return m.email})).apply(this,arguments)}function ys(){return(ys=(0,f.Z)(function*(v,p,m){const b=Vn(v),k=yield ga(b,{returnSecureToken:!0,email:p,password:m}),L=yield jr._fromIdTokenResponse(b,"signIn",k);return yield b._updateCurrentUser(L.user),L})).apply(this,arguments)}function Fi(){return(Fi=(0,f.Z)(function*(v,p,m){const b=(0,x.m9)(v),k={requestType:"EMAIL_SIGNIN",email:p};Q(m.handleCodeInApp,b,"argument-error"),m&&Po(b,k,m),yield Pl(b,k)})).apply(this,arguments)}function Bd(){return(Bd=(0,f.Z)(function*(v,p,m){const b=(0,x.m9)(v),k=_s.credentialWithLink(p,m||De());return Q(k._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Gn(b,k)})).apply(this,arguments)}function Zu(v,p){return No.apply(this,arguments)}function No(){return(No=(0,f.Z)(function*(v,p){return St(v,"POST","/v1/accounts:createAuthUri",_t(v,p))})).apply(this,arguments)}function ho(){return(ho=(0,f.Z)(function*(v,p){const b={identifier:p,continueUri:xe()?De():"http://localhost"},{signinMethods:k}=yield Zu((0,x.m9)(v),b);return k||[]})).apply(this,arguments)}function zl(){return(zl=(0,f.Z)(function*(v,p){const m=(0,x.m9)(v),k={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Po(m.auth,k,p);const{email:L}=yield Ur(m.auth,k);L!==v.email&&(yield v.reload())})).apply(this,arguments)}function fo(){return(fo=(0,f.Z)(function*(v,p,m){const b=(0,x.m9)(v),L={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};m&&Po(b.auth,L,m);const{email:se}=yield Bu(b.auth,L);se!==v.email&&(yield v.reload())})).apply(this,arguments)}function Qu(v,p){return tl.apply(this,arguments)}function tl(){return(tl=(0,f.Z)(function*(v,p){return St(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Wl(){return(Wl=(0,f.Z)(function*(v,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const b=(0,x.m9)(v),L={idToken:yield b.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},se=yield or(b,Qu(b.auth,L));b.displayName=se.displayName||null,b.photoURL=se.photoUrl||null;const be=b.providerData.find(({providerId:Ke})=>"password"===Ke);be&&(be.displayName=b.displayName,be.photoURL=b.photoURL),yield b._updateTokensIfNecessary(se)})).apply(this,arguments)}function jd(v,p,m){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,f.Z)(function*(v,p,m){const{auth:b}=v,L={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(L.email=p),m&&(L.password=m);const se=yield or(v,wn(b,L));yield v._updateTokensIfNecessary(se,!0)})).apply(this,arguments)}class In{constructor(p,m,b={}){this.isNewUser=p,this.providerId=m,this.profile=b}}class Hd extends In{constructor(p,m,b,k){super(p,m,b),this.username=k}}class $d extends In{constructor(p,m){super(p,"facebook.com",m)}}class Fm extends Hd{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Gd extends In{constructor(p,m){super(p,"google.com",m)}}class Lm extends Hd{constructor(p,m,b){super(p,"twitter.com",m,b)}}function Vm(v){const{user:p,_tokenResponse:m}=v;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Lo(v){var p,m;if(!v)return null;const{providerId:b}=v,k=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},L=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!b&&v?.idToken){const se=null===(m=null===(p=bt(v.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(se)return new In(L,"anonymous"!==se&&"custom"!==se?se:null)}if(!b)return null;switch(b){case"facebook.com":return new $d(L,k);case"github.com":return new Fm(L,k);case"google.com":return new Gd(L,k);case"twitter.com":return new Lm(L,k,v.screenName||null);case"custom":case"anonymous":return new In(L,null);default:return new In(L,b,k)}}(m)}class po{constructor(p,m,b){this.type=p,this.credential=m,this.auth=b}static _fromIdtoken(p,m){return new po("enroll",p,m)}static _fromMfaPendingCredential(p){return new po("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,b;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return po._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(b=p.multiFactorSession)&&void 0!==b&&b.idToken)return po._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Bn{constructor(p,m,b){this.session=p,this.hints=m,this.signInResolver=b}static _fromError(p,m){const b=Vn(p),k=m.customData._serverResponse,L=(k.mfaInfo||[]).map(be=>Ne._fromServerResponse(b,be));Q(k.mfaPendingCredential,b,"internal-error");const se=po._fromMfaPendingCredential(k.mfaPendingCredential);return new Bn(se,L,function(){var be=(0,f.Z)(function*(Ke){const at=yield Ke._process(b,se);delete k.mfaInfo,delete k.mfaPendingCredential;const Ft=Object.assign(Object.assign({},k),{idToken:at.idToken,refreshToken:at.refreshToken});switch(m.operationType){case"signIn":const Mt=yield jr._fromIdTokenResponse(b,m.operationType,Ft);return yield b._updateCurrentUser(Mt.user),Mt;case"reauthenticate":return Q(m.user,b,"internal-error"),jr._forOperation(m.user,m.operationType,Ft);default:Ee(b,"internal-error")}});return function(Ke){return be.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,f.Z)(function*(){return m.signInResolver(p)})()}}function Ii(v,p){return St(v,"POST","/v2/accounts/mfaEnrollment:start",_t(v,p))}class Vo{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(b=>Ne._fromServerResponse(p.auth,b)))})}static _fromUser(p){return new Vo(p)}getSession(){var p=this;return(0,f.Z)(function*(){return po._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var b=this;return(0,f.Z)(function*(){const k=p,L=yield b.getSession(),se=yield or(b.user,k._process(b.user.auth,L,m));return yield b.user._updateTokensIfNecessary(se),b.user.reload()})()}unenroll(p){var m=this;return(0,f.Z)(function*(){const b="string"==typeof p?p:p.uid,k=yield m.user.getIdToken();try{const L=yield or(m.user,function Kl(v,p){return St(v,"POST","/v2/accounts/mfaEnrollment:withdraw",_t(v,p))}(m.user.auth,{idToken:k,mfaEnrollmentId:b}));m.enrolledFactors=m.enrolledFactors.filter(({uid:se})=>se!==b),yield m.user._updateTokensIfNecessary(L),yield m.user.reload()}catch(L){throw L}})()}}const Zl=new WeakMap,nl="__sak";class rl{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(nl,"1"),this.storage.removeItem(nl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const go=(()=>{class v extends rl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,b)=>this.onStorageEvent(m,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ca(){const v=(0,x.z$)();return Je(v)||vt(v)}()&&function Fn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ao(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const b of Object.keys(this.listeners)){const k=this.storage.getItem(b),L=this.localCache[b];k!==L&&m(b,L,k)}}onStorageEvent(m,b=!1){if(!m.key)return void this.forAllChangedKeys((be,Ke,at)=>{this.notifyListeners(be,at)});const k=m.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const be=this.storage.getItem(k);if(m.newValue!==be)null!==m.newValue?this.storage.setItem(k,m.newValue):this.storage.removeItem(k);else if(this.localCache[k]===m.newValue&&!b)return}const L=()=>{const be=this.storage.getItem(k);!b&&this.localCache[k]===be||this.notifyListeners(k,be)},se=this.storage.getItem(k);!function Jn(){return(0,x.w1)()&&10===document.documentMode}()||se===m.newValue||m.newValue===m.oldValue?L():setTimeout(L,10)}notifyListeners(m,b){this.localCache[m]=b;const k=this.listeners[m];if(k)for(const L of Array.from(k))L(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,b,k)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:b,newValue:k}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,b){var k=()=>super._set,L=this;return(0,f.Z)(function*(){yield k().call(L,m,b),L.localCache[m]=JSON.stringify(b)})()}_get(m){var b=()=>super._get,k=this;return(0,f.Z)(function*(){const L=yield b().call(k,m);return k.localCache[m]=JSON.stringify(L),L})()}_remove(m){var b=()=>super._remove,k=this;return(0,f.Z)(function*(){yield b().call(k,m),delete k.localCache[m]})()}}return v.type="LOCAL",v})(),pi=(()=>{class v extends rl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,b){}_removeListener(m,b){}}return v.type="SESSION",v})();let nc=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const b=this.receivers.find(L=>L.isListeningto(m));if(b)return b;const k=new v(m);return this.receivers.push(k),k}isListeningto(m){return this.eventTarget===m}handleEvent(m){var b=this;return(0,f.Z)(function*(){const k=m,{eventId:L,eventType:se,data:be}=k.data,Ke=b.handlersMap[se];if(!Ke?.size)return;k.ports[0].postMessage({status:"ack",eventId:L,eventType:se});const at=Array.from(Ke).map(function(){var Mt=(0,f.Z)(function*(Pr){return Pr(k.origin,be)});return function(Pr){return Mt.apply(this,arguments)}}()),Ft=yield function tc(v){return Promise.all(v.map(function(){var p=(0,f.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(b){return{fulfilled:!1,reason:b}}});return function(m){return p.apply(this,arguments)}}()))}(at);k.ports[0].postMessage({status:"done",eventId:L,eventType:se,response:Ft})})()}_subscribe(m,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(b)}_unsubscribe(m,b){this.handlersMap[m]&&b&&this.handlersMap[m].delete(b),(!b||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function mr(v="",p=10){let m="";for(let b=0;b<p;b++)m+=Math.floor(10*Math.random());return v+m}class Kd{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,b=50){var k=this;return(0,f.Z)(function*(){const L=typeof MessageChannel<"u"?new MessageChannel:null;if(!L)throw new Error("connection_unavailable");let se,be;return new Promise((Ke,at)=>{const Ft=mr("",20);L.port1.start();const Mt=setTimeout(()=>{at(new Error("unsupported_event"))},b);be={messageChannel:L,onMessage(Pr){const ws=Pr;if(ws.data.eventId===Ft)switch(ws.data.status){case"ack":clearTimeout(Mt),se=setTimeout(()=>{at(new Error("timeout"))},3e3);break;case"done":clearTimeout(se),Ke(ws.data.response);break;default:clearTimeout(Mt),clearTimeout(se),at(new Error("invalid_response"))}}},k.handlers.add(be),L.port1.addEventListener("message",be.onMessage),k.target.postMessage({eventType:p,eventId:Ft,data:m},[L.port2])}).finally(()=>{be&&k.removeMessageHandler(be)})})()}}function Rn(){return window}function Uo(){return typeof Rn().WorkerGlobalScope<"u"&&"function"==typeof Rn().importScripts}function Ia(){return(Ia=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Zd="firebaseLocalStorageDb",Ho="firebaseLocalStorage",Jl="fbase_key";class Ns{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function ns(v,p){return v.transaction([Ho],p?"readwrite":"readonly").objectStore(Ho)}function Da(){const v=indexedDB.open(Zd,1);return new Promise((p,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const b=v.result;try{b.createObjectStore(Ho,{keyPath:Jl})}catch(k){m(k)}}),v.addEventListener("success",(0,f.Z)(function*(){const b=v.result;b.objectStoreNames.contains(Ho)?p(b):(b.close(),yield function tp(){const v=indexedDB.deleteDatabase(Zd);return new Ns(v).toPromise()}(),p(yield Da()))}))})}function rc(v,p,m){return rs.apply(this,arguments)}function rs(){return(rs=(0,f.Z)(function*(v,p,m){const b=ns(v,!0).put({[Jl]:p,value:m});return new Ns(b).toPromise()})).apply(this,arguments)}function ol(){return(ol=(0,f.Z)(function*(v,p){const m=ns(v,!1).get(p),b=yield new Ns(m).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function al(v,p){const m=ns(v,!0).delete(p);return new Ns(m).toPromise()}const gi=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,f.Z)(function*(){return m.db||(m.db=yield Da()),m.db})()}_withRetries(m){var b=this;return(0,f.Z)(function*(){let k=0;for(;;)try{const L=yield b._openDb();return yield m(L)}catch(L){if(k++>3)throw L;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,f.Z)(function*(){return Uo()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,f.Z)(function*(){m.receiver=nc._getInstance(function sl(){return Uo()?self:null}()),m.receiver._subscribe("keyChanged",function(){var b=(0,f.Z)(function*(k,L){return{keyProcessed:(yield m._poll()).includes(L.key)}});return function(k,L){return b.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var b=(0,f.Z)(function*(k,L){return["keyChanged"]});return function(k,L){return b.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,f.Z)(function*(){var b,k;if(m.activeServiceWorker=yield function Ql(){return Ia.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Kd(m.activeServiceWorker);const L=yield m.sender._send("ping",{},800);!L||(null===(b=L[0])||void 0===b?void 0:b.fulfilled)&&(null===(k=L[0])||void 0===k?void 0:k.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var b=this;return(0,f.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function Xl(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:m},b.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Da();return yield rc(m,nl,"1"),yield al(m,nl),!0}catch{}return!1})()}_withPendingWrite(m){var b=this;return(0,f.Z)(function*(){b.pendingWrites++;try{yield m()}finally{b.pendingWrites--}})()}_set(m,b){var k=this;return(0,f.Z)(function*(){return k._withPendingWrite((0,f.Z)(function*(){return yield k._withRetries(L=>rc(L,m,b)),k.localCache[m]=b,k.notifyServiceWorker(m)}))})()}_get(m){var b=this;return(0,f.Z)(function*(){const k=yield b._withRetries(L=>function ic(v,p){return ol.apply(this,arguments)}(L,m));return b.localCache[m]=k,k})()}_remove(m){var b=this;return(0,f.Z)(function*(){return b._withPendingWrite((0,f.Z)(function*(){return yield b._withRetries(k=>al(k,m)),delete b.localCache[m],b.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,f.Z)(function*(){const b=yield m._withRetries(se=>{const be=ns(se,!1).getAll();return new Ns(be).toPromise()});if(!b)return[];if(0!==m.pendingWrites)return[];const k=[],L=new Set;for(const{fbase_key:se,value:be}of b)L.add(se),JSON.stringify(m.localCache[se])!==JSON.stringify(be)&&(m.notifyListeners(se,be),k.push(se));for(const se of Object.keys(m.localCache))m.localCache[se]&&!L.has(se)&&(m.notifyListeners(se,null),k.push(se));return k})()}notifyListeners(m,b){this.localCache[m]=b;const k=this.listeners[m];if(k)for(const L of Array.from(k))L(b)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function ll(v,p){return St(v,"POST","/v2/accounts/mfaSignIn:start",_t(v,p))}function Li(){return(Li=(0,f.Z)(function*(v){return(yield St(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function tu(v){return new Promise((p,m)=>{const b=document.createElement("script");b.setAttribute("src",v),b.onload=p,b.onerror=k=>{const L=Ie("internal-error");L.customData=k,m(L)},b.type="text/javascript",b.charset="UTF-8",function rp(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(b)})}function Jt(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Yd=1e12;class Hm{constructor(p){this.auth=p,this.counter=Yd,this._widgets=new Map}render(p,m){const b=this.counter;return this._widgets.set(b,new KE(p,this.auth.name,m||{})),this.counter++,b}reset(p){var m;const b=p||Yd;null===(m=this._widgets.get(b))||void 0===m||m.delete(),this._widgets.delete(b)}getResponse(p){var m;return(null===(m=this._widgets.get(p||Yd))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,f.Z)(function*(){var b;return null===(b=m._widgets.get(p||Yd))||void 0===b||b.execute(),""})()}}class KE{constructor(p,m,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const k="string"==typeof p?document.getElementById(p):p;Q(k,"argument-error",{appName:m}),this.container=k,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function $m(v){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<v;b++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const uc=Jt("rcb"),$o=new mt(3e4,6e4);class ZE{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Rn().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return Q(function Rr(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Rn().grecaptcha):new Promise((b,k)=>{const L=Rn().setTimeout(()=>{k(Ie(p,"network-request-failed"))},$o.get());Rn()[uc]=()=>{Rn().clearTimeout(L),delete Rn()[uc];const be=Rn().grecaptcha;if(!be)return void k(Ie(p,"internal-error"));const Ke=be.render;be.render=(at,Ft)=>{const Mt=Ke(at,Ft);return this.counter++,Mt},this.hostLanguage=m,b(be)},tu(`https://www.google.com/recaptcha/api.js??${(0,x.xO)({onload:uc,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(L),k(Ie(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=Rn().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class cc{load(p){return(0,f.Z)(function*(){return new Hm(p)})()}clearedOneInstance(){}}const Vi="recaptcha",Gm={theme:"light",type:"image"};class zm{constructor(p,m=Object.assign({},Gm),b){this.parameters=m,this.type=Vi,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Vn(b),this.isInvisible="invisible"===this.parameters.size,Q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const k="string"==typeof p?document.getElementById(p):p;Q(k,this.auth,"argument-error"),this.container=k,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new cc:new ZE,this.validateStartingState()}verify(){var p=this;return(0,f.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),b=p.getAssertedRecaptcha();return b.getResponse(m)||new Promise(L=>{const se=be=>{!be||(p.tokenChangeListeners.delete(se),L(be))};p.tokenChangeListeners.add(se),p.isInvisible&&b.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){Q(!this.parameters.sitekey,this.auth,"argument-error"),Q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(b=>b(m)),"function"==typeof p)p(m);else if("string"==typeof p){const b=Rn()[p];"function"==typeof b&&b(m)}}}assertNotDestroyed(){Q(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,f.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const b=document.createElement("div");m.appendChild(b),m=b}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,f.Z)(function*(){Q(xe()&&!Uo(),p.auth,"internal-error"),yield function $r(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function eu(v){return Li.apply(this,arguments)}(p.auth);Q(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return Q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Di{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=co._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function ul(){return(ul=(0,f.Z)(function*(v,p,m){const b=Vn(v),k=yield sp(b,p,(0,x.m9)(m));return new Di(k,L=>Gn(b,L))})).apply(this,arguments)}function ru(){return(ru=(0,f.Z)(function*(v,p,m){const b=(0,x.m9)(v);yield er(!1,b,"phone");const k=yield sp(b.auth,p,(0,x.m9)(m));return new Di(k,L=>Xa(b,L))})).apply(this,arguments)}function Qd(){return(Qd=(0,f.Z)(function*(v,p,m){const b=(0,x.m9)(v),k=yield sp(b.auth,p,(0,x.m9)(m));return new Di(k,L=>zu(b,L))})).apply(this,arguments)}function sp(v,p,m){return op.apply(this,arguments)}function op(){return(op=(0,f.Z)(function*(v,p,m){var b;const k=yield m.verify();try{let L;if(Q("string"==typeof k,v,"argument-error"),Q(m.type===Vi,v,"argument-error"),L="string"==typeof p?{phoneNumber:p}:p,"session"in L){const se=L.session;if("phoneNumber"in L)return Q("enroll"===se.type,v,"internal-error"),(yield Ii(v,{idToken:se.credential,phoneEnrollmentInfo:{phoneNumber:L.phoneNumber,recaptchaToken:k}})).phoneSessionInfo.sessionInfo;{Q("signin"===se.type,v,"internal-error");const be=(null===(b=L.multiFactorHint)||void 0===b?void 0:b.uid)||L.multiFactorUid;return Q(be,v,"missing-multi-factor-info"),(yield ll(v,{mfaPendingCredential:se.credential,mfaEnrollmentId:be,phoneSignInInfo:{recaptchaToken:k}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:se}=yield Rm(v,{phoneNumber:L.phoneNumber,recaptchaToken:k});return se}}finally{m._reset()}})).apply(this,arguments)}function Gr(){return(Gr=(0,f.Z)(function*(v,p){yield ma((0,x.m9)(v),p)})).apply(this,arguments)}let Ta=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=Vn(m)}verifyPhoneNumber(m,b){return sp(this.auth,m,(0,x.m9)(b))}static credential(m,b){return co._fromVerification(m,b)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:b,temporaryProof:k}=m;return b&&k?co._fromTokenResponse(b,k):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function is(v,p){return p?gt(p):(Q(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class dc extends Br{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return gr(p,this._buildIdpRequest())}_linkToIdToken(p,m){return gr(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return gr(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function hc(v){return ts(v.auth,new dc(v),v.bypassAuthState)}function Xd(v){const{auth:p,user:m}=v;return Q(m,p,"internal-error"),Ya(m,new dc(v),v.bypassAuthState)}function Jd(v){return iu.apply(this,arguments)}function iu(){return(iu=(0,f.Z)(function*(v){const{auth:p,user:m}=v;return Q(m,p,"internal-error"),ma(m,new dc(v),v.bypassAuthState)})).apply(this,arguments)}class fc{constructor(p,m,b,k,L=!1){this.auth=p,this.resolver=b,this.user=k,this.bypassAuthState=L,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,f.Z)(function*(b,k){p.pendingPromise={resolve:b,reject:k};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(L){p.reject(L)}});return function(b,k){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,f.Z)(function*(){const{urlResponse:b,sessionId:k,postBody:L,tenantId:se,error:be,type:Ke}=p;if(be)return void m.reject(be);const at={auth:m.auth,requestUri:b,sessionId:k,tenantId:se||void 0,postBody:L||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Ke)(at))}catch(Ft){m.reject(Ft)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return hc;case"linkViaPopup":case"linkViaRedirect":return Jd;case"reauthViaPopup":case"reauthViaRedirect":return Xd;default:Ee(this.auth,"internal-error")}}resolve(p){We(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){We(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const pc=new mt(2e3,1e4);function un(){return(un=(0,f.Z)(function*(v,p,m){const b=Vn(v);ze(v,p,xs);const k=is(b,m);return new Go(b,"signInViaPopup",p,k).executeNotNull()})).apply(this,arguments)}function ut(){return(ut=(0,f.Z)(function*(v,p,m){const b=(0,x.m9)(v);ze(b.auth,p,xs);const k=is(b.auth,m);return new Go(b.auth,"reauthViaPopup",p,k,b).executeNotNull()})).apply(this,arguments)}function Yn(){return(Yn=(0,f.Z)(function*(v,p,m){const b=(0,x.m9)(v);ze(b.auth,p,xs);const k=is(b.auth,m);return new Go(b.auth,"linkViaPopup",p,k,b).executeNotNull()})).apply(this,arguments)}let Go=(()=>{class v extends fc{constructor(m,b,k,L,se){super(m,b,L,se),this.provider=k,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,f.Z)(function*(){const b=yield m.execute();return Q(b,m.auth,"internal-error"),b})()}onExecution(){var m=this;return(0,f.Z)(function*(){We(1===m.filter.length,"Popup operations only handle one event");const b=mr();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],b),m.authWindow.associatedEvent=b,m.resolver._originValidation(m.auth).catch(k=>{m.reject(k)}),m.resolver._isIframeWebStorageSupported(m.auth,k=>{k||m.reject(Ie(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ie(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var b,k;this.pollId=null!==(k=null===(b=this.authWindow)||void 0===b?void 0:b.window)&&void 0!==k&&k.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ie(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,pc.get())};m()}}return v.currentPopupAction=null,v})();const cr=new Map;class zo extends fc{constructor(p,m,b=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,b),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,f.Z)(function*(){let b=cr.get(m.auth._key());if(!b){try{const L=(yield function eh(v,p){return Ti.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;b=()=>Promise.resolve(L)}catch(k){b=()=>Promise.reject(k)}cr.set(m.auth._key(),b)}return m.bypassAuthState||cr.set(m.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,b=this;return(0,f.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(b,p);if("unknown"!==p.type){if(p.eventId){const k=yield b.auth._redirectUserForId(p.eventId);if(k)return b.user=k,m().call(b,p);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function Ti(){return(Ti=(0,f.Z)(function*(v,p){const m=mc(p),b=Et(v);if(!(yield b._isAvailable()))return!1;const k="true"===(yield b._get(m));return yield b._remove(m),k})).apply(this,arguments)}function mo(v,p){return gc.apply(this,arguments)}function gc(){return(gc=(0,f.Z)(function*(v,p){return Et(v)._set(mc(p),"true")})).apply(this,arguments)}function Ls(v,p){cr.set(v._key(),p)}function Et(v){return gt(v._redirectPersistence)}function mc(v){return X("pendingRedirect",v.config.apiKey,v.name)}function N(){return(N=(0,f.Z)(function*(v,p,m){const b=Vn(v);ze(v,p,xs),yield b._initializationPromise;const k=is(b,m);return yield mo(k,b),k._openRedirect(b,p,"signInViaRedirect")})).apply(this,arguments)}function pe(){return(pe=(0,f.Z)(function*(v,p,m){const b=(0,x.m9)(v);ze(b.auth,p,xs),yield b.auth._initializationPromise;const k=is(b.auth,m);yield mo(k,b.auth);const L=yield yr(b);return k._openRedirect(b.auth,p,"reauthViaRedirect",L)})).apply(this,arguments)}function ht(){return(ht=(0,f.Z)(function*(v,p,m){const b=(0,x.m9)(v);ze(b.auth,p,xs),yield b.auth._initializationPromise;const k=is(b.auth,m);yield er(!1,b,p.providerId),yield mo(k,b.auth);const L=yield yr(b);return k._openRedirect(b.auth,p,"linkViaRedirect",L)})).apply(this,arguments)}function $t(){return($t=(0,f.Z)(function*(v,p){return yield Vn(v)._initializationPromise,wt(v,p,!1)})).apply(this,arguments)}function wt(v,p){return _r.apply(this,arguments)}function _r(){return(_r=(0,f.Z)(function*(v,p,m=!1){const b=Vn(v),k=is(b,p),se=yield new zo(b,k,m).execute();return se&&!m&&(delete se.user._redirectEventId,yield b._persistUserIfCurrent(se.user),yield b._setRedirectUser(null,p)),se})).apply(this,arguments)}function yr(v){return ti.apply(this,arguments)}function ti(){return(ti=(0,f.Z)(function*(v){const p=mr(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class zr{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(p,b)&&(m=!0,this.sendToConsumer(p,b),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function cl(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Dn(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var b;if(p.error&&!Dn(p)){const k=(null===(b=p.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";m.onError(Ie(this.auth,k))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const b=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&b}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(kr(p))}saveEventToCache(p){this.cachedEventUids.add(kr(p)),this.lastProcessedEventTime=Date.now()}}function kr(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function Dn({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function lp(v){return tr.apply(this,arguments)}function tr(){return(tr=(0,f.Z)(function*(v,p={}){return St(v,"GET","/v1/projects",p)})).apply(this,arguments)}const Vs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dl=/^https?/;function dr(){return(dr=(0,f.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield lp(v);for(const m of p)try{if(_c(m))return}catch{}Ee(v,"unauthorized-domain")})).apply(this,arguments)}function _c(v){const p=De(),{protocol:m,hostname:b}=new URL(p);if(v.startsWith("chrome-extension://")){const se=new URL(v);return""===se.hostname&&""===b?"chrome-extension:"===m&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&se.hostname===b}if(!dl.test(m))return!1;if(Vs.test(v))return b===v;const k=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+k+"|"+k+")$","i").test(b)}const qm=new mt(3e4,6e4);function up(){const v=Rn().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let Bs=null;function Si(v){return Bs=Bs||function Sa(v){return new Promise((p,m)=>{var b,k,L;function se(){up(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{up(),m(Ie(v,"network-request-failed"))},timeout:qm.get()})}if(null!==(k=null===(b=Rn().gapi)||void 0===b?void 0:b.iframes)&&void 0!==k&&k.Iframe)p(gapi.iframes.getContext());else{if(null===(L=Rn().gapi)||void 0===L||!L.load){const be=Jt("iframefcb");return Rn()[be]=()=>{gapi.load?se():m(Ie(v,"network-request-failed"))},tu(`https://apis.google.com/js/api.js?onload=${be}`).catch(Ke=>m(Ke))}se()}}).catch(p=>{throw Bs=null,p})}(v),Bs}const Aa=new mt(5e3,15e3),Km={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cp(v){const p=v.config;Q(p.authDomain,v,"auth-domain-config-required");const m=p.emulator?zt(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,b={apiKey:p.apiKey,appName:v.name,v:Y.SDK_VERSION},k=Yv.get(v.config.apiHost);k&&(b.eid=k);const L=v._getFrameworks();return L.length&&(b.fw=L.join(",")),`${m}?${(0,x.xO)(b).slice(1)}`}function th(){return th=(0,f.Z)(function*(v){const p=yield Si(v),m=Rn().gapi;return Q(m,v,"internal-error"),p.open({where:document.body,url:cp(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Km,dontclear:!0},b=>new Promise(function(){var k=(0,f.Z)(function*(L,se){yield b.restyle({setHideOnLeave:!1});const be=Ie(v,"network-request-failed"),Ke=Rn().setTimeout(()=>{se(be)},Aa.get());function at(){Rn().clearTimeout(Ke),L(b)}b.ping(at).then(at,()=>{se(be)})});return function(L,se){return k.apply(this,arguments)}}()))}),th.apply(this,arguments)}const nn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class rh{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ym(v,p,m,b,k,L){Q(v.config.authDomain,v,"auth-domain-config-required"),Q(v.config.apiKey,v,"invalid-api-key");const se={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:b,v:Y.SDK_VERSION,eventId:k};if(p instanceof xs){p.setDefaultLanguage(v.languageCode),se.providerId=p.providerId||"",(0,x.xb)(p.getCustomParameters())||(se.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Ke,at]of Object.entries(L||{}))se[Ke]=at}if(p instanceof Rs){const Ke=p.getScopes().filter(at=>""!==at);Ke.length>0&&(se.scopes=Ke.join(","))}v.tenantId&&(se.tid=v.tenantId);const be=se;for(const Ke of Object.keys(be))void 0===be[Ke]&&delete be[Ke];return`${function ri({config:v}){return v.emulator?zt(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,x.xO)(be).slice(1)}`}const _o="webStorageSupport";class oh extends class Qv{constructor(p){this.factorId=p}_process(p,m,b){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,b);case"signin":return this._finalizeSignIn(p,m.credential);default:return Ce("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new oh(p)}_finalizeEnroll(p,m,b){return function Jf(v,p){return St(v,"POST","/v2/accounts/mfaEnrollment:finalize",_t(v,p))}(p,{idToken:m,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function mi(v,p){return St(v,"POST","/v2/accounts/mfaSignIn:finalize",_t(v,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Qm=(()=>{class v{constructor(){}static assertion(m){return oh._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var yc="@firebase/auth";class qo{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,f.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(b=>{p(b?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ma(){return window}function uh(){return(uh=(0,f.Z)(function*(v,p,m){var b;const{BuildInfo:k}=Ma();We(p.sessionId,"AuthEvent did not contain a session ID");const L=yield Ec(p.sessionId),se={};return vt()?se.ibi=k.packageName:fn()?se.apn=k.packageName:Ee(v,"operation-not-supported-in-this-environment"),k.displayName&&(se.appDisplayName=k.displayName),se.sessionId=L,Ym(v,m,p.type,void 0,null!==(b=p.eventId)&&void 0!==b?b:void 0,se)})).apply(this,arguments)}function vc(){return(vc=(0,f.Z)(function*(v){const{BuildInfo:p}=Ma(),m={};vt()?m.iosBundleId=p.packageName:fn()?m.androidPackageName=p.packageName:Ee(v,"operation-not-supported-in-this-environment"),yield lp(v,m)})).apply(this,arguments)}function bc(){return(bc=(0,f.Z)(function*(v,p,m){const{cordova:b}=Ma();let k=()=>{};try{yield new Promise((L,se)=>{let be=null;function Ke(){var Mt;L();const Pr=null===(Mt=b.plugins.browsertab)||void 0===Mt?void 0:Mt.close;"function"==typeof Pr&&Pr(),"function"==typeof m?.close&&m.close()}function at(){be||(be=window.setTimeout(()=>{se(Ie(v,"redirect-cancelled-by-user"))},2e3))}function Ft(){"visible"===document?.visibilityState&&at()}p.addPassiveListener(Ke),document.addEventListener("resume",at,!1),fn()&&document.addEventListener("visibilitychange",Ft,!1),k=()=>{p.removePassiveListener(Ke),document.removeEventListener("resume",at,!1),document.removeEventListener("visibilitychange",Ft,!1),be&&window.clearTimeout(be)}})}finally{k()}})).apply(this,arguments)}function Ec(v){return pp.apply(this,arguments)}function pp(){return(pp=(0,f.Z)(function*(v){const p=Jv(v),m=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(m)).map(k=>k.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Jv(v){if(We(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const p=new ArrayBuffer(v.length),m=new Uint8Array(p);for(let b=0;b<v.length;b++)m[b]=v.charCodeAt(b);return m}(0,x.Pz)("authIdTokenMaxAge"),function Ko(v){(0,Y._registerComponent)(new re.wA("auth",(p,{options:m})=>{const b=p.getProvider("app").getImmediate(),k=p.getProvider("heartbeat"),{apiKey:L,authDomain:se}=b.options;return((be,Ke)=>{Q(L&&!L.includes(":"),"invalid-api-key",{appName:be.name}),Q(!se?.includes(":"),"argument-error",{appName:be.name});const at={apiKey:L,authDomain:se,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:so(v)},Ft=new Kt(be,Ke,at);return function _e(v,p){const m=p?.persistence||[],b=(Array.isArray(m)?m:[m]).map(gt);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(b,p?.popupRedirectResolver)}(Ft,m),Ft})(b,k)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,b)=>{p.getProvider("auth-internal").initialize()})),(0,Y._registerComponent)(new re.wA("auth-internal",p=>{const m=Vn(p.getProvider("auth").getImmediate());return new qo(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Y.registerVersion)(yc,"0.22.0",function Rt(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,Y.registerVersion)(yc,"0.22.0","esm2017")}("Browser");class gp extends zr{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(p)),super.onEvent(p)}initialized(){var p=this;return(0,f.Z)(function*(){yield p.initPromise})()}}function fl(v){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,f.Z)(function*(v){const p=yield Ic()._get(Zo(v));return p&&(yield Ic()._remove(Zo(v))),p})).apply(this,arguments)}function fh(){const v=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const b=Math.floor(Math.random()*p.length);v.push(p.charAt(b))}return v.join("")}function Ic(){return gt(go)}function Zo(v){return X("authEvent",v.config.apiKey,v.name)}function ph(v){if(!v?.includes("?"))return{};const[p,...m]=v.split("?");return(0,x.zd)(m.join("?"))}function xa(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ie("no-auth-event")}}function Hs(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function Ra(v=(0,x.z$)()){return!("file:"!==Hs()&&"ionic:"!==Hs()&&"capacitor:"!==Hs()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function Dc(){try{const v=self.localStorage,p=mr();if(v)return v.setItem(p,"1"),v.removeItem(p),!function mh(v=(0,x.z$)()){return function a_(){return(0,x.w1)()&&11===document?.documentMode}()||function yp(v=(0,x.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,x.hl)()}catch{return Tc()&&(0,x.hl)()}return!1}function Tc(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function _h(){return(function o_(){return"http:"===Hs()||"https:"===Hs()}()||(0,x.ru)()||Ra())&&!function _p(){return(0,x.b$)()||(0,x.UG)()}()&&Dc()&&!Tc()}function yh(){return Ra()&&typeof document<"u"}function ss(){return(ss=(0,f.Z)(function*(){return!!yh()&&new Promise(v=>{const p=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),v(!0)})})})).apply(this,arguments)}const nr={LOCAL:"local",NONE:"none",SESSION:"session"},$s=Q,wh="persistence";function Sc(v){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,f.Z)(function*(v){yield v._initializationPromise;const p=l_(),m=X(wh,v.config.apiKey,v.name);p&&p.setItem(m,v._getPersistence())})).apply(this,arguments)}function l_(){var v;try{return(null===(v=function vh(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const u_=Q;class ka{constructor(){this.browserResolver=gt(class ih{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pi,this._completeRedirectFn=wt,this._overrideRedirectResult=Ls}_openPopup(p,m,b,k){var L=this;return(0,f.Z)(function*(){var se;We(null===(se=L.eventManagers[p._key()])||void 0===se?void 0:se.manager,"_initialize() not called before _openPopup()");const be=Ym(p,m,b,De(),k);return function Us(v,p,m,b=500,k=600){const L=Math.max((window.screen.availHeight-k)/2,0).toString(),se=Math.max((window.screen.availWidth-b)/2,0).toString();let be="";const Ke=Object.assign(Object.assign({},nn),{width:b.toString(),height:k.toString(),top:L,left:se}),at=(0,x.z$)().toLowerCase();m&&(be=Nt(at)?"_blank":m),he(at)&&(p=p||"http://localhost",Ke.scrollbars="yes");const Ft=Object.entries(Ke).reduce((Pr,[ws,Oa])=>`${Pr}${ws}=${Oa},`,"");if(function Vr(v=(0,x.z$)()){var p;return vt(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(at)&&"_self"!==be)return function dp(v,p){const m=document.createElement("a");m.href=v,m.target=p;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(b)}(p||"",be),new rh(null);const Mt=window.open(p||"",be,Ft);Q(Mt,v,"popup-blocked");try{Mt.focus()}catch{}return new rh(Mt)}(p,be,mr())})()}_openRedirect(p,m,b,k){var L=this;return(0,f.Z)(function*(){return yield L._originValidation(p),function Yl(v){Rn().location.href=v}(Ym(p,m,b,De(),k)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:k,promise:L}=this.eventManagers[m];return k?Promise.resolve(k):(We(L,"If manager is not set, promise should be"),L)}const b=this.initAndGetManager(p);return this.eventManagers[m]={promise:b},b.catch(()=>{delete this.eventManagers[m]}),b}initAndGetManager(p){var m=this;return(0,f.Z)(function*(){const b=yield function YE(v){return th.apply(this,arguments)}(p),k=new zr(p);return b.register("authEvent",L=>(Q(L?.authEvent,p,"invalid-auth-event"),{status:k.onEvent(L.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:k},m.iframes[p._key()]=b,k})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(_o,{type:_o},k=>{var L;const se=null===(L=k?.[0])||void 0===L?void 0:L[_o];void 0!==se&&m(!!se),Ee(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function ni(v){return dr.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return Ao()||Je()||vt()}}),this.cordovaResolver=gt(class tw{constructor(){this._redirectPersistence=pi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=wt,this._overrideRedirectResult=Ls}_initialize(p){var m=this;return(0,f.Z)(function*(){const b=p._key();let k=m.eventManagers.get(b);return k||(k=new gp(p),m.eventManagers.set(b,k),m.attachCallbackListeners(p,k)),k})()}_openPopup(p){Ee(p,"operation-not-supported-in-this-environment")}_openRedirect(p,m,b,k){var L=this;return(0,f.Z)(function*(){!function n_(v){var p,m,b,k,L,se,be,Ke,at,Ft;const Mt=Ma();Q("function"==typeof(null===(p=Mt?.universalLinks)||void 0===p?void 0:p.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Q(typeof(null===(m=Mt?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Q("function"==typeof(null===(L=null===(k=null===(b=Mt?.cordova)||void 0===b?void 0:b.plugins)||void 0===k?void 0:k.browsertab)||void 0===L?void 0:L.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Q("function"==typeof(null===(Ke=null===(be=null===(se=Mt?.cordova)||void 0===se?void 0:se.plugins)||void 0===be?void 0:be.browsertab)||void 0===Ke?void 0:Ke.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Q("function"==typeof(null===(Ft=null===(at=Mt?.cordova)||void 0===at?void 0:at.InAppBrowser)||void 0===Ft?void 0:Ft.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const se=yield L._initialize(p);yield se.initialized(),se.resetRedirect(),function Qn(){cr.clear()}(),yield L._originValidation(p);const be=function r_(v,p,m=null){return{type:p,eventId:m,urlResponse:null,sessionId:fh(),postBody:null,tenantId:v.tenantId,error:Ie(v,"no-auth-event")}}(p,b,k);yield function XE(v,p){return Ic()._set(Zo(v),p)}(p,be);const Ke=yield function lu(v,p,m){return uh.apply(this,arguments)}(p,be,m),at=yield function wc(v){const{cordova:p}=Ma();return new Promise(m=>{p.plugins.browsertab.isAvailable(b=>{let k=null;b?p.plugins.browsertab.openUrl(v):k=p.InAppBrowser.open(v,function $n(v=(0,x.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),m(k)})})}(Ke);return function dh(v,p,m){return bc.apply(this,arguments)}(p,se,at)})()}_isIframeWebStorageSupported(p,m){throw new Error("Method not implemented.")}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function ch(v){return vc.apply(this,arguments)}(p)),this.originValidationPromises[m]}attachCallbackListeners(p,m){const{universalLinks:b,handleOpenURL:k,BuildInfo:L}=Ma(),se=setTimeout((0,f.Z)(function*(){yield fl(p),m.onEvent(xa())}),500),be=function(){var Ft=(0,f.Z)(function*(Mt){clearTimeout(se);const Pr=yield fl(p);let ws=null;Pr&&Mt?.url&&(ws=function hh(v,p){var m,b;const k=function JE(v){const p=ph(v),m=p.link?decodeURIComponent(p.link):void 0,b=ph(m).link,k=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return ph(k).link||k||b||m||v}(p);if(k.includes("/__/auth/callback")){const L=ph(k),se=L.firebaseError?function mp(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(L.firebaseError)):null,be=null===(b=null===(m=se?.code)||void 0===m?void 0:m.split("auth/"))||void 0===b?void 0:b[1],Ke=be?Ie(be):null;return Ke?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Ke,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:k,postBody:null}}return null}(Pr,Mt.url)),m.onEvent(ws||xa())});return function(Pr){return Ft.apply(this,arguments)}}();typeof b<"u"&&"function"==typeof b.subscribe&&b.subscribe(null,be);const Ke=k,at=`${L.packageName.toLowerCase()}://`;Ma().handleOpenURL=function(){var Ft=(0,f.Z)(function*(Mt){if(Mt.toLowerCase().startsWith(at)&&be({url:Mt}),"function"==typeof Ke)try{Ke(Mt)}catch(Pr){console.error(Pr)}});return function(Mt){return Ft.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=pi,this._completeRedirectFn=wt,this._overrideRedirectResult=Ls}_initialize(p){var m=this;return(0,f.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,m,b,k){var L=this;return(0,f.Z)(function*(){return yield L.selectUnderlyingResolver(),L.assertedUnderlyingResolver._openPopup(p,m,b,k)})()}_openRedirect(p,m,b,k){var L=this;return(0,f.Z)(function*(){return yield L.selectUnderlyingResolver(),L.assertedUnderlyingResolver._openRedirect(p,m,b,k)})()}_isIframeWebStorageSupported(p,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,m)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return yh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return u_(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,f.Z)(function*(){if(p.underlyingResolver)return;const m=yield function vp(){return ss.apply(this,arguments)}();p.underlyingResolver=m?p.cordovaResolver:p.browserResolver})()}}function c_(v){return v.unwrap()}function bp(v){return xc(v)}function xc(v){const{_tokenResponse:p}=v instanceof x.ZR?v.customData:v;if(!p)return null;if(!(v instanceof x.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return Ta.credentialFromResult(v);const m=p.providerId;if(!m||"password"===m)return null;let b;switch(m){case"google.com":b=Fl;break;case"facebook.com":b=Za;break;case"github.com":b=$u;break;case"twitter.com":b=Ci;break;default:const{oauthIdToken:k,oauthAccessToken:L,oauthTokenSecret:se,pendingToken:be,nonce:Ke}=p;return L||se||k||be?be?m.startsWith("saml.")?pa._create(m,be):Ms._fromParams({providerId:m,signInMethod:m,pendingToken:be,idToken:k,accessToken:L}):new ko(m).credential({idToken:k,accessToken:L,rawNonce:Ke}):null}return v instanceof x.ZR?b.credentialFromError(v):b.credentialFromResult(v)}function vr(v,p){return p.catch(m=>{throw m instanceof x.ZR&&function bh(v,p){var m;const b=null===(m=p.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===p?.code)p.resolver=new h_(v,function Wd(v,p){var m;const b=(0,x.m9)(v),k=p;return Q(p.customData.operationType,b,"argument-error"),Q(null===(m=k.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,b,"argument-error"),Bn._fromError(b,k)}(v,p));else if(b){const k=xc(p),L=p;k&&(L.credential=k,L.tenantId=b.tenantId||void 0,L.email=b.email||void 0,L.phoneNumber=b.phoneNumber||void 0)}}(v,m),m}).then(m=>{const k=m.user;return{operationType:m.operationType,credential:bp(m),additionalUserInfo:Vm(m),user:ii.getOrCreate(k)}})}function Eh(v,p){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,f.Z)(function*(v,p){const m=yield p;return{verificationId:m.verificationId,confirm:b=>vr(v,m.confirm(b))}})).apply(this,arguments)}class h_{constructor(p,m){this.resolver=m,this.auth=function d_(v){return v.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return vr(c_(this.auth),this.resolver.resolveSignIn(p))}}class ii{constructor(p){this._delegate=p,this.multiFactor=function Bo(v){const p=(0,x.m9)(v);return Zl.has(p)||Zl.set(p,Vo._fromUser(p)),Zl.get(p)}(p)}static getOrCreate(p){return ii.USER_MAP.has(p)||ii.USER_MAP.set(p,new ii(p)),ii.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var m=this;return(0,f.Z)(function*(){return vr(m.auth,Xa(m._delegate,p))})()}linkWithPhoneNumber(p,m){var b=this;return(0,f.Z)(function*(){return Eh(b.auth,function nu(v,p,m){return ru.apply(this,arguments)}(b._delegate,p,m))})()}linkWithPopup(p){var m=this;return(0,f.Z)(function*(){return vr(m.auth,function cn(v,p,m){return Yn.apply(this,arguments)}(m._delegate,p,ka))})()}linkWithRedirect(p){var m=this;return(0,f.Z)(function*(){return yield Sc(Vn(m.auth)),function Ve(v,p,m){return function st(v,p,m){return ht.apply(this,arguments)}(v,p,m)}(m._delegate,p,ka)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var m=this;return(0,f.Z)(function*(){return vr(m.auth,zu(m._delegate,p))})()}reauthenticateWithPhoneNumber(p,m){return Eh(this.auth,function Wm(v,p,m){return Qd.apply(this,arguments)}(this._delegate,p,m))}reauthenticateWithPopup(p){return vr(this.auth,function Fs(v,p,m){return ut.apply(this,arguments)}(this._delegate,p,ka))}reauthenticateWithRedirect(p){var m=this;return(0,f.Z)(function*(){return yield Sc(Vn(m.auth)),function G(v,p,m){return function le(v,p,m){return pe.apply(this,arguments)}(v,p,m)}(m._delegate,p,ka)})()}sendEmailVerification(p){return function Fo(v,p){return zl.apply(this,arguments)}(this._delegate,p)}unlink(p){var m=this;return(0,f.Z)(function*(){return yield function ei(v,p){return Vl.apply(this,arguments)}(m._delegate,p),m})()}updateEmail(p){return function wa(v,p){return jd((0,x.m9)(v),p,null)}(this._delegate,p)}updatePassword(p){return function Qf(v,p){return jd((0,x.m9)(v),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function ap(v,p){return Gr.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function Yf(v,p){return Wl.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,m){return function Ud(v,p,m){return fo.apply(this,arguments)}(this._delegate,p,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ii.USER_MAP=new WeakMap;const vs=Q;let Ep=(()=>{class v{constructor(m,b){if(this.app=m,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:k}=m.options;vs(k,"invalid-api-key",{appName:m.name}),vs(k,"invalid-api-key",{appName:m.name});const L=typeof window<"u"?ka:void 0;this._delegate=b.initialize({options:{persistence:Ih(k,m.name),popupRedirectResolver:L}}),this._delegate._updateErrorMap($),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ii.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,b){!function kl(v,p,m){const b=Vn(v);Q(b._canInitEmulator,b,"emulator-config-failed"),Q(/^https?:\/\//.test(p),b,"invalid-emulator-scheme");const k=!!m?.disableWarnings,L=ms(p),{host:se,port:be}=function ar(v){const p=ms(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!m)return{host:"",port:null};const b=m[2].split("@").pop()||"",k=/^(\[[^\]]+\])(:|$)/.exec(b);if(k){const L=k[1];return{host:L,port:oo(b.substr(L.length+1))}}{const[L,se]=b.split(":");return{host:L,port:oo(se)}}}(p);b.config.emulator={url:`${L}//${se}${null===be?"":`:${be}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:se,port:be,protocol:L.replace(":",""),options:Object.freeze({disableWarnings:k})}),k||function ao(){function v(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,m,b)}applyActionCode(m){return function $l(v,p){return va.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Kf(this._delegate,m)}confirmPasswordReset(m,b){return function Ja(v,p,m){return hi.apply(this,arguments)}(this._delegate,m,b)}createUserWithEmailAndPassword(m,b){var k=this;return(0,f.Z)(function*(){return vr(k._delegate,function fi(v,p,m){return ys.apply(this,arguments)}(k._delegate,m,b))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Yu(v,p){return ho.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Nm(v,p){return"EMAIL_SIGNIN"===Nl.parseLink(p)?.operation}(0,m)}getRedirectResult(){var m=this;return(0,f.Z)(function*(){vs(_h(),m._delegate,"operation-not-supported-in-this-environment");const b=yield function At(v,p){return $t.apply(this,arguments)}(m._delegate,ka);return b?vr(m._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function pl(v,p){Vn(v)._logFramework(p)}(this._delegate,m)}onAuthStateChanged(m,b,k){const{next:L,error:se,complete:be}=Ch(m,b,k);return this._delegate.onAuthStateChanged(L,se,be)}onIdTokenChanged(m,b,k){const{next:L,error:se,complete:be}=Ch(m,b,k);return this._delegate.onIdTokenChanged(L,se,be)}sendSignInLinkToEmail(m,b){return function el(v,p,m){return Fi.apply(this,arguments)}(this._delegate,m,b)}sendPasswordResetEmail(m,b){return function ur(v,p,m){return ya.apply(this,arguments)}(this._delegate,m,b||void 0)}setPersistence(m){var b=this;return(0,f.Z)(function*(){let k;switch(function wp(v,p){$s(Object.values(nr).includes(p),v,"invalid-persistence-type"),(0,x.b$)()?$s(p!==nr.SESSION,v,"unsupported-persistence-type"):(0,x.UG)()?$s(p===nr.NONE,v,"unsupported-persistence-type"):Tc()?$s(p===nr.NONE||p===nr.LOCAL&&(0,x.hl)(),v,"unsupported-persistence-type"):$s(p===nr.NONE||Dc(),v,"unsupported-persistence-type")}(b._delegate,m),m){case nr.SESSION:k=pi;break;case nr.LOCAL:k=(yield gt(gi)._isAvailable())?gi:go;break;case nr.NONE:k=te;break;default:return Ee("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(k)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return vr(this._delegate,function Wf(v){return Zn.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return vr(this._delegate,Gn(this._delegate,m))}signInWithCustomToken(m){return vr(this._delegate,function qu(v,p){return jl.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,b){return vr(this._delegate,function Zf(v,p,m){return Gn((0,x.m9)(v),_s.credential(p,m))}(this._delegate,m,b))}signInWithEmailLink(m,b){return vr(this._delegate,function Ku(v,p,m){return Bd.apply(this,arguments)}(this._delegate,m,b))}signInWithPhoneNumber(m,b){return Eh(this._delegate,function ip(v,p,m){return ul.apply(this,arguments)}(this._delegate,m,b))}signInWithPopup(m){var b=this;return(0,f.Z)(function*(){return vs(_h(),b._delegate,"operation-not-supported-in-this-environment"),vr(b._delegate,function Kv(v,p,m){return un.apply(this,arguments)}(b._delegate,m,ka))})()}signInWithRedirect(m){var b=this;return(0,f.Z)(function*(){return vs(_h(),b._delegate,"operation-not-supported-in-this-environment"),yield Sc(b._delegate),function S(v,p,m){return function M(v,p,m){return N.apply(this,arguments)}(v,p,m)}(b._delegate,m,ka)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function zv(v,p){return Gl.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=nr,v})();function Ch(v,p,m){let b=v;"function"!=typeof v&&({next:b,error:p,complete:m}=v);const k=b;return{next:se=>k(se&&ii.getOrCreate(se)),error:p,complete:m}}function Ih(v,p){const m=function Mc(v,p){const m=l_();if(!m)return[];const b=X(wh,v,p);switch(m.getItem(b)){case nr.NONE:return[te];case nr.LOCAL:return[gi,pi];case nr.SESSION:return[pi];default:return[]}}(v,p);if(typeof self<"u"&&!m.includes(gi)&&m.push(gi),typeof window<"u")for(const b of[go,pi])m.includes(b)||m.push(b);return m.includes(te)||m.push(te),m}class Gs{constructor(){this.providerId="phone",this._delegate=new Ta(c_(de.Z.auth()))}static credential(p,m){return Ta.credential(p,m)}verifyPhoneNumber(p,m){return this._delegate.verifyPhoneNumber(p,m)}unwrap(){return this._delegate}}Gs.PHONE_SIGN_IN_METHOD=Ta.PHONE_SIGN_IN_METHOD,Gs.PROVIDER_ID=Ta.PROVIDER_ID;const Cp=Q;class f_{constructor(p,m,b=de.Z.app()){var k;Cp(null===(k=b.options)||void 0===k?void 0:k.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new zm(p,m,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ip(v){v.INTERNAL.registerComponent(new re.wA("auth-compat",p=>{const m=p.getProvider("app-compat").getImmediate(),b=p.getProvider("auth");return new Ep(m,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:_s,FacebookAuthProvider:Za,GithubAuthProvider:$u,GoogleAuthProvider:Fl,OAuthProvider:ko,SAMLAuthProvider:Pi,PhoneAuthProvider:Gs,PhoneMultiFactorGenerator:Qm,RecaptchaVerifier:f_,TwitterAuthProvider:Ci,Auth:Ep,AuthCredential:Br,Error:x.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.3.7")}(de.Z)},8766:(pt,ke,j)=>{"use strict";j.d(ke,{Lj:()=>Ee,X3:()=>Ge});var f=j(5861);let x,Y;const re=new WeakMap,me=new WeakMap,ce=new WeakMap,z=new WeakMap,J=new WeakMap;let V={get(Q,Ce,We){if(Q instanceof IDBTransaction){if("done"===Ce)return me.get(Q);if("objectStoreNames"===Ce)return Q.objectStoreNames||ce.get(Q);if("store"===Ce)return We.objectStoreNames[1]?void 0:We.objectStore(We.objectStoreNames[0])}return W(Q[Ce])},set:(Q,Ce,We)=>(Q[Ce]=We,!0),has:(Q,Ce)=>Q instanceof IDBTransaction&&("done"===Ce||"store"===Ce)||Ce in Q};function ee(Q){return"function"==typeof Q?function ue(Q){return Q!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ae(){return Y||(Y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Q)?function(...Ce){return Q.apply(Me(this),Ce),W(re.get(this))}:function(...Ce){return W(Q.apply(Me(this),Ce))}:function(Ce,...We){const rt=Q.call(Me(this),Ce,...We);return ce.set(rt,Ce.sort?Ce.sort():[Ce]),W(rt)}}(Q):(Q instanceof IDBTransaction&&function O(Q){if(me.has(Q))return;const Ce=new Promise((We,rt)=>{const gt=()=>{Q.removeEventListener("complete",Xe),Q.removeEventListener("error",_e),Q.removeEventListener("abort",_e)},Xe=()=>{We(),gt()},_e=()=>{rt(Q.error||new DOMException("AbortError","AbortError")),gt()};Q.addEventListener("complete",Xe),Q.addEventListener("error",_e),Q.addEventListener("abort",_e)});me.set(Q,Ce)}(Q),((Q,Ce)=>Ce.some(We=>Q instanceof We))(Q,function K(){return x||(x=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Q,V):Q)}function W(Q){if(Q instanceof IDBRequest)return function C(Q){const Ce=new Promise((We,rt)=>{const gt=()=>{Q.removeEventListener("success",Xe),Q.removeEventListener("error",_e)},Xe=()=>{We(W(Q.result)),gt()},_e=()=>{rt(Q.error),gt()};Q.addEventListener("success",Xe),Q.addEventListener("error",_e)});return Ce.then(We=>{We instanceof IDBCursor&&re.set(We,Q)}).catch(()=>{}),J.set(Ce,Q),Ce}(Q);if(z.has(Q))return z.get(Q);const Ce=ee(Q);return Ce!==Q&&(z.set(Q,Ce),J.set(Ce,Q)),Ce}const Me=Q=>J.get(Q);function Ge(Q,Ce,{blocked:We,upgrade:rt,blocking:gt,terminated:Xe}={}){const _e=indexedDB.open(Q,Ce),De=W(_e);return rt&&_e.addEventListener("upgradeneeded",xe=>{rt(W(_e.result),xe.oldVersion,xe.newVersion,W(_e.transaction))}),We&&_e.addEventListener("blocked",()=>We()),De.then(xe=>{Xe&&xe.addEventListener("close",()=>Xe()),gt&&xe.addEventListener("versionchange",()=>gt())}).catch(()=>{}),De}function Ee(Q,{blocked:Ce}={}){const We=indexedDB.deleteDatabase(Q);return Ce&&We.addEventListener("blocked",()=>Ce()),W(We).then(()=>{})}const Ie=["get","getKey","getAll","getAllKeys","count"],Ae=["put","add","delete","clear"],ze=new Map;function qe(Q,Ce){if(!(Q instanceof IDBDatabase)||Ce in Q||"string"!=typeof Ce)return;if(ze.get(Ce))return ze.get(Ce);const We=Ce.replace(/FromIndex$/,""),rt=Ce!==We,gt=Ae.includes(We);if(!(We in(rt?IDBIndex:IDBObjectStore).prototype)||!gt&&!Ie.includes(We))return;const Xe=function(){var _e=(0,f.Z)(function*(De,...xe){const Fe=this.transaction(De,gt?"readwrite":"readonly");let Be=Fe.store;return rt&&(Be=Be.index(xe.shift())),(yield Promise.all([Be[We](...xe),gt&&Fe.done]))[0]});return function(xe){return _e.apply(this,arguments)}}();return ze.set(Ce,Xe),Xe}!function $(Q){V=Q(V)}(Q=>({...Q,get:(Ce,We,rt)=>qe(Ce,We)||Q.get(Ce,We,rt),has:(Ce,We)=>!!qe(Ce,We)||Q.has(Ce,We)}))},5861:(pt,ke,j)=>{"use strict";function f(x,Y,K,ae,re,me,ce){try{var z=x[me](ce),J=z.value}catch(C){return void K(C)}z.done?Y(J):Promise.resolve(J).then(ae,re)}function de(x){return function(){var Y=this,K=arguments;return new Promise(function(ae,re){var me=x.apply(Y,K);function ce(J){f(me,ae,re,ce,z,"next",J)}function z(J){f(me,ae,re,ce,z,"throw",J)}ce(void 0)})}}j.d(ke,{Z:()=>de})}},pt=>{pt(pt.s=2095)}]);